# Rust é¡¹ç›®ç»“æ„

Rust é¡¹ç›®ç»“æ„æ²¡æœ‰ä¸¥æ ¼çš„è§„èŒƒï¼Œä½†éµå¾ªäº†ä¸€äº›å¸¸è§çš„æ¨¡å¼ï¼Œä»¥ä¸‹æ˜¯å¸¸è§çš„ Rust é¡¹ç›®ç»“æ„æ¨¡å¼ï¼š

## ğŸ“‹ ç›®å½•

- [1 äºŒè¿›åˆ¶é¡¹ç›®æ¨¡å¼](#1-äºŒè¿›åˆ¶é¡¹ç›®æ¨¡å¼)
  - [1.1 ç‰¹ç‚¹](#11-ç‰¹ç‚¹)
- [2 åº“é¡¹ç›®æ¨¡å¼](#2-åº“é¡¹ç›®æ¨¡å¼)
  - [2.1 ç‰¹ç‚¹](#21-ç‰¹ç‚¹)
- [3 å†…åµŒæµ‹è¯•æ¨¡å¼](#3-å†…åµŒæµ‹è¯•æ¨¡å¼)
  - [3.1 ç‰¹ç‚¹](#31-ç‰¹ç‚¹)
- [4 é¡¹ç›®é…ç½®æ¨¡å¼](#4-é¡¹ç›®é…ç½®æ¨¡å¼)
  - [4.1 ç‰¹ç‚¹](#41-ç‰¹ç‚¹)
- [5 æ¨¡å—åŒ–é¡¹ç›®æ¨¡å¼](#5-æ¨¡å—åŒ–é¡¹ç›®æ¨¡å¼)
  - [5.1 ç‰¹ç‚¹](#51-ç‰¹ç‚¹)
- [6 ä½¿ç”¨ç‰¹å¾å’Œ trait å¯¹è±¡çš„æ¨¡å¼](#6-ä½¿ç”¨ç‰¹å¾å’Œ-trait-å¯¹è±¡çš„æ¨¡å¼)
  - [6.1 ç‰¹ç‚¹](#61-ç‰¹ç‚¹)
- [7 é¢å‘å‡½æ•°çš„ç¼–ç¨‹æ¨¡å¼](#7-é¢å‘å‡½æ•°çš„ç¼–ç¨‹æ¨¡å¼)
  - [7.1 ç‰¹ç‚¹](#71-ç‰¹ç‚¹)
- [8 é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å¼](#8-é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å¼)
  - [8.1 ç‰¹ç‚¹](#81-ç‰¹ç‚¹)
- [9 æ€»ç»“](#9-æ€»ç»“)

---

## 1 äºŒè¿›åˆ¶é¡¹ç›®æ¨¡å¼

é€‚ç”¨äºæ„å»ºç‹¬ç«‹å¯æ‰§è¡Œåº”ç”¨ç¨‹åºçš„é¡¹ç›®ï¼Œå…¶ç»“æ„é€šå¸¸å¦‚ä¸‹ï¼š

```text
my_binary_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs          # ç¨‹åºçš„å…¥å£ç‚¹
â”‚   â”œâ”€â”€ lib.rs           # å¦‚æœé¡¹ç›®éœ€è¦åŒæ—¶æ„å»ºåº“çš„è¯
â”‚   â””â”€â”€ bin/             # ç”¨äºå­˜æ”¾äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶
â”‚       â””â”€â”€ subcommand.rs # å…¶ä»–äºŒè¿›åˆ¶å…¥å£
â”œâ”€â”€ Cargo.toml           # é¡¹ç›®çš„é…ç½®æ–‡ä»¶
â”œâ”€â”€ benches/             # åŸºå‡†æµ‹è¯•æ–‡ä»¶
â””â”€â”€ tests/               # é›†æˆæµ‹è¯•æ–‡ä»¶
```

### 1.1 ç‰¹ç‚¹

- `main.rs` æ˜¯ç¨‹åºçš„å…¥å£æ–‡ä»¶ã€‚
- `lib.rs` å¯ç”¨äºåŒæ—¶æ„å»ºå¯é‡ç”¨çš„åº“æ–‡ä»¶ã€‚
- `bin/` ç›®å½•å¯ä»¥å­˜æ”¾å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å…¥å£ã€‚

## 2 åº“é¡¹ç›®æ¨¡å¼

ç”¨äºæ„å»ºä¾›å…¶ä»–é¡¹ç›®ä¾èµ–çš„åº“ï¼Œç»“æ„é€šå¸¸å¦‚ä¸‹ï¼š

```text
my_library/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs           # åº“çš„ä¸»æ¨¡å—
â”‚   â””â”€â”€ other_module.rs  # å…¶ä»–æ¨¡å—
â”œâ”€â”€ examples/            # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ example.rs       # åº“çš„ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ Cargo.toml
â””â”€â”€ tests/               # é›†æˆæµ‹è¯•
```

### 2.1 ç‰¹ç‚¹

- `lib.rs` æ˜¯åº“çš„ä¸»æ–‡ä»¶ï¼Œå®šä¹‰äº†å¯¹å¤–å…¬å¼€çš„æ¥å£ã€‚
- `other_module.rs` å’Œå…¶ä»–æ–‡ä»¶ç”¨äºç»„ç»‡åº“çš„å†…éƒ¨é€»è¾‘ã€‚
- `examples/` ç›®å½•ç”¨äºå±•ç¤ºåº“çš„åŠŸèƒ½å’Œç”¨æ³•ã€‚

## 3 å†…åµŒæµ‹è¯•æ¨¡å¼

Rust æ”¯æŒå°†æµ‹è¯•ä»£ç ç›´æ¥åµŒå…¥æºæ–‡ä»¶ä¸­ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```text
my_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs
â”‚   â””â”€â”€ tests/
â”‚       â””â”€â”€ test_file.rs # é›†æˆæµ‹è¯•æ–‡ä»¶
â””â”€â”€ Cargo.toml
```

### 3.1 ç‰¹ç‚¹

- å¯ä»¥åœ¨æºæ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œä½¿ç”¨ `#[cfg(test)]` é”™è¯¯ï¼æœªæ‰¾åˆ°å‚æ•°çš„å‰åæ–‡æ ‡è®°[^^230^]æ¥æ ‡è®°æµ‹è¯•ä»£ç ã€‚
- é›†æˆæµ‹è¯•é€šå¸¸æ”¾åœ¨ `tests/` ç›®å½•ä¸‹ã€‚

## 4 é¡¹ç›®é…ç½®æ¨¡å¼

é¡¹ç›®çš„é…ç½®æ–‡ä»¶ `Cargo.toml` æ˜¯ä¸€ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæŒ‡å®šé¡¹ç›®çš„å…ƒæ•°æ®ã€ä¾èµ–ã€æ„å»ºé€‰é¡¹ç­‰ã€‚ä¾‹å¦‚ï¼š

```toml
[package]
name = "my_project"
version = "0.1.0"
edition = "2021"

# ä¾èµ–ç®¡ç†
[dependencies]
serde = "1.0"
tokio = { version = "1.0", features = ["full"] }

[[bin]]
name = "my_binary"
path = "src/bin/my_binary.rs"
```

### 4.1 ç‰¹ç‚¹

- `Cargo.toml` æ˜¯é¡¹ç›®çš„æ ¹é…ç½®æ–‡ä»¶ã€‚
- ç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–ã€æ„å»ºç›®æ ‡ç­‰ã€‚

## 5 æ¨¡å—åŒ–é¡¹ç›®æ¨¡å¼

Rust çš„æ¨¡å—åŒ–ç³»ç»Ÿå…è®¸å°†ä»£ç ç»„ç»‡æˆæ¨¡å—å’Œå­æ¨¡å—ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```text
my_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs         # ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ database/      # æ•°æ®åº“ç›¸å…³æ¨¡å—
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ postgres/
â”‚   â”‚       â””â”€â”€ mod.rs
â”‚   â”‚       â””â”€â”€ connection.rs
â”‚   â”œâ”€â”€ web/           # Web ç›¸å…³æ¨¡å—
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ handlers/
â”‚   â”‚       â””â”€â”€ users.rs
â”‚   â”‚       â””â”€â”€ products.rs
â”‚   â””â”€â”€ utils/         # å·¥å…·æ¨¡å—
â”‚       â””â”€â”€ mod.rs
â”‚       â””â”€â”€ config.rs
â””â”€â”€ Cargo.toml
```

### 5.1 ç‰¹ç‚¹

- ä½¿ç”¨ `mod.rs` æ–‡ä»¶æ¥å®šä¹‰æ¨¡å—ã€‚
- å­æ¨¡å—é€šè¿‡ç›®å½•ç»“æ„è¿›è¡Œç»„ç»‡ã€‚
- æ¨¡å—ä¹‹é—´é€šè¿‡ `pub` æ§åˆ¶å¯è§æ€§ã€‚

## 6 ä½¿ç”¨ç‰¹å¾å’Œ trait å¯¹è±¡çš„æ¨¡å¼

åœ¨ Rust ä¸­ï¼Œç‰¹å¾ï¼ˆtraitï¼‰ç”¨äºæŠ½è±¡è¡Œä¸ºï¼Œtrait å¯¹è±¡å…è®¸å°†åŠ¨æ€å¤šæ€å¼•å…¥ç¨‹åºä¸­ã€‚è¿™ç§æ¨¡å¼å¸¸ç”¨äºæ„å»ºçµæ´»ã€å¯æ‰©å±•çš„ç³»ç»Ÿã€‚

ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªç‰¹å¾ `Drawable`ï¼Œå¹¶å®ç°é’ˆå¯¹ä¸åŒç±»å‹çš„å¯¹è±¡ï¼š

```rust
trait Drawable {
    fn draw(&self);
}

struct Circle(i32);
impl Drawable for Circle {
    fn draw(&self) {
        println!("Drawing a circle with radius {}", self.0);
    }
}

struct Square(i32);
impl Drawable for Square {
    fn draw(&self) {
        println!("Drawing a square with side {}", self.0);
    }
}

fn render(shape: &dyn Drawable) {
    shape.draw();
}
```

### 6.1 ç‰¹ç‚¹

- ä½¿ç”¨ trait å®šä¹‰å¯å¤ç”¨çš„è¡Œä¸ºã€‚
- trait å¯¹è±¡å…è®¸åŠ¨æ€è°ƒåº¦ã€‚

## 7 é¢å‘å‡½æ•°çš„ç¼–ç¨‹æ¨¡å¼

Rust æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°ç»„åˆå’Œé«˜é˜¶å‡½æ•°æ¥ç»„ç»‡ä»£ç ã€‚

ä¾‹å¦‚ï¼Œä½¿ç”¨è¿­ä»£å™¨å’Œé—­åŒ…æ¥å¤„ç†æ•°æ®ï¼š

```rust
fn main() {
    let numbers = vec![1, 2, 3, 4, 5];
    let squares: Vec<_> = numbers.iter().map(|x| x * x).collect();
    println!("{:?}", squares);
}
```

### 7.1 ç‰¹ç‚¹

- ä½¿ç”¨è¿­ä»£å™¨å’Œé«˜é˜¶å‡½æ•°ç®€åŒ–ä»£ç ã€‚
- é¿å…æ˜¾å¼çš„å¾ªç¯ã€‚

## 8 é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å¼

è™½ç„¶ Rust ä¸æ˜¯ä¼ ç»Ÿçš„ OOP è¯­è¨€ï¼Œä½†å®ƒå¯ä»¥é€šè¿‡ç»“æ„ä½“å’Œæ–¹æ³•å®ç°ç±»ä¼¼çš„ OOP é£æ ¼ã€‚

ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ `Person`ï¼Œå¹¶ä¸ºå…¶å®ç°æ–¹æ³•ï¼š

```rust
struct Person {
    name: String,
    age: u32,
}

impl Person {
    fn new(name: String, age: u32) -> Self {
        Person { name, age }
    }

    fn greet(&self) {
        println!("Hello, my name is {} and I'm {} years old.", self.name, self.age);
    }
}

fn main() {
    let person = Person::new("Alice".to_string(), 30);
    person.greet();
}
```

### 8.1 ç‰¹ç‚¹

- ä½¿ç”¨ç»“æ„ä½“å’Œæ–¹æ³•å®ç°æ•°æ®å’Œè¡Œä¸ºçš„å°è£…ã€‚
- å¯ä»¥é€šè¿‡ `impl` å—ä¸ºç»“æ„ä½“å®ç°æ–¹æ³•ã€‚

## 9 æ€»ç»“

Rust çš„é¡¹ç›®ç»“æ„å¯ä»¥æ ¹æ®å…·ä½“åº”ç”¨éœ€æ±‚çµæ´»è°ƒæ•´ã€‚
å¸¸è§çš„æ¨¡å¼åŒ…æ‹¬äºŒè¿›åˆ¶é¡¹ç›®æ¨¡å¼ã€åº“é¡¹ç›®æ¨¡å¼ã€æ¨¡å—åŒ–é¡¹ç›®æ¨¡å¼ç­‰ã€‚
é€šè¿‡åˆç†çš„æ¨¡å—åˆ’åˆ†å’Œä»£ç ç»„ç»‡ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚
