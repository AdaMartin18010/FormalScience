# 12.4 ä¸Šä¸‹æ–‡é€‚åº”ç†è®º (Context Adaptation Theory)

## ğŸ“‹ ç›®å½•

- [1 æ ¸å¿ƒæ¦‚å¿µ (Core Concepts)](#1-æ ¸å¿ƒæ¦‚å¿µ-core-concepts)
- [2 é€‚åº”çš„ç±»å‹ (Types of Adaptation)](#2-é€‚åº”çš„ç±»å‹-types-of-adaptation)
  - [2.1 å‚æ•°åŒ–é€‚åº” (Parameter-based Adaptation)](#21-å‚æ•°åŒ–é€‚åº”-parameter-based-adaptation)
  - [2.2 ç»„åˆå¼é€‚åº” (Compositional Adaptation)](#22-ç»„åˆå¼é€‚åº”-compositional-adaptation)
- [3 é€‚åº”ç­–ç•¥ä¸æ¨¡å‹ (Adaptation Strategies and Models)](#3-é€‚åº”ç­–ç•¥ä¸æ¨¡å‹-adaptation-strategies-and-models)
  - [3.1 é€‚åº”ç­–ç•¥ (Adaptation Strategies)](#31-é€‚åº”ç­–ç•¥-adaptation-strategies)
  - [3.2 MAPE-K æ§åˆ¶å¾ªç¯](#32-mape-k-æ§åˆ¶å¾ªç¯)
- [4 å…³é”®æŒ‘æˆ˜ (Key Challenges)](#4-å…³é”®æŒ‘æˆ˜-key-challenges)
- [5 Rust ä»£ç ç¤ºä¾‹ï¼šä¸€ä¸ªè‡ªé€‚åº”çš„è§†é¢‘æ’­æ”¾å™¨](#5-rust-ä»£ç ç¤ºä¾‹ä¸€ä¸ªè‡ªé€‚åº”çš„è§†é¢‘æ’­æ”¾å™¨)
- [6 ç»“è®º](#6-ç»“è®º)
- [7 æ‰¹åˆ¤æ€§åˆ†æ](#7-æ‰¹åˆ¤æ€§åˆ†æ)

---

## 1 æ ¸å¿ƒæ¦‚å¿µ (Core Concepts)

**ä¸Šä¸‹æ–‡é€‚åº” (Context Adaptation)** æ˜¯ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç³»ç»Ÿçš„æœ€ç»ˆç›®çš„å’Œæ‰§è¡Œç¯èŠ‚ã€‚å®ƒæŒ‡çš„æ˜¯ç³»ç»Ÿæ ¹æ®å…¶æ„ŸçŸ¥å’Œæ¨ç†å‡ºçš„ä¸Šä¸‹æ–‡ï¼ŒåŠ¨æ€åœ°ä¿®æ”¹è‡ªèº«è¡Œä¸ºã€ç»“æ„æˆ–åŠŸèƒ½ï¼Œä»¥æ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€ä¼˜åŒ–èµ„æºä½¿ç”¨å¹¶åº”å¯¹ç¯å¢ƒå˜åŒ–çš„è¿‡ç¨‹ã€‚

å¦‚æœè¯´**ä¸Šä¸‹æ–‡æ„ŸçŸ¥**å’Œ**ä¸Šä¸‹æ–‡æ¨ç†**æ˜¯ç³»ç»Ÿçš„"æ€è€ƒ"è¿‡ç¨‹ï¼Œé‚£ä¹ˆ**ä¸Šä¸‹æ–‡é€‚åº”**å°±æ˜¯ç³»ç»Ÿçš„"è¡ŒåŠ¨"è¿‡ç¨‹ã€‚å®ƒå›ç­”äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š"æ—¢ç„¶æˆ‘çŸ¥é“äº†å½“å‰çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘åº”è¯¥ä¸ºæ­¤åšäº›ä»€ä¹ˆï¼Ÿ"

ä¸€ä¸ªè‡ªé€‚åº”ç³»ç»Ÿ (Adaptive System) çš„æ ¸å¿ƒæ˜¯**åé¦ˆå¾ªç¯ (Feedback Loop)**ï¼Œå®ƒæŒç»­åœ°ç›‘æ§ç¯å¢ƒå’Œè‡ªèº«çŠ¶æ€ï¼Œå¹¶æ®æ­¤è¿›è¡Œè°ƒæ•´ã€‚

## 2 é€‚åº”çš„ç±»å‹ (Types of Adaptation)

ç³»ç»Ÿå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿›è¡Œé€‚åº”ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

### 2.1 å‚æ•°åŒ–é€‚åº” (Parameter-based Adaptation)

è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§é€‚åº”å½¢å¼ï¼Œå®ƒæ¶‰åŠè°ƒæ•´ç³»ç»Ÿé¢„å®šä¹‰çš„å‚æ•°ã€‚

- **ç¤ºä¾‹**:
  - ä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨æ ¹æ®å½“å‰çš„ç½‘ç»œå¸¦å®½ï¼ˆä¸Šä¸‹æ–‡ï¼‰è‡ªåŠ¨è°ƒæ•´è§†é¢‘çš„**åˆ†è¾¨ç‡**å’Œ**æ¯”ç‰¹ç‡**ï¼ˆå‚æ•°ï¼‰ã€‚
  - ä¸€ä¸ªç§»åŠ¨åº”ç”¨æ ¹æ®æ‰‹æœºçš„ç”µæ± ç”µé‡ï¼ˆä¸Šä¸‹æ–‡ï¼‰è°ƒæ•´å…¶æ•°æ®åŒæ­¥çš„**é¢‘ç‡**ï¼ˆå‚æ•°ï¼‰ã€‚
  - ä¸€ä¸ªæ™ºèƒ½å®¶å±…ç³»ç»Ÿæ ¹æ®å®¤å¤–çš„å…‰ç…§å¼ºåº¦ï¼ˆä¸Šä¸‹æ–‡ï¼‰è°ƒæ•´å®¤å†…ç¯å…‰çš„**äº®åº¦**ï¼ˆå‚æ•°ï¼‰ã€‚

### 2.2 ç»„åˆå¼é€‚åº” (Compositional Adaptation)

è¿™æ˜¯ä¸€ç§æ›´æ·±åˆ»ã€æ›´ç»“æ„åŒ–çš„é€‚åº”å½¢å¼ï¼Œå®ƒæ¶‰åŠæ”¹å˜ç³»ç»Ÿçš„ç»„ä»¶æ„æˆæˆ–ä½“ç³»ç»“æ„ã€‚

- **ç¤ºä¾‹**:
  - ä¸€ä¸ªå¯¼èˆªåº”ç”¨åœ¨æ£€æµ‹åˆ°ç”¨æˆ·è¿›å…¥æ­¥è¡Œæ¨¡å¼ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ—¶ï¼Œå¯èƒ½ä¼šå¸è½½ç”¨äºè½¦è¾†å¯¼èˆªçš„å¤æ‚äº¤é€šé¢„æµ‹ç»„ä»¶ï¼Œå¹¶åŠ è½½ä¸€ä¸ªæ›´è½»é‡çº§çš„ã€åŒ…å«äººè¡Œé“ä¿¡æ¯çš„åœ°å›¾ç»„ä»¶ã€‚
  - ä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ä»»åŠ¡ï¼Œå½“æŸä¸ªè®¡ç®—èŠ‚ç‚¹å› è¿‡è½½è€Œå“åº”ç¼“æ…¢ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šåŠ¨æ€åœ°å°†ä»»åŠ¡è¿ç§»åˆ°å¦ä¸€ä¸ªå¯ç”¨çš„ã€æ€§èƒ½æ›´å¥½çš„èŠ‚ç‚¹ä¸Šã€‚

## 3 é€‚åº”ç­–ç•¥ä¸æ¨¡å‹ (Adaptation Strategies and Models)

### 3.1 é€‚åº”ç­–ç•¥ (Adaptation Strategies)

- **æ‰‹åŠ¨é€‚åº” (Manual Adaptation)**: ç”±ç”¨æˆ·æ˜¾å¼åœ°è§¦å‘é€‚åº”è¿‡ç¨‹ã€‚ç³»ç»Ÿå¯èƒ½ä¼šå‘ç”¨æˆ·å»ºè®®ä¸€ä¸ªå˜æ›´ï¼Œç”±ç”¨æˆ·æ¥å†³å®šæ˜¯å¦é‡‡çº³ã€‚
- **è‡ªåŠ¨é€‚åº” (Automatic Adaptation)**: ç³»ç»Ÿè‡ªä¸»åœ°ã€æ— éœ€ç”¨æˆ·å¹²é¢„åœ°æ‰§è¡Œé€‚åº”ã€‚è¿™æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„è‡ªé€‚åº”ç³»ç»Ÿã€‚

### 3.2 MAPE-K æ§åˆ¶å¾ªç¯

MAPE-K æ˜¯ IBM æå‡ºçš„ä¸€ä¸ªç»å…¸çš„ç”¨äºè‡ªé€‚åº”ç³»ç»Ÿè®¾è®¡çš„å‚è€ƒæ¨¡å‹ï¼Œå®ƒå°†é€‚åº”è¿‡ç¨‹åˆ†è§£ä¸ºå››ä¸ªä¸»è¦é˜¶æ®µå’Œä¸€ä¸ªå…±äº«çš„çŸ¥è¯†åº“ã€‚

1. **ç›‘æ§ (Monitor)**: ä»å†…å¤–éƒ¨ç¯å¢ƒä¸­æ”¶é›†æ•°æ®ï¼ˆä¸Šä¸‹æ–‡ï¼‰ã€‚
2. **åˆ†æ (Analyze)**: åˆ†æç›‘æ§åˆ°çš„æ•°æ®ï¼Œä»¥æ£€æµ‹æ˜¯å¦éœ€è¦è¿›è¡Œé€‚åº”ï¼ˆä¾‹å¦‚ï¼Œå½“å‰æ€§èƒ½æ˜¯å¦ä½äºé¢„æœŸï¼Œæ˜¯å¦æœ‰æ–°çš„ç”¨æˆ·éœ€æ±‚å‡ºç°ï¼‰ã€‚
3. **è®¡åˆ’ (Plan)**: å¦‚æœéœ€è¦é€‚åº”ï¼Œè§„åˆ’å‡ºä¸€ç³»åˆ—å…·ä½“çš„ä¿®æ”¹æ­¥éª¤æ¥å°†ç³»ç»Ÿå¸¦å…¥ä¸€ä¸ªæ›´ä¼˜çš„çŠ¶æ€ã€‚
4. **æ‰§è¡Œ (Execute)**: æ‰§è¡Œè®¡åˆ’ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œå®é™…çš„ä¿®æ”¹ã€‚
5. **çŸ¥è¯†åº“ (Knowledge Base - K)**: ä¸€ä¸ªå…±äº«çš„å­˜å‚¨åº“ï¼ŒåŒ…å«äº†ç­–ç•¥ã€è§„åˆ™ã€ç³»ç»Ÿæ¨¡å‹ç­‰ä¿¡æ¯ï¼Œä¸ºå…¶ä»–å››ä¸ªé˜¶æ®µæä¾›æ”¯æŒã€‚

è¿™ä¸ªå¾ªç¯ä¸æ–­é‡å¤ï¼Œä½¿ç³»ç»Ÿèƒ½å¤ŸæŒç»­åœ°é€‚åº”å˜åŒ–ã€‚

## 4 å…³é”®æŒ‘æˆ˜ (Key Challenges)

- **ç¨³å®šæ€§ (Stability)**: å¦‚ä½•ç¡®ä¿é€‚åº”è¿‡ç¨‹ä¸ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥æŒ¯è¡æˆ–ä¸ç¨³å®šçŠ¶æ€ï¼Ÿï¼ˆä¾‹å¦‚ï¼Œç³»ç»Ÿåœ¨ä¸¤ä¸ªé…ç½®ä¹‹é—´ä¸åœåœ°æ¥å›åˆ‡æ¢ï¼‰ã€‚
- **ç”¨æˆ·å¹²æ‰° (User Disruption)**: è‡ªåŠ¨é€‚åº”å¯èƒ½ä¼šå¹²æ‰°ç”¨æˆ·ã€‚å¦‚ä½•å®ç°å¹³æ»‘ã€æ— ç¼çš„é€‚åº”ï¼Œä¸è®©ç”¨æˆ·æ„Ÿåˆ°çªå…€ï¼Ÿ
- **å†²çªè§£å†³ (Conflict Resolution)**: ä¸åŒçš„ä¸Šä¸‹æ–‡å¯èƒ½è§¦å‘ç›¸äº’çŸ›ç›¾çš„é€‚åº”è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œä¸€æ–¹é¢"ç”µæ± ç”µé‡ä½"è¦æ±‚é™ä½å±å¹•äº®åº¦ï¼Œå¦ä¸€æ–¹é¢"ç¯å¢ƒå…‰çº¿å¼º"è¦æ±‚æé«˜å±å¹•äº®åº¦ï¼Œç³»ç»Ÿåº”å¦‚ä½•å†³ç­–ï¼Ÿ
- **å¼€é”€ (Overhead)**: ç›‘æ§ã€åˆ†æå’Œé€‚åº”è¿‡ç¨‹æœ¬èº«ä¼šæ¶ˆè€—è®¡ç®—èµ„æºï¼Œéœ€è¦åœ¨é€‚åº”å¸¦æ¥çš„å¥½å¤„å’Œå…¶è‡ªèº«å¼€é”€ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚

## 5 Rust ä»£ç ç¤ºä¾‹ï¼šä¸€ä¸ªè‡ªé€‚åº”çš„è§†é¢‘æ’­æ”¾å™¨

ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿäº†ä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨ï¼Œå®ƒèƒ½æ ¹æ®ç½‘ç»œå¸¦å®½çš„å˜åŒ–ï¼ˆä¸Šä¸‹æ–‡ï¼‰æ¥è‡ªåŠ¨é€‚åº”ï¼ˆè°ƒæ•´è§†é¢‘è´¨é‡ï¼‰ã€‚

```rust
// --- ä¸Šä¸‹æ–‡å’Œç³»ç»Ÿç»„ä»¶å®šä¹‰ ---

// ä¸Šä¸‹æ–‡ï¼šç½‘ç»œçŠ¶å†µ
#[derive(Debug, Clone, Copy, PartialEq)]
pub enum NetworkBandwidth {
    Low,    // ä½å¸¦å®½
    Medium, // ä¸­å¸¦å®½
    High,   // é«˜å¸¦å®½
}

// ç³»ç»Ÿå‚æ•°ï¼šè§†é¢‘è´¨é‡
#[derive(Debug, PartialEq)]
pub enum VideoQuality {
    SD, // æ ‡æ¸… (480p)
    HD, // é«˜æ¸… (720p)
    FHD, // å…¨é«˜æ¸… (1080p)
}

// å¯é€‚åº”çš„ç»„ä»¶ï¼šè§†é¢‘æ’­æ”¾å™¨
pub struct AdaptiveVideoPlayer {
    current_quality: VideoQuality,
}

impl AdaptiveVideoPlayer {
    pub fn new() -> Self {
        AdaptiveVideoPlayer {
            current_quality: VideoQuality::HD, // åˆå§‹è´¨é‡
        }
    }

    pub fn get_quality(&self) -> &VideoQuality {
        &self.current_quality
    }
    
    // è¿™æ˜¯æ‰§è¡Œé€‚åº”çš„åœ°æ–¹
    pub fn adapt(&mut self, new_quality: VideoQuality) {
        if self.current_quality != new_quality {
            println!(
                "[Player] é€‚åº”: è§†é¢‘è´¨é‡ä» {:?} è°ƒæ•´ä¸º {:?}",
                self.current_quality, new_quality
            );
            self.current_quality = new_quality;
        }
    }
}


// --- MAPE-K é€‚åº”é€»è¾‘ ---

// åˆ†æå™¨ (Analyzer) & è§„åˆ’å™¨ (Planner) çš„ç»„åˆ
// åœ¨è¿™ä¸ªç®€å•ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆå¹¶äº† Analyze å’Œ Plan é˜¶æ®µ
pub struct AdaptationPlanner;

impl AdaptationPlanner {
    // æ ¹æ®ä¸Šä¸‹æ–‡ï¼Œè®¡åˆ’å‡ºæ–°çš„è§†é¢‘è´¨é‡
    pub fn plan_adaptation(context: &NetworkBandwidth) -> VideoQuality {
        match context {
            NetworkBandwidth::Low => VideoQuality::SD,
            NetworkBandwidth::Medium => VideoQuality::HD,
            NetworkBandwidth::High => VideoQuality::FHD,
        }
    }
}


fn main() {
    let mut player = AdaptiveVideoPlayer::new();
    println!("æ’­æ”¾å™¨å¯åŠ¨ï¼Œåˆå§‹è´¨é‡: {:?}", player.get_quality());

    // æ¨¡æ‹Ÿ MAPE å¾ªç¯
    
    // 1. ç›‘æ§ (Monitor): è·å–åˆ°ç½‘ç»œå˜åŒ–
    let context1 = NetworkBandwidth::Low;
    println!("\n[Monitor] æ£€æµ‹åˆ°ç½‘ç»œçŠ¶å†µ: {:?}", context1);
    
    // 2. åˆ†æä¸è®¡åˆ’ (Analyze & Plan)
    let planned_quality1 = AdaptationPlanner::plan_adaptation(&context1);
    
    // 3. æ‰§è¡Œ (Execute)
    player.adapt(planned_quality1);
    println!("æ’­æ”¾å™¨å½“å‰è´¨é‡: {:?}", player.get_quality());
    assert_eq!(*player.get_quality(), VideoQuality::SD);
    
    println!("----------------------------------");

    // æ¨¡æ‹Ÿç¬¬äºŒæ¬¡å¾ªç¯
    // 1. ç›‘æ§ (Monitor): ç½‘ç»œæ¢å¤
    let context2 = NetworkBandwidth::High;
    println!("\n[Monitor] æ£€æµ‹åˆ°ç½‘ç»œçŠ¶å†µ: {:?}", context2);

    // 2. åˆ†æä¸è®¡åˆ’ (Analyze & Plan)
    let planned_quality2 = AdaptationPlanner::plan_adaptation(&context2);

    // 3. æ‰§è¡Œ (Execute)
    player.adapt(planned_quality2);
    println!("æ’­æ”¾å™¨å½“å‰è´¨é‡: {:?}", player.get_quality());
    assert_eq!(*player.get_quality(), VideoQuality::FHD);
}
```

## 6 ç»“è®º

ä¸Šä¸‹æ–‡é€‚åº”ç†è®ºå°†ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„"è¢«åŠ¨æ„ŸçŸ¥"è½¬åŒ–ä¸º"ä¸»åŠ¨è¡ŒåŠ¨"ï¼Œæ˜¯æ„å»ºçœŸæ­£æ™ºèƒ½ã€è‡ªä¸»å’Œé«˜æ•ˆçš„æ™®é€‚è®¡ç®—ç³»ç»Ÿçš„å…³é”®ã€‚é€šè¿‡æ˜ç¡®çš„é€‚åº”ç­–ç•¥å’Œåƒ MAPE-K è¿™æ ·çš„æ§åˆ¶æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºèƒ½å¤ŸæŒç»­å­¦ä¹ å’Œæ¼”åŒ–çš„è½¯ä»¶ç³»ç»Ÿã€‚æœªæ¥çš„ç ”ç©¶å°†æ›´å¤šåœ°å…³æ³¨å¦‚ä½•åˆ©ç”¨æœºå™¨å­¦ä¹ å’ŒAIæŠ€æœ¯æ¥å®ç°æ›´å¤æ‚ã€æ›´å¹³æ»‘ã€æ›´å…·é¢„è§æ€§çš„é€‚åº”è¡Œä¸ºï¼ŒåŒæ—¶ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œç”¨æˆ·çš„è‰¯å¥½ä½“éªŒã€‚

## 7 æ‰¹åˆ¤æ€§åˆ†æ

- æœ¬èŠ‚å†…å®¹å¾…è¡¥å……ï¼šè¯·ä»å¤šå…ƒç†è®ºè§†è§’ã€å±€é™æ€§ã€äº‰è®®ç‚¹ã€åº”ç”¨å‰æ™¯ç­‰æ–¹é¢è¿›è¡Œæ‰¹åˆ¤æ€§åˆ†æã€‚
