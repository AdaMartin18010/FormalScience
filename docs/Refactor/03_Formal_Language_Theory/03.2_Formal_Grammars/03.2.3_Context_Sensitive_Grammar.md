# 03.2.3 ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³• (Context-Sensitive Grammar)

## ğŸ“š æ¦‚è¿° | Overview

ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ˜¯å½¢å¼è¯­è¨€ç†è®ºä¸­çš„é‡è¦æ–‡æ³•ç±»å‹ï¼Œå®ƒç”Ÿæˆçš„è¯­è¨€æ°å¥½æ˜¯çº¿æ€§æœ‰ç•Œè‡ªåŠ¨æœºèƒ½å¤Ÿè¯†åˆ«çš„è¯­è¨€ã€‚ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ˜¯ä¹”å§†æ–¯åŸºè°±ç³»ä¸­çš„1å‹æ–‡æ³•ï¼Œæ¯”ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•æ›´å¼ºå¤§ï¼Œèƒ½å¤Ÿæè¿°æ›´å¤æ‚çš„è¯­è¨€ç»“æ„ã€‚

Context-sensitive grammar (CSG) is an important type of grammar in formal language theory. The languages it generates are exactly those recognized by linear bounded automata. As Type-1 grammars in the Chomsky hierarchy, CSGs are more powerful than context-free grammars and can describe more complex language structures.

## ğŸ” å½¢å¼å®šä¹‰

**å®šä¹‰ 3.2.3.1** (ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•)
ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ˜¯ä¸€ä¸ªå››å…ƒç»„ $G = (V, \Sigma, P, S)$ï¼Œå…¶ä¸­ï¼š

1. $V$ æ˜¯éç»ˆç»“ç¬¦é›†åˆ
2. $\Sigma$ æ˜¯ç»ˆç»“ç¬¦é›†åˆï¼Œä¸” $V \cap \Sigma = \emptyset$
3. $P$ æ˜¯äº§ç”Ÿå¼é›†åˆï¼Œæ¯ä¸ªäº§ç”Ÿå¼å½¢å¦‚ $\alpha A \beta \to \alpha \gamma \beta$ï¼Œå…¶ä¸­ $A \in V$ï¼Œ$\alpha, \beta \in (V \cup \Sigma)^*$ï¼Œ$\gamma \in (V \cup \Sigma)^+$
4. $S \in V$ æ˜¯èµ·å§‹ç¬¦å·

**æ³¨**: ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå…è®¸äº§ç”Ÿå¼ $S \to \varepsilon$ï¼Œå‰ææ˜¯ $S$ ä¸å‡ºç°åœ¨ä»»ä½•äº§ç”Ÿå¼çš„å³éƒ¨ã€‚

**å®šä¹‰ 3.2.3.2** (æ¨å¯¼)
å¯¹äºä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³• $G = (V, \Sigma, P, S)$ï¼Œå¦‚æœ $\alpha A \beta \to \alpha \gamma \beta \in P$ï¼Œåˆ™æœ‰ $\delta \alpha A \beta \eta \Rightarrow \delta \alpha \gamma \beta \eta$ï¼Œå…¶ä¸­ $\delta, \eta \in (V \cup \Sigma)^*$ã€‚

**å®šä¹‰ 3.2.3.3** (è¯­è¨€)
ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³• $G$ ç”Ÿæˆçš„è¯­è¨€å®šä¹‰ä¸ºï¼š
$$L(G) = \{w \in \Sigma^* \mid S \Rightarrow^* w\}$$

## ğŸ§© æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰ | Core Concepts & Definitions

- **ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•ï¼ˆContext-Sensitive Grammar, CSGï¼‰**ï¼šäº§ç”Ÿå¼å…è®¸ä¸Šä¸‹æ–‡é™åˆ¶ï¼Œä¸”å³ä¾§é•¿åº¦ä¸å°‘äºå·¦ä¾§ã€‚
  
  A grammar whose productions allow context restrictions and whose right-hand side is at least as long as the left.
- **éç¼©çŸ­æ€§ï¼ˆNon-contracting Propertyï¼‰**ï¼šæ‰€æœ‰äº§ç”Ÿå¼æ»¡è¶³ $|\alpha| \leq |\beta|$ã€‚
  
  All productions satisfy $|\alpha| \leq |\beta|$.
- **ä¸Šä¸‹æ–‡ç›¸å…³è¯­è¨€ï¼ˆContext-Sensitive Language, CSLï¼‰**ï¼šå¯ç”±CSGç”Ÿæˆæˆ–LBAè¯†åˆ«çš„è¯­è¨€ã€‚
  
  Languages generated by CSGs or recognized by linear bounded automata.

## ğŸ§  ç†è®ºæ€§è´¨ä¸å®šç† | Theoretical Properties & Theorems

- **ç­‰ä»·æ€§å®šç†ï¼ˆEquivalence Theoremï¼‰**ï¼šCSGç”Ÿæˆçš„è¯­è¨€ç±»ä¸LBAè¯†åˆ«çš„è¯­è¨€ç±»å®Œå…¨ä¸€è‡´ã€‚
  
  The class of languages generated by CSGs is exactly the class recognized by LBAs.
- **é—­åŒ…æ€§è´¨ï¼ˆClosure Propertiesï¼‰**ï¼šä¸Šä¸‹æ–‡ç›¸å…³è¯­è¨€å¯¹å¹¶ã€äº¤ã€è¿æ¥ã€å…‹æ—é—­åŒ…ç­‰è¿ç®—å°é—­ï¼Œä½†å¯¹è¡¥ä¸å°é—­ã€‚
  
  CSLs are closed under union, intersection, concatenation, and Kleene star, but not under complement.
- **åˆ¤å®šæ€§ï¼ˆDecidabilityï¼‰**ï¼šæˆå‘˜èµ„æ ¼ã€ç©ºæ€§ç­‰é—®é¢˜å¯åˆ¤å®šï¼Œä½†ç­‰ä»·æ€§ä¸å¯åˆ¤å®šã€‚
  
  Membership and emptiness are decidable for CSGs, but equivalence is undecidable.

## ğŸ› ï¸ åº”ç”¨ç¤ºä¾‹

### å¤åˆ¶è¯­è¨€

```text
S â†’ aSb | ab
```

æ­¤æ–‡æ³•ç”Ÿæˆè¯­è¨€ $L = \{a^n b^n \mid n \geq 1\}$ï¼Œæ˜¯ä¸Šä¸‹æ–‡æ— å…³è¯­è¨€ã€‚

```text
S â†’ aSBC | aBC
CB â†’ BC
aB â†’ ab
bB â†’ bb
bC â†’ bc
cC â†’ cc
```

æ­¤æ–‡æ³•ç”Ÿæˆè¯­è¨€ $L = \{a^n b^n c^n \mid n \geq 1\}$ï¼Œæ˜¯ä¸Šä¸‹æ–‡ç›¸å…³è¯­è¨€ä½†ä¸æ˜¯ä¸Šä¸‹æ–‡æ— å…³è¯­è¨€ã€‚

### è®¡æ•°è¯­è¨€

```text
S â†’ ABC
AB â†’ ABc
BC â†’ BcC
A â†’ a
B â†’ b
C â†’ c
```

æ­¤æ–‡æ³•ç”Ÿæˆè¯­è¨€ $L = \{a^n b^n c^n \mid n \geq 1\}$ï¼Œå±•ç¤ºäº†ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•å¤„ç†å¤šé‡ä¾èµ–çš„èƒ½åŠ›ã€‚

## ğŸ”— å®ç°ç¤ºä¾‹

```python
class CSG:
    def __init__(self, variables, terminals, productions, start_symbol):
        self.variables = variables          # éç»ˆç»“ç¬¦é›†åˆ
        self.terminals = terminals          # ç»ˆç»“ç¬¦é›†åˆ
        self.productions = productions      # äº§ç”Ÿå¼è§„åˆ™
        self.start_symbol = start_symbol    # èµ·å§‹ç¬¦å·
    
    def is_context_sensitive(self):
        """æ£€æŸ¥æ–‡æ³•æ˜¯å¦ä¸ºä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•"""
        for lhs, rhs_list in self.productions.items():
            for rhs in rhs_list:
                # æ£€æŸ¥ç‰¹æ®Šè§„åˆ™ S â†’ Îµ
                if lhs == self.start_symbol and rhs == "":
                    continue
                
                # æ£€æŸ¥éç¼©çŸ­æ€§
                if len(lhs) > len(rhs):
                    return False
                
                # æ£€æŸ¥ä¸Šä¸‹æ–‡ç›¸å…³å½¢å¼
                # è¿™é‡Œç®€åŒ–äº†æ£€æŸ¥ï¼Œå®Œæ•´æ£€æŸ¥éœ€è¦åˆ†æäº§ç”Ÿå¼ç»“æ„
                
        return True
    
    def derive(self, string, max_steps=1000):
        """æ¨¡æ‹Ÿæ¨å¯¼è¿‡ç¨‹"""
        current = self.start_symbol
        steps = 0
        
        while steps < max_steps and current != string:
            steps += 1
            # å°è¯•åº”ç”¨äº§ç”Ÿå¼è§„åˆ™
            applied = False
            
            for lhs, rhs_list in self.productions.items():
                for rhs in rhs_list:
                    # æŸ¥æ‰¾å¹¶æ›¿æ¢
                    if lhs in current:
                        current = current.replace(lhs, rhs, 1)
                        applied = True
                        break
                
                if applied:
                    break
            
            if not applied:
                return False  # æ— æ³•ç»§ç»­æ¨å¯¼
        
        return current == string
```

## ğŸ›ï¸ å›½é™…å¯¹æ ‡ä¸æ‰¹åˆ¤æ€§åˆ†æ | International Perspective & Critical Analysis

- ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ˜¯ç†è®ºè®¡ç®—æœºç§‘å­¦ã€å¤æ‚ç³»ç»Ÿå»ºæ¨¡ç­‰é¢†åŸŸçš„é‡è¦å·¥å…·ã€‚
- ä½†å…¶å®é™…å·¥ç¨‹å®ç°å¤æ‚ï¼Œä¸”ä¸è‡ªç„¶è¯­è¨€ã€ç¼–ç¨‹è¯­è¨€çš„ç›´æ¥è”ç³»æœ‰é™ã€‚
- éç¼©çŸ­æ€§ä¿è¯äº†ç©ºé—´å—é™çš„å¯è®¡ç®—æ€§ï¼Œä½†ä¹Ÿé™åˆ¶äº†æ–‡æ³•çš„çµæ´»æ€§ã€‚
- è¿‘å¹´æ¥ï¼ŒCSGç†è®ºè¢«ç”¨äºDNAè®¡ç®—ã€åˆ†å­ç¼–ç¨‹ç­‰æ–°å…´é¢†åŸŸã€‚

Context-sensitive grammars are important tools in theoretical computer science and complex systems modeling. However, their practical implementation is complex, and their direct connection to natural and programming languages is limited. The non-contracting property ensures space-bounded computability but also restricts grammar flexibility. Recently, CSG theory has been applied to emerging fields such as DNA computing and molecular programming.

## ğŸ”— ç›¸å…³å†…å®¹

- [03.1.3 çº¿æ€§æœ‰ç•Œè‡ªåŠ¨æœº](../03.1_Automata_Theory/03.1.3_Linear_Bounded_Automata.md) - ä¸ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•ç­‰ä»·çš„è®¡ç®—æ¨¡å‹
- [03.2.2 ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•](03.2.2_Context_Free_Grammar.md) - æ¯”ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ›´å—é™çš„æ–‡æ³•
- [03.2.4 æ— é™åˆ¶æ–‡æ³•](03.2.4_Unrestricted_Grammar.md) - æ¯”ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•æ›´å¼ºå¤§çš„æ–‡æ³•
- [03.3.1 ä¹”å§†æ–¯åŸºè°±ç³»](../03.3_Language_Hierarchy/03.3.1_Chomsky_Hierarchy.md) - ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•åœ¨è¯­è¨€å±‚æ¬¡ä¸­çš„ä½ç½®

## å‚è€ƒæ–‡çŒ® | References

- Hopcroft, J.E., Motwani, R., Ullman, J.D. "Introduction to Automata Theory, Languages, and Computation"
- Wikipedia: [Context-sensitive grammar](https://en.wikipedia.org/wiki/Context-sensitive_grammar)
- Stanford Encyclopedia of Philosophy: [Formal Languages](https://plato.stanford.edu/entries/formal-languages/)
- Kuroda, S.-Y. "Classes of languages and linear-bounded automata" (1964)
- Chomsky, N. "Context-sensitive grammars and pushdown storage" (1963)

---

## æ‰¹åˆ¤æ€§åˆ†æ | Critical Analysis

- ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•ç†è®ºå¼ºè°ƒå½¢å¼åŒ–ã€å¤æ‚æ€§å’Œç©ºé—´å—é™å¯è®¡ç®—æ€§ï¼Œä½†åœ¨å®é™…å·¥ç¨‹å’Œè‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨æœ‰é™ã€‚
- éç¼©çŸ­æ€§è™½ä¿è¯äº†ç©ºé—´çº¦æŸï¼Œä½†ä¹Ÿå¯¼è‡´æ–‡æ³•è¡¨è¾¾èƒ½åŠ›å—é™ã€‚
- æ–°å…´é¢†åŸŸï¼ˆå¦‚DNAè®¡ç®—ã€å¤æ‚ç³»ç»Ÿï¼‰ä¸ºCSGç†è®ºæä¾›äº†æ–°çš„åº”ç”¨åœºæ™¯ï¼Œä½†å®é™…å¯éªŒè¯æ€§å’Œå·¥ç¨‹è½åœ°ä»éœ€è¿›ä¸€æ­¥ç ”ç©¶ã€‚
- ä¸åŒå­¦æ´¾å¯¹CSGä¸è®¤çŸ¥ã€è¯­è¨€å¤æ‚æ€§çš„å…³ç³»å­˜åœ¨äº‰è®®ã€‚

- Context-sensitive grammar theory emphasizes formalization, complexity, and space-bounded computability, but has limited application in engineering and natural language processing.
- The non-contracting property ensures space constraints but also limits grammar expressiveness.
- Emerging fields (e.g., DNA computing, complex systems) provide new application scenarios for CSG theory, but practical verifiability and engineering realization require further research.
- There are debates among different schools regarding the relationship between CSGs, cognition, and language complexity.
