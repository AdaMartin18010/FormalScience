# 02.5.3 å…³ç³»è¿ç®—

**æ–‡æ¡£ç¼–å·**: 02.5.3  
**ä¸»é¢˜**: å…³ç³»è¿ç®—  
**åˆ†ç±»**: æ•°å­¦åŸºç¡€ç†è®º - å…³ç³»è®º  
**åˆ›å»ºæ—¶é—´**: 2024å¹´12æœˆ21æ—¥  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ21æ—¥  

## ğŸ“‹ æ¦‚è¿°

å…³ç³»è¿ç®—æ˜¯å…³ç³»è®ºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç ”ç©¶å…³ç³»ä¹‹é—´çš„å„ç§è¿ç®—æ“ä½œã€‚æœ¬æ–‡æ¡£ç³»ç»Ÿæ€§åœ°ä»‹ç»å…³ç³»çš„åŸºæœ¬è¿ç®—ï¼ŒåŒ…æ‹¬å¹¶ã€äº¤ã€å·®ã€è¡¥ã€å¤åˆã€é€†ç­‰è¿ç®—ï¼Œå¹¶æä¾›ä¸¥æ ¼çš„å½¢å¼åŒ–å®šä¹‰å’Œæ€§è´¨è¯æ˜ã€‚

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

1. **å½¢å¼åŒ–å®šä¹‰**: å»ºç«‹å…³ç³»è¿ç®—çš„ç²¾ç¡®æ•°å­¦å®šä¹‰
2. **è¿ç®—æ€§è´¨**: ç³»ç»Ÿæ€§åœ°åˆ†æå„ç§å…³ç³»è¿ç®—çš„æ€§è´¨
3. **å®šç†è¯æ˜**: æä¾›é‡è¦å®šç†çš„ä¸¥æ ¼æ•°å­¦è¯æ˜
4. **åº”ç”¨åˆ†æ**: åˆ†æå…³ç³»è¿ç®—åœ¨å®é™…åº”ç”¨ä¸­çš„ä½œç”¨
5. **ä»£ç å®ç°**: æä¾›å…³ç³»è¿ç®—çš„ç®—æ³•å®ç°

## ğŸ“š ç›®å½•

- [02.5.3 å…³ç³»è¿ç®—](#0253-å…³ç³»è¿ç®—)
  - [ğŸ“‹ æ¦‚è¿°](#-æ¦‚è¿°)
  - [ğŸ¯ æ ¸å¿ƒç›®æ ‡](#-æ ¸å¿ƒç›®æ ‡)
  - [ğŸ“š ç›®å½•](#-ç›®å½•)
  - [1. åŸºæœ¬æ¦‚å¿µ](#1-åŸºæœ¬æ¦‚å¿µ)
    - [1.1 å…³ç³»è¿ç®—çš„å®šä¹‰](#11-å…³ç³»è¿ç®—çš„å®šä¹‰)
    - [1.2 ä¸»è¦å…³ç³»è¿ç®—](#12-ä¸»è¦å…³ç³»è¿ç®—)
  - [2. å½¢å¼åŒ–å®šä¹‰](#2-å½¢å¼åŒ–å®šä¹‰)
    - [2.1 é›†åˆè¿ç®—](#21-é›†åˆè¿ç®—)
    - [2.2 å…³ç³»ç‰¹æœ‰è¿ç®—](#22-å…³ç³»ç‰¹æœ‰è¿ç®—)
    - [2.3 é—­åŒ…è¿ç®—](#23-é—­åŒ…è¿ç®—)
  - [3. å®šç†ä¸è¯æ˜](#3-å®šç†ä¸è¯æ˜)
    - [3.1 å…³ç³»å¤åˆçš„æ€§è´¨](#31-å…³ç³»å¤åˆçš„æ€§è´¨)
    - [3.2 å…³ç³»é€†çš„æ€§è´¨](#32-å…³ç³»é€†çš„æ€§è´¨)
    - [3.3 é—­åŒ…çš„æ€§è´¨](#33-é—­åŒ…çš„æ€§è´¨)
    - [3.4 å¹‚è¿ç®—çš„æ€§è´¨](#34-å¹‚è¿ç®—çš„æ€§è´¨)
  - [4. ä»£ç å®ç°](#4-ä»£ç å®ç°)
    - [4.1 Rustå®ç°](#41-rustå®ç°)
    - [4.2 Haskellå®ç°](#42-haskellå®ç°)
  - [5. åº”ç”¨ç¤ºä¾‹](#5-åº”ç”¨ç¤ºä¾‹)
    - [5.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–](#51-æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–)
    - [5.2 å›¾è®ºç®—æ³•](#52-å›¾è®ºç®—æ³•)
    - [5.3 ç¨‹åºåˆ†æ](#53-ç¨‹åºåˆ†æ)
  - [6. ç›¸å…³ç†è®º](#6-ç›¸å…³ç†è®º)
    - [6.1 ä¸é›†åˆè®ºçš„å…³ç³»](#61-ä¸é›†åˆè®ºçš„å…³ç³»)
    - [6.2 ä¸ä»£æ•°å­¦çš„å…³ç³»](#62-ä¸ä»£æ•°å­¦çš„å…³ç³»)
    - [6.3 ä¸å›¾è®ºçš„å…³ç³»](#63-ä¸å›¾è®ºçš„å…³ç³»)
    - [6.4 ä¸é€»è¾‘å­¦çš„å…³ç³»](#64-ä¸é€»è¾‘å­¦çš„å…³ç³»)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
  - [æ‰¹åˆ¤æ€§åˆ†æ](#æ‰¹åˆ¤æ€§åˆ†æ)

## 1. åŸºæœ¬æ¦‚å¿µ

### 1.1 å…³ç³»è¿ç®—çš„å®šä¹‰

å…³ç³»è¿ç®—æ˜¯å¯¹å…³ç³»è¿›è¡Œå„ç§æ“ä½œçš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é›†åˆè¿ç®—å’Œå…³ç³»ç‰¹æœ‰çš„è¿ç®—ã€‚

### 1.2 ä¸»è¦å…³ç³»è¿ç®—

- **é›†åˆè¿ç®—**: å¹¶ã€äº¤ã€å·®ã€è¡¥
- **å…³ç³»ç‰¹æœ‰è¿ç®—**: å¤åˆã€é€†ã€å¹‚ã€é—­åŒ…
- **æ€§è´¨ä¿æŒè¿ç®—**: è‡ªåé—­åŒ…ã€å¯¹ç§°é—­åŒ…ã€ä¼ é€’é—­åŒ…

## 2. å½¢å¼åŒ–å®šä¹‰

### 2.1 é›†åˆè¿ç®—

**å®šä¹‰ 2.1.1** (å…³ç³»å¹¶)
è®¾ $R$ å’Œ $S$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ å’Œ $S$ çš„å¹¶å®šä¹‰ä¸ºï¼š
$$R \cup S = \{(a,b) \mid (a,b) \in R \lor (a,b) \in S\}$$

**å®šä¹‰ 2.1.2** (å…³ç³»äº¤)
è®¾ $R$ å’Œ $S$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ å’Œ $S$ çš„äº¤å®šä¹‰ä¸ºï¼š
$$R \cap S = \{(a,b) \mid (a,b) \in R \land (a,b) \in S\}$$

**å®šä¹‰ 2.1.3** (å…³ç³»å·®)
è®¾ $R$ å’Œ $S$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ å’Œ $S$ çš„å·®å®šä¹‰ä¸ºï¼š
$$R \setminus S = \{(a,b) \mid (a,b) \in R \land (a,b) \notin S\}$$

**å®šä¹‰ 2.1.4** (å…³ç³»è¡¥)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„è¡¥å®šä¹‰ä¸ºï¼š
$$\overline{R} = \{(a,b) \mid (a,b) \in A \times A \land (a,b) \notin R\}$$

### 2.2 å…³ç³»ç‰¹æœ‰è¿ç®—

**å®šä¹‰ 2.2.1** (å…³ç³»å¤åˆ)
è®¾ $R$ æ˜¯é›†åˆ $A$ åˆ° $B$ çš„å…³ç³»ï¼Œ$S$ æ˜¯é›†åˆ $B$ åˆ° $C$ çš„å…³ç³»ï¼Œåˆ™ $R$ å’Œ $S$ çš„å¤åˆå®šä¹‰ä¸ºï¼š
$$R \circ S = \{(a,c) \mid \exists b \in B: (a,b) \in R \land (b,c) \in S\}$$

**å®šä¹‰ 2.2.2** (å…³ç³»é€†)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„é€†å®šä¹‰ä¸ºï¼š
$$R^{-1} = \{(b,a) \mid (a,b) \in R\}$$

**å®šä¹‰ 2.2.3** (å…³ç³»å¹‚)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„ $n$ æ¬¡å¹‚å®šä¹‰ä¸ºï¼š

- $R^0 = \{(a,a) \mid a \in A\}$ (æ’ç­‰å…³ç³»)
- $R^{n+1} = R^n \circ R$

### 2.3 é—­åŒ…è¿ç®—

**å®šä¹‰ 2.3.1** (è‡ªåé—­åŒ…)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„è‡ªåé—­åŒ…å®šä¹‰ä¸ºï¼š
$$r(R) = R \cup \{(a,a) \mid a \in A\}$$

**å®šä¹‰ 2.3.2** (å¯¹ç§°é—­åŒ…)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„å¯¹ç§°é—­åŒ…å®šä¹‰ä¸ºï¼š
$$s(R) = R \cup R^{-1}$$

**å®šä¹‰ 2.3.3** (ä¼ é€’é—­åŒ…)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ $R$ çš„ä¼ é€’é—­åŒ…å®šä¹‰ä¸ºï¼š
$$t(R) = \bigcup_{n=1}^{\infty} R^n$$

## 3. å®šç†ä¸è¯æ˜

### 3.1 å…³ç³»å¤åˆçš„æ€§è´¨

**å®šç† 3.1.1** (å…³ç³»å¤åˆçš„ç»“åˆå¾‹)
è®¾ $R$ã€$S$ã€$T$ åˆ†åˆ«æ˜¯é›†åˆ $A$ åˆ° $B$ã€$B$ åˆ° $C$ã€$C$ åˆ° $D$ çš„å…³ç³»ï¼Œåˆ™ï¼š
$$(R \circ S) \circ T = R \circ (S \circ T)$$

**è¯æ˜**:
å¯¹äºä»»æ„ $(a,d) \in (R \circ S) \circ T$ï¼Œå­˜åœ¨ $c \in C$ ä½¿å¾— $(a,c) \in R \circ S$ ä¸” $(c,d) \in T$ã€‚
åˆå­˜åœ¨ $b \in B$ ä½¿å¾— $(a,b) \in R$ ä¸” $(b,c) \in S$ã€‚
å› æ­¤ $(b,d) \in S \circ T$ï¼Œæ‰€ä»¥ $(a,d) \in R \circ (S \circ T)$ã€‚
åä¹‹äº¦ç„¶ã€‚

### 3.2 å…³ç³»é€†çš„æ€§è´¨

**å®šç† 3.2.1** (å…³ç³»é€†çš„æ€§è´¨)
è®¾ $R$ å’Œ $S$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ï¼š

1. $(R^{-1})^{-1} = R$
2. $(R \cup S)^{-1} = R^{-1} \cup S^{-1}$
3. $(R \cap S)^{-1} = R^{-1} \cap S^{-1}$
4. $(R \circ S)^{-1} = S^{-1} \circ R^{-1}$

**è¯æ˜**:

1. **é€†çš„é€†**: $(R^{-1})^{-1} = \{(a,b) \mid (b,a) \in R^{-1}\} = \{(a,b) \mid (a,b) \in R\} = R$
2. **å¹¶çš„é€†**: $(R \cup S)^{-1} = \{(b,a) \mid (a,b) \in R \cup S\} = \{(b,a) \mid (a,b) \in R \lor (a,b) \in S\} = R^{-1} \cup S^{-1}$
3. **äº¤çš„é€†**: $(R \cap S)^{-1} = \{(b,a) \mid (a,b) \in R \cap S\} = \{(b,a) \mid (a,b) \in R \land (a,b) \in S\} = R^{-1} \cap S^{-1}$
4. **å¤åˆçš„é€†**: $(R \circ S)^{-1} = \{(c,a) \mid (a,c) \in R \circ S\} = \{(c,a) \mid \exists b: (a,b) \in R \land (b,c) \in S\} = S^{-1} \circ R^{-1}$

### 3.3 é—­åŒ…çš„æ€§è´¨

**å®šç† 3.3.1** (é—­åŒ…çš„åŸºæœ¬æ€§è´¨)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ï¼š

1. $r(R)$ æ˜¯è‡ªåçš„
2. $s(R)$ æ˜¯å¯¹ç§°çš„
3. $t(R)$ æ˜¯ä¼ é€’çš„
4. $R \subseteq r(R)$ã€$R \subseteq s(R)$ã€$R \subseteq t(R)$

**è¯æ˜**:

1. **è‡ªåé—­åŒ…**: å¯¹äºä»»æ„ $a \in A$ï¼Œ$(a,a) \in r(R)$ï¼Œæ‰€ä»¥ $r(R)$ æ˜¯è‡ªåçš„
2. **å¯¹ç§°é—­åŒ…**: å¯¹äºä»»æ„ $(a,b) \in s(R)$ï¼Œ$(a,b) \in R$ æˆ– $(a,b) \in R^{-1}$ï¼Œæ‰€ä»¥ $(b,a) \in R^{-1}$ æˆ– $(b,a) \in R$ï¼Œå› æ­¤ $(b,a) \in s(R)$
3. **ä¼ é€’é—­åŒ…**: å¯¹äºä»»æ„ $(a,b) \in t(R)$ å’Œ $(b,c) \in t(R)$ï¼Œå­˜åœ¨ $m,n$ ä½¿å¾— $(a,b) \in R^m$ å’Œ $(b,c) \in R^n$ï¼Œæ‰€ä»¥ $(a,c) \in R^{m+n} \subseteq t(R)$

### 3.4 å¹‚è¿ç®—çš„æ€§è´¨

**å®šç† 3.4.1** (å…³ç³»å¹‚çš„æ€§è´¨)
è®¾ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™ï¼š

1. $R^0 = I_A$ (æ’ç­‰å…³ç³»)
2. $R^1 = R$
3. $R^{m+n} = R^m \circ R^n$
4. $(R^m)^n = R^{mn}$

**è¯æ˜**:

1. **é›¶æ¬¡å¹‚**: ç”±å®šä¹‰ $R^0 = \{(a,a) \mid a \in A\} = I_A$
2. **ä¸€æ¬¡å¹‚**: $R^1 = R^0 \circ R = I_A \circ R = R$
3. **å¹‚çš„åŠ æ³•**: é€šè¿‡å½’çº³æ³•è¯æ˜ $R^{m+n} = R^m \circ R^n$
4. **å¹‚çš„ä¹˜æ³•**: é€šè¿‡å½’çº³æ³•è¯æ˜ $(R^m)^n = R^{mn}$

## 4. ä»£ç å®ç°

### 4.1 Rustå®ç°

```rust
use std::collections::HashSet;
use std::hash::Hash;

/// å…³ç³»è¿ç®—å™¨
pub struct RelationOperations<T> {
    relation: HashSet<(T, T)>,
}

impl<T: Hash + Eq + Clone> RelationOperations<T> {
    /// åˆ›å»ºæ–°çš„å…³ç³»è¿ç®—å™¨
    pub fn new(relation: HashSet<(T, T)>) -> Self {
        Self { relation }
    }
    
    /// å…³ç³»å¹¶è¿ç®—
    pub fn union(&self, other: &HashSet<(T, T)>) -> HashSet<(T, T)> {
        self.relation.union(other).cloned().collect()
    }
    
    /// å…³ç³»äº¤è¿ç®—
    pub fn intersection(&self, other: &HashSet<(T, T)>) -> HashSet<(T, T)> {
        self.relation.intersection(other).cloned().collect()
    }
    
    /// å…³ç³»å·®è¿ç®—
    pub fn difference(&self, other: &HashSet<(T, T)>) -> HashSet<(T, T)> {
        self.relation.difference(other).cloned().collect()
    }
    
    /// å…³ç³»è¡¥è¿ç®—
    pub fn complement(&self, universe: &HashSet<T>) -> HashSet<(T, T)> {
        let mut complement = HashSet::new();
        for a in universe {
            for b in universe {
                if !self.relation.contains(&(a.clone(), b.clone())) {
                    complement.insert((a.clone(), b.clone()));
                }
            }
        }
        complement
    }
    
    /// å…³ç³»å¤åˆè¿ç®—
    pub fn composition(&self, other: &HashSet<(T, T)>) -> HashSet<(T, T)> {
        let mut result = HashSet::new();
        for (a, b) in &self.relation {
            for (c, d) in other {
                if b == c {
                    result.insert((a.clone(), d.clone()));
                }
            }
        }
        result
    }
    
    /// å…³ç³»é€†è¿ç®—
    pub fn inverse(&self) -> HashSet<(T, T)> {
        self.relation.iter().map(|(a, b)| (b.clone(), a.clone())).collect()
    }
    
    /// å…³ç³»å¹‚è¿ç®—
    pub fn power(&self, n: usize, universe: &HashSet<T>) -> HashSet<(T, T)> {
        if n == 0 {
            // æ’ç­‰å…³ç³»
            universe.iter().map(|a| (a.clone(), a.clone())).collect()
        } else if n == 1 {
            self.relation.clone()
        } else {
            let mut result = self.relation.clone();
            for _ in 1..n {
                result = RelationOperations::new(result).composition(&self.relation);
            }
            result
        }
    }
    
    /// è‡ªåé—­åŒ…
    pub fn reflexive_closure(&self, universe: &HashSet<T>) -> HashSet<(T, T)> {
        let mut closure = self.relation.clone();
        for a in universe {
            closure.insert((a.clone(), a.clone()));
        }
        closure
    }
    
    /// å¯¹ç§°é—­åŒ…
    pub fn symmetric_closure(&self) -> HashSet<(T, T)> {
        let mut closure = self.relation.clone();
        for (a, b) in &self.relation {
            closure.insert((b.clone(), a.clone()));
        }
        closure
    }
    
    /// ä¼ é€’é—­åŒ… (Warshallç®—æ³•)
    pub fn transitive_closure(&self, universe: &HashSet<T>) -> HashSet<(T, T)> {
        let mut closure = self.relation.clone();
        let elements: Vec<T> = universe.iter().cloned().collect();
        let n = elements.len();
        
        // åˆ›å»ºé‚»æ¥çŸ©é˜µ
        let mut matrix = vec![vec![false; n]; n];
        for (a, b) in &closure {
            if let (Some(i), Some(j)) = (
                elements.iter().position(|x| x == a),
                elements.iter().position(|x| x == b)
            ) {
                matrix[i][j] = true;
            }
        }
        
        // Warshallç®—æ³•
        for k in 0..n {
            for i in 0..n {
                for j in 0..n {
                    matrix[i][j] = matrix[i][j] || (matrix[i][k] && matrix[k][j]);
                }
            }
        }
        
        // é‡å»ºå…³ç³»
        let mut result = HashSet::new();
        for i in 0..n {
            for j in 0..n {
                if matrix[i][j] {
                    result.insert((elements[i].clone(), elements[j].clone()));
                }
            }
        }
        result
    }
}

#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_union() {
        let mut r1 = HashSet::new();
        r1.insert((1, 2));
        r1.insert((2, 3));
        
        let mut r2 = HashSet::new();
        r2.insert((2, 3));
        r2.insert((3, 4));
        
        let ops = RelationOperations::new(r1);
        let union = ops.union(&r2);
        
        assert!(union.contains(&(1, 2)));
        assert!(union.contains(&(2, 3)));
        assert!(union.contains(&(3, 4)));
    }
    
    #[test]
    fn test_composition() {
        let mut r1 = HashSet::new();
        r1.insert((1, 2));
        r1.insert((2, 3));
        
        let mut r2 = HashSet::new();
        r2.insert((2, 4));
        r2.insert((3, 5));
        
        let ops = RelationOperations::new(r1);
        let composition = ops.composition(&r2);
        
        assert!(composition.contains(&(1, 4)));
        assert!(composition.contains(&(2, 5)));
    }
    
    #[test]
    fn test_inverse() {
        let mut relation = HashSet::new();
        relation.insert((1, 2));
        relation.insert((2, 3));
        
        let ops = RelationOperations::new(relation);
        let inverse = ops.inverse();
        
        assert!(inverse.contains(&(2, 1)));
        assert!(inverse.contains(&(3, 2)));
    }
    
    #[test]
    fn test_transitive_closure() {
        let mut relation = HashSet::new();
        relation.insert((1, 2));
        relation.insert((2, 3));
        
        let mut universe = HashSet::new();
        universe.insert(1);
        universe.insert(2);
        universe.insert(3);
        
        let ops = RelationOperations::new(relation);
        let closure = ops.transitive_closure(&universe);
        
        assert!(closure.contains(&(1, 2)));
        assert!(closure.contains(&(2, 3)));
        assert!(closure.contains(&(1, 3)));
    }
}
```

### 4.2 Haskellå®ç°

```haskell
module RelationOperations where

import Data.Set (Set)
import qualified Data.Set as Set

-- å…³ç³»è¿ç®—å™¨
data RelationOperations a = RelationOperations (Set (a, a))

-- åˆ›å»ºæ–°çš„å…³ç³»è¿ç®—å™¨
newRelationOperations :: Ord a => Set (a, a) -> RelationOperations a
newRelationOperations = RelationOperations

-- å…³ç³»å¹¶è¿ç®—
union :: Ord a => RelationOperations a -> Set (a, a) -> Set (a, a)
union (RelationOperations rel) other = Set.union rel other

-- å…³ç³»äº¤è¿ç®—
intersection :: Ord a => RelationOperations a -> Set (a, a) -> Set (a, a)
intersection (RelationOperations rel) other = Set.intersection rel other

-- å…³ç³»å·®è¿ç®—
difference :: Ord a => RelationOperations a -> Set (a, a) -> Set (a, a)
difference (RelationOperations rel) other = Set.difference rel other

-- å…³ç³»è¡¥è¿ç®—
complement :: Ord a => RelationOperations a -> Set a -> Set (a, a)
complement (RelationOperations rel) universe = 
    Set.difference (Set.cartesianProduct universe universe) rel

-- å…³ç³»å¤åˆè¿ç®—
composition :: Ord a => RelationOperations a -> Set (a, a) -> Set (a, a)
composition (RelationOperations rel) other = 
    Set.fromList [(a, d) | (a, b) <- Set.toList rel, 
                          (c, d) <- Set.toList other, 
                          b == c]

-- å…³ç³»é€†è¿ç®—
inverse :: Ord a => RelationOperations a -> Set (a, a)
inverse (RelationOperations rel) = 
    Set.map (\(a, b) -> (b, a)) rel

-- å…³ç³»å¹‚è¿ç®—
power :: Ord a => RelationOperations a -> Int -> Set a -> Set (a, a)
power (RelationOperations rel) 0 universe = 
    Set.map (\a -> (a, a)) universe
power (RelationOperations rel) 1 _ = rel
power (RelationOperations rel) n universe = 
    let prev = power (RelationOperations rel) (n-1) universe
    in composition (RelationOperations prev) rel

-- è‡ªåé—­åŒ…
reflexiveClosure :: Ord a => RelationOperations a -> Set a -> Set (a, a)
reflexiveClosure (RelationOperations rel) universe = 
    Set.union rel (Set.map (\a -> (a, a)) universe)

-- å¯¹ç§°é—­åŒ…
symmetricClosure :: Ord a => RelationOperations a -> Set (a, a)
symmetricClosure (RelationOperations rel) = 
    Set.union rel (inverse (RelationOperations rel))

-- ä¼ é€’é—­åŒ… (ä½¿ç”¨Warshallç®—æ³•)
transitiveClosure :: Ord a => RelationOperations a -> Set a -> Set (a, a)
transitiveClosure (RelationOperations rel) universe = 
    let elements = Set.toList universe
        n = length elements
        -- åˆ›å»ºé‚»æ¥çŸ©é˜µ
        matrix = [[Set.member (elements !! i, elements !! j) rel | j <- [0..n-1]] | i <- [0..n-1]]
        -- Warshallç®—æ³•
        warshall = foldl (\m k -> 
            [[m !! i !! j || (m !! i !! k && m !! k !! j) | j <- [0..n-1]] | i <- [0..n-1]]
        ) matrix [0..n-1]
        -- é‡å»ºå…³ç³»
        result = [(elements !! i, elements !! j) | i <- [0..n-1], j <- [0..n-1], warshall !! i !! j]
    in Set.fromList result

-- æµ‹è¯•å‡½æ•°
testUnion :: Bool
testUnion = 
    let r1 = Set.fromList [(1, 2), (2, 3)]
        r2 = Set.fromList [(2, 3), (3, 4)]
        ops = newRelationOperations r1
        union = RelationOperations.union ops r2
    in Set.member (1, 2) union && Set.member (2, 3) union && Set.member (3, 4) union

testComposition :: Bool
testComposition = 
    let r1 = Set.fromList [(1, 2), (2, 3)]
        r2 = Set.fromList [(2, 4), (3, 5)]
        ops = newRelationOperations r1
        composition = RelationOperations.composition ops r2
    in Set.member (1, 4) composition && Set.member (2, 5) composition

testInverse :: Bool
testInverse = 
    let rel = Set.fromList [(1, 2), (2, 3)]
        ops = newRelationOperations rel
        inv = inverse ops
    in Set.member (2, 1) inv && Set.member (3, 2) inv
```

## 5. åº”ç”¨ç¤ºä¾‹

### 5.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

å…³ç³»è¿ç®—åœ¨æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ä¸­æœ‰é‡è¦åº”ç”¨ï¼š

1. **æŸ¥è¯¢é‡å†™**: ä½¿ç”¨å…³ç³»è¿ç®—çš„æ€§è´¨é‡å†™æŸ¥è¯¢
2. **ç´¢å¼•ä¼˜åŒ–**: åˆ©ç”¨å…³ç³»è¿ç®—çš„æ€§è´¨é€‰æ‹©æœ€ä¼˜ç´¢å¼•
3. **è¿æ¥ä¼˜åŒ–**: é€šè¿‡å…³ç³»è¿ç®—çš„æ€§è´¨ä¼˜åŒ–è¿æ¥æ“ä½œ

### 5.2 å›¾è®ºç®—æ³•

å…³ç³»è¿ç®—åœ¨å›¾è®ºç®—æ³•ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼š

1. **å¯è¾¾æ€§åˆ†æ**: ä½¿ç”¨ä¼ é€’é—­åŒ…è®¡ç®—å¯è¾¾æ€§
2. **è¿é€šæ€§åˆ†æ**: ä½¿ç”¨å…³ç³»è¿ç®—åˆ†æå›¾çš„è¿é€šæ€§
3. **è·¯å¾„æŸ¥æ‰¾**: ä½¿ç”¨å…³ç³»å¤åˆæŸ¥æ‰¾è·¯å¾„

### 5.3 ç¨‹åºåˆ†æ

å…³ç³»è¿ç®—åœ¨ç¨‹åºåˆ†æä¸­æœ‰é‡è¦åº”ç”¨ï¼š

1. **æ•°æ®æµåˆ†æ**: ä½¿ç”¨å…³ç³»è¿ç®—åˆ†ææ•°æ®æµ
2. **æ§åˆ¶æµåˆ†æ**: ä½¿ç”¨å…³ç³»è¿ç®—åˆ†ææ§åˆ¶æµ
3. **ä¾èµ–åˆ†æ**: ä½¿ç”¨å…³ç³»è¿ç®—åˆ†æç¨‹åºä¾èµ–

## 6. ç›¸å…³ç†è®º

### 6.1 ä¸é›†åˆè®ºçš„å…³ç³»

å…³ç³»è¿ç®—åŸºäºé›†åˆè¿ç®—ï¼Œæ˜¯é›†åˆè®ºçš„è‡ªç„¶æ‰©å±•ã€‚

### 6.2 ä¸ä»£æ•°å­¦çš„å…³ç³»

å…³ç³»è¿ç®—ä¸ä»£æ•°è¿ç®—æœ‰å¯†åˆ‡è”ç³»ï¼Œç‰¹åˆ«æ˜¯å¤åˆè¿ç®—ã€‚

### 6.3 ä¸å›¾è®ºçš„å…³ç³»

å…³ç³»è¿ç®—å¯ä»¥ç”¨å›¾è®ºçš„æ–¹æ³•è¡¨ç¤ºå’Œåˆ†æã€‚

### 6.4 ä¸é€»è¾‘å­¦çš„å…³ç³»

å…³ç³»è¿ç®—å¯ä»¥ç”¨é€»è¾‘å…¬å¼è¡¨ç¤ºï¼Œä¸è°“è¯é€»è¾‘ç›¸å…³ã€‚

## 7. å‚è€ƒæ–‡çŒ®

1. **åŸºç¡€ç†è®º**
   - [02.1.1 æœ´ç´ é›†åˆè®º](02.1.1_æœ´ç´ é›†åˆè®º.md)
   - [02.1.2 å…¬ç†é›†åˆè®º](02.1.2_å…¬ç†é›†åˆè®º.md)
   - [02.1.3 é›†åˆè¿ç®—](02.1.3_é›†åˆè¿ç®—.md)
   - [02.1.4 é›†åˆå…³ç³»](02.1.4_é›†åˆå…³ç³».md)

2. **é€»è¾‘åŸºç¡€**
   - [02.2.1 å‘½é¢˜é€»è¾‘](02.2.1_å‘½é¢˜é€»è¾‘.md)
   - [02.2.2 è°“è¯é€»è¾‘](02.2.2_è°“è¯é€»è¾‘.md)
   - [02.2.3 æ¨¡æ€é€»è¾‘](02.2.3_æ¨¡æ€é€»è¾‘.md)
   - [02.2.4 ç›´è§‰é€»è¾‘](02.2.4_ç›´è§‰é€»è¾‘.md)

3. **æ•°ç³»ç†è®º**
   - [02.3.1 è‡ªç„¶æ•°ç³»ç»Ÿ](02.3.1_è‡ªç„¶æ•°ç³»ç»Ÿ.md)
   - [02.3.2 æ•´æ•°ç³»ç»Ÿ](02.3.2_æ•´æ•°ç³»ç»Ÿ.md)
   - [02.3.3 æœ‰ç†æ•°ç³»ç»Ÿ](02.3.3_æœ‰ç†æ•°ç³»ç»Ÿ.md)
   - [02.3.4 å®æ•°ç³»ç»Ÿ](02.3.4_å®æ•°ç³»ç»Ÿ.md)

4. **å‡½æ•°ç†è®º**
   - [02.4.1 å‡½æ•°æ¦‚å¿µ](02.4.1_å‡½æ•°æ¦‚å¿µ.md)
   - [02.4.2 å‡½æ•°æ€§è´¨](02.4.2_å‡½æ•°æ€§è´¨.md)
   - [02.4.3 å‡½æ•°è¿ç®—](02.4.3_å‡½æ•°è¿ç®—.md)
   - [02.4.4 å‡½æ•°åˆ†ç±»](02.4.4_å‡½æ•°åˆ†ç±».md)

5. **å…³ç³»ç†è®º**
   - [02.5.1 å…³ç³»æ¦‚å¿µ](02.5.1_Relation_Concept.md)
   - [02.5.2 å…³ç³»æ€§è´¨](02.5.2_å…³ç³»æ€§è´¨.md)
   - [02.5.4 ç­‰ä»·å…³ç³»](02.5.4_ç­‰ä»·å…³ç³».md)

6. **é«˜çº§ç†è®º**
   - [02.6.1 ç¾¤è®ºåŸºç¡€](02.6.1_Group_Theory_Foundation.md)
   - [02.6.2 ç¯è®ºåŸºç¡€](02.6.2_ç¯è®ºåŸºç¡€.md)
   - [02.6.3 åŸŸè®ºåŸºç¡€](02.6.3_åŸŸè®ºåŸºç¡€.md)
   - [02.6.4 æ¨¡è®ºåŸºç¡€](02.6.4_æ¨¡è®ºåŸºç¡€.md)

---

-**æ–‡æ¡£ä¿¡æ¯**

- **åˆ›å»ºè€…**: å½¢å¼ç§‘å­¦ç†è®ºä½“ç³»é‡æ„é¡¹ç›®
- **åˆ›å»ºæ—¶é—´**: 2024å¹´12æœˆ21æ—¥
- **æœ€åæ›´æ–°**: 2024å¹´12æœˆ21æ—¥
- **ç‰ˆæœ¬**: 1.0
- **çŠ¶æ€**: å·²å®Œæˆ

## æ‰¹åˆ¤æ€§åˆ†æ

- æœ¬èŠ‚å†…å®¹å¾…è¡¥å……ï¼šè¯·ä»å¤šå…ƒç†è®ºè§†è§’ã€å±€é™æ€§ã€äº‰è®®ç‚¹ã€åº”ç”¨å‰æ™¯ç­‰æ–¹é¢è¿›è¡Œæ‰¹åˆ¤æ€§åˆ†æã€‚
