# 04.2 ä¾èµ–ç±»åž‹è®ºï¼ˆDependent Type Theory, DTTï¼‰

**åˆ›å»ºæ—¶é—´**: 2025-01-17  
**æœ€åŽæ›´æ–°**: 2025-01-17  
**æ–‡æ¡£çŠ¶æ€**: æ´»è·ƒ  
**å…³è”æ¨¡å—**: `04_Type_Theory`

## ðŸ“‹ ç›®å½•

- [1 æ¦‚è¿°](#1-æ¦‚è¿°)
- [2 åŽ†å²ä¸ŽèƒŒæ™¯](#2-åŽ†å²ä¸ŽèƒŒæ™¯)
- [3 å½¢å¼ç³»ç»Ÿä¸Žåˆ¤æ–­](#3-å½¢å¼ç³»ç»Ÿä¸Žåˆ¤æ–­)
- [4 å…ƒç†è®ºæ€§è´¨å…¸åž‹ç›®æ ‡](#4-å…ƒç†è®ºæ€§è´¨å…¸åž‹ç›®æ ‡)
- [5 è¯­ä¹‰æ¨¡åž‹ä¸Žè§£é‡Š](#5-è¯­ä¹‰æ¨¡åž‹ä¸Žè§£é‡Š)
- [6 å®žçŽ°ä¸Žå·¥å…·é“¾](#6-å®žçŽ°ä¸Žå·¥å…·é“¾)
- [7 ç¤ºä¾‹ç‰‡æ®µ](#7-ç¤ºä¾‹ç‰‡æ®µ)
- [8 ä¸Žæ¨¡å—å†…ä¸»é¢˜çš„å…³ç³»](#8-ä¸Žæ¨¡å—å†…ä¸»é¢˜çš„å…³ç³»)
- [9 æ–¹æ³•å­¦ä¸Žæ‰¹åˆ¤æ€§å“²å­¦](#9-æ–¹æ³•å­¦ä¸Žæ‰¹åˆ¤æ€§å“²å­¦)
- [10 Wiki å¯¹é½çš„æ¡ç›®ç»“æž„å¯¹å¤–è¯»è€…](#10-wiki-å¯¹é½çš„æ¡ç›®ç»“æž„å¯¹å¤–è¯»è€…)
- [11 å‚è§See also](#11-å‚è§see-also)
- [12 Coq æœ€å°è¯æ˜Žç‰‡æ®µ](#12-coq-æœ€å°è¯æ˜Žç‰‡æ®µ)

---

## 1 æ¦‚è¿°

ä¾èµ–ç±»åž‹è®ºå…è®¸ç±»åž‹ä¾èµ–äºŽé¡¹ï¼ˆå€¼ï¼‰ï¼Œä»¥æ­¤åœ¨ç±»åž‹å±‚çº§è¡¨è¾¾ç²¾ç»†çš„ç¨‹åºä¸Žæ•°å­¦æ€§è´¨ã€‚é€šè¿‡åœ¨ç±»åž‹å±‚ç¼–ç çº¦æŸï¼ˆå¦‚"å‘é‡é•¿åº¦ä¸º n""çŸ©é˜µç»´åº¦ä¸º mÃ—n""æŽ’åºç»“æžœä¿æŒå…ƒç´ å¤šé‡é›†ä¸å˜"ï¼‰ï¼ŒDTT å°†"è¯æ˜Žå³ç¨‹åº"çš„æž„é€ ä¸»ä¹‰è§‚ç‚¹æŽ¨è¿›åˆ°å¯æ‰§è¡Œå±‚é¢ï¼Œæˆä¸ºçŽ°ä»£äº¤äº’å¼å®šç†è¯æ˜Žä¸Žå¯éªŒè¯ç¼–ç¨‹çš„æ ¸å¿ƒåŸºç¡€ã€‚

## 2 åŽ†å²ä¸ŽèƒŒæ™¯

- Church çš„ Î»æ¼”ç®—ä¸Žç±»åž‹åŒ–Î»æ¼”ç®—å¥ å®šè¯­æ³•ä¸Žè¯­ä¹‰åŸºç¡€
- Curryâ€“Howard å¯¹åº”æ­ç¤º"å‘½é¢˜å³ç±»åž‹ï¼Œè¯æ˜Žå³ç¨‹åº"
- Martinâ€‘LÃ¶f æž„é€ ä¸»ä¹‰ç±»åž‹è®ºæå‡ºä¾èµ–å‡½æ•°ï¼ˆÎ ï¼‰ä¸Žä¾èµ–å¯¹ï¼ˆÎ£ï¼‰
- Coquand ç­‰å‘å±• Calculus of Constructions ä¸Žå…¶æ‰©å±•ï¼ˆCoq æ ¸å¿ƒï¼‰
- è¿‘å¹´æ¥ä¸ŽåŒä¼¦ç±»åž‹è®ºï¼ˆHoTTï¼‰å’ŒèŒƒç•´è¯­ä¹‰ï¼ˆCwFã€æ‹ŸèŒƒç•´ï¼‰æ·±åº¦èžåˆ

## 3 å½¢å¼ç³»ç»Ÿä¸Žåˆ¤æ–­

æ ‡å‡†åˆ¤æ–­ï¼ˆéšå…·ä½“ç³»ç»Ÿç•¥æœ‰å·®å¼‚ï¼‰ï¼š

- `Î“ âŠ¢ A : ð’°áµ¢`  ç±»åž‹å½¢æˆï¼ˆA æ˜¯ç¬¬ i å±‚å®‡å®™çš„ç±»åž‹ï¼‰
- `Î“ âŠ¢ a : A`    é¡¹å½¢æˆï¼ˆa çš„ç±»åž‹ä¸º Aï¼‰
- `Î“ âŠ¢ A â‰¡ B`    ç±»åž‹ç›¸ç­‰ï¼ˆæˆ– `A = B`ï¼‰
- `Î“ âŠ¢ a â‰¡ b : A` é¡¹ç›¸ç­‰ï¼ˆæˆ– `a = b : A`ï¼‰

æ ¸å¿ƒæž„é€ ä¸Žå½¢æˆè§„åˆ™ï¼ˆç¤ºä¾‹ï¼‰ï¼š

- Î â€‘ç±»åž‹ï¼ˆä¾èµ–å‡½æ•°ï¼‰  `Î  (x : A). B(x)`  è¡¨ç¤ºä¾èµ–äºŽ x çš„è¿”å›žç±»åž‹
- Î£â€‘ç±»åž‹ï¼ˆä¾èµ–å¯¹ï¼‰    `Î£ (x : A). B(x)`  è¡¨ç¤º `(a : A, b : B(a))`
- Idâ€‘ç±»åž‹ï¼ˆæ’ç­‰/ç›¸ç­‰ï¼‰  `Id_A(a, b)` æˆ– `a =_A b`
- Wâ€‘ç±»åž‹ï¼ˆå¹¿ä¹‰å½’çº³ï¼‰   æž„é€ ä¸€èˆ¬å½’çº³æ•°æ®ç±»åž‹
- è‡ªç„¶æ•°ã€åˆ—è¡¨ã€æ ‘ç­‰å½’çº³ç±»åž‹ ç”±å½’çº³åŽŸç†ä¸Žæ¶ˆåŽ»å­åˆ»ç”»
- å®‡å®™å±‚çº§ `ð’°â‚€ : ð’°â‚ : ð’°â‚‚ : â€¦`ï¼ˆå¯ç´¯ç§¯/éžç´¯ç§¯ï¼‰é¿å… Girard æ‚–è®º

ç¤ºä¾‹ï¼ˆè§„åˆ™ç¤ºæ„ï¼‰ï¼š

- Î â€‘å½¢æˆï¼š`Î“ âŠ¢ A : ð’°áµ¢, Î“, x:A âŠ¢ B(x) : ð’°â±¼  â‡’  Î“ âŠ¢ Î x:A. B(x) : ð’°_max(i,j)`
- Î»â€‘å¼•å…¥ï¼š`Î“, x:A âŠ¢ t : B(x)  â‡’  Î“ âŠ¢ (Î»x. t) : Î x:A. B(x)`
- åº”ç”¨æ¶ˆåŽ»ï¼š`Î“ âŠ¢ f : Î x:A. B(x), Î“ âŠ¢ a : A  â‡’  Î“ âŠ¢ f a : B(a)`
- Î²/Î· è§„å¾‹ï¼šç¡®ä¿å‡½æ•°ä¸Žä¾èµ–å¯¹çš„è§„èŒƒè®¡ç®—è¡Œä¸º

## 4 å…ƒç†è®ºæ€§è´¨å…¸åž‹ç›®æ ‡

- è¿›å±•ï¼ˆProgressï¼‰ä¸Žä¿åž‹ï¼ˆPreservationï¼‰ï¼šæ‰§è¡Œä¸é™·å…¥ã€ç±»åž‹éšæ‰§è¡Œä¿æŒ
- å¼ºè§„èŒƒåŒ–/å¼±è§„èŒƒåŒ–ï¼šé¡¹å½’çº¦è‡³è§„èŒƒå½¢ï¼ˆè§†ç³»ç»Ÿä¸Žæ‰©å±•è€Œå®šï¼‰
- ä¸€è‡´æ€§ï¼šä¸å¯æŽ¨å‡ºç©ºç±»åž‹ inhabitï¼ˆä¸Žå¤–å»¶æ€§ã€å…¬ç†æ‰©å±•ç›¸å…³ï¼‰
- å¯åˆ¤å®šæ€§ï¼šç±»åž‹æ£€æŸ¥ä¸Žç›¸ç­‰åˆ¤å®šçš„å¯è®¡ç®—æ€§ï¼ˆä¾èµ–äºŽç›¸ç­‰å®šä¹‰ä¸Žå†…æ ¸è®¾è®¡ï¼‰
- è§„èŒƒæ€§ï¼ˆCanonicityï¼‰ï¼šå¦‚ `Nat` ä¸Šé—­é¡¹èƒ½åŒ–å½’åˆ°æ ‡å‡†æž„é€ å­

è¯´æ˜Žï¼šä¸åŒé£Žæ ¼ï¼ˆå†…æ¶µ/å¤–å»¶ã€å¸¦å…¬ç†çš„ HoTTã€Cubical ç­‰ï¼‰åœ¨ä¸Šè¿°æ€§è´¨ä¸Šå„æœ‰å–èˆã€‚

## 5 è¯­ä¹‰æ¨¡åž‹ä¸Žè§£é‡Š

- é›†åˆè®º/é›†åˆä»£æ•°è¯­ä¹‰ï¼šä»¥é›†åˆä¸Žå‡½æ•°è§£é‡Šç±»åž‹ä¸Žé¡¹ï¼ˆå—æœªå®šç†/é€‰æ‹©å…¬ç†å½±å“ï¼‰
- PER/Setoid è¯­ä¹‰ï¼šä»¥åŒå€¼å…³ç³»åˆ»ç”»å¯è®¡ç®—ç­‰ä»·ï¼ŒæœåŠ¡äºŽå¯è®¡ç®—æ€§ä¸ŽæŠ½è±¡æ€§
- èŒƒç•´è¯­ä¹‰ï¼šCwFï¼ˆæœ‰å®¶æ—çš„èŒƒç•´ï¼‰ã€æ—èŒƒç•´ã€ä¾èµ–ç¬›å¡å„¿é—­èŒƒç•´ç­‰
- åŒä¼¦è¯­ä¹‰ï¼šä»¥ç©ºé—´/è·¯å¾„è§£é‡Šç›¸ç­‰ä¸Žé«˜ç»´ç»“æž„ï¼ˆä¸Ž HoTT æŽ¥è½¨ï¼‰
- ç«‹æ–¹ä½“/æ‹ŸèŒƒç•´æ¨¡åž‹ï¼šæ”¯æ’‘ Univalence ä¸Žé«˜å½’çº³ç±»åž‹çš„å¯è®¡ç®—è¯­ä¹‰

## 6 å®žçŽ°ä¸Žå·¥å…·é“¾

- Coqï¼šCalculus of Inductive Constructionsï¼ˆCICï¼‰ï¼Œæ”¯æŒä¾èµ–/å½’çº³ç±»åž‹ä¸Žç¨‹åºæå–
- Agdaï¼šä¾èµ–ç±»åž‹è¯­è¨€ï¼Œäº¤äº’å¼æž„é€ è¯æ˜Žï¼Œæ¨¡å¼åŒ¹é…å‹å¥½
- Leanï¼šä¾èµ–ç±»åž‹å®šç†è¯æ˜Žå™¨ï¼ŒMathlib ç”Ÿæ€å‘è¾¾ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–ä¸Žå…ƒç¼–ç¨‹
- Idris/Fâ˜…ï¼šæ›´åå¯æ‰§è¡Œä¸Žå·¥ç¨‹åŒ–çš„ä¾èµ–ç±»åž‹è¯­è¨€ï¼Œç”¨äºŽå®‰å…¨ç¼–ç¨‹ä¸ŽéªŒè¯

å…¸åž‹å®žè·µï¼š

- è§„èŒƒåŒ–ç¼–è¯‘å™¨/è§£é‡Šå™¨è¯æ˜Žï¼ˆç±»åž‹ä¿åž‹ã€è¯­ä¹‰ä¿ç•™ï¼‰
- åè®®/å¯†ç å­¦æ€§è´¨éªŒè¯ï¼ˆå®‰å…¨æ€§ã€ç»ˆæ­¢æ€§ã€ä¿¡æ¯æµï¼‰
- ç®—æ³•æ­£ç¡®æ€§ä¸Žå¤æ‚åº¦ä¸å˜é‡åœ¨ç±»åž‹å±‚ç¼–ç 

## 7 ç¤ºä¾‹ç‰‡æ®µ

```agda
-- ä»¥å‘é‡é•¿åº¦ä¸ºç±»åž‹å‚æ•°çš„å®‰å…¨æ“ä½œï¼ˆç¤ºæ„ï¼‰
record Vec (A : Set) (n : Nat) : Set where
  constructor _::_
  field head : A
        tail : Vec A n

safeHead : âˆ€ {A n} â†’ Vec A (suc n) â†’ A
safeHead v = Vec.head v
```

```lean
-- ä¾èµ–è¿”å›žç±»åž‹ç¤ºæ„ï¼šé•¿åº¦ä¿å½¢æ˜ å°„
def mapVec {Î± Î² : Type} {n : Nat}
  (f : Î± â†’ Î²) : Vector Î± n â†’ Vector Î² n :=
Î» v => Vector.map f v
```

## 8 ä¸Žæ¨¡å—å†…ä¸»é¢˜çš„å…³ç³»

- ä¸Ž `04.1 ç®€å•ç±»åž‹ç†è®º`ï¼šDTT æ³›åŒ– STLC çš„å‡½æ•°/ç§¯/å’Œç±»åž‹ï¼Œå¢žåŠ ä¾èµ–æ€§ä¸Žå®‡å®™
- ä¸Ž `04.3 çº¿æ€§ç±»åž‹ç†è®º`ï¼šå¯èžåˆèµ„æºçº¦æŸå½¢æˆä¾èµ–â€‘çº¿æ€§ä½“ç³»ï¼ˆDILL ç­‰ï¼‰
- ä¸Ž `04.4 åŒä¼¦ç±»åž‹è®º (HoTT)`ï¼šåœ¨ç­‰åŒæ€§ä¸Žé«˜ç»´ç»“æž„ä¸Šè¿›ä¸€æ­¥å…¬ç†åŒ–ï¼ˆUnivalence/HITsï¼‰
- ä¸Ž `04.5 Curryâ€“Howard`ï¼šå°†"å‘½é¢˜å³ç±»åž‹"æ‹“å±•åˆ°ä¾èµ–å‘½é¢˜ã€è¯æ˜Ž/ç¨‹åºç»Ÿä¸€

## 9 æ–¹æ³•å­¦ä¸Žæ‰¹åˆ¤æ€§å“²å­¦

- æž„é€ ä¸»ä¹‰ä¸Žæœ¬ä½“è®ºï¼šæ•°å­¦å¯¹è±¡çš„å­˜åœ¨é¡»ç”±æž„é€ ç»™å‡ºï¼ŒæŠµåˆ¶ä¸å¯æž„é€ å­˜åœ¨è®º
- è®¤è¯†è®ºï¼šçŸ¥è¯†å³å¯æ£€éªŒçš„æž„é€ ï¼Œè¯æ˜Žå³ç¨‹åºçš„å¯æ‰§è¡Œæ€§å¼ºåŒ–äº†"å¯çŸ¥å³å¯ä¸º"
- è¯­ä¹‰å¤šå…ƒï¼šé›†åˆã€èŒƒç•´ã€åŒä¼¦ç­‰å¤šé‡è§£é‡Šå½¼æ­¤åˆ¶è¡¡ï¼Œé˜²æ­¢å•ä¸€è¯­ä¹‰ç‹¬æ–­
- å·¥ç¨‹ä¸Žä¼¦ç†ï¼šå½¢å¼åŒ–éªŒè¯é™ä½Žç³»ç»Ÿæ€§é£Žé™©ï¼Œä½†æˆæœ¬ä¸Žé—¨æ§›æž„æˆæ–°çš„ä¸å¹³ç­‰
- å…ƒåæ€ï¼šå½“è¯æ˜Žæˆä¸ºç¨‹åºï¼Œè°åº”ä¸ºè¯æ˜Žâ€‘ç¨‹åºç¼ºé™·è´Ÿè´£ï¼Ÿå¦‚ä½•æ²»ç†å·¥å…·åè§ï¼Ÿ

## 10 Wiki å¯¹é½çš„æ¡ç›®ç»“æž„å¯¹å¤–è¯»è€…

- æ¦‚è¿°ï½œåŽ†å²ï½œè¯­æ³•ä¸Žè¯­ä¹‰ï½œè§„åˆ™ä¸Žè®¡ç®—ï½œå…ƒæ€§è´¨ï½œæ¨¡åž‹ï½œå®žçŽ°ï½œåº”ç”¨ï½œæ‰¹åˆ¤ï½œå‚è§ï½œå‚è€ƒ

## 11 å‚è§See also

- [04.1 ç®€å•ç±»åž‹ç†è®º](../04.1_Simple_Type_Theory/04.1_Simple_Type_Theory.md)
- [04.3 çº¿æ€§ç±»åž‹ç†è®º](../04.3_Linear_Type_Theory/05.3_Linear_Type_Theory.md)
- [04.4 åŒä¼¦ç±»åž‹ç†è®º](../04.4_Homotopy_Type_Theory/05.4_Homotopy_Type_Theory.md)
- [04.5 Curry-Howard å¯¹åº”](../04.5_Curry_Howard_Correspondence/05.5_Curry_Howard_Correspondence.md)
- [ç»Ÿä¸€æœ¯è¯­è¡¨](../TERMINOLOGY_TABLE.md)

## ðŸ“– å‚è€ƒæ–‡çŒ®ï¼ˆç²¾é€‰ï¼‰

1. Martin-LÃ¶f, P. (1975). An intuitionistic theory of types. *Preprint*, University of Stockholm.
2. Coquand, T., & Huet, G. (1988). The calculus of constructions. *Information and Computation*, 76(2-3), 95-120.
3. The Univalent Foundations Program. (2013). *Homotopy Type Theory: Univalent Foundations of Mathematics*. Institute for Advanced Study.
4. Benton, N., Bierman, G., de Paiva, V., & Hyland, M. (1993). A term calculus for intuitionistic linear logic. *TLCA*, 75-90.
5. Harper, R. (2016). *Practical Foundations for Programming Languages*. Cambridge University Press.

## 12 Coq æœ€å°è¯æ˜Žç‰‡æ®µ

```coq
(* Î -ç±»åž‹ï¼šä¾èµ–å‡½æ•° *)
Definition id_family (A : Type) : A -> A := fun x => x.

(* Î£-ç±»åž‹ï¼šä¾èµ–å¯¹ *)
Inductive sigT {A : Type} (P : A -> Type) : Type :=
  existT : forall x : A, P x -> sigT P.

(* Id-ç±»åž‹ï¼šåŒä¸€æ€§ç±»åž‹ *)
Inductive eq {A : Type} (x : A) : A -> Prop :=
  eq_refl : eq x x.

(* ç¤ºä¾‹ï¼šå‘é‡é•¿åº¦ä¿æŒ *)
Fixpoint map_vec {A B : Type} (f : A -> B) {n : nat} 
  (v : Vector.t A n) : Vector.t B n :=
  match v with
  | Vector.nil => Vector.nil
  | Vector.cons h t => Vector.cons (f h) (map_vec f t)
  end.
```
