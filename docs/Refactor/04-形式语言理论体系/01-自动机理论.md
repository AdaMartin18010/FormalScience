# 01-自动机理论 (Automata Theory)

## 目录

1. [有限自动机](#1-有限自动机)
2. [下推自动机](#2-下推自动机)
3. [图灵机](#3-图灵机)
4. [自动机层次](#4-自动机层次)
5. [计算复杂性](#5-计算复杂性)
6. [形式化证明](#6-形式化证明)
7. [应用与实现](#7-应用与实现)

## 1. 有限自动机

### 1.1 确定性有限自动机

**定义 1.1.1 (DFA)**
确定性有限自动机是一个五元组 $M = (Q, \Sigma, \delta, q_0, F)$，其中：

- $Q$ 是有限状态集合
- $\Sigma$ 是有限输入字母表
- $\delta : Q \times \Sigma \rightarrow Q$ 是转移函数
- $q_0 \in Q$ 是初始状态
- $F \subseteq Q$ 是接受状态集合

**定义 1.1.2 (DFA计算)**
DFA的计算是状态序列 $q_0, q_1, \ldots, q_n$，其中 $q_{i+1} = \delta(q_i, a_i)$

**定义 1.1.3 (DFA接受)**
DFA接受字符串 $w = a_1a_2\ldots a_n$ 当且仅当 $\delta^*(q_0, w) \in F$

**定理 1.1.1 (DFA等价性)**
两个DFA等价当且仅当它们接受相同的语言。

### 1.2 非确定性有限自动机

**定义 1.1.4 (NFA)**
非确定性有限自动机是一个五元组 $M = (Q, \Sigma, \delta, q_0, F)$，其中：

- $\delta : Q \times \Sigma \rightarrow \mathcal{P}(Q)$ 是转移函数

**定理 1.1.2 (DFA-NFA等价性)**
对于每个NFA，存在等价的DFA。

**证明：** 通过子集构造：

```haskell
-- 子集构造
subsetConstruction :: NFA -> DFA
subsetConstruction nfa = 
  let states = powerSet (nfaStates nfa)
      transitions = map (\s -> (s, map (\a -> epsilonClosure (nfaTransition s a)) (alphabet nfa))) states
      initial = epsilonClosure [initialState nfa]
      accepting = filter (\s -> any (\q -> q `member` acceptingStates nfa) s) states
  in DFA { states = states
         , alphabet = alphabet nfa
         , transition = transitions
         , initialState = initial
         , acceptingStates = accepting }
```

### 1.3 正则表达式

**定义 1.1.5 (正则表达式)**
正则表达式的语法：
$$R ::= \emptyset \mid \epsilon \mid a \mid R_1 \cup R_2 \mid R_1 \circ R_2 \mid R^*$$

**定理 1.1.3 (克莱尼定理)**
正则表达式、DFA、NFA都定义相同的语言类。

## 2. 下推自动机

### 2.1 确定性下推自动机

**定义 2.1.1 (DPDA)**
确定性下推自动机是一个七元组 $M = (Q, \Sigma, \Gamma, \delta, q_0, Z_0, F)$，其中：

- $Q$ 是有限状态集合
- $\Sigma$ 是输入字母表
- $\Gamma$ 是栈字母表
- $\delta : Q \times \Sigma \times \Gamma \rightarrow Q \times \Gamma^*$ 是转移函数
- $q_0 \in Q$ 是初始状态
- $Z_0 \in \Gamma$ 是初始栈符号
- $F \subseteq Q$ 是接受状态集合

**定义 2.1.2 (DPDA配置)**
DPDA的配置是三元组 $(q, w, \gamma)$，其中 $q$ 是状态，$w$ 是剩余输入，$\gamma$ 是栈内容。

### 2.2 上下文无关文法

**定义 2.1.3 (CFG)**
上下文无关文法是一个四元组 $G = (V, T, P, S)$，其中：

- $V$ 是非终结符集合
- $T$ 是终结符集合
- $P$ 是产生式集合
- $S \in V$ 是开始符号

**定理 2.1.1 (CFG-PDA等价性)**
上下文无关文法与下推自动机等价。

## 3. 图灵机

### 3.1 标准图灵机

**定义 3.1.1 (TM)**
图灵机是一个七元组 $M = (Q, \Sigma, \Gamma, \delta, q_0, B, F)$，其中：

- $Q$ 是有限状态集合
- $\Sigma$ 是输入字母表
- $\Gamma$ 是带字母表
- $\delta : Q \times \Gamma \rightarrow Q \times \Gamma \times \{L, R\}$ 是转移函数
- $q_0 \in Q$ 是初始状态
- $B \in \Gamma$ 是空白符号
- $F \subseteq Q$ 是接受状态集合

**定义 3.1.2 (TM计算)**
图灵机的计算是配置序列，每个配置包含状态、带内容和读写头位置。

**定理 3.1.1 (丘奇-图灵论题)**
所有有效计算都是图灵可计算的。

### 3.2 图灵机变种

**定义 3.1.3 (多带图灵机)**
多带图灵机有多个带，每个带都有自己的读写头。

**定义 3.1.4 (非确定性图灵机)**
非确定性图灵机的转移函数返回可能转移的集合。

**定理 3.1.2 (图灵机等价性)**
所有图灵机变种在计算能力上等价。

## 4. 自动机层次

### 4.1 乔姆斯基层次

**定义 4.1.1 (乔姆斯基层次)**
乔姆斯基层次定义了语言类的层次：

- **类型0**：递归可枚举语言（图灵机）
- **类型1**：上下文相关语言（线性有界自动机）
- **类型2**：上下文无关语言（下推自动机）
- **类型3**：正则语言（有限自动机）

**定理 4.1.1 (层次包含关系)**
$\text{Type3} \subset \text{Type2} \subset \text{Type1} \subset \text{Type0}$

### 4.2 语言类性质

**定理 4.1.2 (正则语言性质)**
正则语言在并、交、补、连接、星号运算下封闭。

**定理 4.1.3 (CFL性质)**
上下文无关语言在并、连接、星号运算下封闭，但在交、补运算下不封闭。

## 5. 计算复杂性

### 5.1 时间复杂度

**定义 5.1.1 (时间复杂度)**
图灵机 $M$ 的时间复杂度是函数 $T(n) = \max\{t_M(w) \mid |w| = n\}$，其中 $t_M(w)$ 是 $M$ 在输入 $w$ 上的步数。

**定义 5.1.2 (复杂度类)**
- **P**：多项式时间可解的问题
- **NP**：非确定性多项式时间可解的问题
- **PSPACE**：多项式空间可解的问题

### 5.2 空间复杂度

**定义 5.1.3 (空间复杂度)**
图灵机的空间复杂度是函数 $S(n) = \max\{s_M(w) \mid |w| = n\}$，其中 $s_M(w)$ 是 $M$ 在输入 $w$ 上使用的带格子数。

**定理 5.1.1 (时间空间关系)**
$T(n) \leq S(n) \leq 2^{O(S(n))}$

## 6. 形式化证明

### 6.1 泵引理

**定理 6.1.1 (正则语言泵引理)**
对于正则语言 $L$，存在泵长度 $p$ 使得对于所有 $w \in L$ 且 $|w| \geq p$，存在分解 $w = xyz$ 满足：

1. $|xy| \leq p$
2. $|y| > 0$
3. $\forall i \geq 0 : xy^iz \in L$

**证明：** 通过有限自动机的状态重复。

### 6.2 不可判定性

**定理 6.1.2 (停机问题)**
停机问题是不可判定的。

**证明：** 通过对角线论证。

## 7. 应用与实现

### 7.1 编译器设计

**应用 7.1.1 (词法分析)**
使用有限自动机进行词法分析：

```haskell
-- 词法分析器
lexicalAnalyzer :: String -> [Token]
lexicalAnalyzer input = 
  let dfa = constructLexicalDFA
      tokens = scanTokens dfa input
  in tokens

-- 词法扫描
scanTokens :: DFA -> String -> [Token]
scanTokens dfa input = 
  let states = runDFA dfa input
      tokens = extractTokens states
  in tokens
```

### 7.2 语法分析

**应用 7.2.1 (语法分析)**
使用下推自动机进行语法分析：

```haskell
-- 语法分析器
syntaxAnalyzer :: [Token] -> ParseTree
syntaxAnalyzer tokens = 
  let pda = constructSyntaxPDA
      parseTree = runPDA pda tokens
  in parseTree
```

## 总结

自动机理论提供了：

1. **计算模型**：从简单到复杂的计算模型
2. **语言分类**：乔姆斯基层次的语言分类
3. **复杂度分析**：时间和空间复杂度理论
4. **形式化方法**：严格的数学证明方法
5. **实际应用**：编译器、解析器等实际应用

该理论为计算机科学提供了重要的理论基础。 