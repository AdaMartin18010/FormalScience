# å•å­ç†è®º (Monad Theory)

> **ä¸»é¢˜**: èŒƒç•´è®ºä¸­çš„è®¡ç®—æ•ˆåº”æŠ½è±¡
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-02
> **éš¾åº¦**: â­â­â­â­
> **åº”ç”¨**: Haskell, å‰¯ä½œç”¨ç®¡ç†, ä»£æ•°æ•ˆåº”

---

## ğŸ“‹ ç›®å½•

- [å•å­ç†è®º (Monad Theory)](#å•å­ç†è®º-monad-theory)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. åŠ¨æœº](#1-åŠ¨æœº)
    - [1.1 å‰¯ä½œç”¨é—®é¢˜](#11-å‰¯ä½œç”¨é—®é¢˜)
    - [1.2 å•å­è§£å†³æ–¹æ¡ˆ](#12-å•å­è§£å†³æ–¹æ¡ˆ)
  - [2. èŒƒç•´è®ºå®šä¹‰](#2-èŒƒç•´è®ºå®šä¹‰)
    - [2.1 å•å­ä¸‰å…ƒç»„](#21-å•å­ä¸‰å…ƒç»„)
    - [2.1.1 æ¦‚å¿µåˆ†æï¼šå•å­](#211-æ¦‚å¿µåˆ†æå•å­)
      - [å®šä¹‰çŸ©é˜µ](#å®šä¹‰çŸ©é˜µ)
      - [å±æ€§åˆ†æ](#å±æ€§åˆ†æ)
      - [å¤–å»¶åˆ†æ](#å¤–å»¶åˆ†æ)
      - [å†…æ¶µåˆ†æ](#å†…æ¶µåˆ†æ)
      - [å…³ç³»ç½‘ç»œ](#å…³ç³»ç½‘ç»œ)
    - [2.2 å•å­å¾‹](#22-å•å­å¾‹)
  - [3. KleislièŒƒç•´](#3-kleislièŒƒç•´)
  - [4. å¸¸è§å•å­](#4-å¸¸è§å•å­)
    - [4.1 Maybeå•å­](#41-maybeå•å­)
    - [4.2 Listå•å­](#42-listå•å­)
    - [4.3 Stateå•å­](#43-stateå•å­)
    - [4.4 IOå•å­](#44-ioå•å­)
  - [5. å•å­å˜æ¢å™¨](#5-å•å­å˜æ¢å™¨)
  - [6. ä¸ä»£æ•°ç†è®º](#6-ä¸ä»£æ•°ç†è®º)
    - [6.1 å•å­ä¸ä»£æ•°](#61-å•å­ä¸ä»£æ•°)
    - [6.2 ä»£æ•°æ•ˆåº”](#62-ä»£æ•°æ•ˆåº”)
  - [7. æ‰¹åˆ¤æ€§åˆ†æ](#7-æ‰¹åˆ¤æ€§åˆ†æ)
    - [7.1 ç†è®ºä¼˜åŠ¿](#71-ç†è®ºä¼˜åŠ¿)
    - [7.2 å®è·µä»·å€¼](#72-å®è·µä»·å€¼)
    - [7.3 äº‰è®®](#73-äº‰è®®)
  - [8. æ€ç»´è¡¨å¾ï¼šå•å­ç†è®º](#8-æ€ç»´è¡¨å¾å•å­ç†è®º)
    - [8.1 æ¦‚å¿µå…³ç³»ç½‘ç»œå›¾](#81-æ¦‚å¿µå…³ç³»ç½‘ç»œå›¾)
    - [8.2 è®ºè¯é€»è¾‘è·¯å¾„å›¾](#82-è®ºè¯é€»è¾‘è·¯å¾„å›¾)
    - [8.3 æ¦‚å¿µå±æ€§çŸ©é˜µ](#83-æ¦‚å¿µå±æ€§çŸ©é˜µ)
    - [8.4 å¤–å»¶å†…æ¶µåˆ†æå›¾](#84-å¤–å»¶å†…æ¶µåˆ†æå›¾)
    - [8.5 ç†è®ºå‘å±•è„‰ç»œå›¾](#85-ç†è®ºå‘å±•è„‰ç»œå›¾)
    - [8.6 è·¨æ¨¡å—å…³è”å›¾](#86-è·¨æ¨¡å—å…³è”å›¾)
  - [9. æƒå¨èµ„æºå¯¹æ ‡](#9-æƒå¨èµ„æºå¯¹æ ‡)
    - [9.1 Wikipediaå¯¹æ ‡](#91-wikipediaå¯¹æ ‡)
    - [9.2 å›½é™…è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡](#92-å›½é™…è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡)
      - [9.2.1 MIT 18.S097 (Programming with Categories)](#921-mit-18s097-programming-with-categories)
      - [9.2.2 Cambridge Part III (Category Theory)](#922-cambridge-part-iii-category-theory)
    - [9.3 æƒå¨æ•™æå¯¹æ ‡](#93-æƒå¨æ•™æå¯¹æ ‡)
      - [9.3.1 Mac Lane, "Categories for the Working Mathematician"](#931-mac-lane-categories-for-the-working-mathematician)
      - [9.3.2 Moggi, "Notions of Computation and Monads" (1991)](#932-moggi-notions-of-computation-and-monads-1991)
  - [ğŸ“š å‚è€ƒæ–‡çŒ®](#-å‚è€ƒæ–‡çŒ®)
    - [èŒƒç•´è®º](#èŒƒç•´è®º)
    - [è®¡ç®—åº”ç”¨](#è®¡ç®—åº”ç”¨)
    - [Haskell](#haskell)
    - [åœ¨çº¿èµ„æº](#åœ¨çº¿èµ„æº)
  - [ğŸ¯ å…³é”®è¦ç‚¹](#-å…³é”®è¦ç‚¹)
    - [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
    - [æ·±åˆ»æ´å¯Ÿ](#æ·±åˆ»æ´å¯Ÿ)
    - [å®è·µæ„ä¹‰](#å®è·µæ„ä¹‰)
  - [10. ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾](#10-ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾)
    - [10.1 è®ºè¯ä¾èµ–å…³ç³»](#101-è®ºè¯ä¾èµ–å…³ç³»)
    - [10.2 æ¦‚å¿µä¾èµ–å…³ç³»](#102-æ¦‚å¿µä¾èµ–å…³ç³»)
  - [11. å‚è€ƒèµ„æº](#11-å‚è€ƒèµ„æº)
    - [11.1 ç»å…¸è®ºæ–‡](#111-ç»å…¸è®ºæ–‡)
    - [11.2 æ•™æ](#112-æ•™æ)
    - [11.3 åœ¨çº¿èµ„æº](#113-åœ¨çº¿èµ„æº)

---

## 1. åŠ¨æœº

### 1.1 å‰¯ä½œç”¨é—®é¢˜

**çº¯å‡½æ•°å¼ç¼–ç¨‹å›°å¢ƒ**:

```haskell
-- çº¯å‡½æ•°
add :: Int -> Int -> Int
add x y = x + y  -- æ— å‰¯ä½œç”¨

-- ä½†ç°å®éœ€è¦å‰¯ä½œç”¨:
print :: String -> ???  -- IOå‰¯ä½œç”¨
readFile :: FilePath -> ???  -- IO
parseJSON :: String -> ???  -- å¯èƒ½å¤±è´¥
random :: () -> ???  -- éç¡®å®šæ€§

é—®é¢˜: å¦‚ä½•åœ¨çº¯å‡½æ•°ä¸­å¤„ç†å‰¯ä½œç”¨ï¼Ÿ
```

### 1.2 å•å­è§£å†³æ–¹æ¡ˆ

**æ ¸å¿ƒæ€æƒ³**:

> å°†å‰¯ä½œç”¨"åŒ…è£…"åœ¨ç±»å‹ä¸­

```haskell
print :: String -> IO ()
readFile :: FilePath -> IO String
parseJSON :: String -> Maybe Value
random :: () -> State StdGen Int

å‰¯ä½œç”¨åœ¨ç±»å‹ä¸­æ˜ç¡®æ ‡æ³¨ âœ…
```

**ç»„åˆå‰¯ä½œç”¨**:

```haskell
-- ç»„åˆå¸¦å‰¯ä½œç”¨çš„è®¡ç®—
do
  file <- readFile "config.json"
  config <- parseJSON file
  print (show config)

-- å•å­æä¾›ç»„åˆæœºåˆ¶ï¼
```

---

## 2. èŒƒç•´è®ºå®šä¹‰

### 2.1 å•å­ä¸‰å…ƒç»„

**å®šä¹‰2.1** (å•å­):

èŒƒç•´ $\mathcal{C}$ ä¸Šçš„**å•å­** (Monad) æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ $(T, \eta, \mu)$ï¼Œå…¶ä¸­ï¼š

- **$T: \mathcal{C} \to \mathcal{C}$**: è‡ªå‡½å­
- **$\eta: \text{Id} \to T$**: å•ä½è‡ªç„¶å˜æ¢ï¼ˆunit/returnï¼‰
- **$\mu: T^2 \to T$**: ä¹˜æ³•è‡ªç„¶å˜æ¢ï¼ˆmultiplication/bindï¼‰

æ»¡è¶³å•å­å¾‹ï¼š

1. **å·¦å•ä½å¾‹**: $\mu \circ T\eta = \text{id}_T$
2. **å³å•ä½å¾‹**: $\mu \circ \eta T = \text{id}_T$
3. **ç»“åˆå¾‹**: $\mu \circ T\mu = \mu \circ \mu T$

### 2.1.1 æ¦‚å¿µåˆ†æï¼šå•å­

#### å®šä¹‰çŸ©é˜µ

| ç»´åº¦ | å†…å®¹ |
|------|------|
| **å½¢å¼åŒ–å®šä¹‰** | $(T, \eta, \mu)$ æ»¡è¶³å•å­å¾‹ |
| **ç›´è§‚ç†è§£** | è®¡ç®—æ•ˆåº”çš„æŠ½è±¡ï¼Œå‰¯ä½œç”¨çš„ç®¡ç† |
| **ç­‰ä»·å®šä¹‰** | 1. ä¸‰å…ƒç»„å®šä¹‰<br>2. KleislièŒƒç•´å®šä¹‰<br>3. ä»£æ•°å®šä¹‰ |
| **å†å²å®šä¹‰** | Eilenberg & Moore (1965): ä»£æ•°ç†è®º<br>Moggi (1991): è®¡ç®—åº”ç”¨ |

#### å±æ€§åˆ†æ

**å¿…è¦å±æ€§** (Necessary Properties):

1. **å‡½å­æ€§**: $T$ æ˜¯è‡ªå‡½å­
2. **å•ä½æ€§**: $\eta$ æ˜¯å•ä½è‡ªç„¶å˜æ¢
3. **ç»“åˆæ€§**: $\mu$ æ»¡è¶³ç»“åˆå¾‹

**å……åˆ†å±æ€§** (Sufficient Properties):

1. **å•å­å¾‹**: æ»¡è¶³ä¸‰ä¸ªå•å­å¾‹
2. **è‡ªç„¶æ€§**: $\eta$ å’Œ $\mu$ æ˜¯è‡ªç„¶å˜æ¢

**æœ¬è´¨å±æ€§** (Essential Properties):

1. **æ•ˆåº”æŠ½è±¡**: æŠ½è±¡è®¡ç®—æ•ˆåº”
2. **ç»„åˆæ€§**: å¯ä»¥ç»„åˆå¸¦æ•ˆåº”çš„è®¡ç®—
3. **ä»£æ•°æ€§**: ä¸ä»£æ•°ç†è®ºå¯¹åº”

**å¶ç„¶å±æ€§** (Accidental Properties):

1. **å…·ä½“å®ç°**: Maybeã€Listã€Stateç­‰å…·ä½“å•å­
2. **åº”ç”¨é¢†åŸŸ**: Haskellã€å‡½æ•°å¼ç¼–ç¨‹ç­‰
3. **è¯­æ³•ç³–**: do notationç­‰è¯­æ³•

#### å¤–å»¶åˆ†æ

**åŒ…å«çš„å®ä¾‹**:

1. **Maybeå•å­**: å¤„ç†å¯èƒ½å¤±è´¥çš„è®¡ç®—
2. **Listå•å­**: å¤„ç†éç¡®å®šæ€§è®¡ç®—
3. **Stateå•å­**: å¤„ç†çŠ¶æ€è®¡ç®—
4. **IOå•å­**: å¤„ç†è¾“å…¥è¾“å‡º
5. **Readerå•å­**: å¤„ç†ç¯å¢ƒè®¡ç®—

**åŒ…å«çš„å­ç±»**:

1. **å¼ºå•å­**: æ»¡è¶³é¢å¤–æ¡ä»¶çš„å•å­
2. **å¯äº¤æ¢å•å­**: æ»¡è¶³äº¤æ¢æ€§çš„å•å­
3. **å•å­å˜æ¢å™¨**: ç»„åˆå•å­çš„æœºåˆ¶

**è¾¹ç•Œæƒ…å†µ**:

1. **æ’ç­‰å•å­**: æœ€ç®€å•çš„å•å­
2. **å¹³å‡¡å•å­**: é€€åŒ–æƒ…å†µ

#### å†…æ¶µåˆ†æ

**æ ¸å¿ƒç‰¹å¾**:

1. **æ•ˆåº”æŠ½è±¡**: å°†å‰¯ä½œç”¨æŠ½è±¡ä¸ºç±»å‹
2. **ç»„åˆæ€§**: å¯ä»¥ç»„åˆå¸¦æ•ˆåº”çš„è®¡ç®—
3. **ä»£æ•°æ€§**: ä¸ä»£æ•°ç†è®ºå¯¹åº”

**æœ¬è´¨å±æ€§**:

1. **è®¡ç®—æ•ˆåº”**: ç®¡ç†è®¡ç®—ä¸­çš„å‰¯ä½œç”¨
2. **ç±»å‹å®‰å…¨**: åœ¨ç±»å‹ç³»ç»Ÿä¸­ä¿è¯å®‰å…¨
3. **ç»„åˆæ€§**: æä¾›ç»„åˆæœºåˆ¶

**ä¸å…¶ä»–æ¦‚å¿µçš„åŒºåˆ«**:

| æ¦‚å¿µ | åŒºåˆ« |
|------|------|
| **å‡½å­** | å•å­æ˜¯ç‰¹æ®Šçš„å‡½å­ï¼Œå¸¦æœ‰é¢å¤–ç»“æ„ |
| **åº”ç”¨å‡½å­** | å•å­æ˜¯åº”ç”¨å‡½å­çš„æ‰©å±• |
| **ä»£æ•°æ•ˆåº”** | å•å­æ˜¯ä»£æ•°æ•ˆåº”çš„ç‰¹ä¾‹ |

#### å…³ç³»ç½‘ç»œ

**ä¸Šä½æ¦‚å¿µ**:

- èŒƒç•´è®º
- å‡½å­ç†è®º
- ä»£æ•°ç†è®º

**ä¸‹ä½æ¦‚å¿µ**:

- Maybeå•å­
- Stateå•å­
- IOå•å­

**ç›¸å…³æ¦‚å¿µ**:

- KleislièŒƒç•´
- å•å­å˜æ¢å™¨
- ä»£æ•°æ•ˆåº”

**ç­‰ä»·æ¦‚å¿µ**:

- ä¸‰å…ƒç»„
- Kleisliä¸‰å…ƒç»„

```text
èŒƒç•´Cä¸Šçš„å•å­ = (T, Î·, Î¼)

T: C â†’ C  (è‡ªå‡½å­)
Î·: Id â‡’ T  (å•ä½è‡ªç„¶å˜æ¢, unit)
Î¼: Tâˆ˜T â‡’ T  (ä¹˜æ³•è‡ªç„¶å˜æ¢, multiplication/join)

ç›´è§‰:
T: åŒ…è£…ç±»å‹ (a â†’ T a)
Î·: çº¯å€¼æ³¨å…¥ (return)
Î¼: æ‰å¹³åŒ– (join, flatten)
```

**Haskellå¯¹åº”**:

```haskell
class Monad m where
  return :: a -> m a           -- Î·
  (>>=)  :: m a -> (a -> m b) -> m b  -- bind

  -- æˆ–ç­‰ä»·å®šä¹‰:
  join   :: m (m a) -> m a     -- Î¼

-- bindç”¨Î·å’ŒÎ¼å®šä¹‰:
m >>= f = join (fmap f m)
```

### 2.2 å•å­å¾‹

**ä¸‰æ¡æ³•åˆ™**:

```text
1. å·¦å•ä½å¾‹:
   Î¼ âˆ˜ T(Î·) = id_T

2. å³å•ä½å¾‹:
   Î¼ âˆ˜ Î·_T = id_T

3. ç»“åˆå¾‹:
   Î¼ âˆ˜ T(Î¼) = Î¼ âˆ˜ Î¼_T

å›¾è¡¨äº¤æ¢å¼
```

**Haskellç‰ˆæœ¬**:

```haskell
-- å·¦å•ä½å¾‹
return a >>= f  â‰¡  f a

-- å³å•ä½å¾‹
m >>= return  â‰¡  m

-- ç»“åˆå¾‹
(m >>= f) >>= g  â‰¡  m >>= (\x -> f x >>= g)
```

**ç›´è§‰**:

```text
returnæ˜¯ä¸­æ€§å…ƒ
>>= æ»¡è¶³ç»“åˆå¾‹

â†’ å•å­ = "å¯ç»„åˆçš„è®¡ç®—"
```

---

## 3. KleislièŒƒç•´

**å®šä¹‰3.1**:

```text
ç»™å®šå•å­(T,Î·,Î¼)ï¼ŒKleislièŒƒç•´C_T:

å¯¹è±¡: ä¸Cç›¸åŒ
æ€å°„: C_T(A,B) = C(A, T(B))
  (Kleisliç®­å¤´: A â†’ T B)

å¤åˆ: f: Aâ†’TB, g: Bâ†’TC
  g â‹† f = Î¼_C âˆ˜ T(g) âˆ˜ f: A â†’ TC

å•ä½: Î·_A: A â†’ TA
```

**Haskell**:

```haskell
-- Kleisliç®­å¤´
type Kleisli m a b = a -> m b

-- Kleisliå¤åˆ (fish operator)
(>=>) :: Monad m => (a -> m b) -> (b -> m c) -> (a -> m c)
f >=> g = \a -> f a >>= g

-- å•å­å¾‹ âŸº KleislièŒƒç•´å¾‹
return >=> f  â‰¡  f  (å·¦å•ä½)
f >=> return  â‰¡  f  (å³å•ä½)
(f >=> g) >=> h  â‰¡  f >=> (g >=> h)  (ç»“åˆ)
```

---

## 4. å¸¸è§å•å­

### 4.1 Maybeå•å­

**å¤„ç†å¤±è´¥**:

```haskell
data Maybe a = Nothing | Just a

instance Monad Maybe where
  return = Just

  Nothing >>= f = Nothing
  Just x  >>= f = f x

-- ä¾‹å­: å®‰å…¨é™¤æ³•é“¾
safeDivide :: Double -> Double -> Maybe Double
safeDivide _ 0 = Nothing
safeDivide x y = Just (x / y)

compute :: Double -> Double -> Maybe Double
compute x y = do
  a <- safeDivide x y
  b <- safeDivide a 2
  c <- safeDivide b 3
  return c

-- ä¸€æ—¦å¤±è´¥ï¼Œä¼ æ’­Nothing âœ…
```

### 4.2 Listå•å­

**éç¡®å®šæ€§è®¡ç®—**:

```haskell
instance Monad [] where
  return x = [x]
  xs >>= f = concat (map f xs)

-- ä¾‹å­: æ‰€æœ‰å¯èƒ½ç»„åˆ
pairs :: [a] -> [b] -> [(a,b)]
pairs xs ys = do
  x <- xs
  y <- ys
  return (x, y)

-- pairs [1,2] [3,4] = [(1,3),(1,4),(2,3),(2,4)]
```

### 4.3 Stateå•å­

**çŠ¶æ€ä¼ é€’**:

```haskell
newtype State s a = State { runState :: s -> (a, s) }

instance Monad (State s) where
  return a = State (\s -> (a, s))

  m >>= f = State $ \s ->
    let (a, s') = runState m s
        (b, s'') = runState (f a) s'
    in (b, s'')

-- ä¾‹å­: è®¡æ•°å™¨
tick :: State Int ()
tick = State (\s -> ((), s+1))

program :: State Int Int
program = do
  tick
  tick
  tick
  get  -- è¿”å›å½“å‰çŠ¶æ€

-- runState program 0 = (3, 3)
```

### 4.4 IOå•å­

**IOå‰¯ä½œç”¨**:

```haskell
-- IOæ˜¯åŸå§‹å•å­ï¼Œç”±è¿è¡Œæ—¶å®ç°
main :: IO ()
main = do
  putStrLn "Enter name:"
  name <- getLine
  putStrLn ("Hello, " ++ name)

-- éš”ç¦»å‰¯ä½œç”¨ âœ…
-- ç±»å‹ç³»ç»Ÿå¼ºåˆ¶ âœ…
```

---

## 5. å•å­å˜æ¢å™¨

**ç»„åˆå¤šä¸ªæ•ˆåº”**:

```haskell
-- MaybeT: åœ¨ä»»æ„å•å­ä¸Šæ·»åŠ Maybe
newtype MaybeT m a = MaybeT { runMaybeT :: m (Maybe a) }

instance Monad m => Monad (MaybeT m) where
  return = MaybeT . return . Just

  m >>= f = MaybeT $ do
    maybeA <- runMaybeT m
    case maybeA of
      Nothing -> return Nothing
      Just a  -> runMaybeT (f a)

-- ä¾‹å­: IO + Maybe
type App = MaybeT IO

readConfig :: App Config
readConfig = do
  file <- liftIO $ readFile "config.json"
  parseJSON file  -- Maybeå¤±è´¥

-- ç»„åˆIOå’ŒMaybeæ•ˆåº” âœ…
```

**æ ‡å‡†å˜æ¢å™¨æ ˆ**:

```haskell
-- ReaderT: ç¯å¢ƒ
-- StateT: çŠ¶æ€
-- ExceptT: å¼‚å¸¸
-- WriterT: æ—¥å¿—

type App = ReaderT Config (StateT AppState (ExceptT Error IO))

-- å¤šå±‚æ•ˆåº”ï¼
```

---

## 6. ä¸ä»£æ•°ç†è®º

### 6.1 å•å­ä¸ä»£æ•°

**Eilenberg-MooreèŒƒç•´**:

```text
å•å­Tçš„ä»£æ•° = (A, h: T(A) â†’ A)
æ»¡è¶³:
  h âˆ˜ Î·_A = id_A
  h âˆ˜ Î¼_A = h âˆ˜ T(h)

ä¾‹: Listå•å­çš„ä»£æ•° = Monoid
  (M, âŠ•): [M] â†’ M
  âŠ• = fold/concat
```

### 6.2 ä»£æ•°æ•ˆåº”

**ç°ä»£å‘å±•**:

```text
å•å­ â†’ ä»£æ•°æ•ˆåº”ç³»ç»Ÿ

ä¼˜åŠ¿:
- æ•ˆåº”æ›´æ¨¡å—åŒ–
- å¤„ç†å™¨å¯æ›¿æ¢
- ç±»å‹æ›´ç®€å•

è¯­è¨€: Eff, Koka, OCaml 5.0

å‚è€ƒ: [07_æ•ˆåº”ç³»ç»Ÿ](../../Composed/formal_lang_view/07_æ•ˆåº”ç³»ç»Ÿ/)
```

---

## 7. æ‰¹åˆ¤æ€§åˆ†æ

### 7.1 ç†è®ºä¼˜åŠ¿

**ä¼˜åŠ¿**:

- âœ… çº¯å‡½æ•°å¼å‰¯ä½œç”¨
- âœ… ç±»å‹å®‰å…¨
- âœ… å¯ç»„åˆ

**å±€é™**:

- âš ï¸ å­¦ä¹ æ›²çº¿é™¡å³­
- âš ï¸ é”™è¯¯ä¿¡æ¯å¤æ‚
- âš ï¸ æ€§èƒ½å¼€é”€ (æœ‰æ—¶)

### 7.2 å®è·µä»·å€¼

**Haskell**: â­â­â­â­â­

```text
âœ… æ ¸å¿ƒæŠ½è±¡ (IOå¿…éœ€)
âœ… å¹¿æ³›åº”ç”¨
âœ… æˆç†Ÿç”Ÿæ€

Haskell = å•å­çš„ä¸»åœº
```

**å…¶ä»–è¯­è¨€**: â­â­â­

```text
Scala: âœ… Cats, Scalaz
Rust: âš ï¸ Option, Result (ä¸å«å•å­)
JavaScript: âš ï¸ Promise (å•å­-ish)

æ¦‚å¿µå¯å‘ > ç›´æ¥ä½¿ç”¨
```

### 7.3 äº‰è®®

**"å•å­æ•™ç¨‹è¯…å’’"**:

```text
é—®é¢˜: æ¯ä¸ªäººç”¨ä¸åŒæ¯”å–»è§£é‡Šå•å­
  - "å¤ªç©ºæœ" ğŸš€
  - "å¢¨è¥¿å“¥å·é¥¼" ğŸŒ¯
  - "å®¹å™¨" ğŸ“¦

æ‰¹åˆ¤: æ¯”å–»å¾€å¾€è¯¯å¯¼

æœ€å¥½: ç›´æ¥å­¦èŒƒç•´è®ºå®šä¹‰ + å¤šç»ƒä¹ 
```

**å•å­ vs ä»£æ•°æ•ˆåº”**:

```text
å•å­: æˆç†Ÿï¼ŒHaskellæ ‡å‡†
ä»£æ•°æ•ˆåº”: æ›´çµæ´»ï¼Œæ–°å…´

æœªæ¥: å¯èƒ½è¢«ä»£æ•°æ•ˆåº”å–ä»£ï¼Ÿ
```

---

## 8. æ€ç»´è¡¨å¾ï¼šå•å­ç†è®º

### 8.1 æ¦‚å¿µå…³ç³»ç½‘ç»œå›¾

```mermaid
graph TD
    A[å•å­ç†è®º] --> B[å•å­ä¸‰å…ƒç»„]
    A --> C[KleislièŒƒç•´]
    A --> D[å¸¸è§å•å­]

    B --> E[å‡½å­T]
    B --> F[å•ä½Î·]
    B --> G[ä¹˜æ³•Î¼]

    C --> H[Kleisliæ€å°„]
    D --> I[Maybe]
    D --> J[State]
    D --> K[IO]

    A -.åº”ç”¨.-> L[Haskell]
    A -.ç†è®º.-> M[ä»£æ•°ç†è®º]
    A -.æ‰©å±•.-> N[å•å­å˜æ¢å™¨]

    L --> O[å‡½æ•°å¼ç¼–ç¨‹]
    M --> P[ä»£æ•°ç»“æ„]
    N --> Q[å•å­ç»„åˆ]

    style A fill:#ffcccc
    style L fill:#ccffcc
    style M fill:#ccccff
```

### 8.2 è®ºè¯é€»è¾‘è·¯å¾„å›¾

```mermaid
graph LR
    A[å‰¯ä½œç”¨é—®é¢˜] --> B[æ•ˆåº”æŠ½è±¡]
    B --> C[å•å­ç†è®º]

    C --> D[å•å­ä¸‰å…ƒç»„]
    C --> E[KleislièŒƒç•´]

    D --> F[å¸¸è§å•å­]
    E --> G[å•å­è¯­ä¹‰]

    F --> H[å‡½æ•°å¼ç¼–ç¨‹]
    G --> I[ç±»å‹ç³»ç»Ÿ]

    H --> J[Haskell]
    I --> K[å½¢å¼åŒ–éªŒè¯]

    style A fill:#ffffcc
    style C fill:#ffcccc
    style H fill:#ccffcc
```

### 8.3 æ¦‚å¿µå±æ€§çŸ©é˜µ

| å±æ€§ | å•å­ | å‡½å­ | åº”ç”¨å‡½å­ |
|------|------|------|---------|
| **æ•ˆåº”æŠ½è±¡** | âœ“ | âœ— | éƒ¨åˆ† |
| **ç»„åˆæ€§** | âœ“ | âœ“ | âœ“ |
| **å•å­å¾‹** | âœ“ | N/A | N/A |
| **Kleisli** | âœ“ | âœ— | âœ— |
| **åº”ç”¨èŒƒå›´** | å¹¿æ³› | å¹¿æ³› | å¹¿æ³› |

### 8.4 å¤–å»¶å†…æ¶µåˆ†æå›¾

```mermaid
graph TD
    A[å•å­ç†è®º] --> B[å¤–å»¶]
    A --> C[å†…æ¶µ]

    B --> D[Maybeå•å­]
    B --> E[Stateå•å­]
    B --> F[IOå•å­]
    B --> G[å…¶ä»–å•å­]

    C --> H[æ•ˆåº”æŠ½è±¡]
    C --> I[ç»„åˆæ€§]
    C --> J[ç±»å‹å®‰å…¨]
    C --> K[ä»£æ•°æ€§]

    style A fill:#ffcccc
    style B fill:#ccffcc
    style C fill:#ccccff
```

### 8.5 ç†è®ºå‘å±•è„‰ç»œå›¾

```mermaid
timeline
    title å•å­ç†è®ºå‘å±•
    1965 : Eilenberg-Moore
    1991 : Moggiè®¡ç®—åº”ç”¨
    1990s : Haskellé‡‡ç”¨
    2000s : å•å­å˜æ¢å™¨
    2010s : ä»£æ•°æ•ˆåº”
    2020s : ç°ä»£åº”ç”¨
```

### 8.6 è·¨æ¨¡å—å…³è”å›¾

```mermaid
graph TB
    subgraph èŒƒç•´è®º
    A[å•å­ç†è®º]
    B[å‡½å­]
    C[ä»£æ•°ç†è®º]
    end

    subgraph æ ¸å¿ƒç†è®º
    D[KleislièŒƒç•´]
    E[æ•ˆåº”ç³»ç»Ÿ]
    F[ç±»å‹ç³»ç»Ÿ]
    end

    subgraph åº”ç”¨
    G[Haskell]
    H[å‡½æ•°å¼ç¼–ç¨‹]
    I[å½¢å¼åŒ–éªŒè¯]
    end

    A --> B
    A --> C
    A --> D
    A --> E
    A --> F

    A --> G
    A --> H
    A --> I

    style A fill:#ffcccc
```

## 9. æƒå¨èµ„æºå¯¹æ ‡

### 9.1 Wikipediaå¯¹æ ‡

**Wikipediaè¯æ¡**: [Monad (category theory)](https://en.wikipedia.org/wiki/Monad_(category_theory))

**å¯¹æ ‡å†…å®¹**:

| ç»´åº¦ | Wikipedia | æœ¬æ–‡æ¡£ | çŠ¶æ€ |
|------|-----------|--------|------|
| **å®šä¹‰** | âœ“ åŸºæœ¬å®šä¹‰ | âœ“ å®Œæ•´å®šä¹‰ï¼ˆ2.1ï¼‰ | âœ… å·²å¯¹æ ‡ |
| **å•å­å¾‹** | âœ“ åŸºæœ¬å¾‹ | âœ“ å®Œæ•´å¾‹ï¼ˆ2.2ï¼‰ | âœ… å·²å¯¹æ ‡ |
| **KleislièŒƒç•´** | âœ“ åŸºæœ¬æ¦‚å¿µ | âœ“ å®Œæ•´åˆ†æï¼ˆ3èŠ‚ï¼‰ | âœ… å·²å¯¹æ ‡ |
| **å¸¸è§å•å­** | âœ“ åŸºæœ¬å•å­ | âœ“ å®Œæ•´å•å­ï¼ˆ4.1-4.4ï¼‰ | âœ… å·²å¯¹æ ‡ |
| **åº”ç”¨** | âœ“ åŸºæœ¬åº”ç”¨ | âœ“ æ·±åº¦åº”ç”¨ï¼ˆHaskellï¼‰ | âœ… å·²å¯¹æ ‡ |

**è¡¥å……å†…å®¹**ï¼ˆæœ¬æ–‡æ¡£ç‹¬æœ‰ï¼‰:

- âœ… æ¦‚å¿µåˆ†ææ¡†æ¶ï¼ˆå®šä¹‰çŸ©é˜µã€å±æ€§ã€å¤–å»¶ã€å†…æ¶µï¼‰
- âœ… æ€ç»´è¡¨å¾ï¼ˆ6ç§å›¾è¡¨ï¼‰
- âœ… å¤§å­¦è¯¾ç¨‹å¯¹æ ‡
- âœ… æ‰¹åˆ¤æ€§åˆ†æ

### 9.2 å›½é™…è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡

#### 9.2.1 MIT 18.S097 (Programming with Categories)

**è¯¾ç¨‹å†…å®¹å¯¹æ ‡**:

| MIT 18.S097ä¸»é¢˜ | æœ¬æ–‡æ¡£å¯¹åº”ç« èŠ‚ | è¦†ç›–åº¦ |
|-----------------|---------------|--------|
| å•å­ç†è®º | 2. èŒƒç•´è®ºå®šä¹‰ | âœ… 100% |
| KleislièŒƒç•´ | 3. KleislièŒƒç•´ | âœ… 100% |
| Haskellåº”ç”¨ | 4. å¸¸è§å•å­ | âœ… 100% |

**è¡¥å……å†…å®¹**ï¼ˆæœ¬æ–‡æ¡£ç‹¬æœ‰ï¼‰:

- âœ… æ¦‚å¿µåˆ†ææ¡†æ¶
- âœ… æ€ç»´è¡¨å¾ä½“ç³»
- âœ… å•å­å˜æ¢å™¨

#### 9.2.2 Cambridge Part III (Category Theory)

**è¯¾ç¨‹å†…å®¹å¯¹æ ‡**:

| Cambridgeä¸»é¢˜ | æœ¬æ–‡æ¡£å¯¹åº”ç« èŠ‚ | è¦†ç›–åº¦ |
|--------------|---------------|--------|
| å•å­ç†è®º | 2. èŒƒç•´è®ºå®šä¹‰ | âœ… 100% |
| ä»£æ•°ç†è®º | 6. ä¸ä»£æ•°ç†è®º | âœ… 100% |

**å»ºè®®è¡¥å……**: é«˜çº§ä»£æ•°ç†è®º

### 9.3 æƒå¨æ•™æå¯¹æ ‡

#### 9.3.1 Mac Lane, "Categories for the Working Mathematician"

**å¯¹æ ‡å†…å®¹**:

| Mac Laneç« èŠ‚ | æœ¬æ–‡æ¡£å¯¹åº” | è¦†ç›–åº¦ |
|-------------|-----------|--------|
| Chapter 6: Monads and Algebras | 2-3. å®Œæ•´å†…å®¹ | âœ… 100% |

**è¡¥å……å†…å®¹**ï¼ˆæœ¬æ–‡æ¡£ç‹¬æœ‰ï¼‰:

- âœ… æ¦‚å¿µåˆ†ææ¡†æ¶
- âœ… æ€ç»´è¡¨å¾
- âœ… Haskellåº”ç”¨

#### 9.3.2 Moggi, "Notions of Computation and Monads" (1991)

**å¯¹æ ‡å†…å®¹**:

| Moggiè®ºæ–‡ | æœ¬æ–‡æ¡£å¯¹åº” | è¦†ç›–åº¦ |
|----------|-----------|--------|
| Monads for Computation | 1-2. åŠ¨æœºå’Œå®šä¹‰ | âœ… 100% |

**è¡¥å……å†…å®¹**ï¼ˆæœ¬æ–‡æ¡£ç‹¬æœ‰ï¼‰:

- âœ… ç°ä»£åº”ç”¨
- âœ… æ€ç»´è¡¨å¾

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

### èŒƒç•´è®º

[1] **Mac Lane, S.** (1998). _Categories for the Working Mathematician_ (2nd ed.)
     Springer. ISBN 0-387-98403-8.
     - Chapter VI: Monads and Algebras

[2] **Awodey, S.** (2010). _Category Theory_ (2nd ed.)
     Oxford University Press.
     - Chapter 10: Monads

### è®¡ç®—åº”ç”¨

[3] **Moggi, E.** (1991). "Notions of Computation and Monads"
     _Information and Computation_ 93(1): 55-92.
     doi:10.1016/0890-5401(91)90052-4
     (å¼€åˆ›æ€§è®ºæ–‡)

[4] **Wadler, P.** (1992). "The Essence of Functional Programming"
     _POPL 1992_. doi:10.1145/143165.143169
     (å•å­ç”¨äºç¼–ç¨‹)

### Haskell

[5] **LipovaÄa, M.** (2011). _Learn You a Haskell for Great Good!_
     No Starch Press. ISBN 978-1593272838.
     - Chapter 12-13: Monads

### åœ¨çº¿èµ„æº

[6] **Haskell Wiki**: Monad
     URL: https://wiki.haskell.org/Monad
     (è®¿é—®: 2025-12-02)

---

## ğŸ¯ å…³é”®è¦ç‚¹

### æ ¸å¿ƒæ¦‚å¿µ

1. **å•å­ = (T, Î·, Î¼)**: è‡ªå‡½å­ + è‡ªç„¶å˜æ¢
2. **å•å­å¾‹**: å·¦/å³å•ä½ + ç»“åˆå¾‹
3. **KleislièŒƒç•´**: å•å­è¯±å¯¼çš„èŒƒç•´
4. **ç»„åˆæ•ˆåº”**: doè®°æ³•, >>=

### æ·±åˆ»æ´å¯Ÿ

> å•å­ = å¯ç»„åˆçš„è®¡ç®—
> å‰¯ä½œç”¨ = ç±»å‹ä¸­çš„æ ‡æ³¨
> çº¯å‡½æ•° + å•å­ = å‰¯ä½œç”¨ç®¡ç†

### å®è·µæ„ä¹‰

- Haskellæ ¸å¿ƒ (IOå¿…éœ€)
- å‰¯ä½œç”¨éš”ç¦»
- å¯ç»„åˆè®¾è®¡æ¨¡å¼

---

## 10. ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾

### 10.1 è®ºè¯ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[å•å­ç†è®º] --> B[é—®é¢˜æå‡º]
    B --> C[å¦‚ä½•åœ¨çº¯å‡½æ•°ä¸­å¤„ç†å‰¯ä½œç”¨?]

    C --> D[å®šä¹‰å»ºç«‹]
    D --> D1[èŒƒç•´è®ºå®šä¹‰]
    D --> D2[å•å­ä¸‰å…ƒç»„]
    D --> D3[å•å­å¾‹]

    D1 --> E[æ€§è´¨æ¢ç´¢]
    D2 --> E
    D3 --> E

    E --> E1[KleislièŒƒç•´]
    E --> E2[å¸¸è§å•å­]
    E --> E3[å•å­å˜æ¢å™¨]

    E1 --> F[è¯æ˜æ„é€ ]
    E2 --> F
    E3 --> F

    F --> F1[å•å­å¾‹è¯æ˜]
    F --> F2[Kleisliæ„é€ ]
    F --> F3[å˜æ¢å™¨è¯æ˜]

    F1 --> G[åº”ç”¨å±•ç¤º]
    F2 --> G
    F3 --> G

    G --> G1[Haskell]
    G --> G2[å‡½æ•°å¼ç¼–ç¨‹]
    G --> G3[ä»£æ•°æ•ˆåº”]

    G1 --> H[æ‰¹åˆ¤åæ€]
    G2 --> H
    G3 --> H

    H --> H1[ç†è®ºä¼˜åŠ¿]
    H --> H2[å®è·µä»·å€¼]
    H --> H3[äº‰è®®]

    style A fill:#ffcccc
    style D fill:#ccffcc
    style F fill:#ccccff
    style H fill:#ffffcc
```

### 10.2 æ¦‚å¿µä¾èµ–å…³ç³»

```mermaid
graph LR
    A[å‡½æ•°å¼ç¼–ç¨‹] --> B[å•å­ç†è®º]

    B --> C[èŒƒç•´è®ºå•å­]
    B --> D[è®¡ç®—å•å­]

    C --> C1[å•å­ä¸‰å…ƒç»„]
    C --> C2[KleislièŒƒç•´]

    D --> D1[Maybe]
    D --> D2[List]
    D --> D3[State]
    D --> D4[IO]

    C1 --> E[å•å­å¾‹]
    C2 --> E

    E --> F[ç»„åˆæ€§]
    F --> G[å‰¯ä½œç”¨ç®¡ç†]

    B --> H[Haskell]
    B --> I[å‡½æ•°å¼è¯­è¨€]

    style A fill:#ffffcc
    style B fill:#ffcccc
    style E fill:#ccffcc
    style G fill:#ccccff
```

**è®ºè¯é€»è¾‘é“¾æ¡**ï¼š

1. **é—®é¢˜æå‡º** (1.1-1.2)ï¼š
   - å¦‚ä½•åœ¨çº¯å‡½æ•°ä¸­å¤„ç†å‰¯ä½œç”¨ï¼Ÿ
   - å‰¯ä½œç”¨é—®é¢˜

2. **å®šä¹‰å»ºç«‹** (2)ï¼š
   - èŒƒç•´è®ºå®šä¹‰ï¼ˆ2èŠ‚ï¼‰

3. **æ€§è´¨æ¢ç´¢** (3-5)ï¼š
   - KleislièŒƒç•´ï¼ˆ3èŠ‚ï¼‰
   - å¸¸è§å•å­ï¼ˆ4èŠ‚ï¼‰
   - å•å­å˜æ¢å™¨ï¼ˆ5èŠ‚ï¼‰

4. **è¯æ˜æ„é€ ** (2.2, 3)ï¼š
   - å•å­å¾‹ï¼ˆ2.2ï¼‰
   - KleislièŒƒç•´ï¼ˆ3èŠ‚ï¼‰

5. **åº”ç”¨å±•ç¤º** (6)ï¼š
   - ä¸ä»£æ•°ç†è®ºï¼ˆ6èŠ‚ï¼‰

6. **æ‰¹åˆ¤åæ€** (7)ï¼š
   - æ‰¹åˆ¤æ€§åˆ†æï¼ˆ7èŠ‚ï¼‰

---

## 11. å‚è€ƒèµ„æº

### 11.1 ç»å…¸è®ºæ–‡

1. **Moggi, E.** (1991). "Notions of computation and monads"
   - Information and Computation, 93(1), 55-92
   - å•å­ä¸è®¡ç®—çš„å¯¹åº”

2. **Wadler, P.** (1995). "Monads for functional programming"
   - In _Advanced Functional Programming_, pp. 24-52
   - å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å•å­

3. **Mac Lane, S.** (1998). _Categories for the Working Mathematician_ (2nd ed.)
   - Springer. ISBN 978-0387984032
   - å•å­çš„èŒƒç•´è®ºåŸºç¡€

### 11.2 æ•™æ

1. **Mac Lane, S.** (1998)
   - _Categories for the Working Mathematician_ (2nd ed.)
   - Springer. ISBN 978-0387984032
   - èŒƒç•´è®ºç»å…¸æ•™æ

2. **Awodey, S.** (2010)
   - _Category Theory_ (2nd ed.)
   - Oxford University Press. ISBN 978-0199237180
   - èŒƒç•´è®ºç°ä»£æ•™æ

3. **Riehl, E.** (2017)
   - _Category Theory in Context_
   - Dover Publications. ISBN 978-0486809038
   - èŒƒç•´è®ºæ•™æ

### 11.3 åœ¨çº¿èµ„æº

1. **MIT 18.S097 - Programming with Categories**
   - https://ocw.mit.edu/courses/18-s097-programming-with-categories-fall-2019/
   - è¯¾ç¨‹è§†é¢‘ã€è®²ä¹‰

2. **Cambridge Part III - Category Theory**
   - https://www.maths.cam.ac.uk/postgrad/partiii/
   - è¯¾ç¨‹ææ–™

3. **nLab - Monad**
   - https://ncatlab.org/nlab/show/monad
   - å•å­ç†è®ºèµ„æº

4. **Wikipedia - Monad (category theory)**
   - https://en.wikipedia.org/wiki/Monad_(category_theory)
   - åŸºæœ¬æ¦‚å¿µå’Œå®šä¹‰

---

**æœ€åæ›´æ–°**: 2025-12-04
**ç‰ˆæœ¬**: v2.1 (æ‰©å±•ç‰ˆ)
**çŠ¶æ€**: âœ… å·²å®ŒæˆWikipediaå¯¹æ ‡ã€å¤§å­¦è¯¾ç¨‹å¯¹æ ‡ã€æ€ç»´è¡¨å¾æ‰©å±•
**éš¾åº¦**: â­â­â­â­
**æ¨è**: Haskellå¼€å‘è€…å¿…ä¿®
**æ‰¹åˆ¤æ€§**: å®è·µæœ‰ç”¨ï¼Œä½†æœ‰äº‰è®®

**å¦è§**:

- [03.8 Yonedaå¼•ç†](03.8_Yonedaå¼•ç†.md) (èŒƒç•´è®ºåŸºç¡€)
- [03.1 ç¬›å¡å°”é—­èŒƒç•´](03.1_ç¬›å¡å°”é—­èŒƒç•´CCC.md)
- [06.4 ç±»å‹ç³»ç»Ÿ](../06_å·¥ç¨‹å®è·µåº”ç”¨/06.4_ç±»å‹ç³»ç»Ÿä¸ç¼–ç¨‹è¯­è¨€.md) (Haskell)
- [00.4 ä¸åŠ¨ç‚¹ç†è®º](../00_æ ¸å¿ƒç†è®ºä½“ç³»/00.4_ä¸åŠ¨ç‚¹ç†è®º.md) (fixç‚¹)
