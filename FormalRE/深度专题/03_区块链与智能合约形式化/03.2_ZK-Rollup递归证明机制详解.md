# ZK-Rollupé€’å½’è¯æ˜æœºåˆ¶è¯¦è§£

> **ä¸»é¢˜**: ZK-Rollupçš„é€’å½’SNARKåº”ç”¨
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-02
> **éš¾åº¦**: â­â­â­â­â­
> **å‰ç½®çŸ¥è¯†**: é›¶çŸ¥è¯†è¯æ˜ã€SNARKã€åŒºå—é“¾

---

## ğŸ“‹ ç›®å½•

- [ZK-Rollupé€’å½’è¯æ˜æœºåˆ¶è¯¦è§£](#zk-rollupé€’å½’è¯æ˜æœºåˆ¶è¯¦è§£)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. ZK-Rollupæ¦‚è¿°](#1-zk-rollupæ¦‚è¿°)
    - [1.1 é—®é¢˜: ä»¥å¤ªåŠæ‰©å®¹](#11-é—®é¢˜-ä»¥å¤ªåŠæ‰©å®¹)
    - [1.2 è§£å†³æ–¹æ¡ˆ: Layer 2](#12-è§£å†³æ–¹æ¡ˆ-layer-2)
  - [2. é€’å½’è¯æ˜å·¥ä½œæµ](#2-é€’å½’è¯æ˜å·¥ä½œæµ)
    - [2.1 æ‰¹é‡äº¤æ˜“å¤„ç†](#21-æ‰¹é‡äº¤æ˜“å¤„ç†)
    - [2.2 é€’å½’èšåˆ](#22-é€’å½’èšåˆ)
  - [3. æ•°å­¦åŸç†](#3-æ•°å­¦åŸç†)
    - [3.1 çŠ¶æ€è½¬ç§»è¯æ˜](#31-çŠ¶æ€è½¬ç§»è¯æ˜)
    - [3.2 é€’å½’ç»„åˆ](#32-é€’å½’ç»„åˆ)
  - [4. å¤æ‚åº¦åˆ†æ](#4-å¤æ‚åº¦åˆ†æ)
  - [5. ä¸»æµZK-Rollupå¯¹æ¯”](#5-ä¸»æµzk-rollupå¯¹æ¯”)
  - [6. é€’å½’ç†è®ºæ„ä¹‰](#6-é€’å½’ç†è®ºæ„ä¹‰)
  - [7. ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾](#7-ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾)
    - [7.1 è®ºè¯ä¾èµ–å…³ç³»](#71-è®ºè¯ä¾èµ–å…³ç³»)
    - [7.2 æ¦‚å¿µä¾èµ–å…³ç³»](#72-æ¦‚å¿µä¾èµ–å…³ç³»)
  - [8. å‚è€ƒèµ„æº](#8-å‚è€ƒèµ„æº)
    - [8.1 ç»å…¸è®ºæ–‡](#81-ç»å…¸è®ºæ–‡)
    - [8.2 æ•™æ](#82-æ•™æ)
    - [8.3 åœ¨çº¿èµ„æº](#83-åœ¨çº¿èµ„æº)

---

## 1. ZK-Rollupæ¦‚è¿°

### 1.1 é—®é¢˜: ä»¥å¤ªåŠæ‰©å®¹

```text
ä»¥å¤ªåŠé™åˆ¶:
- TPS: ~15 tx/s
- Gasè´¹: é«˜å³°æœŸ$100+
- ç¡®è®¤æ—¶é—´: ~12ç§’

éœ€æ±‚: 100x-1000xæ‰©å®¹
```

---

### 1.2 è§£å†³æ–¹æ¡ˆ: Layer 2

```text
ZK-Rollupæ€æƒ³:
1. é“¾ä¸‹è®¡ç®— (off-chain execution)
2. é“¾ä¸ŠéªŒè¯ (on-chain verification)
3. é›¶çŸ¥è¯†è¯æ˜ä¿è¯æ­£ç¡®æ€§

ä¼˜åŠ¿:
âœ“ ç»§æ‰¿L1å®‰å…¨æ€§
âœ“ O(1)éªŒè¯ (å¸¸æ•°æ—¶é—´)
âœ“ å³æ—¶æœ€ç»ˆæ€§
```

---

## 2. é€’å½’è¯æ˜å·¥ä½œæµ

### 2.1 æ‰¹é‡äº¤æ˜“å¤„ç†

```text
Sequencer:
1. æ¥æ”¶ç”¨æˆ·äº¤æ˜“
2. æ‰¹é‡æ‰§è¡Œ (é“¾ä¸‹)
   Stateâ‚€ â†’ Txâ‚ â†’ Stateâ‚ â†’ ... â†’ Stateâ‚™
3. ç”ŸæˆSNARKè¯æ˜
   Ï€ = SNARK("Stateâ‚€ â†’^{Txâ‚..Txâ‚™} Stateâ‚™")
4. æäº¤é“¾ä¸Š
   - State root: Stateâ‚™
   - è¯æ˜: Ï€

é“¾ä¸ŠéªŒè¯:
Verify(Ï€, Stateâ‚€, Stateâ‚™) = true
â†’ O(1)æ—¶é—´éªŒè¯nä¸ªäº¤æ˜“ â­â­â­â­â­
```

---

### 2.2 é€’å½’èšåˆ

```text
é€’å½’SNARKåº”ç”¨:

æ‰¹æ¬¡1: Ï€â‚ = SNARK(Stateâ‚€ â†’ Stateâ‚â‚€â‚€â‚€)
æ‰¹æ¬¡2: Ï€â‚‚ = SNARK(Stateâ‚â‚€â‚€â‚€ â†’ Stateâ‚‚â‚€â‚€â‚€)
...

é€’å½’èšåˆ:
Ï€_agg = SNARK("Ï€â‚ valid âˆ§ Ï€â‚‚ valid âˆ§ ...")

ç»“æœ:
ä¸€ä¸ªå¸¸æ•°å¤§å°è¯æ˜ = æ‰€æœ‰æ‰¹æ¬¡æœ‰æ•ˆ âœ“

Minaæè‡´åº”ç”¨:
æ•´æ¡åŒºå—é“¾ = 22KBè¯æ˜ â­â­â­â­â­
```

---

## 3. æ•°å­¦åŸç†

### 3.1 çŠ¶æ€è½¬ç§»è¯æ˜

**ç”µè·¯åŒ–**:

```text
äº¤æ˜“æ‰§è¡Œ â†’ ç®—æœ¯ç”µè·¯

ä¾‹: è½¬è´¦
ä»: balance[A], balance[B]
åˆ°: balance[A]', balance[B]'

çº¦æŸ:
1. balance[A]' = balance[A] - amount
2. balance[B]' = balance[B] + amount
3. balance[A] â‰¥ amount
4. ç­¾åéªŒè¯
...

ç”µè·¯: ~100Kçº¦æŸ (per tx)
æ‰¹é‡: 1000 tx = 100Mçº¦æŸ
```

---

### 3.2 é€’å½’ç»„åˆ

**æ ¸å¿ƒæŠ€æœ¯**:

```text
Verify(Ï€)ç”µè·¯:
å¯ä»¥è¢«è¡¨ç¤ºä¸ºç®—æœ¯ç”µè·¯
â†’ å¯ä»¥è¢«è¯æ˜!

Ï€_recursive = SNARK(
  statement_new âˆ§ Verify(Ï€_old)
)

é€’å½’æ·±åº¦:
Ï€â‚€ â†’ Ï€â‚ â†’ Ï€â‚‚ â†’ ... â†’ Ï€â‚™
æ¯ä¸ªéªŒè¯å‰ä¸€ä¸ª

å¤§å°: éƒ½æ˜¯O(1)å¸¸æ•° â­
```

---

## 4. å¤æ‚åº¦åˆ†æ

| æ“ä½œ | Optimistic Rollup | ZK-Rollup | æå‡ |
|------|------------------|-----------|------|
| **é“¾ä¸Šæ•°æ®** | å…¨éƒ¨calldata | çŠ¶æ€å·®+è¯æ˜ | 10-100Ã— |
| **éªŒè¯æ—¶é—´** | O(k) æ¬ºè¯ˆè¯æ˜ | O(1) â­ | kÃ— |
| **æœ€ç»ˆæ€§** | ~7å¤© | å³æ—¶âœ“ | 10000Ã— |
| **è¯æ˜ç”Ÿæˆ** | æ—  | O(n log n) | -trade-off |
| **ç¡¬ä»¶æˆæœ¬** | ä½ | é«˜âš ï¸ | -trade-off |

---

## 5. ä¸»æµZK-Rollupå¯¹æ¯”

```text
zkSync Era:
- æŠ€æœ¯: PLONK
- EVMå…¼å®¹: é«˜
- TPS: ~2000

StarkNet:
- æŠ€æœ¯: STARK (é‡å­å®‰å…¨âœ“)
- è¯­è¨€: Cairo
- TPS: ~1000

Scroll:
- æŠ€æœ¯: zkEVM
- EVMç­‰ä»·: å®Œå…¨âœ“
- TPS: ~500

Polygon zkEVM:
- æŠ€æœ¯: zkEVM
- EVMç­‰ä»·: å®Œå…¨âœ“
- TPS: ~2000
```

---

## 6. é€’å½’ç†è®ºæ„ä¹‰

```text
ZK-Rollup = é€’å½’è¯æ˜çš„æ€æ‰‹åº”ç”¨

ç†è®º:
âœ“ Verify âˆˆ P (å¤šé¡¹å¼éªŒè¯)
âœ“ Prove âˆˆ RE (å¯é€’å½’ç”Ÿæˆ)
âœ“ é€’å½’ç»„åˆæ— é™æ·±åº¦

å·¥ç¨‹å¥‡è¿¹:
âœ“ å¸¸æ•°å¤§å°è¯æ˜
âœ“ å¸¸æ•°æ—¶é—´éªŒè¯
âœ“ å³æ—¶æœ€ç»ˆæ€§

é€’å½’æœ¬è´¨:
State_n+1 = Apply(State_n, Tx)
Ï€_n+1 = SNARK(State_n+1 âˆ§ Ï€_n valid)
â†’ åŒé‡é€’å½’ (çŠ¶æ€+è¯æ˜)

å¸‚å€¼: æ•°åäº¿ç¾å…ƒ
â†’ é€’å½’ç†è®ºçš„å•†ä¸šä»·å€¼ â­â­â­â­â­
```

---

## 7. ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾

### 7.1 è®ºè¯ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[ZK-Rollupé€’å½’è¯æ˜] --> B[é—®é¢˜æå‡º]
    B --> C[ZK-Rollupæ¦‚è¿°]

    C --> D[å®šä¹‰å»ºç«‹]
    D --> D1[ä»¥å¤ªåŠæ‰©å®¹é—®é¢˜]
    D --> D2[Layer 2è§£å†³æ–¹æ¡ˆ]

    D1 --> E[æ€§è´¨æ¢ç´¢]
    D2 --> E
    E --> E1[é€’å½’è¯æ˜å·¥ä½œæµ]
    E --> E2[æ•°å­¦åŸç†]

    E1 --> F[è¯æ˜æ„é€ ]
    E2 --> F
    F --> F1[çŠ¶æ€è½¬ç§»è¯æ˜]
    F --> F2[é€’å½’ç»„åˆ]

    F1 --> G[åº”ç”¨å±•ç¤º]
    F2 --> G
    G --> G1[å¤æ‚åº¦åˆ†æ]
    G --> G2[ä¸»æµZK-Rollupå¯¹æ¯”]

    G1 --> H[æ‰¹åˆ¤åæ€]
    G2 --> H
    H --> H1[é€’å½’ç†è®ºæ„ä¹‰]
    H --> H2[å•†ä¸šä»·å€¼]

    style A fill:#ffcccc
    style D fill:#ccffcc
    style F fill:#ccccff
    style H fill:#ffffcc
```

### 7.2 æ¦‚å¿µä¾èµ–å…³ç³»

```mermaid
graph LR
    A[ZK-Rollup] --> B[é€’å½’è¯æ˜]

    B --> C[æ‰¹é‡äº¤æ˜“]
    B --> D[é€’å½’èšåˆ]

    C --> E[çŠ¶æ€è½¬ç§»]
    D --> E

    E --> F[SNARK]
    E --> G[é€’å½’ç»„åˆ]

    F --> H[å¤æ‚åº¦]
    G --> H

    H --> I[é€’å½’ç†è®º]
    H --> J[å•†ä¸šåº”ç”¨]

    style A fill:#ffffcc
    style B fill:#ffcccc
    style E fill:#ccffcc
    style I fill:#ccccff
```

**è®ºè¯é€»è¾‘é“¾æ¡**ï¼š

1. **é—®é¢˜æå‡º** (1èŠ‚)ï¼š
   - ZK-Rollupæ¦‚è¿°

2. **å®šä¹‰å»ºç«‹** (1.1-1.2èŠ‚)ï¼š
   - ä»¥å¤ªåŠæ‰©å®¹é—®é¢˜å’ŒLayer 2è§£å†³æ–¹æ¡ˆ

3. **æ€§è´¨æ¢ç´¢** (2-3èŠ‚)ï¼š
   - é€’å½’è¯æ˜å·¥ä½œæµï¼ˆ2èŠ‚ï¼‰
   - æ•°å­¦åŸç†ï¼ˆ3èŠ‚ï¼‰

4. **è¯æ˜æ„é€ ** (3.1-3.2èŠ‚)ï¼š
   - çŠ¶æ€è½¬ç§»è¯æ˜å’Œé€’å½’ç»„åˆ

5. **åº”ç”¨å±•ç¤º** (4-5èŠ‚)ï¼š
   - å¤æ‚åº¦åˆ†æï¼ˆ4èŠ‚ï¼‰
   - ä¸»æµZK-Rollupå¯¹æ¯”ï¼ˆ5èŠ‚ï¼‰

6. **æ‰¹åˆ¤åæ€** (6èŠ‚)ï¼š
   - é€’å½’ç†è®ºæ„ä¹‰

---

## 8. å‚è€ƒèµ„æº

### 8.1 ç»å…¸è®ºæ–‡

1. **Ben-Sasson, E., et al.** (2014). "SNARKs for C: Verifying Program Executions Succinctly and in Zero Knowledge"
   - _CRYPTO 2013_. Advances in Cryptology - CRYPTO 2013
   - zkSNARKåŸºç¡€ç†è®º

2. **Gabizon, A., Williamson, Z. J., & Ciobotaru, O.** (2019). "PLONK: Permutations over Lagrange-bases for Oecumenical Noninteractive arguments of Knowledge"
   - Cryptology ePrint Archive, Report 2019/953
   - é€šç”¨SNARKåè®®

3. **BÃ¼nz, B., et al.** (2020). "Proofs for Inner Pairing Products and Applications"
   - _ASIACRYPT 2021_
   - é€’å½’è¯æ˜æŠ€æœ¯

### 8.2 æ•™æ

1. **Goldreich, O.** (2001)
   - _Foundations of Cryptography: Volume 1, Basic Tools_
   - Cambridge University Press. ISBN 978-0521791724
   - å¯†ç å­¦åŸºç¡€

2. **Boneh, D., & Shoup, V.** (2020)
   - _A Graduate Course in Applied Cryptography_
   - Available at https://crypto.stanford.edu/~dabo/cryptobook/
   - åº”ç”¨å¯†ç å­¦

### 8.3 åœ¨çº¿èµ„æº

1. **zkSync Era Documentation**
   - https://era.zksync.io/docs/
   - zkSyncæŠ€æœ¯æ–‡æ¡£

2. **StarkNet Documentation**
   - https://docs.starknet.io/
   - StarkNetæŠ€æœ¯æ–‡æ¡£

3. **Zero-Knowledge Proofs**
   - https://z.cash/technology/zksnarks/
   - é›¶çŸ¥è¯†è¯æ˜åŸºç¡€

---

**æœ€åæ›´æ–°**: 2025-12-04
**Tier**: 2 (å·¥ç¨‹)
**å•†ä¸šä»·å€¼**: â­â­â­â­â­
**é€’å½’åº”ç”¨**: æ ¸å¿ƒæŠ€æœ¯
**çŠ¶æ€**: âœ… å·²æ·»åŠ ä¸»é¢˜-å­ä¸»é¢˜è®ºè¯é€»è¾‘å…³ç³»å›¾å’Œå‚è€ƒèµ„æºç« èŠ‚
