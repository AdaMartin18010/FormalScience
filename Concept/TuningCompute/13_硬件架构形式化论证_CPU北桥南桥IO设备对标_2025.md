# ç¡¬ä»¶æ¶æ„å½¢å¼åŒ–è®ºè¯ï¼šCPU/åŒ—æ¡¥/å—æ¡¥/IOè®¾å¤‡å¯¹æ ‡åˆ†æ (2025ç‰ˆ)

## æ–‡æ¡£å…ƒä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.1 (2025ç¡¬ä»¶æ¶æ„å¯¹æ ‡ï¼Œä¿®è®¢ç‰ˆ) |
| **åˆ›å»ºæ—¥æœŸ** | 2025-10-22 |
| **ä¿®è®¢æ—¥æœŸ** | 2025-10-22 |
| **ç†è®ºåŸºç¡€** | ç¡¬ä»¶è™šæ‹ŸåŒ–ã€èŠ¯ç‰‡ç»„æ¶æ„ã€IOè™šæ‹ŸåŒ– |
| **å®è¯æ•°æ®** | Intel SDM Vol 3 (2024)ã€PCIe 6.0è§„èŒƒã€CXL 3.0è§„èŒƒ |
| **å¯¹æ ‡æ¥æº** | Intel/AMD 2025è§„èŒƒã€PCI-SIGã€JEDECã€ARM |
| **çŠ¶æ€** | æŠ€æœ¯å¯¹æ ‡ä¸åˆ†æ |

> **æ ¸å¿ƒè§‚å¯Ÿ**: åŸºäºå¯¹Intelã€AMDã€ARMç­‰å‚å•†2025å¹´å…¬å¼€è§„èŒƒçš„åˆ†æï¼Œç°ä»£ç¡¬ä»¶æ¶æ„å·²ä»ä¼ ç»Ÿ"åŒ—æ¡¥-å—æ¡¥"äºŒå…ƒç»“æ„æ¼”è¿›ä¸º"CPUç‰‡ä¸Šé›†æˆ+PCH+CXL"ä¸‰å…ƒæ¶æ„ã€‚æœ¬æ–‡æ¡£åˆ†æè®¤ä¸ºï¼Œè™šæ‹ŸåŒ–/å®¹å™¨åŒ–/æ²™ç›’åŒ–çš„ç¡¬ä»¶è¾¹ç•Œå¯ç†è§£ä¸ºç”±CPUç‰¹æƒçº§ã€IOMMUåœ°å€ç©ºé—´ã€PCIeé…ç½®ç©ºé—´ä¸‰ä¸ªæ­£äº¤ç»´åº¦å…±åŒå®šä¹‰çš„å¤šç»´ç©ºé—´ã€‚

## âš ï¸ å…è´£å£°æ˜

**æœ¬æ–‡æ¡£ä¸ºæŠ€æœ¯å¯¹æ ‡ä¸åˆ†ææ€§è´¨ï¼Œä»…ä¾›ç ”ç©¶å‚è€ƒã€‚**

- **åŸºäºå…¬å¼€è§„èŒƒ**: æ‰€æœ‰æŠ€æœ¯ä¿¡æ¯å‡æ¥è‡ªå‚å•†å…¬å¼€å‘å¸ƒçš„è§„èŒƒæ–‡æ¡£ï¼ˆIntel SDMã€ARM ARMã€PCIeè§„èŒƒç­‰ï¼‰ï¼Œéƒ¨åˆ†ä¿¡æ¯å¯èƒ½å·²è¿‡æ—¶æˆ–ä¸å®Œæ•´ã€‚
- **æœªç»å®éªŒéªŒè¯**: æ–‡æ¡£ä¸­çš„æ€§èƒ½æ•°æ®ä¸»è¦å¼•ç”¨è‡ªå·²å‘è¡¨æ–‡çŒ®å’Œå‚å•†ç™½çš®ä¹¦ï¼Œéæœ¬æ–‡åŸåˆ›å®éªŒç»“æœã€‚
- **ç†è®ºæ¨¡å‹å±€é™**: æ–‡æ¡£ä¸­çš„å½¢å¼åŒ–æ¨¡å‹ä¸ºç®€åŒ–æŠ½è±¡ï¼Œå®é™…ç¡¬ä»¶è¡Œä¸ºå¯èƒ½æ›´å¤æ‚ã€‚
- **ä¾›åº”å•†å·®å¼‚**: ä¸åŒå‚å•†ï¼ˆIntel/AMD/ARM/RISC-Vï¼‰çš„å®ç°å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œæœ¬æ–‡æ¡£ä»¥ä¸»æµæ–¹æ¡ˆä¸ºå‡†ã€‚

**å»ºè®®è¯»è€…æŸ¥é˜…å‚å•†æœ€æ–°è§„èŒƒæ–‡æ¡£ä»¥è·å–æƒå¨ä¿¡æ¯ã€‚**

---

## ğŸ“‹ ç›®å½•

- [æ–‡æ¡£å…ƒä¿¡æ¯](#æ–‡æ¡£å…ƒä¿¡æ¯)
- [âš ï¸ å…è´£å£°æ˜](#-å…è´£å£°æ˜)
- [ğŸ“‹ ç›®å½•](#-ç›®å½•)
- [Part 0: 2025ç¡¬ä»¶æ¶æ„æ‹“æ‰‘å…¨æ™¯](#part-0-2025ç¡¬ä»¶æ¶æ„æ‹“æ‰‘å…¨æ™¯)
  - [0.1 æ¶æ„æ¼”è¿›å¯¹æ¯”](#01-æ¶æ„æ¼”è¿›å¯¹æ¯”)
  - [0.2 æ ¸å¿ƒå˜åŒ–](#02-æ ¸å¿ƒå˜åŒ–)
- [Part I: CPUç¡¬ä»¶æ¶æ„å½¢å¼åŒ–](#part-i-cpuç¡¬ä»¶æ¶æ„å½¢å¼åŒ–)
  - [1.1 CPUç‰¹æƒçº§ä¸è™šæ‹ŸåŒ–æ‰©å±•](#11-cpuç‰¹æƒçº§ä¸è™šæ‹ŸåŒ–æ‰©å±•)
    - [1.1.1 Intel x86-64ç‰¹æƒçº§å½¢å¼åŒ–](#111-intel-x86-64ç‰¹æƒçº§å½¢å¼åŒ–)
    - [1.1.2 Intel VT-xæ‰©å±•å½¢å¼åŒ–](#112-intel-vt-xæ‰©å±•å½¢å¼åŒ–)
    - [1.1.3 EPT (Extended Page Table) å½¢å¼åŒ–](#113-ept-extended-page-table-å½¢å¼åŒ–)
    - [1.1.4 CPUå†…å­˜æ§åˆ¶å™¨é›†æˆ (2025)](#114-cpuå†…å­˜æ§åˆ¶å™¨é›†æˆ-2025)
    - [1.1.5 CPU PCIeæ§åˆ¶å™¨é›†æˆ](#115-cpu-pcieæ§åˆ¶å™¨é›†æˆ)
- [Part II: èŠ¯ç‰‡ç»„æ¶æ„æ¼”è¿›ï¼šåŒ—æ¡¥æ¶ˆäº¡ä¸å—æ¡¥é‡æ„](#part-ii-èŠ¯ç‰‡ç»„æ¶æ„æ¼”è¿›åŒ—æ¡¥æ¶ˆäº¡ä¸å—æ¡¥é‡æ„)
  - [2.1 åŒ—æ¡¥åŠŸèƒ½æ¶ˆäº¡è·¯å¾„](#21-åŒ—æ¡¥åŠŸèƒ½æ¶ˆäº¡è·¯å¾„)
  - [2.2 å—æ¡¥é‡æ„ä¸ºPCH (Platform Controller Hub)](#22-å—æ¡¥é‡æ„ä¸ºpch-platform-controller-hub)
  - [2.3 CXL (Compute Express Link) æ–°æ¶æ„](#23-cxl-compute-express-link-æ–°æ¶æ„)
- [Part III: IOè®¾å¤‡è™šæ‹ŸåŒ–å½¢å¼åŒ–](#part-iii-ioè®¾å¤‡è™šæ‹ŸåŒ–å½¢å¼åŒ–)
  - [3.1 IOMMUæ ¸å¿ƒç†è®º](#31-iommuæ ¸å¿ƒç†è®º)
    - [3.1.1 Intel VT-d (Virtualization Technology for Directed I/O)](#311-intel-vt-d-virtualization-technology-for-directed-io)
    - [3.1.2 ARM SMMU (System Memory Management Unit)](#312-arm-smmu-system-memory-management-unit)
  - [3.2 SR-IOV (Single Root I/O Virtualization)](#32-sr-iov-single-root-io-virtualization)
  - [3.3 xHCI (eXtensible Host Controller Interface)](#33-xhci-extensible-host-controller-interface)
  - [3.4 NVMe (Non-Volatile Memory Express)](#34-nvme-non-volatile-memory-express)
- [Part IV: 2025ç¡¬ä»¶æ ‡å‡†å¯¹æ ‡çŸ©é˜µ](#part-iv-2025ç¡¬ä»¶æ ‡å‡†å¯¹æ ‡çŸ©é˜µ)
  - [4.1 CPUè™šæ‹ŸåŒ–æ ‡å‡†å¯¹æ ‡](#41-cpuè™šæ‹ŸåŒ–æ ‡å‡†å¯¹æ ‡)
  - [4.2 å†…å­˜æ ‡å‡†å¯¹æ ‡](#42-å†…å­˜æ ‡å‡†å¯¹æ ‡)
  - [4.3 PCIe/CXLæ ‡å‡†å¯¹æ ‡](#43-pciecxlæ ‡å‡†å¯¹æ ‡)
  - [4.4 IOè®¾å¤‡æ ‡å‡†å¯¹æ ‡](#44-ioè®¾å¤‡æ ‡å‡†å¯¹æ ‡)
- [Part V: è™šæ‹ŸåŒ–/å®¹å™¨åŒ–/æ²™ç›’åŒ–çš„ç¡¬ä»¶æ”¯æŒåˆ†æ](#part-v-è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ–çš„ç¡¬ä»¶æ”¯æŒåˆ†æ)
  - [5.1 ç¡¬ä»¶æ”¯æŒç»´åº¦çŸ©é˜µ](#51-ç¡¬ä»¶æ”¯æŒç»´åº¦çŸ©é˜µ)
  - [5.2 è™šæ‹ŸåŒ–çš„ç¡¬ä»¶ä¾èµ–åˆ†æ](#52-è™šæ‹ŸåŒ–çš„ç¡¬ä»¶ä¾èµ–åˆ†æ)
    - [5.2.1 Type-1 Hypervisor (KVM/Xen/ESXi)](#521-type-1-hypervisor-kvmxenesxi)
    - [5.2.2 å®¹å™¨ (Docker/Kubernetes)](#522-å®¹å™¨-dockerkubernetes)
    - [5.2.3 æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”](#523-æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”)
  - [5.3 ä¸‰ç§æŠ€æœ¯çš„ç¡¬ä»¶è¾¹ç•Œå®šç†](#53-ä¸‰ç§æŠ€æœ¯çš„ç¡¬ä»¶è¾¹ç•Œå®šç†)
- [Part VI: å½¢å¼åŒ–è¯æ˜ä¸ç†è®ºç»Ÿä¸€](#part-vi-å½¢å¼åŒ–è¯æ˜ä¸ç†è®ºç»Ÿä¸€)
  - [6.1 ç¡¬ä»¶èµ„æºå½¢å¼åŒ–æ¨¡å‹](#61-ç¡¬ä»¶èµ„æºå½¢å¼åŒ–æ¨¡å‹)
  - [6.2 ç¡¬ä»¶èƒ½åŠ›è¾¹ç•Œå½¢å¼åŒ–](#62-ç¡¬ä»¶èƒ½åŠ›è¾¹ç•Œå½¢å¼åŒ–)
  - [6.3 ä¸ä¸Šå±‚ç†è®ºçš„ç»Ÿä¸€](#63-ä¸ä¸Šå±‚ç†è®ºçš„ç»Ÿä¸€)
- [Part VII: æœªæ¥è¶‹åŠ¿ä¸æŠ€æœ¯è·¯çº¿](#part-vii-æœªæ¥è¶‹åŠ¿ä¸æŠ€æœ¯è·¯çº¿)
  - [7.1 2025-2030ç¡¬ä»¶è·¯çº¿å›¾](#71-2025-2030ç¡¬ä»¶è·¯çº¿å›¾)
    - [7.1.1 CPUæ¼”è¿›](#711-cpuæ¼”è¿›)
    - [7.1.2 å†…å­˜æ¼”è¿›](#712-å†…å­˜æ¼”è¿›)
    - [7.1.3 PCIe/CXLæ¼”è¿›](#713-pciecxlæ¼”è¿›)
  - [7.2 è™šæ‹ŸåŒ–æŠ€æœ¯è¶‹åŠ¿](#72-è™šæ‹ŸåŒ–æŠ€æœ¯è¶‹åŠ¿)
    - [7.2.1 Confidential Computing](#721-confidential-computing)
    - [7.2.2 GPUè™šæ‹ŸåŒ–](#722-gpuè™šæ‹ŸåŒ–)
    - [7.2.3 DPU (Data Processing Unit)](#723-dpu-data-processing-unit)
  - [7.3 å®¹å™¨æŠ€æœ¯è¶‹åŠ¿](#73-å®¹å™¨æŠ€æœ¯è¶‹åŠ¿)
    - [7.3.1 eBPFç¡¬ä»¶å¸è½½](#731-ebpfç¡¬ä»¶å¸è½½)
    - [7.3.2 RDMAå®¹å™¨ç½‘ç»œ](#732-rdmaå®¹å™¨ç½‘ç»œ)
  - [7.4 æ²™ç›’æŠ€æœ¯è¶‹åŠ¿](#74-æ²™ç›’æŠ€æœ¯è¶‹åŠ¿)
    - [7.4.1 WASMç¡¬ä»¶åŠ é€Ÿ](#741-wasmç¡¬ä»¶åŠ é€Ÿ)
    - [7.4.2 å½¢å¼åŒ–éªŒè¯ç¡¬ä»¶](#742-å½¢å¼åŒ–éªŒè¯ç¡¬ä»¶)
- [æ€»ç»“](#æ€»ç»“)
  - [æ ¸å¿ƒè´¡çŒ®](#æ ¸å¿ƒè´¡çŒ®)
  - [ç†è®ºå®Œæ•´æ€§](#ç†è®ºå®Œæ•´æ€§)
  - [å®è·µä»·å€¼](#å®è·µä»·å€¼)
- [é™„å½•: æœ¯è¯­å¯¹ç…§è¡¨](#é™„å½•-æœ¯è¯­å¯¹ç…§è¡¨)

---

## Part 0: 2025ç¡¬ä»¶æ¶æ„æ‹“æ‰‘å…¨æ™¯

### 0.1 æ¶æ„æ¼”è¿›å¯¹æ¯”

**ä¼ ç»Ÿæ¶æ„ (2010å¹´ä»£)**:

```text
        +-------+
        |  CPU  |
        +---+---+
            | FSB (Front Side Bus)
        +---v-------+
        | åŒ—æ¡¥ MCH  |
        |-----------|
        | - å†…å­˜æ§åˆ¶|
        | - PCIe   |
        | - æ˜¾å¡   |
        +-----+-----+
              | DMI
        +-----v-----+
        | å—æ¡¥ ICH  |
        |-----------|
        | - USB    |
        | - SATA   |
        | - LPC    |
        +-----------+
```

**2025å¹´æ¶æ„**:

```text
        +---------------------------+
        |         CPU Die           |
        |---------------------------|
        | â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  |
        | â”‚   Core Complex      â”‚  |
        | â”‚ - Ring Bus          â”‚  |
        | â”‚ - L3 Cache          â”‚  |
        | â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  |
        |                           |
        | â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” |
        | â”‚ IMC â”‚ â”‚ PCIe â”‚ â”‚ CXL â”‚ |  â† åŒ—æ¡¥åŠŸèƒ½å·²é›†æˆ
        | â”‚DDR5 â”‚ â”‚ 5.0  â”‚ â”‚ 3.0 â”‚ |
        | â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ |
        +----â”‚--------â”‚-------â”‚-----+
             â”‚        â”‚       â”‚
             v        v       v
          RAM     GPU/NVMe  CXL.mem
                      â”‚
                      â”‚ DMI 5.0
                      v
              +-------+--------+
              |   PCH (å—æ¡¥)   |
              |----------------|
              | - USB 4.0      |
              | - SATA/SAS     |
              | - Ethernet     |
              | - WiFi 7       |
              +----------------+
```

### 0.2 æ ¸å¿ƒå˜åŒ–

| ç»´åº¦ | ä¼ ç»Ÿæ¶æ„ | 2025æ¶æ„ | æ€§èƒ½æå‡ |
|------|---------|----------|----------|
| **å†…å­˜æ§åˆ¶** | åŒ—æ¡¥ | CPUç‰‡ä¸ŠIMC | å»¶è¿Ÿ -15% |
| **PCIeé€šé“** | åŒ—æ¡¥ | CPUç‰‡ä¸Š (20-44æ¡) | å¸¦å®½ +100% |
| **å†…å­˜ç±»å‹** | DDR3/DDR4 | DDR5-5600/6400 | å¸¦å®½ +50% |
| **CXLæ”¯æŒ** | æ—  | CXL 3.0 (64GB/s) | æ–°å¢ |
| **CPU-å—æ¡¥** | DMI 2.0 (20Gb/s) | DMI 5.0 (640Gb/s) | +3100% |

---

## Part I: CPUç¡¬ä»¶æ¶æ„å½¢å¼åŒ–

### 1.1 CPUç‰¹æƒçº§ä¸è™šæ‹ŸåŒ–æ‰©å±•

#### 1.1.1 Intel x86-64ç‰¹æƒçº§å½¢å¼åŒ–

**å››ç¯ç‰¹æƒçº§æ¨¡å‹** (Intel SDM Vol 3, Ch 5):

$$
\begin{aligned}
\text{PrivilegeRing} &= \{0, 1, 2, 3\} \\
\text{CPL} &= \text{å½“å‰ç‰¹æƒçº§ (Current Privilege Level)} \\
\text{DPL} &= \text{æè¿°ç¬¦ç‰¹æƒçº§ (Descriptor Privilege Level)} \\
\text{RPL} &= \text{è¯·æ±‚ç‰¹æƒçº§ (Requested Privilege Level)}
\end{aligned}
$$

**è®¿é—®æ§åˆ¶è§„åˆ™**:

$$
\text{Access}(\text{Subject}, \text{Object}) = \begin{cases}
\text{Allow} & \text{if } \max(\text{CPL}, \text{RPL}) \leq \text{DPL} \\
\text{\#GP(0)} & \text{otherwise (General Protection Fault)}
\end{cases}
$$

**è™šæ‹ŸåŒ–æ˜ å°„**:

```text
Ring 0  â†’  Hypervisor (VMM)
Ring 1  â†’  Guest OS (deprivileged)  â† è™šæ‹ŸåŒ–çº¢çº¿
Ring 3  â†’  User processes
```

#### 1.1.2 Intel VT-xæ‰©å±•å½¢å¼åŒ–

**VMX Operation Modes** (Intel SDM Vol 3, Ch 23):

$$
\text{CPU}_{\text{mode}} = \begin{cases}
\text{VMX Root} & \text{Hypervisorè¿è¡Œæ¨¡å¼} \\
\text{VMX Non-Root} & \text{Guest VMè¿è¡Œæ¨¡å¼}
\end{cases}
$$

**VM Entry/Exitè½¬æ¢**:

$$
\begin{aligned}
\text{VM-Entry}: &\quad \text{VMX Root} \xrightarrow{\text{VMLAUNCH/VMRESUME}} \text{VMX Non-Root} \\
\text{VM-Exit}: &\quad \text{VMX Non-Root} \xrightarrow{\text{Sensitive Instruction}} \text{VMX Root}
\end{aligned}
$$

**æ•æ„ŸæŒ‡ä»¤é›†åˆ**:

$$
\begin{aligned}
\mathcal{S}_{\text{sensitive}} = \{&\text{CPUID}, \text{HLT}, \text{IN/OUT}, \text{INVD}, \\
&\text{INVLPG}, \text{LGDT}, \text{LIDT}, \text{LLDT}, \\
&\text{LTR}, \text{MOV CR}, \text{MOV DR}, \text{RDMSR}, \\
&\text{RDPMC}, \text{SGDT}, \text{SIDT}, \text{SLDT}, \\
&\text{STR}, \text{VMCALL}, \text{WRMSR}, \ldots \}
\end{aligned}
$$

**VM-Exitå¼€é”€æ¨¡å‹** (2025å®æµ‹æ•°æ®):

$$
\text{Latency}_{\text{VM-Exit}} = \begin{cases}
200\text{-}300 \text{ cycles} & \text{Intel 13th/14th Gen} \\
150\text{-}250 \text{ cycles} & \text{AMD EPYC 4th Gen} \\
\end{cases}
$$

#### 1.1.3 EPT (Extended Page Table) å½¢å¼åŒ–

**äºŒç»´é¡µè¡¨è½¬æ¢**:

$$
\begin{aligned}
\text{GVA} &\xrightarrow{\text{Guest Page Table}} \text{GPA} \\
\text{GPA} &\xrightarrow{\text{EPT (VMMæ§åˆ¶)}} \text{HPA}
\end{aligned}
$$

**å®Œæ•´åœ°å€è½¬æ¢é“¾**:

$$
\text{GVA} \xrightarrow{\text{CR3}_{\text{guest}}} \text{GPA} \xrightarrow{\text{EPTP}} \text{HPA}
$$

**EPTé¡µè¡¨ç»“æ„** (4-level):

```text
EPTP â†’ EPT-PML4 (512 entries)
       â†’ EPT-PDP (512 entries)
          â†’ EPT-PD (512 entries)
             â†’ EPT-PT (512 entries)
                â†’ HPA (4KB page)
```

**EPTæ€§èƒ½å¼€é”€**:

$$
\text{TLB Miss Cost} = \begin{cases}
\text{Native}: & 1 \times 4 = 4 \text{ æ¬¡å†…å­˜è®¿é—® (4-level)} \\
\text{EPT}: & 4 \times 4 = 16 \text{ æ¬¡å†…å­˜è®¿é—® (nested)} \\
\end{cases}
$$

**ç¼“è§£ç­–ç•¥**:

$$
\begin{aligned}
\text{VPID} &= \text{Virtual Processor ID (16-bit tag)} \\
\text{TLB}_{\text{tagged}} &= \{(\text{VA}, \text{PA}, \text{VPID}, \ldots)\}
\end{aligned}
$$

ä½¿ç”¨VPIDåï¼ŒVMåˆ‡æ¢æ—¶TLBæ— éœ€flushï¼Œæ€§èƒ½æå‡15-25%ã€‚

#### 1.1.4 CPUå†…å­˜æ§åˆ¶å™¨é›†æˆ (2025)

**IMC (Integrated Memory Controller) æ¶æ„**:

```text
        +---------------------+
        |     CPU Die         |
        |---------------------|
        |   Core Complex      |
        |         â†•           |
        |   Ring Bus / Mesh   |
        |         â†•           |
        |  +--------------+   |
        |  |     IMC      |   |
        |  |--------------|   |
        |  | - DDR5 PHY   |   |
        |  | - 2/4/8 Ch   |   |
        |  | - ECC        |   |
        |  +--------------+   |
        +----------â†“----------+
                   â†“
             DDR5 DIMMs
```

**DDR5è§„æ ¼å¯¹æ ‡** (JEDEC 2023):

| å‚æ•° | DDR4-3200 | DDR5-5600 | æå‡ |
|------|-----------|-----------|------|
| **æ•°æ®é€Ÿç‡** | 3200 MT/s | 5600 MT/s | +75% |
| **å¸¦å®½/é€šé“** | 25.6 GB/s | 44.8 GB/s | +75% |
| **é¢„å–å®½åº¦** | 8n | 16n | +100% |
| **Bankç»„** | 4 | 8 | +100% |
| **ç‰‡ä¸ŠECC** | æ—  | æ ‡é… | æ–°å¢ |
| **å·¥ä½œç”µå‹** | 1.2V | 1.1V | -8.3% |

**å†…å­˜å»¶è¿Ÿå¯¹æ¯”**:

$$
\text{Latency}_{\text{access}} = \begin{cases}
\text{DDR4-3200}: & 15\text{ns (CL}=15) \\
\text{DDR5-5600}: & 13\text{ns (CL}=40, \text{freq higher}) \\
\end{cases}
$$

å°½ç®¡CAS Latencyå¢åŠ ï¼Œä½†ç”±äºé¢‘ç‡æå‡ï¼Œå®é™…å»¶è¿Ÿé™ä½çº¦15%ã€‚

#### 1.1.5 CPU PCIeæ§åˆ¶å™¨é›†æˆ

**PCIe 5.0è§„æ ¼** (PCI-SIG 2019):

| å‚æ•° | PCIe 4.0 | PCIe 5.0 | PCIe 6.0 (2021) |
|------|----------|----------|-----------------|
| **é€Ÿç‡** | 16 GT/s | 32 GT/s | 64 GT/s |
| **å¸¦å®½/lane** | 2 GB/s | 4 GB/s | 8 GB/s |
| **ç¼–ç ** | 128b/130b | 128b/130b | PAM4 (242b/256b) |
| **x16å¸¦å®½** | 32 GB/s | 64 GB/s | 128 GB/s |

**2025å¹´CPU PCIeé…ç½®å…¸å‹å€¼**:

```text
Intel Core i9-14900K:
  - 20æ¡PCIe 5.0 (CPUç›´è¿)
    â”œâ”€ 16æ¡ â†’ GPU (64GB/s)
    â””â”€ 4æ¡ â†’ Primary NVMe SSD (16GB/s)

AMD Ryzen 9 7950X:
  - 28æ¡PCIe 5.0
    â”œâ”€ 16æ¡ â†’ GPU
    â”œâ”€ 8æ¡ â†’ 2Ã— NVMe SSD
    â””â”€ 4æ¡ â†’ Chipset (PCH)
```

**PCIeæ‹“æ‰‘å½¢å¼åŒ–**:

$$
\begin{aligned}
\mathcal{T}_{\text{PCIe}} &= (V, E, \text{BDF}) \\
V &= \{\text{Root Complex}, \text{Switches}, \text{Endpoints}\} \\
E &= \{\text{PCIe Links}\} \\
\text{BDF} &= (\text{Bus}:\text{Device}:\text{Function})
\end{aligned}
$$

**é…ç½®ç©ºé—´è®¿é—®**:

$$
\text{ConfigAddr} = \begin{cases}
\text{Bus} & \in [0, 255] \\
\text{Device} & \in [0, 31] \\
\text{Function} & \in [0, 7] \\
\text{Register} & \in [0, 4095] \quad \text{(PCIe extended)}
\end{cases}
$$

---

## Part II: èŠ¯ç‰‡ç»„æ¶æ„æ¼”è¿›ï¼šåŒ—æ¡¥æ¶ˆäº¡ä¸å—æ¡¥é‡æ„

### 2.1 åŒ—æ¡¥åŠŸèƒ½æ¶ˆäº¡è·¯å¾„

**æ—¶é—´çº¿**:

```text
1990s:  åŒ—æ¡¥è´Ÿè´£ [å†…å­˜æ§åˆ¶ + AGP + PCI]
2000s:  PCIeå–ä»£AGP/PCI
2010:   AMDé¦–æ¬¡å°†å†…å­˜æ§åˆ¶å™¨é›†æˆåˆ°CPU (K8æ¶æ„)
2011:   Intel Sandy Bridgeé›†æˆå†…å­˜æ§åˆ¶å™¨
2015:   PCIe 3.0æˆä¸ºä¸»æµï¼ŒåŒ—æ¡¥å®Œå…¨æ¶ˆå¤±
2025:   CPUé›†æˆ [IMC + PCIe 5.0 + CXL 3.0]
```

**åŠŸèƒ½è¿ç§»å½¢å¼åŒ–**:

$$
\begin{aligned}
\mathcal{F}_{\text{Northbridge}}^{2000} &= \{\text{MemCtrl}, \text{PCIe}, \text{Graphics}\} \\
\mathcal{F}_{\text{CPU}}^{2025} &= \mathcal{F}_{\text{Northbridge}}^{2000} \cup \{\text{CXL}, \text{Accelerators}\} \\
\mathcal{F}_{\text{Northbridge}}^{2025} &= \emptyset
\end{aligned}
$$

### 2.2 å—æ¡¥é‡æ„ä¸ºPCH (Platform Controller Hub)

**Intel PCH Z790è§„æ ¼** (2023):

```text
+-------------------+
|   PCH (Z790)      |
|-------------------|
| DMI 4.0 (64Gb/s)  | â† è¿æ¥CPU
|-------------------|
| PCIe 4.0:         |
| - 12æ¡ (flexible) |
|-------------------|
| USB:              |
| - 10Ã— USB 3.2     |
| - 14Ã— USB 2.0     |
|-------------------|
| SATA:             |
| - 8Ã— SATA 6Gb/s   |
|-------------------|
| Ethernet:         |
| - 2.5GbE (I225)   |
|-------------------|
| WiFi/BT:          |
| - WiFi 6E         |
| - Bluetooth 5.3   |
+-------------------+
```

**AMD X670Eè§„æ ¼** (2022):

```text
+-------------------+
|   X670E           |
|-------------------|
| PCIe 5.0: 8æ¡     |
| PCIe 4.0: 12æ¡    |
|-------------------|
| USB 4.0: 4ç«¯å£    |
| USB 3.2: 12ç«¯å£   |
|-------------------|
| SATA: 8ç«¯å£       |
|-------------------|
| 10GbEæ”¯æŒ         |
+-------------------+
```

**DMIæ€»çº¿æ¼”è¿›**:

| ä»£æ•° | è§„èŒƒ | å¸¦å®½ | ç­‰æ•ˆPCIe |
|------|------|------|----------|
| DMI 1.0 | 2008 | 2 GB/s | PCIe 2.0 x4 |
| DMI 2.0 | 2011 | 2 GB/s | PCIe 2.0 x4 |
| DMI 3.0 | 2015 | 4 GB/s | PCIe 3.0 x4 |
| DMI 4.0 | 2021 | 8 GB/s | PCIe 4.0 x8 |
| DMI 5.0 | 2023 | 16 GB/s | PCIe 5.0 x8 |

### 2.3 CXL (Compute Express Link) æ–°æ¶æ„

**CXL 3.0è§„æ ¼** (2022):

```text
CXLåè®®æ ˆ:
  +-------------------+
  |   CXL.io          | â† I/Oåè®® (ç±»ä¼¼PCIe)
  +-------------------+
  |   CXL.cache       | â† ç¼“å­˜ä¸€è‡´æ€§
  +-------------------+
  |   CXL.mem         | â† å†…å­˜è¯­ä¹‰
  +-------------------+
  |   Physical Layer  | â† PCIe 5.0 PHY (32GT/s)
  +-------------------+
```

**CXLä¸‰ç§è®¾å¤‡ç±»å‹**:

$$
\begin{aligned}
\text{Type 1} &: \text{Accelerator (GPU/FPGA)} \\
&\quad \text{æ”¯æŒ CXL.io + CXL.cache} \\
\text{Type 2} &: \text{Accelerator with Memory} \\
&\quad \text{æ”¯æŒ CXL.io + CXL.cache + CXL.mem} \\
\text{Type 3} &: \text{Memory Expander} \\
&\quad \text{æ”¯æŒ CXL.io + CXL.mem}
\end{aligned}
$$

**CXLå†…å­˜æ‰©å±•å¸¦å®½**:

$$
\text{BW}_{\text{CXL 3.0}} = 32\text{GT/s} \times 16\text{lanes} \times \frac{128}{130} = 64\text{GB/s}
$$

**ä¸DDR5å¯¹æ¯”**:

```text
DDR5-5600 (4é€šé“): 44.8 Ã— 4 = 179.2 GB/s (èšåˆ)
CXL 3.0 (x16):     64 GB/s

ç”¨é€”å·®å¼‚:
  DDR5 â†’ ä½å»¶è¿Ÿæœ¬åœ°å†…å­˜
  CXL  â†’ å¤§å®¹é‡æ‰©å±•å†…å­˜ (Tiered Memory)
```

---

## Part III: IOè®¾å¤‡è™šæ‹ŸåŒ–å½¢å¼åŒ–

### 3.1 IOMMUæ ¸å¿ƒç†è®º

#### 3.1.1 Intel VT-d (Virtualization Technology for Directed I/O)

**åœ°å€è½¬æ¢é“¾**:

$$
\begin{aligned}
\text{Device} &\xrightarrow{\text{DMA Request (IOVA)}} \text{IOMMU} \\
\text{IOMMU} &\xrightarrow{\text{Page Table Walk}} \text{Physical RAM (HPA)}
\end{aligned}
$$

**IOMMUé¡µè¡¨ç»“æ„** (ä¸EPTç±»ä¼¼):

```text
DMAR (DMA Remapping) Page Table:
  Root Table Entry
  â†’ Context Entry
     â†’ Page Table (4-level or 5-level)
        â†’ HPA
```

**DMAé‡æ˜ å°„å½¢å¼åŒ–**:

$$
\begin{aligned}
\text{IOVA} &= \text{I/O Virtual Address (è®¾å¤‡è§†è§’)} \\
\text{HPA} &= \text{Host Physical Address (çœŸå®ç‰©ç†åœ°å€)} \\
\text{IOMMU}: &\quad \text{IOVA} \to \text{HPA}
\end{aligned}
$$

**éš”ç¦»å®šç†**:

$$
\begin{aligned}
&\forall \text{Device}_i, \text{Device}_j, \quad i \neq j: \\
&\quad \text{IOVA}_i \cap \text{IOVA}_j = \emptyset \quad \text{(åœ°å€ç©ºé—´éš”ç¦»)} \\
&\quad \text{HPA}_i \cap \text{HPA}_j = \emptyset \quad \text{(ç‰©ç†å†…å­˜éš”ç¦»)}
\end{aligned}
$$

**ä¸­æ–­é‡æ˜ å°„**:

$$
\begin{aligned}
\text{MSI/MSI-X} &\xrightarrow{\text{IOMMU Interrupt Remapping}} \text{LAPIC} \\
\text{æ˜ å°„è¡¨}: &\quad (\text{DeviceID}, \text{Vector}) \to (\text{APIC ID}, \text{Vector}')
\end{aligned}
$$

#### 3.1.2 ARM SMMU (System Memory Management Unit)

**SMMUæ¶æ„**:

```text
Device â†’ Stream ID â†’ SMMU â†’ Context Descriptor
                              â†“
                          Translation Table
                              â†“
                          Physical Address
```

**Stream IDå½¢å¼åŒ–**:

$$
\begin{aligned}
\text{StreamID} &\in [0, 65535] \quad \text{(16-bit)} \\
\text{Mapping}: &\quad \text{StreamID} \to \text{Context Descriptor} \\
&\quad \to \text{Translation Table Base (TTBR)}
\end{aligned}
$$

**SMMU Stageè½¬æ¢**:

$$
\begin{aligned}
\text{Stage 1}: &\quad \text{VA} \to \text{IPA} \quad \text{(Guest OSæ§åˆ¶)} \\
\text{Stage 2}: &\quad \text{IPA} \to \text{PA} \quad \text{(Hypervisoræ§åˆ¶)}
\end{aligned}
$$

### 3.2 SR-IOV (Single Root I/O Virtualization)

**SR-IOVè®¾å¤‡æ¨¡å‹**:

```text
Physical Function (PF):
  - å®Œæ•´è®¾å¤‡åŠŸèƒ½
  - ç®¡ç†Virtual Functions
  - é…ç½®SR-IOV

Virtual Function (VF):
  - è½»é‡çº§è®¾å¤‡å®ä¾‹
  - ç‹¬ç«‹PCIeé…ç½®ç©ºé—´
  - ç‹¬ç«‹BAR (Base Address Registers)
  - å¯ç›´é€šç»™VM
```

**SR-IOVå½¢å¼åŒ–**:

$$
\begin{aligned}
\text{PF} &= \text{Physical Function (1ä¸ª)} \\
\text{VF} &= \{\text{VF}_1, \text{VF}_2, \ldots, \text{VF}_n\} \quad n \leq 256 \\
\mathcal{R}_{\text{PF}} &= \text{å®Œæ•´èµ„æºé›†åˆ} \\
\mathcal{R}_{\text{VF}_i} &\subset \mathcal{R}_{\text{PF}} \quad \text{(èµ„æºå­é›†)}
\end{aligned}
$$

**VFéš”ç¦»å®šç†**:

$$
\forall i \neq j: \quad \mathcal{R}_{\text{VF}_i} \cap \mathcal{R}_{\text{VF}_j} = \emptyset
$$

**SR-IOVç½‘å¡ç¤ºä¾‹** (Intel X710):

```text
1ä¸ªPF:
  - 4ä¸ª10GbEç«¯å£
  - ç®¡ç†åŠŸèƒ½

128ä¸ªVF:
  - æ¯ä¸ªVFç‹¬ç«‹æ”¶å‘é˜Ÿåˆ—
  - ç‹¬ç«‹MACåœ°å€
  - ç‹¬ç«‹VLANé…ç½®
  - å¯ç›´é€šç»™128ä¸ªVM
```

**æ€§èƒ½å¯¹æ¯”**:

| æ¨¡å¼ | ååé‡ | å»¶è¿Ÿ | CPUå ç”¨ |
|------|--------|------|---------|
| **è½¯ä»¶è™šæ‹Ÿç½‘å¡** | 5 Gb/s | 200Î¼s | 60% |
| **SR-IOVç›´é€š** | 9.8 Gb/s | 15Î¼s | 5% |
| **æå‡** | +96% | -92.5% | -91.7% |

### 3.3 xHCI (eXtensible Host Controller Interface)

**USB 3.2/4.0 + è™šæ‹ŸåŒ–æ”¯æŒ**:

```text
xHCIæ¶æ„:
  +-------------------+
  |  Command Ring     | â† Hostä¸‹å‘å‘½ä»¤
  +-------------------+
  |  Event Ring       | â† è®¾å¤‡äº‹ä»¶å›ä¼ 
  +-------------------+
  |  Transfer Ring    | â† æ•°æ®ä¼ è¾“
  +-------------------+
  |  Doorbell Array   | â† å¼‚æ­¥é€šçŸ¥
  +-------------------+
```

**è™šæ‹ŸåŒ–å‹å¥½ç‰¹æ€§**:

1. **Hardware-based scheduling**:
   - å‡å°‘è½¯ä»¶å¹²é¢„
   - é™ä½VM-Exité¢‘ç‡

2. **Per-port power management**:
   - ç‹¬ç«‹USBç«¯å£ç”µæºæ§åˆ¶
   - æ”¯æŒVMçº§USBè®¾å¤‡éš”ç¦»

3. **Streams support**:
   - å•ä¸ªç«¯ç‚¹å¤šä¸ªæ•°æ®æµ
   - æå‡è™šæ‹ŸåŒ–ç¯å¢ƒååé‡

**USB 4.0è§„æ ¼** (2019):

| å‚æ•° | USB 3.2 Gen 2 | USB 4.0 | æå‡ |
|------|---------------|---------|------|
| **å¸¦å®½** | 20 Gb/s | 40 Gb/s | +100% |
| **åè®®** | USB only | USB + Thunderbolt 3 + DisplayPort | ç»Ÿä¸€ |
| **éš§é“** | å¦ | æ˜¯ (PCIe, DP) | æ–°å¢ |

### 3.4 NVMe (Non-Volatile Memory Express)

**NVMe over PCIeæ¶æ„**:

```text
        Application
             â†“
        File System
             â†“
        Block Layer
             â†“
       NVMe Driver
             â†“
     PCIe Transaction Layer
             â†“
        NVMe SSD
```

**NVMeé˜Ÿåˆ—æ¨¡å‹**:

$$
\begin{aligned}
\text{Admin Queue} &: 1ä¸ª \quad \text{(ç®¡ç†å‘½ä»¤)} \\
\text{I/O Queues} &: æœ€å¤š 65535ä¸ª \quad \text{(æ•°æ®ä¼ è¾“)} \\
\text{Queue Depth} &: æœ€å¤š 65536æ¡å‘½ä»¤
\end{aligned}
$$

**è™šæ‹ŸåŒ–æ”¯æŒ**:

1. **Namespaceéš”ç¦»**:
   $$
   \text{NVMe SSD} = \{\text{NS}_1, \text{NS}_2, \ldots, \text{NS}_n\}
   $$
   æ¯ä¸ªNamespaceå¯ç‹¬ç«‹åˆ†é…ç»™VMã€‚

2. **SR-IOVæ”¯æŒ** (NVMe 1.4+):
   - PF: ç®¡ç†åŠŸèƒ½
   - VF: ç‹¬ç«‹I/Oé˜Ÿåˆ—ï¼Œç›´é€šç»™VM

**æ€§èƒ½æ•°æ®** (PCIe 5.0 x4 NVMe SSD, 2025):

```text
é¡ºåºè¯»å–:  14,000 MB/s
é¡ºåºå†™å…¥:  12,000 MB/s
éšæœºè¯»å–:  2,500K IOPS
éšæœºå†™å…¥:  2,000K IOPS
å»¶è¿Ÿ:      50Î¼s (è¯»)
```

---

## Part IV: 2025ç¡¬ä»¶æ ‡å‡†å¯¹æ ‡çŸ©é˜µ

### 4.1 CPUè™šæ‹ŸåŒ–æ ‡å‡†å¯¹æ ‡

| åŠŸèƒ½ | Intel (2025) | AMD (2025) | ARM (2025) | æ ‡å‡†æ–‡æ¡£ |
|------|--------------|------------|------------|----------|
| **ç¡¬ä»¶è™šæ‹ŸåŒ–** | VT-x | AMD-V (SVM) | EL2 (Hyp mode) | - |
| **äºŒç»´é¡µè¡¨** | EPT | RVI (Nested PT) | Stage-2 Translation | - |
| **VPID/ASID** | VPID (16-bit) | ASID (16-bit) | VMID (16-bit) | - |
| **ä¸­æ–­è™šæ‹ŸåŒ–** | APICv | AVIC | GICv3/v4 | - |
| **å†…å­˜åŠ å¯†** | TME/TDX | SEV/SEV-SNP | Realm (ARMv9) | - |
| **CET (æ§åˆ¶æµ)** | CET (13th Gen+) | - | BTI/PAC (ARMv8.5+) | - |

**Intel TDX (Trust Domain Extensions)**:

```text
Confidential Computingæ¶æ„:
  +---------------------------+
  |   Trust Domain (TD)       |
  | - å†…å­˜åŠ å¯† (AES-256)       |
  | - å®Œæ•´æ€§ä¿æŠ¤ (HMAC)        |
  | - è¿œç¨‹è¯æ˜ (Attestation)   |
  +---------------------------+
        â†“ ç¡¬ä»¶éš”ç¦»
  +---------------------------+
  |       Hypervisor          |
  |   (æ— æ³•è®¿é—®TDå†…å­˜)         |
  +---------------------------+
```

### 4.2 å†…å­˜æ ‡å‡†å¯¹æ ‡

| æ ‡å‡† | å‘å¸ƒå¹´ä»½ | é€Ÿç‡ | å¸¦å®½/é€šé“ | ECC | çŠ¶æ€ |
|------|----------|------|-----------|-----|------|
| DDR4 | 2014 | 3200 MT/s | 25.6 GB/s | å¯é€‰ | ä¸»æµ |
| DDR5 | 2020 | 5600-6400 | 44.8-51.2 | æ ‡é… | **2025ä¸»æµ** |
| LPDDR5 | 2019 | 6400 | 51.2 | æ—  | ç§»åŠ¨ç«¯ |
| LPDDR5X | 2021 | 8533 | 68.3 | æ—  | æ——èˆ°ç§»åŠ¨ |
| HBM3 | 2022 | 6400 | 819 GB/s | æ˜¯ | æ•°æ®ä¸­å¿ƒGPU |
| HBM3E | 2023 | 9600 | 1228 GB/s | æ˜¯ | **2025é«˜ç«¯** |

**DDR5å…³é”®ç‰¹æ€§**:

1. **ç‰‡ä¸ŠECC** (On-die ECC):
   $$
   \text{æ•°æ®å®Œæ•´æ€§ä¿æŠ¤ï¼Œæ— æ€§èƒ½æŸå¤±}
   $$

2. **ä¸¤ä¸ªç‹¬ç«‹32-bité€šé“**:

   ```text
   DDR4: 1Ã— 64-bité€šé“
   DDR5: 2Ã— 32-bité€šé“ (æ›´çµæ´»çš„Rankç®¡ç†)
   ```

3. **Decision Feedback Equalization (DFE)**:
   - ä¿¡å·å®Œæ•´æ€§æ”¹å–„
   - æ”¯æŒæ›´é«˜é¢‘ç‡

### 4.3 PCIe/CXLæ ‡å‡†å¯¹æ ‡

| æ ‡å‡† | å‘å¸ƒå¹´ä»½ | é€Ÿç‡ | ç¼–ç  | x16å¸¦å®½ | çŠ¶æ€ |
|------|----------|------|------|---------|------|
| PCIe 3.0 | 2010 | 8 GT/s | 128b/130b | 16 GB/s | Legacy |
| PCIe 4.0 | 2017 | 16 GT/s | 128b/130b | 32 GB/s | ä¸»æµ |
| PCIe 5.0 | 2019 | 32 GT/s | 128b/130b | 64 GB/s | **2025ä¸»æµ** |
| PCIe 6.0 | 2022 | 64 GT/s | PAM4 | 128 GB/s | é«˜ç«¯æœåŠ¡å™¨ |
| CXL 2.0 | 2020 | 32 GT/s | - | 64 GB/s | æ–°å…´ |
| CXL 3.0 | 2022 | 32 GT/s | - | 64 GB/s | **2025ç›®æ ‡** |

**PCIe 6.0 PAM4è°ƒåˆ¶**:

```text
NRZ (ä¼ ç»Ÿ):  2ç”µå¹³ (0, 1)
PAM4:        4ç”µå¹³ (00, 01, 10, 11)
             â†’ æ¯ä¸ªç¬¦å·ä¼ è¾“2 bit
             â†’ é€Ÿç‡ç¿»å€ (32GT/s â†’ 64GT/s)
```

**CXLç”Ÿæ€** (2025):

```text
æ”¯æŒå‚å•†:
  - Intel (Sapphire Rapids+)
  - AMD (Genoa+)
  - ARM (Neoverse V2+)

è®¾å¤‡ç±»å‹:
  - Memory Expanders (Samsung, Micron)
  - Smart NICs (Intel IPU, NVIDIA BlueField)
  - Accelerators (Habana, Graphcore)
```

### 4.4 IOè®¾å¤‡æ ‡å‡†å¯¹æ ‡

| è®¾å¤‡ç±»åˆ« | æ ‡å‡† | é€Ÿç‡ | è™šæ‹ŸåŒ–æ”¯æŒ | 2025çŠ¶æ€ |
|----------|------|------|------------|----------|
| **ç½‘å¡** | Ethernet 10GbE | 10 Gb/s | SR-IOV | ä¸»æµ |
|  | Ethernet 25GbE | 25 Gb/s | SR-IOV | æ•°æ®ä¸­å¿ƒ |
|  | Ethernet 100GbE | 100 Gb/s | SR-IOV | é«˜ç«¯ |
| **å­˜å‚¨** | SATA 3.0 | 6 Gb/s | æ—  | Legacy |
|  | NVMe PCIe 4.0 | 32 Gb/s | SR-IOV | ä¸»æµ |
|  | NVMe PCIe 5.0 | 64 Gb/s | SR-IOV | **2025ä¸»æµ** |
| **USB** | USB 3.2 Gen 2 | 20 Gb/s | xHCIè™šæ‹ŸåŒ– | ä¸»æµ |
|  | USB 4.0 | 40 Gb/s | xHCIè™šæ‹ŸåŒ– | **2025æ™®åŠ** |
| **GPU** | PCIe 4.0 | 32 GB/s | ç›´é€š/MIG | ä¸»æµ |
|  | PCIe 5.0 + NVLink 4.0 | 64 + 900 GB/s | ç›´é€š/MIG | é«˜ç«¯ |

---

## Part V: è™šæ‹ŸåŒ–/å®¹å™¨åŒ–/æ²™ç›’åŒ–çš„ç¡¬ä»¶æ”¯æŒåˆ†æ

### 5.1 ç¡¬ä»¶æ”¯æŒç»´åº¦çŸ©é˜µ

| æŠ€æœ¯ | CPUç‰¹æƒçº§ | EPT/NPT | IOMMU | SR-IOV | CXL | éš”ç¦»å¼ºåº¦ |
|------|-----------|---------|-------|--------|-----|----------|
| **Type-1è™šæ‹ŸåŒ–** | âœ… VT-x/AMD-V | âœ… å¿…éœ€ | âœ… è®¾å¤‡ç›´é€š | âœ… è®¾å¤‡å…±äº« | âœ… å†…å­˜æ‰©å±• | â­â­â­â­â­ |
| **Type-2è™šæ‹ŸåŒ–** | âœ… VT-x/AMD-V | âœ… å¿…éœ€ | âš ï¸ å¯é€‰ | âŒ é€šå¸¸ä¸æ”¯æŒ | âŒ | â­â­â­â­ |
| **å®¹å™¨** | âŒ å…±äº«å†…æ ¸ | âŒ å…±äº«é¡µè¡¨ | âŒ | âŒ | âœ… å†…å­˜æ±  | â­â­â­ |
| **æ²™ç›’ (seccomp-bpf)** | âŒ ç”¨æˆ·æ€ | âŒ | âŒ | âŒ | âŒ | â­â­ |
| **æ²™ç›’ (SGX)** | âœ… Enclave | âœ… EPC | âŒ | âŒ | âŒ | â­â­â­â­â­ |
| **æ²™ç›’ (WASM)** | âŒ è½¯ä»¶éš”ç¦» | âŒ | âŒ | âŒ | âŒ | â­ |

### 5.2 è™šæ‹ŸåŒ–çš„ç¡¬ä»¶ä¾èµ–åˆ†æ

#### 5.2.1 Type-1 Hypervisor (KVM/Xen/ESXi)

**ç¡¬ä»¶ä¾èµ–é“¾**:

```text
1. CPUè™šæ‹ŸåŒ–æ‰©å±• (VT-x/AMD-V)
   â”œâ”€ VMXæ“ä½œæ¨¡å¼
   â”œâ”€ VM Entry/Exitæœºåˆ¶
   â””â”€ VMCS (Virtual Machine Control Structure)

2. äºŒç»´é¡µè¡¨ (EPT/RVI)
   â”œâ”€ GPA â†’ HPAè½¬æ¢
   â”œâ”€ VPID/ASID (TLBæ ‡ç­¾)
   â””â”€ Huge Pageæ”¯æŒ (2MB/1GB)

3. ä¸­æ–­è™šæ‹ŸåŒ– (APICv/AVIC)
   â”œâ”€ Posted Interrupts (å‡å°‘VM-Exit)
   â”œâ”€ Virtual APIC Page
   â””â”€ EOI (End of Interrupt) Virtualization

4. IOMMU (VT-d/AMD-Vi)
   â”œâ”€ DMAé‡æ˜ å°„
   â”œâ”€ ä¸­æ–­é‡æ˜ å°„
   â””â”€ è®¾å¤‡éš”ç¦»

5. SR-IOV (å¯é€‰ä½†æ¨è)
   â”œâ”€ ç½‘å¡VFç›´é€š
   â”œâ”€ GPU VFå…±äº«
   â””â”€ NVMe Namespaceéš”ç¦»
```

**æ€§èƒ½å¼€é”€é‡åŒ–** (2025å®æµ‹):

$$
\begin{aligned}
\text{Overhead}_{\text{CPU}} &\approx 2\text{-}5\% \quad \text{(EPT + VPID)} \\
\text{Overhead}_{\text{I/O}} &= \begin{cases}
1\text{-}3\% & \text{SR-IOVç›´é€š} \\
10\text{-}20\% & \text{è½¯ä»¶è™šæ‹Ÿç½‘å¡}
\end{cases} \\
\text{Overhead}_{\text{Memory}} &\approx 5\text{-}10\% \quad \text{(TLB miss + EPT)}
\end{aligned}
$$

#### 5.2.2 å®¹å™¨ (Docker/Kubernetes)

**ç¡¬ä»¶åˆ©ç”¨æ–¹å¼**:

```text
å®¹å™¨ â‰  ç¡¬ä»¶è™šæ‹ŸåŒ–
  - å…±äº«å®¿ä¸»æœºå†…æ ¸
  - å…±äº«å®¿ä¸»æœºé¡µè¡¨ (æ— EPT)
  - Namespaceéš”ç¦» (è½¯ä»¶å±‚)
  - Cgroupèµ„æºé™åˆ¶ (è½¯ä»¶å±‚)

ä½†å¯åˆ©ç”¨ç¡¬ä»¶ç‰¹æ€§:
  1. CPUäº²å’Œæ€§ (taskset)
     â†’ ç»‘å®šç‰©ç†æ ¸å¿ƒ
  
  2. NUMAæ„ŸçŸ¥è°ƒåº¦
     â†’ æœ¬åœ°å†…å­˜è®¿é—®ä¼˜åŒ–
  
  3. Huge Pages
     â†’ å‡å°‘TLB miss (2MB/1GBé¡µ)
  
  4. RDMAç½‘å¡
     â†’ å®¹å™¨ç›´æ¥è®¿é—® (é€šè¿‡è®¾å¤‡æš´éœ²)
  
  5. GPUå…±äº«
     â†’ NVIDIA MPS (Multi-Process Service)
     â†’ æ—¶é—´ç‰‡è°ƒåº¦ (éç¡¬ä»¶éš”ç¦»)
```

**å®¹å™¨æ€§èƒ½ç‰¹å¾**:

$$
\begin{aligned}
\text{Overhead}_{\text{CPU}} &< 1\% \quad \text{(å‡ ä¹native)} \\
\text{Overhead}_{\text{Memory}} &< 1\% \quad \text{(æ— äºŒç»´é¡µè¡¨)} \\
\text{Overhead}_{\text{I/O}} &= \begin{cases}
< 1\% & \text{æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ} \\
5\text{-}15\% & \text{Overlay2 (å¤šå±‚)} \\
1\text{-}3\% & \text{ç½‘ç»œ (bridgeæ¨¡å¼)}
\end{cases}
\end{aligned}
$$

#### 5.2.3 æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”

**ç¡¬ä»¶æ”¯æŒçš„æ²™ç›’ vs è½¯ä»¶æ²™ç›’**:

| æŠ€æœ¯ | ç¡¬ä»¶ä¾èµ– | éš”ç¦»æœºåˆ¶ | TCBå¤§å° | æ€§èƒ½å¼€é”€ | å®‰å…¨ç­‰çº§ |
|------|----------|----------|---------|----------|----------|
| **Intel SGX** | SGXæŒ‡ä»¤é›† | Enclave (EPC) | ~50KB | 5-10Ã— | æé«˜ |
| **AMD SEV** | SEVæ‰©å±• | å†…å­˜åŠ å¯† | ~1MB | 5-15% | æé«˜ |
| **ARM TrustZone** | TZç¡¬ä»¶ | Secure World | ~100KB | 10-20% | é«˜ |
| **seccomp-bpf** | BPF JIT | syscallè¿‡æ»¤ | ~10MB | < 1% | ä¸­ |
| **WASM** | æ—  | è½¯ä»¶SFI | ~5MB | 10-30% | ä¸­ |
| **gVisor** | æ—  | ç”¨æˆ·æ€å†…æ ¸ | ~50MB | 30-50% | ä¸­ |

**Intel SGXå½¢å¼åŒ–**:

$$
\begin{aligned}
\text{Enclave} &= (\text{Code}, \text{Data}, \text{EPC}) \\
\text{EPC} &= \text{Enclave Page Cache (åŠ å¯†å†…å­˜)} \\
\text{Measurement} &= \text{SHA-256}(\text{Enclave}) \\
\text{Attestation} &: \text{Measurement} \xrightarrow{\text{ç­¾å}} \text{è¿œç¨‹éªŒè¯}
\end{aligned}
$$

**SGXå†…å­˜æ¨¡å‹**:

```text
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  User Process    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  Enclave         â”‚ â† SGXä¿æŠ¤
        â”‚  - åŠ å¯†å†…å­˜ (EPC)â”‚
        â”‚  - å®Œæ•´æ€§ä¿æŠ¤    â”‚
        â”‚  - ä¸ä¿¡ä»»OS      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†• EENTER/EEXIT
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    OS Kernel     â”‚ â† æ— æ³•è®¿é—®Enclave
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ä¸‰ç§æŠ€æœ¯çš„ç¡¬ä»¶è¾¹ç•Œå®šç†

**å®šç† 5.1 (ç¡¬ä»¶éš”ç¦»è¾¹ç•Œå®šç†)**:

$$
\begin{aligned}
\text{IsolationStrength} &\propto \text{HardwareSupport} \\
&\text{where:} \\
\text{è™šæ‹ŸåŒ–} &: \text{è¾¹ç•Œ} = \text{EPT} \times \text{IOMMU} \times \text{VMX} \\
\text{å®¹å™¨} &: \text{è¾¹ç•Œ} = \text{Namespace} \times \text{Cgroup} \\
\text{æ²™ç›’} &: \text{è¾¹ç•Œ} = \begin{cases}
\text{SGX Enclave} & \text{(ç¡¬ä»¶)} \\
\text{syscall filter} & \text{(è½¯ä»¶)}
\end{cases}
\end{aligned}
$$

**æ¨è®º 5.1.1**:

$$
\text{è™šæ‹ŸåŒ–éš”ç¦»} > \text{å®¹å™¨éš”ç¦»} > \text{è½¯ä»¶æ²™ç›’éš”ç¦»}
$$

è¯æ˜: è™šæ‹ŸåŒ–åˆ©ç”¨ç¡¬ä»¶ç‰¹æƒçº§ (Ring -1) å’ŒäºŒç»´åœ°å€ç©ºé—´ï¼Œå®¹å™¨å…±äº«å†…æ ¸ï¼Œè½¯ä»¶æ²™ç›’å…±äº«åœ°å€ç©ºé—´ã€‚âˆ

---

## Part VI: å½¢å¼åŒ–è¯æ˜ä¸ç†è®ºç»Ÿä¸€

### 6.1 ç¡¬ä»¶èµ„æºå½¢å¼åŒ–æ¨¡å‹

**å®šä¹‰ 6.1 (ç¡¬ä»¶èµ„æºå…¨é›†)**:

$$
\begin{aligned}
\mathcal{H} &= (\mathcal{C}, \mathcal{M}, \mathcal{I}, \mathcal{P}) \\
\mathcal{C} &= \text{CPUèµ„æº} = \{\text{Cores}, \text{Cache}, \text{TLB}, \ldots\} \\
\mathcal{M} &= \text{å†…å­˜èµ„æº} = \{\text{DRAM}, \text{EPC}, \text{CXL.mem}, \ldots\} \\
\mathcal{I} &= \text{I/Oèµ„æº} = \{\text{PCIeè®¾å¤‡}, \text{USBè®¾å¤‡}, \ldots\} \\
\mathcal{P} &= \text{ç‰¹æƒèµ„æº} = \{\text{Ring 0}, \text{MSR}, \text{CR3}, \ldots\}
\end{aligned}
$$

**å®šä¹‰ 6.2 (è™šæ‹ŸåŒ–åˆ†å‰²å‡½æ•°)**:

$$
\begin{aligned}
\text{Partition}: \mathcal{H} &\to \{\mathcal{H}_1, \mathcal{H}_2, \ldots, \mathcal{H}_n\} \\
\text{s.t.} \quad &\bigcup_{i=1}^{n} \mathcal{H}_i = \mathcal{H} \\
&\mathcal{H}_i \cap \mathcal{H}_j = \emptyset, \quad \forall i \neq j
\end{aligned}
$$

**å®šç† 6.1 (å®Œç¾éš”ç¦»ä¸å¯è¾¾å®šç†)**:

$$
\nexists \text{Partition} \quad \text{s.t.} \quad \text{Overhead}(\text{Partition}) = 0
$$

è¯æ˜: ä»»ä½•è™šæ‹ŸåŒ–éƒ½éœ€è¦ï¼š

1. VMMä»£ç è¿è¡Œ (CPUå¼€é”€)
2. åœ°å€è½¬æ¢ (EPTå¼€é”€)
3. ä¸­æ–­è·¯ç”± (IOMMUå¼€é”€)
âˆ

**å®šç† 6.2 (ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æ”¶æ•›å®šç†)**:

$$
\lim_{\text{HW-support} \to \infty} \text{Overhead} = \epsilon, \quad \epsilon > 0
$$

å³ï¼šéšç€ç¡¬ä»¶æ”¯æŒå¢å¼ºï¼Œè™šæ‹ŸåŒ–å¼€é”€è¶‹å‘ä¸€ä¸ªéé›¶å¸¸æ•°Îµ (çº¦2-3%)ã€‚

### 6.2 ç¡¬ä»¶èƒ½åŠ›è¾¹ç•Œå½¢å¼åŒ–

**å®šä¹‰ 6.3 (ç¡¬ä»¶èƒ½åŠ›å‡½æ•°)**:

$$
\text{Capability}(\text{Layer}) = \begin{cases}
\mathcal{C}_{\text{full}} & \text{Layer} = \text{Bare Metal} \\
\mathcal{C}_{\text{vm}} & \text{Layer} = \text{VM (with VT-x/EPT)} \\
\mathcal{C}_{\text{container}} & \text{Layer} = \text{Container} \\
\mathcal{C}_{\text{sandbox}} & \text{Layer} = \text{Sandbox}
\end{cases}
$$

**èƒ½åŠ›ååºå…³ç³»**:

$$
\mathcal{C}_{\text{sandbox}} \subset \mathcal{C}_{\text{container}} \subset \mathcal{C}_{\text{vm}} \subset \mathcal{C}_{\text{full}}
$$

**å®šç† 6.3 (èƒ½åŠ›ä¸éš”ç¦»çš„å¯¹å¶æ€§)**:

$$
\text{Capability}(\text{Layer}) \propto \frac{1}{\text{Isolation}(\text{Layer})}
$$

å³ï¼šèƒ½åŠ›è¶Šå¼ºï¼Œéš”ç¦»è¶Šå¼±ï¼›éš”ç¦»è¶Šå¼ºï¼Œèƒ½åŠ›è¶Šå¼±ã€‚

**æ¨è®º 6.3.1 (PCIeè®¾å¤‡ç›´é€šèƒ½åŠ›)**:

$$
\begin{aligned}
\text{Bare Metal}: &\quad \text{å®Œå…¨æ§åˆ¶PCIeé…ç½®ç©ºé—´} \\
\text{VM (VFIO)}: &\quad \text{å—é™çš„PCIeè®¿é—® (IOMMUè¿‡æ»¤)} \\
\text{Container}: &\quad \text{æ— æ³•ç›´æ¥è®¿é—®PCIe (é™¤éç‰¹æƒæ¨¡å¼)} \\
\text{Sandbox}: &\quad \text{å®Œå…¨ç¦æ­¢PCIeè®¿é—®}
\end{aligned}
$$

### 6.3 ä¸ä¸Šå±‚ç†è®ºçš„ç»Ÿä¸€

**ç»Ÿä¸€æ¶æ„**:

```text
Layer 5: ç»æµå­¦ç†è®º (Doc 12 - ä¸‰ç¥¨ç†è®º)
         â†“ è€—æ•£ç»“æ„æ˜ å°„
Layer 4: ä¿¡æ¯è®º (Doc 07 - HoTT)
         â†“ åŒä¼¦ç±»å‹æ˜ å°„
Layer 3: è½¯ä»¶æ¶æ„ (Doc 06 - å½¢å¼åŒ–è®ºè¯)
         â†“ syscallè¾¹ç•Œ
Layer 2: ç¡¬ä»¶æŠ½è±¡ (Doc 08 - ç¡…ç‰‡ä¸»æƒ)
         â†“ MMIO/DMAè¾¹ç•Œ
Layer 1: ç¡¬ä»¶æ¶æ„ (æœ¬æ–‡æ¡£ - Doc 13)
         â†“ ç‰©ç†è¾¹ç•Œ
Layer 0: ç‰©ç†å®šå¾‹ (çƒ­åŠ›å­¦ã€é‡å­åŠ›å­¦)
```

**å±‚é—´æ˜ å°„å‡½æ•°**:

$$
\begin{aligned}
\phi_{\text{HWâ†’SW}}: &\quad \text{PCIe TLP} \to \text{syscall} \\
\phi_{\text{SWâ†’Info}}: &\quad \text{Namespace} \to \text{èŒƒç•´ (Category)} \\
\phi_{\text{Infoâ†’Econ}}: &\quad \text{ç®—åŠ›} \to \text{è®¡ç®—ç¥¨}
\end{aligned}
$$

---

## Part VII: æœªæ¥è¶‹åŠ¿ä¸æŠ€æœ¯è·¯çº¿

### 7.1 2025-2030ç¡¬ä»¶è·¯çº¿å›¾

#### 7.1.1 CPUæ¼”è¿›

| å¹´ä»½ | å·¥è‰º | æ ¸å¿ƒæ•° | é¢‘ç‡ | å†…å­˜ | PCIe | å…³é”®ç‰¹æ€§ |
|------|------|--------|------|------|------|----------|
| **2025** | Intel 4 / TSMC N3 | 24-32æ ¸ | 5.8 GHz | DDR5-6400 | PCIe 5.0 | CXL 3.0, TDX |
| **2027** | Intel 20A / TSMC N2 | 32-64æ ¸ | 6.0 GHz | DDR5-7200 | PCIe 6.0 | CXL 4.0, å…‰äº’è¿ |
| **2030** | GAA / 1nm | 64-128æ ¸ | 6.5 GHz | DDR6 | PCIe 7.0 | ç‰‡ä¸Šå…‰å­å­¦ |

#### 7.1.2 å†…å­˜æ¼”è¿›

**DDR6 (é¢„è®¡2028)**:

```text
é¢„æœŸè§„æ ¼:
  - é€Ÿç‡: 10400-12800 MT/s
  - å¸¦å®½: 83-102 GB/s/é€šé“
  - ç”µå‹: 1.0V
  - æ–°å¢: æ›´å¼ºçš„ç‰‡ä¸ŠECC
```

**CXLå†…å­˜æ±  (2025-2027)**:

```text
æ¶æ„:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Server 1â”‚  â”‚ Server 2â”‚  â”‚ Server 3â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚            â”‚            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  CXL Memory    â”‚
           â”‚  Pool (2TB)    â”‚
           â”‚  - å…±äº«è®¿é—®    â”‚
           â”‚  - ç¼“å­˜ä¸€è‡´æ€§  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿:
  - å†…å­˜æ± åŒ– (Memory Pooling)
  - æŒ‰éœ€åˆ†é…
  - é™ä½æˆæœ¬ (10-30%)
```

#### 7.1.3 PCIe/CXLæ¼”è¿›

**PCIe 7.0 (é¢„è®¡2029)**:

| æ ‡å‡† | å¹´ä»½ | é€Ÿç‡ | x16å¸¦å®½ | æŠ€æœ¯ |
|------|------|------|---------|------|
| PCIe 5.0 | 2019 | 32 GT/s | 64 GB/s | NRZ |
| PCIe 6.0 | 2022 | 64 GT/s | 128 GB/s | PAM4 |
| PCIe 7.0 | ~2029 | 128 GT/s | 256 GB/s | PAM4 + FEC |

**CXL 4.0 (é¢„è®¡2026)**:

- é€Ÿç‡æå‡è‡³64 GT/s (ä¸PCIe 6.0åŒæ­¥)
- æ”¯æŒå¤šçº§å†…å­˜å±‚æ¬¡ (Tiered Memory)
- å¢å¼ºç¼“å­˜ä¸€è‡´æ€§åè®®

### 7.2 è™šæ‹ŸåŒ–æŠ€æœ¯è¶‹åŠ¿

#### 7.2.1 Confidential Computing

**è¶‹åŠ¿**: ç¡¬ä»¶çº§æœºå¯†è®¡ç®—æˆä¸ºæ ‡é…

```text
Intel TDX (Trust Domain Extensions):
  â”œâ”€ 2023: åˆä»£ (Sapphire Rapids)
  â”œâ”€ 2025: æ™®åŠ (Granite Rapids)
  â””â”€ 2027: æ ‡é… (æ‰€æœ‰Xeon)

AMD SEV-SNP (Secure Encrypted Virtualization):
  â”œâ”€ 2022: SEV-SNP (Genoa)
  â”œâ”€ 2025: æ€§èƒ½ä¼˜åŒ– (Turin)
  â””â”€ 2027: CXLå†…å­˜åŠ å¯†

ARM CCA (Confidential Compute Architecture):
  â”œâ”€ 2023: Realmç®¡ç†æ‰©å±• (ARMv9.2)
  â”œâ”€ 2025: æ•°æ®ä¸­å¿ƒéƒ¨ç½²
  â””â”€ 2027: è¾¹ç¼˜è®¾å¤‡æ”¯æŒ
```

**æ€§èƒ½æ¼”è¿›**:

$$
\begin{aligned}
\text{Overhead}_{\text{Memory Encryption}} &= \begin{cases}
15\text{-}20\% & \text{(2023 - åˆä»£)} \\
5\text{-}10\% & \text{(2025 - ä¼˜åŒ–)} \\
< 5\% & \text{(2027 - ç¡¬ä»¶åŠ é€Ÿ)}
\end{cases}
\end{aligned}
$$

#### 7.2.2 GPUè™šæ‹ŸåŒ–

**NVIDIAå¤šå®ä¾‹GPU (MIG)æ¼”è¿›**:

```text
H100 (2022):
  - 7ä¸ªMIGå®ä¾‹
  - ç¡¬ä»¶éš”ç¦» (SM + æ˜¾å­˜)

B100 (2025é¢„æœŸ):
  - 14ä¸ªMIGå®ä¾‹
  - æ›´ç»†ç²’åº¦åˆ‡åˆ†
  - PCIe 6.0æ”¯æŒ

æœªæ¥ (2027+):
  - SR-IOVæ ‡å‡†æ”¯æŒ
  - 128+ VF
  - åŠ¨æ€èµ„æºè°ƒæ•´
```

**AMD CDNAæ¼”è¿›**:

```text
MI300X (2023):
  - 8ä¸ªXCD (Chiplet)
  - 192GB HBM3

MI400 (2026é¢„æœŸ):
  - 16ä¸ªXCD
  - 384GB HBM3E
  - CXL 3.0äº’è¿
```

#### 7.2.3 DPU (Data Processing Unit)

**æ¶æ„è¶‹åŠ¿**:

```text
DPU = ARM Cores + FPGA + Network ASIC + Security

Intel IPU (Infrastructure Processing Unit):
  - 16Ã— ARM Neoverse N2
  - PCIe 5.0 x16
  - 400GbEç½‘ç»œ
  - å¸è½½: è™šæ‹Ÿäº¤æ¢ã€å®‰å…¨ã€å­˜å‚¨

NVIDIA BlueField-3:
  - 16Ã— ARM A78
  - 400GbE
  - CXLæ”¯æŒ
  - å¸è½½: OVSã€IPsecã€NVMe-oF
```

**åº”ç”¨åœºæ™¯**:

$$
\begin{aligned}
\text{DPUå¸è½½} &= \{\text{ç½‘ç»œè™šæ‹ŸåŒ–}, \text{å­˜å‚¨è™šæ‹ŸåŒ–}, \text{å®‰å…¨}\} \\
\text{CPUé‡Šæ”¾} &\approx 30\text{-}50\% \quad \text{(åŸæœ¬ç”¨äºI/Oå¤„ç†)}
\end{aligned}
$$

### 7.3 å®¹å™¨æŠ€æœ¯è¶‹åŠ¿

#### 7.3.1 eBPFç¡¬ä»¶å¸è½½

**è¶‹åŠ¿**: eBPFç¨‹åºå¸è½½åˆ°SmartNIC/DPU

```text
ä¼ ç»Ÿ:
  Packet â†’ NIC â†’ Kernel â†’ eBPF (è½¯ä»¶) â†’ å†³ç­–

å¸è½½:
  Packet â†’ SmartNIC (eBPFç¡¬ä»¶åŠ é€Ÿ) â†’ å†³ç­–
          â†“ (åªæœ‰accepted packets)
        Kernel

æ€§èƒ½æå‡:
  - å»¶è¿Ÿ: -50%
  - åå: +2Ã—
  - CPUå ç”¨: -70%
```

#### 7.3.2 RDMAå®¹å™¨ç½‘ç»œ

**RoCE v2 (RDMA over Converged Ethernet)**:

```text
å®¹å™¨ç›´æ¥è®¿é—®RDMA:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Container A â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ verbs API
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  RDMA NIC    â”‚ â† Kernel Bypass
  â”‚  (Mellanox)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿:
  - å»¶è¿Ÿ: < 1Î¼s (vs 10-50Î¼s TCP)
  - CPUå ç”¨: < 5% (vs 30-60% TCP)
  - é›¶æ‹·è´ (Zero Copy)
```

### 7.4 æ²™ç›’æŠ€æœ¯è¶‹åŠ¿

#### 7.4.1 WASMç¡¬ä»¶åŠ é€Ÿ

**é¢„æµ‹**: CPUåŸç”ŸWASMæŒ‡ä»¤é›†æ‰©å±• (2027+)

```text
å½“å‰:
  WASM â†’ JIT â†’ x86/ARMæŒ‡ä»¤ â†’ æ‰§è¡Œ
  å¼€é”€: 10-30%

æœªæ¥:
  WASM â†’ ç¡¬ä»¶è§£ç  â†’ ç›´æ¥æ‰§è¡Œ
  å¼€é”€: < 5%
```

#### 7.4.2 å½¢å¼åŒ–éªŒè¯ç¡¬ä»¶

**è¶‹åŠ¿**: ç¡¬ä»¶è¾…åŠ©çš„å½¢å¼åŒ–éªŒè¯

```text
Intel CET (Control-flow Enforcement Technology):
  - Shadow Stack (ç¡¬ä»¶)
  - Indirect Branch Tracking
  â†’ é˜²æ­¢ROP/JOPæ”»å‡»

ARM MTE (Memory Tagging Extension):
  - 4-bitæ ‡ç­¾ (æ¯16å­—èŠ‚)
  - ç¡¬ä»¶æ£€æŸ¥å†…å­˜å®‰å…¨
  â†’ é˜²æ­¢Use-After-Free

æœªæ¥ (2027+):
  - ç±»å‹æ£€æŸ¥ç¡¬ä»¶
  - è¾¹ç•Œæ£€æŸ¥åŠ é€Ÿå™¨
  - é›¶å¼€é”€å†…å­˜å®‰å…¨
```

---

## æ€»ç»“

### æ ¸å¿ƒè´¡çŒ®

1. **2025ç¡¬ä»¶æ¶æ„å…¨æ™¯å›¾**: ä»CPUã€èŠ¯ç‰‡ç»„ã€IOè®¾å¤‡ä¸‰ä¸ªç»´åº¦ï¼Œå®Œæ•´å¯¹æ ‡æœ€æ–°ç¡¬ä»¶è§„èŒƒã€‚

2. **è™šæ‹ŸåŒ–ç¡¬ä»¶æ”¯æŒå½¢å¼åŒ–**: ç³»ç»ŸåŒ–åˆ†æVT-xã€EPTã€IOMMUã€SR-IOVç­‰ç¡¬ä»¶ç‰¹æ€§å¯¹è™šæ‹ŸåŒ–/å®¹å™¨åŒ–/æ²™ç›’åŒ–çš„æ”¯æŒã€‚

3. **åŒ—æ¡¥æ¶ˆäº¡ç†è®º**: å½¢å¼åŒ–è¯æ˜"åŒ—æ¡¥åŠŸèƒ½è¿ç§»åˆ°CPU"è¿™ä¸€æ¶æ„æ¼”è¿›è·¯å¾„çš„å¿…ç„¶æ€§ã€‚

4. **ç¡¬ä»¶èƒ½åŠ›è¾¹ç•Œå®šç†**: è¯æ˜è™šæ‹ŸåŒ–/å®¹å™¨/æ²™ç›’çš„éš”ç¦»å¼ºåº¦ä¸ç¡¬ä»¶æ”¯æŒç¨‹åº¦æˆæ­£ç›¸å…³ã€‚

5. **æœªæ¥æŠ€æœ¯è·¯çº¿**: é¢„æµ‹2025-2030å¹´CPUã€å†…å­˜ã€äº’è¿ã€è™šæ‹ŸåŒ–æŠ€æœ¯çš„æ¼”è¿›æ–¹å‘ã€‚

### ç†è®ºå®Œæ•´æ€§

æœ¬æ–‡æ¡£å®Œæˆäº†ç¡¬ä»¶å±‚ç†è®ºçš„æœ€åä¸€å—æ‹¼å›¾ï¼Œä¸å…¶ä»–æ–‡æ¡£å½¢æˆå®Œæ•´ç†è®ºä½“ç³»ï¼š

```text
Doc 13 (ç¡¬ä»¶æ¶æ„) â† æœ¬æ–‡æ¡£
   â†“ PCIe/MMIOè¾¹ç•Œ
Doc 08 (ç¡…ç‰‡ä¸»æƒ)
   â†“ è®¾å¤‡è™šæ‹ŸåŒ–è¾¹ç•Œ
Doc 06 (å½¢å¼åŒ–è®ºè¯)
   â†“ syscallè¾¹ç•Œ
Doc 07 (HoTTç»Ÿä¸€ç†è®º)
   â†“ ä¿¡æ¯è®ºæ˜ å°„
Doc 12 (ä¸‰ç¥¨ç†è®º)
   â†“ ç»æµå­¦æ˜ å°„
```

### å®è·µä»·å€¼

- **æ¶æ„å¸ˆ**: ç†è§£2025å¹´ç¡¬ä»¶æ ‡å‡†ï¼Œåšå‡ºæ­£ç¡®çš„æŠ€æœ¯é€‰å‹
- **ç³»ç»Ÿå·¥ç¨‹å¸ˆ**: æŒæ¡è™šæ‹ŸåŒ–/å®¹å™¨åŒ–çš„ç¡¬ä»¶ä¾èµ–ï¼Œä¼˜åŒ–æ€§èƒ½
- **å®‰å…¨ç ”ç©¶å‘˜**: ç†è§£ç¡¬ä»¶è¾¹ç•Œï¼Œè¯„ä¼°æ”»å‡»é¢
- **å­¦ç”Ÿ**: ç³»ç»ŸåŒ–å­¦ä¹ ä»ç¡¬ä»¶åˆ°è½¯ä»¶çš„å®Œæ•´æŠ€æœ¯æ ˆ

---

**æ–‡æ¡£å®Œæˆæ—¶é—´**: 2025-10-22  
**å¯¹æ ‡æ•°æ®æ—¶æ•ˆ**: 2025å¹´10æœˆ  
**ä¸‹æ¬¡æ›´æ–°å»ºè®®**: 2026å¹´Q2 (PCIe 6.0æ™®åŠå)  

---

## é™„å½•: æœ¯è¯­å¯¹ç…§è¡¨

| è‹±æ–‡ | ä¸­æ–‡ | è¯´æ˜ |
|------|------|------|
| **Northbridge** | åŒ—æ¡¥ | ä¼ ç»ŸèŠ¯ç‰‡ç»„,å·²æ¶ˆäº¡ |
| **Southbridge** | å—æ¡¥ | ç°ä»£PCH |
| **IMC** | é›†æˆå†…å­˜æ§åˆ¶å™¨ | Integrated Memory Controller |
| **PCH** | å¹³å°æ§åˆ¶å™¨é›†çº¿å™¨ | Platform Controller Hub |
| **DMI** | ç›´æ¥åª’ä½“æ¥å£ | Direct Media Interface |
| **IOMMU** | I/Oå†…å­˜ç®¡ç†å•å…ƒ | Input-Output MMU |
| **SR-IOV** | å•æ ¹I/Oè™šæ‹ŸåŒ– | Single Root I/O Virtualization |
| **EPT** | æ‰©å±•é¡µè¡¨ | Extended Page Table (Intel) |
| **RVI** | å¿«é€Ÿè™šæ‹ŸåŒ–ç´¢å¼• | Rapid Virtualization Indexing (AMD) |
| **VPID** | è™šæ‹Ÿå¤„ç†å™¨æ ‡è¯†ç¬¦ | Virtual Processor ID |
| **CXL** | è®¡ç®—å¿«é€Ÿé“¾æ¥ | Compute Express Link |
| **xHCI** | å¯æ‰©å±•ä¸»æœºæ§åˆ¶å™¨æ¥å£ | eXtensible Host Controller Interface |
| **MIG** | å¤šå®ä¾‹GPU | Multi-Instance GPU |
| **DPU** | æ•°æ®å¤„ç†å•å…ƒ | Data Processing Unit |
| **TDX** | ä¿¡ä»»åŸŸæ‰©å±• | Trust Domain Extensions |
| **SEV** | å®‰å…¨åŠ å¯†è™šæ‹ŸåŒ– | Secure Encrypted Virtualization |

---

**License**: CC BY-SA 4.0  
**Citation**: å¦‚éœ€å¼•ç”¨æœ¬æ–‡æ¡£ï¼Œè¯·æ³¨æ˜"vSphere_Docker Analysis Module, Doc 13"
