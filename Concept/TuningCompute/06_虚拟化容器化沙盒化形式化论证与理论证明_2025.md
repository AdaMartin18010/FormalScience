# è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å½¢å¼åŒ–è®ºè¯ä¸ç†è®ºè¯æ˜ (2025ç‰ˆ)

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.1
> **æœ€åæ›´æ–°**: 2025-10-22
> **æ–‡æ¡£è§„æ¨¡**: 2530è¡Œ | å½¢å¼åŒ–è®ºè¯ä¸è¯æ˜
> **é˜…è¯»å»ºè®®**: æœ¬æ–‡ç”¨Coq/TLA+å¯¹éš”ç¦»æŠ€æœ¯è¿›è¡Œä¸¥æ ¼çš„å½¢å¼åŒ–è¯æ˜

---

## 1 ğŸ“Š æ ¸å¿ƒæ¦‚å¿µæ·±åº¦åˆ†æ

<details>
<summary><b>ğŸ”¬ğŸ“ ç‚¹å‡»å±•å¼€ï¼šå½¢å¼åŒ–è®ºè¯æ ¸å¿ƒæ´å¯Ÿ</b></summary>

**ç»ˆææ´å¯Ÿ**: éš”ç¦»æŠ€æœ¯å½¢å¼åŒ–è®ºè¯=Popek-Goldbergå®šç†+å®‰å…¨æ¨¡å‹+å¯è®¡ç®—æ€§ç†è®ºçš„ä¸‰é‡éªŒè¯ã€‚æ ¸å¿ƒå®šç†ï¼šâ‘ Popek-Goldbergï¼ˆ1974ï¼‰ï¼šè™šæ‹ŸåŒ–å……è¦æ¡ä»¶=æ•æ„ŸæŒ‡ä»¤âŠ†ç‰¹æƒæŒ‡ä»¤â‘¡Bell-LaPadulaï¼šå¤šçº§å®‰å…¨æ¨¡å‹ï¼ˆno read up, no write downï¼‰â‘¢Noninterferenceï¼šä¿¡æ¯æµå®‰å…¨ï¼ˆé«˜çº§â†’ä½çº§ä¿¡æ¯ä¸å¯æµåŠ¨ï¼‰â‘£Type Safetyï¼šç±»å‹ç³»ç»Ÿä¿è¯å†…å­˜å®‰å…¨ã€‚å½¢å¼åŒ–æ–¹æ³•ï¼šâ‘ é›†åˆè®ºï¼šéš”ç¦»åŸŸå®šä¹‰ï¼ˆVMâ‚âˆ©VMâ‚‚=âˆ…ï¼‰â‘¡èŒƒç•´è®ºï¼šæ€å°„è¡¨ç¤ºèµ„æºæ˜ å°„â‘¢Î»æ¼”ç®—ï¼šè¡Œä¸ºè¯­ä¹‰â‘£Coqè¯æ˜ï¼šå®šç†æœºæ¢°åŒ–éªŒè¯â‘¤TLA+ï¼šæ—¶åºé€»è¾‘æ¨¡å‹æ£€æŸ¥ã€‚è™šæ‹ŸåŒ–è¯æ˜ï¼šâ‘ VMMæ­£ç¡®æ€§ï¼šGuestçŠ¶æ€å˜æ¢=ç‰©ç†æœºè¡Œä¸ºâ‘¡éš”ç¦»æ€§ï¼šâˆ€vmâ‚,vmâ‚‚: Accessible(vmâ‚)âˆ©Accessible(vmâ‚‚)=âˆ…â‘¢é€æ˜æ€§ï¼šGuestæ— æ³•åŒºåˆ†ç‰©ç†æœºvsè™šæ‹Ÿæœºã€‚å®¹å™¨è¯æ˜ï¼šâ‘ Namespaceéš”ç¦»ï¼šPID/Net/Mountå‘½åç©ºé—´äº’ä¸å¯è§â‘¡Cgroupsèµ„æºï¼šCPU/å†…å­˜ä¸Šç•Œçº¦æŸâ‘¢Capabilityé™åˆ¶ï¼šCAP_SYS_ADMINç­‰æƒé™æœ€å°åŒ–ã€‚æ²™ç›’è¯æ˜ï¼šâ‘ seccompï¼šç³»ç»Ÿè°ƒç”¨ç™½åå•âˆˆ{read,write,...}â‘¡BPFè¿‡æ»¤ï¼šP(syscall)â†’{allow,deny}éªŒè¯ã€‚å…³é”®ï¼šå½¢å¼åŒ–è¯æ˜éå­¦æœ¯æ¸¸æˆï¼Œè€Œæ˜¯å·¥ç¨‹å¯ä¿¡çš„æ•°å­¦ä¿è¯ã€‚

</details>

---

## 2 æ–‡æ¡£å…ƒä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.1 (2025å½¢å¼åŒ–è®ºè¯ç‰ˆï¼Œä¿®è®¢ç‰ˆ) |
| **åˆ›å»ºæ—¥æœŸ** | 2025-10-22 |
| **ä¿®è®¢æ—¥æœŸ** | 2025-10-22 |
| **æŠ€æœ¯åŸºå‡†** | 2025å¹´10æœˆ22æ—¥å›½é™…æ ‡å‡† |
| **ç†è®ºæ¡†æ¶** | é›†åˆè®ºã€èŒƒç•´è®ºã€ç±»å‹è®ºã€Î»æ¼”ç®—ã€Coqè¯æ˜ |
| **å¯¹æ ‡æ¥æº** | Wikipedia, MIT 6.828, Stanford CS140, CMU 15-410, 2025 IEEE/ISOæ ‡å‡† |
| **è¯æ˜å·¥å…·** | Coq 8.17, Isabelle/HOL 2024, TLA+ 1.8, Z3 4.12 |
| **çŠ¶æ€** | å½¢å¼åŒ–è®ºè¯å®Œæˆ |

> **ç†è®ºåŸºç¡€**: æœ¬æ–‡æ¡£åŸºäºPopek-Goldbergå®šç†ã€Bell-LaPadulaæ¨¡å‹ã€Noninterferenceç†è®ºã€èŒƒç•´è®ºç­‰æ•°å­¦ç†è®ºï¼Œå¯¹è™šæ‹ŸåŒ–ã€å®¹å™¨åŒ–ã€æ²™ç›’åŒ–æŠ€æœ¯è¿›è¡Œä¸¥æ ¼çš„å½¢å¼åŒ–è®ºè¯ã€‚

## 3 âš ï¸ å…è´£å£°æ˜

**æœ¬æ–‡æ¡£ä¸ºå­¦æœ¯æ¢ç´¢æ€§è´¨çš„å½¢å¼åŒ–åˆ†æï¼Œä»…ä¾›ç ”ç©¶ä¸å­¦ä¹ ä½¿ç”¨ã€‚**

- **æœªç»åŒè¡Œè¯„å®¡**: æœ¬æ–‡æ¡£ä¸­çš„å½¢å¼åŒ–è¯æ˜å’Œç†è®ºåˆ†æå‡ä¸ºä½œè€…ä¸ªäººå­¦æœ¯æ¢ç´¢ï¼Œå°šæœªç»è¿‡æ­£å¼çš„åŒè¡Œè¯„å®¡æµç¨‹ã€‚
- **è¯æ˜ç®€åŒ–**: æ–‡æ¡£ä¸­çš„Coq/TLA+è¯æ˜ä¸ºç¤ºä¾‹æ€§è´¨ï¼Œå®é™…å®Œæ•´è¯æ˜éœ€è¦æ›´ä¸¥æ ¼çš„å¤„ç†å’Œæ›´å¤šçš„è¾…åŠ©å¼•ç†ã€‚
- **å¯¹æ ‡ä¿¡æ¯**: å¯¹Wikipediaã€MIT/Stanfordç­‰è¯¾ç¨‹çš„å¯¹æ ‡åŸºäºå…¬å¼€èµ„æ–™ï¼Œå¯èƒ½å­˜åœ¨ç†è§£åå·®æˆ–ä¿¡æ¯æ»åã€‚
- **å·¥å…·ç‰ˆæœ¬**: æ‰€åˆ—è¯æ˜å·¥å…·ç‰ˆæœ¬ï¼ˆCoq 8.17ç­‰ï¼‰ä¸º2025å¹´10æœˆ22æ—¥çš„è¿‘æœŸç‰ˆæœ¬ï¼Œå®é™…ä½¿ç”¨ä¸­åº”æŸ¥é˜…å®˜æ–¹æœ€æ–°æ–‡æ¡£ã€‚

**è¯»è€…åº”ä¿æŒæ‰¹åˆ¤æ€§æ€ç»´ï¼Œç»“åˆåŸå§‹æ–‡çŒ®ï¼ˆPopek-GoldbergåŸè®ºæ–‡ã€å¤§å­¦è¯¾ç¨‹å®˜ç½‘ç­‰ï¼‰ç»¼åˆåˆ¤æ–­ã€‚**

---

## ğŸ“‹ ç›®å½•

- [è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å½¢å¼åŒ–è®ºè¯ä¸ç†è®ºè¯æ˜ (2025ç‰ˆ)](#è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ–å½¢å¼åŒ–è®ºè¯ä¸ç†è®ºè¯æ˜-2025ç‰ˆ)
  - [1 ğŸ“Š æ ¸å¿ƒæ¦‚å¿µæ·±åº¦åˆ†æ](#1--æ ¸å¿ƒæ¦‚å¿µæ·±åº¦åˆ†æ)
  - [2 æ–‡æ¡£å…ƒä¿¡æ¯](#2-æ–‡æ¡£å…ƒä¿¡æ¯)
  - [3 âš ï¸ å…è´£å£°æ˜](#3-ï¸-å…è´£å£°æ˜)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
    - [1 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–æ¦‚å¿µå®šä¹‰å¡](#1-ï¸âƒ£-è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ–æ¦‚å¿µå®šä¹‰å¡)
    - [2 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å…³ç³»å…¨æ™¯å›¾](#2-ï¸âƒ£-è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ–å…³ç³»å…¨æ™¯å›¾)
    - [3 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å¤šç»´åº¦å¯¹æ¯”çŸ©é˜µ](#3-ï¸âƒ£-è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ–å¤šç»´åº¦å¯¹æ¯”çŸ©é˜µ)
    - [4 ï¸âƒ£ éš”ç¦»æŠ€æœ¯å±‚æ¬¡ç»“æ„ä¸æ¼”è¿›è·¯å¾„](#4-ï¸âƒ£-éš”ç¦»æŠ€æœ¯å±‚æ¬¡ç»“æ„ä¸æ¼”è¿›è·¯å¾„)
    - [5 ï¸âƒ£ å½¢å¼åŒ–è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ](#5-ï¸âƒ£-å½¢å¼åŒ–è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ)
    - [6 ï¸âƒ£ Popek-Goldbergå®šç†è¯æ˜æ€ç»´å¯¼å›¾](#6-ï¸âƒ£-popek-goldbergå®šç†è¯æ˜æ€ç»´å¯¼å›¾)
    - [7 ï¸âƒ£ æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦å…¨æ™¯](#7-ï¸âƒ£-æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦å…¨æ™¯)
    - [8 ï¸âƒ£ èŒƒç•´è®ºè§†è§’ï¼šè™šæ‹ŸåŒ–â†’å®¹å™¨åŒ–Functor](#8-ï¸âƒ£-èŒƒç•´è®ºè§†è§’è™šæ‹ŸåŒ–å®¹å™¨åŒ–functor)
    - [9 ï¸âƒ£ å®‰å…¨æ”»å‡»é¢å¯¹æ¯”ä¸é˜²å¾¡æ·±åº¦åˆ†æ](#9-ï¸âƒ£-å®‰å…¨æ”»å‡»é¢å¯¹æ¯”ä¸é˜²å¾¡æ·±åº¦åˆ†æ)
  - [4 Part I: å½¢å¼åŒ–å®šä¹‰ä¸æ•°å­¦åŸºç¡€](#4-part-i-å½¢å¼åŒ–å®šä¹‰ä¸æ•°å­¦åŸºç¡€)
    - [1 . è™šæ‹ŸåŒ–çš„å½¢å¼åŒ–å®šä¹‰](#1--è™šæ‹ŸåŒ–çš„å½¢å¼åŒ–å®šä¹‰)
      - [1.1 é›†åˆè®ºå®šä¹‰](#11-é›†åˆè®ºå®šä¹‰)
      - [1.2 Popek-Goldbergå®šç†](#12-popek-goldbergå®šç†)
      - [1.3 ç±»å‹è®ºè§†è§’](#13-ç±»å‹è®ºè§†è§’)
      - [1.4 å¯¹æ ‡Wikipediaå®šä¹‰](#14-å¯¹æ ‡wikipediaå®šä¹‰)
    - [2 . å®¹å™¨åŒ–çš„å½¢å¼åŒ–å®šä¹‰](#2--å®¹å™¨åŒ–çš„å½¢å¼åŒ–å®šä¹‰)
      - [2.1 å‘½åç©ºé—´ä»£æ•°](#21-å‘½åç©ºé—´ä»£æ•°)
      - [2.2 Cgroupsèµ„æºæ¨¡å‹](#22-cgroupsèµ„æºæ¨¡å‹)
      - [2.3 å®¹å™¨çš„èŒƒç•´è®ºå®šä¹‰](#23-å®¹å™¨çš„èŒƒç•´è®ºå®šä¹‰)
      - [2.4 å¯¹æ ‡MIT 6.828](#24-å¯¹æ ‡mit-6828)
    - [3 . æ²™ç›’åŒ–çš„å½¢å¼åŒ–å®šä¹‰](#3--æ²™ç›’åŒ–çš„å½¢å¼åŒ–å®šä¹‰)
      - [3.1 å®‰å…¨åŸŸæ¨¡å‹](#31-å®‰å…¨åŸŸæ¨¡å‹)
      - [3.2 Capabilityæ¨¡å‹](#32-capabilityæ¨¡å‹)
      - [3.3 Information Flow Security](#33-information-flow-security)
      - [3.4 å¯¹æ ‡Stanford CS140](#34-å¯¹æ ‡stanford-cs140)
  - [5 Part II: å±æ€§å…³ç³»ä¸ç³»ç»Ÿæ¨¡å‹](#5-part-ii-å±æ€§å…³ç³»ä¸ç³»ç»Ÿæ¨¡å‹)
    - [4 . éš”ç¦»æ€§å½¢å¼åŒ–æ¨¡å‹](#4--éš”ç¦»æ€§å½¢å¼åŒ–æ¨¡å‹)
      - [4.1 å†…å­˜éš”ç¦»](#41-å†…å­˜éš”ç¦»)
      - [4.2 è¿›ç¨‹éš”ç¦»](#42-è¿›ç¨‹éš”ç¦»)
      - [4.3 ç½‘ç»œéš”ç¦»](#43-ç½‘ç»œéš”ç¦»)
      - [4.4 Bell-LaPadulaæ¨¡å‹](#44-bell-lapadulaæ¨¡å‹)
    - [5 . èµ„æºæ§åˆ¶ç†è®º](#5--èµ„æºæ§åˆ¶ç†è®º)
      - [5.1 è°ƒåº¦ç†è®º](#51-è°ƒåº¦ç†è®º)
      - [5.2 å†…å­˜æ§åˆ¶](#52-å†…å­˜æ§åˆ¶)
      - [5.3 I/Oæ§åˆ¶](#53-ioæ§åˆ¶)
    - [6 . å®‰å…¨è¾¹ç•Œæ•°å­¦æ¨¡å‹](#6--å®‰å…¨è¾¹ç•Œæ•°å­¦æ¨¡å‹)
      - [6.1 æ”»å‡»é¢åˆ†æ](#61-æ”»å‡»é¢åˆ†æ)
      - [6.2 Seccompè¿‡æ»¤](#62-seccompè¿‡æ»¤)
      - [6.3 æ¼æ´åˆ©ç”¨é“¾æ¨¡å‹](#63-æ¼æ´åˆ©ç”¨é“¾æ¨¡å‹)
  - [6 Part III: å½¢å¼åŒ–è¯æ˜](#6-part-iii-å½¢å¼åŒ–è¯æ˜)
    - [7 . Popek-Goldbergå®šç†è¯æ˜](#7--popek-goldbergå®šç†è¯æ˜)
      - [7.1 å®Œæ•´å®šç†é™ˆè¿°](#71-å®Œæ•´å®šç†é™ˆè¿°)
      - [7.2 æŒ‡ä»¤åˆ†ç±»](#72-æŒ‡ä»¤åˆ†ç±»)
      - [7.3 å½¢å¼åŒ–è¯æ˜](#73-å½¢å¼åŒ–è¯æ˜)
      - [7.4 x86å®ä¾‹åˆ†æ](#74-x86å®ä¾‹åˆ†æ)
    - [8 . éš”ç¦»æ€§Coqè¯æ˜](#8--éš”ç¦»æ€§coqè¯æ˜)
      - [8.1 Coqè¯æ˜æ¡†æ¶](#81-coqè¯æ˜æ¡†æ¶)
      - [8.2 Namespaceéš”ç¦»è¯æ˜](#82-namespaceéš”ç¦»è¯æ˜)
    - [9 . å®‰å…¨æ€§TLA+éªŒè¯](#9--å®‰å…¨æ€§tlaéªŒè¯)
      - [9.1 TLA+ æ¨¡å‹](#91-tla-æ¨¡å‹)
      - [9.2 TLCæ¨¡å‹æ£€æŸ¥](#92-tlcæ¨¡å‹æ£€æŸ¥)
  - [7 Part IV: å›½é™…æ ‡å‡†å¯¹æ ‡](#7-part-iv-å›½é™…æ ‡å‡†å¯¹æ ‡)
    - [10 . WikipediaæŠ€æœ¯å®šä¹‰å¯¹æ ‡](#10--wikipediaæŠ€æœ¯å®šä¹‰å¯¹æ ‡)
      - [10.1 è™šæ‹ŸåŒ–å®šä¹‰å¯¹æ ‡](#101-è™šæ‹ŸåŒ–å®šä¹‰å¯¹æ ‡)
      - [10.2 å®¹å™¨åŒ–å®šä¹‰å¯¹æ ‡](#102-å®¹å™¨åŒ–å®šä¹‰å¯¹æ ‡)
      - [10.3 æ²™ç›’å®šä¹‰å¯¹æ ‡](#103-æ²™ç›’å®šä¹‰å¯¹æ ‡)
    - [11 . è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡](#11--è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡)
      - [11.1 MIT 6.828 (Operating System Engineering)](#111-mit-6828-operating-system-engineering)
        - [11.1.1 Lab 1: Booting a PC](#1111-lab-1-booting-a-pc)
        - [11.1.2 Lab 2: Memory Management](#1112-lab-2-memory-management)
        - [11.1.3 Lab 3: User Environments](#1113-lab-3-user-environments)
      - [11.2 Stanford CS140 (Operating Systems)](#112-stanford-cs140-operating-systems)
        - [11.2.1 Project 1: Threads](#1121-project-1-threads)
        - [11.2.2 Project 2: User Programs](#1122-project-2-user-programs)
        - [11.2.3 Project 3: Virtual Memory](#1123-project-3-virtual-memory)
      - [11.3 CMU 15-410 (Operating System Design and Implementation)](#113-cmu-15-410-operating-system-design-and-implementation)
        - [11.3.1 Thread Library](#1131-thread-library)
        - [11.3.2 Kernel Threads](#1132-kernel-threads)
      - [11.4 UC Berkeley CS162 (Operating Systems)](#114-uc-berkeley-cs162-operating-systems)
        - [11.4.1 Threads and Synchronization](#1141-threads-and-synchronization)
        - [11.4.2 User Programs](#1142-user-programs)
    - [12 . 2025æŠ€æœ¯æ ‡å‡†å¯¹æ ‡](#12--2025æŠ€æœ¯æ ‡å‡†å¯¹æ ‡)
      - [12.1 OCI (Open Container Initiative) æ ‡å‡†](#121-oci-open-container-initiative-æ ‡å‡†)
        - [12.1.1 Container Configuration](#1211-container-configuration)
        - [12.1.2 Runtime and Lifecycle](#1212-runtime-and-lifecycle)
      - [12.2 Kubernetes CRI (Container Runtime Interface) v1.31](#122-kubernetes-cri-container-runtime-interface-v131)
      - [12.3 IEEEæ ‡å‡†](#123-ieeeæ ‡å‡†)
        - [12.3.1 IEEE 802.1Q-2022 (VLAN)](#1231-ieee-8021q-2022-vlan)
        - [12.3.2 IEEE 2675-2021 (DevOps)](#1232-ieee-2675-2021-devops)
      - [12.4 ISO/IECæ ‡å‡†](#124-isoiecæ ‡å‡†)
        - [12.4.1 ISO/IEC 27001:2022 (ä¿¡æ¯å®‰å…¨ç®¡ç†)](#1241-isoiec-270012022-ä¿¡æ¯å®‰å…¨ç®¡ç†)
        - [12.4.2 ISO/IEC 27017:2015 (äº‘æœåŠ¡å®‰å…¨)](#1242-isoiec-270172015-äº‘æœåŠ¡å®‰å…¨)
      - [12.5 NISTæ ‡å‡†](#125-nistæ ‡å‡†)
        - [12.5.1 NIST SP 800-190 (å®¹å™¨å®‰å…¨æŒ‡å—)](#1251-nist-sp-800-190-å®¹å™¨å®‰å…¨æŒ‡å—)
  - [8 Part V: èŒƒç•´è®ºä¸é«˜çº§ç†è®º](#8-part-v-èŒƒç•´è®ºä¸é«˜çº§ç†è®º)
    - [13 . è™šæ‹ŸåŒ–çš„èŒƒç•´è®ºæ¨¡å‹](#13--è™šæ‹ŸåŒ–çš„èŒƒç•´è®ºæ¨¡å‹)
      - [13.1 èŒƒç•´å®šä¹‰](#131-èŒƒç•´å®šä¹‰)
      - [13.2 Functor (è™šæ‹ŸåŒ– â†’ å®¹å™¨åŒ–)](#132-functor-è™šæ‹ŸåŒ–--å®¹å™¨åŒ–)
      - [13.3 Natural Transformation](#133-natural-transformation)
      - [13.4 Monad (å®¹å™¨ç»„åˆ)](#134-monad-å®¹å™¨ç»„åˆ)
    - [14 . å®¹å™¨çš„ä»£æ•°ç»“æ„](#14--å®¹å™¨çš„ä»£æ•°ç»“æ„)
      - [14.1 Monoidç»“æ„](#141-monoidç»“æ„)
      - [14.2 Latticeç»“æ„](#142-latticeç»“æ„)
      - [14.3 Groupç»“æ„](#143-groupç»“æ„)
    - [15 . ç³»ç»Ÿæ¼”åŒ–çš„æ‹“æ‰‘å­¦](#15--ç³»ç»Ÿæ¼”åŒ–çš„æ‹“æ‰‘å­¦)
      - [15.1 çŠ¶æ€ç©ºé—´æ‹“æ‰‘](#151-çŠ¶æ€ç©ºé—´æ‹“æ‰‘)
      - [15.2 è¿ç»­æ€§ä¸æ”¶æ•›](#152-è¿ç»­æ€§ä¸æ”¶æ•›)
      - [15.3 åŒä¼¦ä¸ç­‰ä»·](#153-åŒä¼¦ä¸ç­‰ä»·)
  - [9 æ€»ç»“ä¸ç»“è®º](#9-æ€»ç»“ä¸ç»“è®º)
    - [10.1 ä¸»è¦è´¡çŒ®](#101-ä¸»è¦è´¡çŒ®)
    - [1 . å½¢å¼åŒ–å®šä¹‰ä½“ç³»](#1--å½¢å¼åŒ–å®šä¹‰ä½“ç³»)
    - [2 . ç†è®ºè¯æ˜](#2--ç†è®ºè¯æ˜)
    - [3 . å›½é™…æ ‡å‡†å¯¹æ ‡](#3--å›½é™…æ ‡å‡†å¯¹æ ‡)
    - [4 . é«˜çº§ç†è®º](#4--é«˜çº§ç†è®º)
  - [10 æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦](#10-æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦)
  - [11 æœªæ¥å·¥ä½œ](#11-æœªæ¥å·¥ä½œ)
  - [å‚è€ƒæ–‡çŒ®](#å‚è€ƒæ–‡çŒ®)
    - [12.1 ç»å…¸è®ºæ–‡](#121-ç»å…¸è®ºæ–‡)
    - [12.2 æŠ€æœ¯æ ‡å‡† (2025)](#122-æŠ€æœ¯æ ‡å‡†-2025)
    - [12.3 å¤§å­¦è¯¾ç¨‹ (2025)](#123-å¤§å­¦è¯¾ç¨‹-2025)
    - [12.4 å½¢å¼åŒ–å·¥å…·](#124-å½¢å¼åŒ–å·¥å…·)
    - [12.5 åœ¨çº¿ç™¾ç§‘ (2025-10-22)](#125-åœ¨çº¿ç™¾ç§‘-2025-10-22)

---

## 4 ğŸ“Š æ ¸å¿ƒæ¦‚å¿µæ·±åº¦åˆ†æ

> æœ¬èŠ‚æä¾›è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–ä¸‰é¡¹æŠ€æœ¯çš„å¤šç»´åº¦åˆ†ææ¡†æ¶ï¼ŒåŒ…æ‹¬æ¦‚å¿µå®šä¹‰ã€å…³ç³»å›¾è°±ã€å¯¹æ¯”çŸ©é˜µã€æ€ç»´å¯¼å›¾ç­‰ï¼Œå¸®åŠ©è¯»è€…å…¨é¢ç†è§£ä¸‰è€…çš„æœ¬è´¨ã€è”ç³»ä¸åŒºåˆ«ã€‚

---

### 1 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–æ¦‚å¿µå®šä¹‰å¡

**æ¦‚å¿µåç§°**: è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–ä¸‰ä½ä¸€ä½“

**å†…æ¶µï¼ˆæœ¬è´¨å±æ€§ï¼‰**:

**ğŸ”¹ è™šæ‹ŸåŒ–ï¼ˆVirtualizationï¼‰**:

- **æŠ½è±¡å±‚çº§**: ç¡¬ä»¶çº§æŠ½è±¡ï¼Œåˆ›å»ºå®Œæ•´çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰
- **éš”ç¦»æœºåˆ¶**: Hypervisorå±‚éš”ç¦»ï¼Œç‰©ç†èµ„æºè™šæ‹ŸåŒ–
- **æ ¸å¿ƒæ•°å­¦æ¨¡å‹**: $\mathcal{V} = (P, V, H, f, \pi)$ï¼Œæ˜ å°„å‡½æ•° $H: V \rightarrow 2^P$
- **ç†è®ºåŸºç¡€**: Popek-Goldbergå®šç†ï¼ˆ1974ï¼‰

**ğŸ”¹ å®¹å™¨åŒ–ï¼ˆContainerizationï¼‰**:

- **æŠ½è±¡å±‚çº§**: æ“ä½œç³»ç»Ÿçº§æŠ½è±¡ï¼Œå…±äº«å†…æ ¸
- **éš”ç¦»æœºåˆ¶**: Namespace + Cgroupsï¼Œè¿›ç¨‹çº§éš”ç¦»
- **æ ¸å¿ƒæ•°å­¦æ¨¡å‹**: Namespaceååºé›† $(NS, \leq)$ + Cgroupæ ‘ $T = (N, E, r, w)$
- **ç†è®ºåŸºç¡€**: Linux Namespaceä»£æ•°ã€èŒƒç•´è®ºFunctor

**ğŸ”¹ æ²™ç›’åŒ–ï¼ˆSandboxingï¼‰**:

- **æŠ½è±¡å±‚çº§**: å®‰å…¨åŸŸæŠ½è±¡ï¼Œæœ€å°æƒé™åŸåˆ™
- **éš”ç¦»æœºåˆ¶**: Capabilityæ¨¡å‹ + Seccompè¿‡æ»¤ + MAC
- **æ ¸å¿ƒæ•°å­¦æ¨¡å‹**: å®‰å…¨åŸŸå››å…ƒç»„ $\mathcal{S} = (D, R, P, \sigma)$
- **ç†è®ºåŸºç¡€**: Bell-LaPadulaæ¨¡å‹ã€Noninterferenceç†è®º

**å¤–å»¶ï¼ˆèŒƒå›´è¾¹ç•Œï¼‰**:

| æŠ€æœ¯ | åŒ…å« âœ… | ä¸åŒ…å« âŒ |
|------|---------|----------|
| **è™šæ‹ŸåŒ–** | å…¨è™šæ‹ŸåŒ–ï¼ˆVMware ESXiï¼‰ã€åŠè™šæ‹ŸåŒ–ï¼ˆXenï¼‰ã€ç¡¬ä»¶è¾…åŠ©ï¼ˆIntel VT-xï¼‰ | å®¹å™¨ã€è¿›ç¨‹éš”ç¦»ã€ç”¨æˆ·æ€éš”ç¦» |
| **å®¹å™¨åŒ–** | Dockerã€Podmanã€LXCã€Kubernetes Pod | è™šæ‹Ÿæœºã€Unikernelã€WebAssembly |
| **æ²™ç›’åŒ–** | Seccomp-BPFã€gVisorã€Firecrackerã€æµè§ˆå™¨æ²™ç®± | å®Œå…¨éš”ç¦»ï¼ˆVMçº§åˆ«ï¼‰ã€ç‰©ç†éš”ç¦» |

**å±æ€§ç»´åº¦è¡¨**:

| ç»´åº¦ | è™šæ‹ŸåŒ– | å®¹å™¨åŒ– | æ²™ç›’åŒ– |
|------|--------|--------|--------|
| **éš”ç¦»å¼ºåº¦** | æœ€å¼ºï¼ˆç¡¬ä»¶çº§ï¼‰ | ä¸­ç­‰ï¼ˆå†…æ ¸çº§ï¼‰ | å¼ºï¼ˆç”¨æˆ·æ€+å†…æ ¸è¿‡æ»¤ï¼‰ |
| **æ€§èƒ½å¼€é”€** | é«˜ï¼ˆ5-15%ï¼‰ | ä½ï¼ˆ1-3%ï¼‰ | ä½åˆ°ä¸­ï¼ˆgVisor 10-20%ï¼‰ |
| **å¯åŠ¨æ—¶é—´** | æ…¢ï¼ˆåˆ†é’Ÿçº§ï¼‰ | å¿«ï¼ˆç§’çº§ï¼‰ | å¿«ï¼ˆæ¯«ç§’åˆ°ç§’çº§ï¼‰ |
| **èµ„æºå ç”¨** | å¤§ï¼ˆGBçº§å†…å­˜ï¼‰ | å°ï¼ˆMBçº§å†…å­˜ï¼‰ | å°åˆ°ä¸­ï¼ˆMBçº§ï¼‰ |
| **å¯ç§»æ¤æ€§** | ä½ï¼ˆé•œåƒå¤§ï¼‰ | é«˜ï¼ˆOCIæ ‡å‡†ï¼‰ | ä¸­ï¼ˆä¾èµ–å†…æ ¸ç‰¹æ€§ï¼‰ |
| **æ”»å‡»é¢** | å°ï¼ˆHypervisorï¼‰ | ä¸­ï¼ˆ300+ç³»ç»Ÿè°ƒç”¨ï¼‰ | å°ï¼ˆè¿‡æ»¤å<50ç³»ç»Ÿè°ƒç”¨ï¼‰ |
| **åº”ç”¨åœºæ™¯** | å¤šç§Ÿæˆ·äº‘ã€å¼‚æ„OS | å¾®æœåŠ¡ã€CI/CD | ä¸å—ä¿¡ä»£ç æ‰§è¡Œã€æµè§ˆå™¨ |
| **å½¢å¼åŒ–è¯æ˜** | P-Gå®šç† | Coqéš”ç¦»æ€§è¯æ˜ | TLA+å®‰å…¨æ€§éªŒè¯ |

---

### 2 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å…³ç³»å…¨æ™¯å›¾

```mermaid
graph TB
    subgraph å†å²æ¼”è¿›
        Mainframe[å¤§å‹æœºæ—¶ä»£<br/>1960s]
        Mainframe --> VMware[VMwareè¯ç”Ÿ<br/>1998]
        VMware --> VTx[Intel VT-x<br/>2005]
        VTx --> KVM[KVMåˆå¹¶Linux<br/>2007]
        KVM --> Docker[Dockerå‘å¸ƒ<br/>2013]
        Docker --> K8s[Kubernetes<br/>2014]
        K8s --> gVisor[gVisor/Kata<br/>2018]
        gVisor --> Wasm[WASM+WASI<br/>2019-2025]
    end

    subgraph ä¸‰è€…å…³ç³»
        VM[è™šæ‹ŸåŒ– Virtualization]
        Container[å®¹å™¨åŒ– Containerization]
        Sandbox[æ²™ç›’åŒ– Sandboxing]

        VM -->|å¯å‘| Container
        VM -->|å®‰å…¨æ€§| Sandbox
        Container -->|éœ€è¦å¢å¼º| Sandbox
        Sandbox -->|å¯åŸºäº| VM
        Sandbox -->|å¯åŸºäº| Container

        VM -.->|Kata Containers| Hybrid[æ··åˆæ–¹æ¡ˆ]
        Container -.->|gVisor| Hybrid
    end

    subgraph ç†è®ºåŸºç¡€
        PG[Popek-Goldbergå®šç†<br/>1974]
        BLP[Bell-LaPadulaæ¨¡å‹<br/>1973]
        NS[Linux Namespace<br/>2002]
        CG[Cgroups<br/>2006]

        PG --> VM
        NS --> Container
        CG --> Container
        BLP --> Sandbox
    end

    subgraph å½¢å¼åŒ–æ–¹æ³•
        SetTheory[é›†åˆè®º]
        CategoryTheory[èŒƒç•´è®º]
        TypeTheory[ç±»å‹è®º]

        SetTheory --> VM
        CategoryTheory --> Container
        TypeTheory --> Sandbox
    end

    subgraph éªŒè¯å·¥å…·
        Coq[Coq 8.17]
        TLA[TLA+ 1.8]
        Z3[Z3 4.12]

        Coq --> Container
        TLA --> Sandbox
        Z3 --> VM
    end

    style VM fill:#ff6b6b,stroke:#333,stroke-width:3px
    style Container fill:#4ecdc4,stroke:#333,stroke-width:3px
    style Sandbox fill:#95e1d3,stroke:#333,stroke-width:3px
    style Hybrid fill:#f38181,stroke:#333,stroke-width:2px
```

---

### 3 ï¸âƒ£ è™šæ‹ŸåŒ–Â·å®¹å™¨åŒ–Â·æ²™ç›’åŒ–å¤šç»´åº¦å¯¹æ¯”çŸ©é˜µ

| å¯¹æ¯”ç»´åº¦ | è™šæ‹ŸåŒ–ï¼ˆVMï¼‰ | å®¹å™¨åŒ–ï¼ˆContainerï¼‰ | æ²™ç›’åŒ–ï¼ˆSandboxï¼‰ | æ··åˆæ–¹æ¡ˆï¼ˆKata/gVisorï¼‰ |
|---------|-------------|-------------------|------------------|----------------------|
| **éš”ç¦»å±‚çº§** | Hypervisorå±‚ | OSå†…æ ¸å±‚ | ç”¨æˆ·æ€+å†…æ ¸è¿‡æ»¤ | VM+å®¹å™¨/ç”¨æˆ·æ€å†…æ ¸ |
| **å†…æ ¸å…±äº«** | âŒ ç‹¬ç«‹å†…æ ¸ | âœ… å…±äº«å®¿ä¸»å†…æ ¸ | âœ… å…±äº«ï¼ˆè¿‡æ»¤ç³»ç»Ÿè°ƒç”¨ï¼‰ | âŒ ç‹¬ç«‹ï¼ˆKataï¼‰/âœ… ç”¨æˆ·æ€ï¼ˆgVisorï¼‰ |
| **ç¡¬ä»¶è¦æ±‚** | Intel VT-x/AMD-V | æ ‡å‡†Linuxå†…æ ¸3.10+ | Linux 3.5+ï¼ˆSeccompï¼‰ | Intel VT-x + æ–°å†…æ ¸ |
| **å½¢å¼åŒ–å®šä¹‰** | $H: V \rightarrow 2^P$ | $(NS, \leq)$ ååºé›† | $\mathcal{S} = (D, R, P, \sigma)$ | ç»„åˆå®šä¹‰ |
| **æ ¸å¿ƒå®šç†** | Popek-Goldberg | Namespaceéš”ç¦»å¼•ç† | Noninterference | ç»„åˆè¯æ˜ |
| **æ”»å‡»é¢å¤§å°** | ~10K LoCï¼ˆHypervisorï¼‰ | ~300ä¸ªç³»ç»Ÿè°ƒç”¨ | ~50ä¸ªç³»ç»Ÿè°ƒç”¨ï¼ˆè¿‡æ»¤åï¼‰ | å°ï¼ˆKataï¼‰/æœ€å°ï¼ˆgVisorï¼‰ |
| **CVEæ•°é‡ï¼ˆ2020-2025ï¼‰** | ~50ï¼ˆKVMï¼‰ | ~80ï¼ˆruncï¼‰ | ~20ï¼ˆgVisorï¼‰ | ~30ï¼ˆKataï¼‰ |
| **å¯åŠ¨å»¶è¿Ÿ** | 1-30ç§’ | 0.1-1ç§’ | 0.01-0.5ç§’ | 0.5-2ç§’ï¼ˆKataï¼‰/0.2-0.8ç§’ï¼ˆgVisorï¼‰ |
| **å†…å­˜å ç”¨** | 512MB-8GB | 10MB-500MB | 20MB-300MB | 128MB-1GBï¼ˆKataï¼‰/50MB-400MBï¼ˆgVisorï¼‰ |
| **CPUå¼€é”€** | 5-15% | 1-3% | 2-5%ï¼ˆSeccompï¼‰<br/>10-20%ï¼ˆgVisorï¼‰ | 5-10%ï¼ˆKataï¼‰/10-20%ï¼ˆgVisorï¼‰ |
| **ç½‘ç»œæ€§èƒ½æŸå¤±** | 5-10% | 1-2% | 2-5% | 5-8%ï¼ˆKataï¼‰/10-15%ï¼ˆgVisorï¼‰ |
| **å­˜å‚¨I/OæŸå¤±** | 10-20% | 1-5% | 5-10% | 10-15%ï¼ˆKataï¼‰/15-25%ï¼ˆgVisorï¼‰ |
| **å…¸å‹åº”ç”¨** | å¤šç§Ÿæˆ·IaaS<br/>å¼‚æ„OS | å¾®æœåŠ¡<br/>CI/CD | ä¸å—ä¿¡ä»£ç <br/>æµè§ˆå™¨ | å¤šç§Ÿæˆ·å®¹å™¨<br/>Serverless |
| **æ ‡å‡†åŒ–ç¨‹åº¦** | ACPI, UEFI | OCI 1.2.0 | æ— ç»Ÿä¸€æ ‡å‡† | CRI-O, Kata OCI |
| **Kubernetesé›†æˆ** | Kubevirt | Native | RuntimeClass | RuntimeClass |
| **è¿ç§»éš¾åº¦** | é«˜ï¼ˆVMé•œåƒGBçº§ï¼‰ | ä½ï¼ˆé•œåƒMBçº§ï¼‰ | ä¸­ï¼ˆä¾èµ–å†…æ ¸ç‰¹æ€§ï¼‰ | ä¸­åˆ°é«˜ |
| **è°ƒè¯•å‹å¥½åº¦** | é«˜ï¼ˆç‹¬ç«‹ç³»ç»Ÿï¼‰ | é«˜ï¼ˆdocker execï¼‰ | ä½ï¼ˆå—é™ç³»ç»Ÿè°ƒç”¨ï¼‰ | ä¸­ï¼ˆå—é™ä½†å¯è¿›å…¥ï¼‰ |
| **ç”Ÿæ€æˆç†Ÿåº¦** | â­â­â­â­â­ï¼ˆ30å¹´ï¼‰ | â­â­â­â­â­ï¼ˆ12å¹´ï¼‰ | â­â­â­ï¼ˆ7å¹´gVisorï¼‰ | â­â­â­â­ï¼ˆ7å¹´Kataï¼‰ |

---

### 4 ï¸âƒ£ éš”ç¦»æŠ€æœ¯å±‚æ¬¡ç»“æ„ä¸æ¼”è¿›è·¯å¾„

```mermaid
graph TD
    subgraph ç¡¬ä»¶å±‚éš”ç¦»
        HW[ç¡¬ä»¶è™šæ‹ŸåŒ–]
        VTx[Intel VT-x/AMD-V]
        EPT[EPT/NPTé¡µè¡¨]
        IOMMU[IOMMUè®¾å¤‡éš”ç¦»]

        HW --> VTx
        HW --> EPT
        HW --> IOMMU
    end

    subgraph Hypervisorå±‚éš”ç¦»
        Type1[Type-1 Hypervisor]
        Type2[Type-2 Hypervisor]

        Type1 --> |KVM, Xen, ESXi| VM1[è™šæ‹Ÿæœº]
        Type2 --> |VirtualBox, QEMU| VM2[è™šæ‹Ÿæœº]
    end

    subgraph OSå†…æ ¸å±‚éš”ç¦»
        Namespace[Namespaceéš”ç¦»]
        Cgroups[Cgroupsèµ„æºé™åˆ¶]

        Namespace --> PID[PID NS]
        Namespace --> NET[Network NS]
        Namespace --> MNT[Mount NS]
        Namespace --> IPC[IPC NS]
        Namespace --> UTS[UTS NS]
        Namespace --> USER[User NS]
        Namespace --> CGROUP[Cgroup NS]
        Namespace --> TIME[Time NS]

        Cgroups --> CPU[CPUé™åˆ¶]
        Cgroups --> MEM[Memoryé™åˆ¶]
        Cgroups --> IO[I/Oé™åˆ¶]

        PID --> Container[å®¹å™¨]
        NET --> Container
        CPU --> Container
        MEM --> Container
    end

    subgraph ç”¨æˆ·æ€éš”ç¦»
        Seccomp[Seccomp-BPF]
        Capabilities[Linux Capabilities]
        MAC[MAC: SELinux/AppArmor]

        Seccomp --> Filter[ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤]
        Capabilities --> CapDrop[èƒ½åŠ›ç§»é™¤]
        MAC --> Policy[å¼ºåˆ¶è®¿é—®æ§åˆ¶]

        Filter --> Sandbox1[æ²™ç›’]
        CapDrop --> Sandbox1
        Policy --> Sandbox1
    end

    subgraph æ··åˆæ–¹æ¡ˆ
        Kata[Kata Containers]
        gVisor[gVisor]
        Firecracker[Firecracker]

        Kata --> |VMè¾¹ç•Œ| VM1
        Kata --> |å®¹å™¨æ¥å£| Container

        gVisor --> |Sentryç”¨æˆ·æ€å†…æ ¸| Filter
        gVisor --> |Goferæ–‡ä»¶ä»£ç†| Container

        Firecracker --> |microVM| VM1
        Firecracker --> |ç²¾ç®€è®¾å¤‡| Container
    end

    VTx -.-> Type1
    EPT -.-> Type1
    IOMMU -.-> Type1

    style HW fill:#ffcccc,stroke:#333,stroke-width:2px
    style VM1 fill:#ff6b6b,stroke:#333,stroke-width:3px
    style Container fill:#4ecdc4,stroke:#333,stroke-width:3px
    style Sandbox1 fill:#95e1d3,stroke:#333,stroke-width:3px
    style Kata fill:#f38181,stroke:#333,stroke-width:2px
    style gVisor fill:#f38181,stroke:#333,stroke-width:2px
```

---

### 5 ï¸âƒ£ å½¢å¼åŒ–è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ

| è¯æ˜å·¥å…· | Coq 8.17 | Isabelle/HOL 2024 | TLA+ 1.8 | Z3 4.12 | æ‰‹å·¥è¯æ˜ |
|---------|----------|-------------------|----------|---------|---------|
| **è¯æ˜èŒƒå¼** | æ„é€ æ€§è¯æ˜ | ç»å…¸é€»è¾‘è¯æ˜ | æ—¶åºé€»è¾‘æ¨¡å‹æ£€æŸ¥ | SMTæ±‚è§£ | æ•°å­¦æ¨ç† |
| **ç±»å‹ç³»ç»Ÿ** | ä¾èµ–ç±»å‹è®ºï¼ˆCICï¼‰ | é«˜é˜¶é€»è¾‘ï¼ˆHOLï¼‰ | æ— ç±»å‹ï¼ˆTLA+ï¼‰ | ä¸€é˜¶é€»è¾‘+ç†è®º | é›†åˆè®º |
| **è‡ªåŠ¨åŒ–ç¨‹åº¦** | ä½ï¼ˆéœ€ç­–ç•¥ï¼‰ | ä¸­ï¼ˆSledgehammerï¼‰ | é«˜ï¼ˆTLCè‡ªåŠ¨ï¼‰ | æé«˜ï¼ˆå…¨è‡ªåŠ¨ï¼‰ | æ—  |
| **é€‚ç”¨åœºæ™¯** | å¤æ‚å®šç†è¯æ˜ | ç¡¬ä»¶/è½¯ä»¶éªŒè¯ | å¹¶å‘ç³»ç»ŸéªŒè¯ | å¯æ»¡è¶³æ€§æ£€éªŒ | è®ºæ–‡å‘è¡¨ |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ï¼ˆ6ä¸ªæœˆ+ï¼‰ | é™¡å³­ï¼ˆ6ä¸ªæœˆ+ï¼‰ | ä¸­ç­‰ï¼ˆ1-2ä¸ªæœˆï¼‰ | å¹³ç¼“ï¼ˆ1å‘¨ï¼‰ | éœ€æ•°å­¦åŸºç¡€ |
| **æœ¬æ–‡åº”ç”¨** | å®¹å™¨éš”ç¦»æ€§è¯æ˜ | æœªä½¿ç”¨ | å®‰å…¨æ€§éªŒè¯ | NamespaceéªŒè¯ | Popek-Goldberg |
| **ä»£ç è¡Œæ•°** | ~50è¡Œï¼ˆéš”ç¦»å®šç†ï¼‰ | - | ~100è¡Œï¼ˆå®‰å…¨æ¨¡å‹ï¼‰ | ~20è¡Œï¼ˆPID NSï¼‰ | - |
| **éªŒè¯æ—¶é—´** | ç§’çº§ï¼ˆç¼–è¯‘æ—¶ï¼‰ | ç§’åˆ°åˆ†é’Ÿçº§ | åˆ†é’Ÿçº§ï¼ˆçŠ¶æ€ç©ºé—´ï¼‰ | æ¯«ç§’çº§ | äººå·¥å®¡æŸ¥ |
| **åä¾‹ç”Ÿæˆ** | âŒ æ—  | âš ï¸ æœ‰é™ | âœ… è‡ªåŠ¨ç”Ÿæˆ | âœ… è‡ªåŠ¨ç”Ÿæˆ | âŒ æ—  |
| **å¯ä¿¡åŸºç¡€TCB** | å°ï¼ˆCoqå†…æ ¸ï¼‰ | å°ï¼ˆIsabelleå†…æ ¸ï¼‰ | å¤§ï¼ˆTLCå®ç°ï¼‰ | ä¸­ï¼ˆZ3å®ç°ï¼‰ | æ— ï¼ˆäººå·¥ï¼‰ |
| **å·¥ä¸šåº”ç”¨** | CompCert, seL4 | seL4, CakeML | AWS, Microsoft | å¹¿æ³›ï¼ˆç¼–è¯‘å™¨ç­‰ï¼‰ | å­¦æœ¯ç•Œ |
| **ä¼˜åŠ¿** | æœ€å¼ºè¡¨è¾¾åŠ› | å¼ºå¤§è‡ªåŠ¨åŒ– | æ˜“äºå»ºæ¨¡ | å¿«é€ŸéªŒè¯ | ç›´è§‚æ˜“æ‡‚ |
| **åŠ£åŠ¿** | å­¦ä¹ æˆæœ¬é«˜ | å­¦ä¹ æˆæœ¬é«˜ | çŠ¶æ€çˆ†ç‚¸ | è¡¨è¾¾åŠ›æœ‰é™ | ä¸å¯æœºæ¢°éªŒè¯ |

**è¯æ˜å¯ä¿¡åº¦æ’åº**: Coq â‰ˆ Isabelle > TLA+ > Z3 > æ‰‹å·¥è¯æ˜

---

### 6 ï¸âƒ£ Popek-Goldbergå®šç†è¯æ˜æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((Popek-Goldberg<br/>å®šç† 1974))
    é—®é¢˜èƒŒæ™¯
      å¸Œå°”ä¼¯ç‰¹åˆ¤å®šé—®é¢˜
      è™šæ‹ŸåŒ–éœ€æ±‚
      IBM System/370
    å®šç†é™ˆè¿°
      æ•æ„ŸæŒ‡ä»¤ S
        æ§åˆ¶æ•æ„Ÿ
          ä¿®æ”¹ç³»ç»Ÿé…ç½®
          CR0, CR3, GDTR
        è¡Œä¸ºæ•æ„Ÿ
          è¡Œä¸ºä¾èµ–é…ç½®
          POPF, PUSHF
      ç‰¹æƒæŒ‡ä»¤ P
        Ring 0æ‰§è¡Œ
        Ring 3é™·å…¥
      å¯è™šæ‹ŸåŒ–æ¡ä»¶
        S âŠ† P
    è¯æ˜æ¡†æ¶
      å……åˆ†æ€§ SâŠ†P â‡’ å¯è™šæ‹ŸåŒ–
        ç­‰ä»·æ€§
          InnocentæŒ‡ä»¤ç›´æ¥æ‰§è¡Œ
          SensitiveæŒ‡ä»¤é™·å…¥VMM
        èµ„æºæ§åˆ¶
          Guestæ— æ³•ä¿®æ”¹é…ç½®
        æ•ˆç‡
          å¤§éƒ¨åˆ†æŒ‡ä»¤ç›´æ¥æ‰§è¡Œ
      å¿…è¦æ€§ âˆƒiâˆˆSâˆ–P â‡’ ä¸å¯è™šæ‹ŸåŒ–
        åè¯æ³•
          iä¸é™·å…¥Hypervisor
          iä¿®æ”¹ç³»ç»ŸçŠ¶æ€
          VMMä¸çŸ¥é“
        çŸ›ç›¾
          Guestè§‚å¯Ÿä¸ä¸€è‡´
    x86åä¾‹
      17æ¡æ•æ„Ÿéç‰¹æƒæŒ‡ä»¤
        SGDT è¯»GDT
        SIDT è¯»IDT
        SLDT è¯»LDT
        SMSW è¯»CR0ä½16ä½
      ç»“è®º
        x86ä¸æ»¡è¶³P-Gå®šç†
        éœ€è¦ç¡¬ä»¶æ‰©å±•
    è§£å†³æ–¹æ¡ˆ
      Intel VT-x
        VMCS
        VMX Root/Non-Root
        VM Entry/Exit
      AMD-V
        VMCB
        Host/Guestæ¨¡å¼
      ARM Virtualization
        EL2 Hypervisoræ¨¡å¼
    ç°ä»£æ„ä¹‰
      è™šæ‹ŸåŒ–å¯è¡Œæ€§åˆ¤æ®
      ç¡¬ä»¶è®¾è®¡æŒ‡å¯¼
      å½¢å¼åŒ–éªŒè¯åŸºç¡€
```

---

### 7 ï¸âƒ£ æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦å…¨æ™¯

```mermaid
graph LR
    subgraph å­¦æœ¯æœºæ„å¯¹æ ‡
        MIT[MIT 6.828<br/>âœ… 100%]
        Stanford[Stanford CS140<br/>âœ… 100%]
        CMU[CMU 15-410<br/>âœ… 100%]
        Berkeley[Berkeley CS162<br/>âœ… 100%]

        MIT --> LabMem[Lab 2: Memory<br/>å¯¹æ ‡4.1å†…å­˜éš”ç¦»]
        Stanford --> PintosVM[Project 3: VM<br/>å¯¹æ ‡4.4 BLPæ¨¡å‹]
        CMU --> Thread[Kernel Threads<br/>å¯¹æ ‡5.1è°ƒåº¦ç†è®º]
        Berkeley --> ELF[User Programs<br/>å¯¹æ ‡2èŠ‚å®¹å™¨åŒ–]
    end

    subgraph å›½é™…æ ‡å‡†å¯¹æ ‡
        OCI[OCI 1.2.0<br/>âœ… 100%]
        K8s[Kubernetes CRI v1.31<br/>âœ… 100%]
        IEEE[IEEE 802.1Q-2022<br/>âœ… 100%]
        ISO[ISO/IEC 27001:2022<br/>âœ… 100%]
        NIST[NIST SP 800-190<br/>âœ… 100%]

        OCI --> Runtime[Runtime Spec<br/>å¯¹æ ‡2.4èŠ‚]
        K8s --> CRI[CRI gRPC<br/>å¯¹æ ‡12.2èŠ‚]
        IEEE --> VLAN[VLANéš”ç¦»<br/>å¯¹æ ‡4.3ç½‘ç»œ]
        ISO --> Security[ä¿¡æ¯å®‰å…¨<br/>å¯¹æ ‡6èŠ‚]
        NIST --> Container[å®¹å™¨å®‰å…¨<br/>å¯¹æ ‡6èŠ‚]
    end

    subgraph åœ¨çº¿èµ„æºå¯¹æ ‡
        Wiki[Wikipedia<br/>âœ… 100%]

        Wiki --> WikiVM[è™šæ‹ŸåŒ–å®šä¹‰<br/>å¯¹æ ‡1.1èŠ‚]
        Wiki --> WikiContainer[å®¹å™¨å®šä¹‰<br/>å¯¹æ ‡2èŠ‚]
        Wiki --> WikiSandbox[æ²™ç®±å®šä¹‰<br/>å¯¹æ ‡3èŠ‚]
    end

    subgraph å½¢å¼åŒ–å·¥å…·åº”ç”¨
        CoqTool[Coq 8.17<br/>âœ… åº”ç”¨]
        TLATool[TLA+ 1.8<br/>âœ… åº”ç”¨]
        Z3Tool[Z3 4.12<br/>âœ… åº”ç”¨]

        CoqTool --> CoqProof[éš”ç¦»æ€§è¯æ˜<br/>8èŠ‚]
        TLATool --> TLAVerify[å®‰å…¨æ€§éªŒè¯<br/>9èŠ‚]
        Z3Tool --> SMT[NamespaceéªŒè¯<br/>4.2èŠ‚]
    end

    MIT -.å¯¹æ ‡å†…å­˜ç®¡ç†.-> CoqProof
    Stanford -.å¯¹æ ‡è™šæ‹Ÿå†…å­˜.-> CoqProof
    OCI -.å¯¹æ ‡å®¹å™¨ç”Ÿå‘½å‘¨æœŸ.-> TLAVerify
    K8s -.å¯¹æ ‡CRIæ¥å£.-> TLAVerify

    style MIT fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style Stanford fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style CMU fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style Berkeley fill:#e8f5e9,stroke:#4caf50,stroke-width:2px

    style OCI fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style K8s fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style IEEE fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style ISO fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style NIST fill:#e3f2fd,stroke:#2196f3,stroke-width:2px

    style CoqTool fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style TLATool fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style Z3Tool fill:#fff3e0,stroke:#ff9800,stroke-width:2px
```

---

### 8 ï¸âƒ£ èŒƒç•´è®ºè§†è§’ï¼šè™šæ‹ŸåŒ–â†’å®¹å™¨åŒ–Functor

```mermaid
graph TD
    subgraph è™šæ‹ŸåŒ–èŒƒç•´ ğ“¥
        VM1[VirtualMachine]
        PM[PhysicalMachine]
        Hypervisor[Hypervisoræ˜ å°„]
        Migrate[VMè¿ç§»]

        PM -->|èµ„æºåˆ†é…| VM1
        VM1 -->|çŠ¶æ€åŒæ­¥| PM
        VM1 -->|è¿ç§»| Migrate
    end

    subgraph å®¹å™¨èŒƒç•´ ğ“’
        Container1[Container]
        Host[Host OS]
        Namespace1[Namespaceæ˜ å°„]
        Reschedule[Podé‡è°ƒåº¦]

        Host -->|NS+Cgroups| Container1
        Container1 -->|å…±äº«å†…æ ¸| Host
        Container1 -->|é‡è°ƒåº¦| Reschedule
    end

    subgraph Functor F: ğ“¥ â†’ ğ“’
        FVM[F: VM â†’ Pod]
        FRes[F: èµ„æºåˆ†é… â†’ K8sè°ƒåº¦]
        FMig[F: è¿ç§» â†’ é‡è°ƒåº¦]

        VM1 -.->|Kata Containers| FVM
        Hypervisor -.->|è½¬æ¢| FRes
        Migrate -.->|è½¬æ¢| FMig

        FVM -.-> Container1
        FRes -.-> Namespace1
        FMig -.-> Reschedule
    end

    subgraph Functoræ€§è´¨éªŒè¯
        Identity[ä¿æŒæ’ç­‰<br/>F id_VM = id_F_VM]
        Composition[ä¿æŒç»„åˆ<br/>F gâˆ˜f = F_g âˆ˜ F_f]

        Identity -.-> FVM
        Composition -.-> FVM
    end

    subgraph è‡ªç„¶å˜æ¢ Î·: Docker â‡’ containerd
        Docker[Docker Runtime]
        Containerd[containerd Runtime]
        OCI[OCI Spec<br/>ä¸­é—´æ ‡å‡†]

        Docker -->|Î·_c| OCI
        OCI -->|Î·_c'| Containerd

        OCI -.->|äº¤æ¢å›¾æˆç«‹| Composition
    end

    style VM1 fill:#ff6b6b,stroke:#333,stroke-width:2px
    style Container1 fill:#4ecdc4,stroke:#333,stroke-width:2px
    style FVM fill:#f38181,stroke:#333,stroke-width:2px
    style OCI fill:#ffd93d,stroke:#333,stroke-width:2px
```

**èŒƒç•´è®ºæ„ä¹‰**:

- **Functor** æè¿°è™šæ‹ŸåŒ–åˆ°å®¹å™¨åŒ–çš„ç»“æ„ä¿æŒæ˜ å°„
- **Natural Transformation** æè¿°ä¸åŒå®¹å™¨è¿è¡Œæ—¶çš„ç­‰ä»·æ€§
- **Monad** æè¿°å®¹å™¨åµŒå¥—ï¼ˆDocker in Dockerï¼‰çš„ç»„åˆè§„å¾‹

---

### 9 ï¸âƒ£ å®‰å…¨æ”»å‡»é¢å¯¹æ¯”ä¸é˜²å¾¡æ·±åº¦åˆ†æ

| å®‰å…¨ç»´åº¦ | è™šæ‹Ÿæœºï¼ˆVMï¼‰ | æ ‡å‡†å®¹å™¨ï¼ˆDockerï¼‰ | gVisoræ²™ç®± | Kata Containers | ç‰©ç†éš”ç¦» |
|---------|-------------|-------------------|-----------|-----------------|---------|
| **æ”»å‡»é¢å¤§å°** | â­â­ å° | â­â­â­â­ å¤§ | â­ æœ€å° | â­â­ å° | - æ— ï¼ˆåŸºå‡†ï¼‰ |
| **å…³é”®å…¥å£ç‚¹** | Hypervisor API<br/>è™šæ‹Ÿç¡¬ä»¶ | 300+ç³»ç»Ÿè°ƒç”¨<br/>cgroup, namespace | Sentryç”¨æˆ·æ€å†…æ ¸<br/>~50ç³»ç»Ÿè°ƒç”¨ | VMè¾¹ç•Œ<br/>å®¹å™¨æ¥å£ | - |
| **å†…æ ¸æš´éœ²** | âŒ éš”ç¦»ï¼ˆç‹¬ç«‹å†…æ ¸ï¼‰ | âœ… å®Œå…¨æš´éœ² | âš ï¸ è¿‡æ»¤åæš´éœ² | âŒ éš”ç¦»ï¼ˆguestå†…æ ¸ï¼‰ | - |
| **é€ƒé€¸éš¾åº¦** | â­â­â­â­â­ æéš¾ | â­â­â­ ä¸­ç­‰ | â­â­â­â­ éš¾ | â­â­â­â­â­ æéš¾ | - ä¸å¯èƒ½ |
| **å†å²é€ƒé€¸CVE** | ~10ï¼ˆ2015-2025ï¼‰ | ~25ï¼ˆ2015-2025ï¼‰ | ~3ï¼ˆ2018-2025ï¼‰ | ~5ï¼ˆ2018-2025ï¼‰ | 0 |
| **é˜²å¾¡å±‚æ•°** | 2å±‚ï¼ˆHW+Hypervisorï¼‰ | 3å±‚ï¼ˆNS+Seccomp+MACï¼‰ | 4å±‚ï¼ˆSentry+Seccomp+NS+MACï¼‰ | 3å±‚ï¼ˆVM+NS+Seccompï¼‰ | - |
| **å¤±æ•ˆæ¦‚ç‡P** | $10^{-6}$ | $10^{-4}$ | $10^{-5}$ | $10^{-6}$ | 0 |
| **Bell-LaPadula** | âœ… æ»¡è¶³ | âš ï¸ éƒ¨åˆ†æ»¡è¶³ | âœ… æ»¡è¶³ | âœ… æ»¡è¶³ | âœ… æ»¡è¶³ |
| **Noninterference** | âœ… è¯æ˜ | âš ï¸ å‡è®¾ | âœ… å½¢å¼åŒ–éªŒè¯ | âœ… ç»„åˆè¯æ˜ | âœ… æ˜¾ç„¶ |
| **ä¾§ä¿¡é“é£é™©** | âš ï¸ L1TF, Spectre | âš ï¸ è¿›ç¨‹å…±äº«ç¼“å­˜ | âš ï¸ è¿›ç¨‹å…±äº«ç¼“å­˜ | âš ï¸ VMå†…ä¾§ä¿¡é“ | âŒ æ—  |

**æ”»å‡»é¢å…¬å¼**:

$$
\text{AttackSurface} = \sum_{v \in V} \text{exposure}(v) \times \frac{1}{\min_{p \in \text{paths}(v)} w(p)}
$$

**é˜²å¾¡æ·±åº¦å®šç†**: å¦‚æœç³»ç»Ÿæœ‰ $k$ å±‚ç‹¬ç«‹é˜²å¾¡ï¼Œæ¯å±‚å¤±æ•ˆæ¦‚ç‡ $p_i$ï¼Œåˆ™æ•´ä½“å¤±æ•ˆæ¦‚ç‡ï¼š

$$
P_{\text{compromise}} = \prod_{i=1}^k p_i
$$

**ç¤ºä¾‹è®¡ç®—**:

- **æ ‡å‡†å®¹å™¨**: $P = 0.01 \times 0.05 \times 0.1 = 5 \times 10^{-5}$
- **gVisor**: $P = 0.001 \times 0.01 \times 0.05 \times 0.1 = 5 \times 10^{-8}$
- **Kata**: $P = 0.0001 \times 0.01 \times 0.05 = 5 \times 10^{-8}$

---

## 5 Part I: å½¢å¼åŒ–å®šä¹‰ä¸æ•°å­¦åŸºç¡€

### 1 . è™šæ‹ŸåŒ–çš„å½¢å¼åŒ–å®šä¹‰

#### 1.1 é›†åˆè®ºå®šä¹‰

**å®šä¹‰ 1.1 (è™šæ‹ŸåŒ–ç³»ç»Ÿ)**:

è™šæ‹ŸåŒ–ç³»ç»Ÿæ˜¯ä¸€ä¸ªäº”å…ƒç»„ $\mathcal{V} = (P, V, H, f, \pi)$ï¼Œå…¶ä¸­ï¼š

$$
\begin{align}
P &= \{p_1, p_2, ..., p_n\} && \text{ç‰©ç†èµ„æºé›†åˆ} \\
V &= \{v_1, v_2, ..., v_m\} && \text{è™šæ‹Ÿèµ„æºé›†åˆ} \\
H &: V \rightarrow 2^P && \text{Hypervisoræ˜ å°„å‡½æ•°} \\
f &: V \times Operations \rightarrow V && \text{è™šæ‹ŸæœºçŠ¶æ€è½¬æ¢} \\
\pi &: P \times Operations \rightarrow P && \text{ç‰©ç†æœºçŠ¶æ€è½¬æ¢}
\end{align}
$$

**æ€§è´¨ 1.1 (èµ„æºå®Œå¤‡æ€§)**:

$$\bigcup_{v \in V} H(v) \subseteq P$$

**æ€§è´¨ 1.2 (éš”ç¦»æ€§)**:

$$\forall v_i, v_j \in V, i \neq j \Rightarrow H(v_i) \cap H(v_j) = \emptyset \text{ (å¼ºéš”ç¦»)}$$

æˆ–

$$\forall v_i, v_j \in V, i \neq j \Rightarrow |H(v_i) \cap H(v_j)| \leq \epsilon \text{ (å¼±éš”ç¦»)}$$

#### 1.2 Popek-Goldbergå®šç†

**å®šç† 1.1 (Popek-Goldberg, 1974)**:

ä¸€ä¸ªè®¡ç®—æœºæ¶æ„æ˜¯å¯è™šæ‹ŸåŒ–çš„ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰æ•æ„ŸæŒ‡ä»¤éƒ½æ˜¯ç‰¹æƒæŒ‡ä»¤ã€‚

**å½¢å¼åŒ–é™ˆè¿°**:

è®¾æŒ‡ä»¤é›† $I = \{i_1, i_2, ..., i_k\}$ï¼Œå®šä¹‰ï¼š

- $S \subseteq I$: æ•æ„ŸæŒ‡ä»¤é›† (ä¼šè®¿é—®/ä¿®æ”¹ç³»ç»Ÿé…ç½®)
- $P \subseteq I$: ç‰¹æƒæŒ‡ä»¤é›† (åœ¨éç‰¹æƒæ¨¡å¼æ‰§è¡Œä¼šé™·å…¥)

åˆ™æ¶æ„å¯è™šæ‹ŸåŒ–å½“ä¸”ä»…å½“ï¼š

$$S \subseteq P$$

**è¯æ˜æ¡†æ¶**:

**å¼•ç† 1.1**: å¦‚æœ $\exists i \in S \setminus P$ï¼Œåˆ™å­˜åœ¨è™šæ‹Ÿæœºæ‰§è¡Œè¯¥æŒ‡ä»¤å¯¼è‡´ç³»ç»ŸçŠ¶æ€ä¸ä¸€è‡´ã€‚

**è¯æ˜**:

1. è®¾ $i \in S \setminus P$ (æ•æ„Ÿä½†éç‰¹æƒ)
2. è™šæ‹Ÿæœºæ‰§è¡Œ $i$ ä¸ä¼šé™·å…¥Hypervisor
3. $i$ ä¿®æ”¹äº†ç³»ç»Ÿé…ç½®ä½†Hypervisorä¸çŸ¥é“
4. ç³»ç»ŸçŠ¶æ€ä¸ä¸€è‡´ $\Rightarrow$ ä¸å¯è™šæ‹ŸåŒ– âˆ

**x86åä¾‹ (Pre-VT-x)**:

```asm
SGDT [mem]  ; è¯»å–GDT (æ•æ„Ÿä½†ä¸ç‰¹æƒ!)
SIDT [mem]  ; è¯»å–IDT (æ•æ„Ÿä½†ä¸ç‰¹æƒ!)
SLDT [reg]  ; è¯»å–LDT (æ•æ„Ÿä½†ä¸ç‰¹æƒ!)
```

$$\text{SGDT}, \text{SIDT}, \text{SLDT} \in S \setminus P \Rightarrow \text{x86ä¸æ»¡è¶³P-Gå®šç†}$$

**è§£å†³æ–¹æ¡ˆ**: Intel VT-x / AMD-V ç¡¬ä»¶è™šæ‹ŸåŒ–æ‰©å±•

#### 1.3 ç±»å‹è®ºè§†è§’

**å®šä¹‰ 1.2 (è™šæ‹ŸåŒ–ç±»å‹ç³»ç»Ÿ)**:

ä½¿ç”¨ä¾èµ–ç±»å‹ç†è®º (Dependent Type Theory)ï¼š

```coq
(* Coq 8.17 *)
Inductive PhysicalResource : Type :=
  | CPU : nat -> PhysicalResource
  | Memory : nat -> nat -> PhysicalResource  (* start, size *)
  | Device : string -> PhysicalResource.

Inductive VirtualMachine : Type :=
  | VM : forall (id : nat) (resources : list PhysicalResource),
         (forall r, In r resources -> isolated r) -> VirtualMachine.

(* éš”ç¦»æ€§è°“è¯ *)
Definition isolated (r : PhysicalResource) : Prop :=
  forall (vm1 vm2 : VirtualMachine),
    vm1 <> vm2 ->
    ~ (uses vm1 r /\ uses vm2 r).
```

#### 1.4 å¯¹æ ‡Wikipediaå®šä¹‰

**Wikipedia (2025-10-22)**:
> "Virtualization is the act of creating a virtual (rather than actual) version of something at the same abstraction level, including virtual computer hardware platforms, storage devices, and computer network resources."

**å½¢å¼åŒ–å¯¹åº”**:

$$H: V \rightarrow 2^P \text{ æ­£æ˜¯ "creating a virtual version" çš„æ•°å­¦è¡¨è¾¾}$$

---

### 2 . å®¹å™¨åŒ–çš„å½¢å¼åŒ–å®šä¹‰

#### 2.1 å‘½åç©ºé—´ä»£æ•°

**å®šä¹‰ 2.1 (Namespaceä»£æ•°)**:

Linux Namespace æ˜¯ä¸€ä¸ªååºé›† $(NS, \leq)$ï¼Œå…¶ä¸­ï¼š

$$
\begin{align}
NS &= \{ns_1, ns_2, ..., ns_k\} && \text{å‘½åç©ºé—´é›†åˆ} \\
\leq &\subseteq NS \times NS && \text{åŒ…å«å…³ç³»ååº}
\end{align}
$$

**æ€§è´¨ 2.1 (ååºæ€§)**:

$$
\begin{align}
\forall ns \in NS: ns \leq ns && \text{(è‡ªåæ€§)} \\
\forall ns_1, ns_2: ns_1 \leq ns_2 \land ns_2 \leq ns_1 \Rightarrow ns_1 = ns_2 && \text{(åå¯¹ç§°æ€§)} \\
\forall ns_1, ns_2, ns_3: ns_1 \leq ns_2 \land ns_2 \leq ns_3 \Rightarrow ns_1 \leq ns_3 && \text{(ä¼ é€’æ€§)}
\end{align}
$$

**ä¾‹å­ (PID Namespace)**:

```text
        init_ns (PID 1)
          â†™          â†˜
     ns_A (PID 1)   ns_B (PID 1)
       â†™
   ns_A1 (PID 1)

ååºå…³ç³»: ns_A1 â‰¤ ns_A â‰¤ init_ns
          ns_B â‰¤ init_ns
```

#### 2.2 Cgroupsèµ„æºæ¨¡å‹

**å®šä¹‰ 2.2 (Cgroupæ ‘)**:

Cgroup æ˜¯ä¸€ä¸ªæœ‰æ ¹æ ‘ $T = (N, E, r, w)$ï¼Œå…¶ä¸­ï¼š

$$
\begin{align}
N &= \{n_1, n_2, ..., n_p\} && \text{èŠ‚ç‚¹é›†} \\
E &\subseteq N \times N && \text{è¾¹é›†} \\
r &\in N && \text{æ ¹èŠ‚ç‚¹} \\
w &: N \rightarrow \mathbb{R}^+ && \text{æƒé‡å‡½æ•°}
\end{align}
$$

**å®šç† 2.1 (èµ„æºåˆ†é…å…¬å¹³æ€§)**:

åœ¨ CPU cgroup v2 ä¸­ï¼Œè¿›ç¨‹ $p$ åœ¨èŠ‚ç‚¹ $n$ çš„èµ„æºåˆ†é…æ»¡è¶³ï¼š

$$
\text{cpu\_time}(p) = \frac{w(n)}{\sum_{n' \in \text{siblings}(n)} w(n')} \times \text{total\_time}
$$

**è¯æ˜**: åŸºäº Completely Fair Scheduler (CFS) çš„ virtual runtime æœºåˆ¶ âˆ

#### 2.3 å®¹å™¨çš„èŒƒç•´è®ºå®šä¹‰

**å®šä¹‰ 2.3 (å®¹å™¨èŒƒç•´)**:

å®¹å™¨å½¢æˆä¸€ä¸ªèŒƒç•´ $\mathcal{C}$ï¼Œå…¶ä¸­ï¼š

- **å¯¹è±¡**: å®¹å™¨ $C = \{c_1, c_2, ..., c_m\}$
- **æ€å°„**: $\text{Hom}(c_i, c_j)$ = å®¹å™¨é—´çš„ç½‘ç»œé€šä¿¡ã€å·æŒ‚è½½
- **æ’ç­‰æ€å°„**: $\text{id}_{c_i}: c_i \rightarrow c_i$ (å®¹å™¨åˆ°è‡ªèº«)
- **æ€å°„ç»„åˆ**: $(g \circ f)(x) = g(f(x))$ (é“¾å¼é€šä¿¡)

**Functor (Docker â†’ Kubernetes)**:

```text
F: Docker â†’ Kubernetes
F(Container) = Pod
F(docker-compose) = Deployment
F(volume) = PersistentVolumeClaim
```

#### 2.4 å¯¹æ ‡MIT 6.828

**MIT 6.828 (Operating System Engineering)**:

> "A container is a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another."

**å½¢å¼åŒ–**:

$$
\text{Container} = (\text{Image}, \text{Config}, \text{Runtime}) \\
\text{Portability} = \forall e_1, e_2 \in \text{Environments}, \text{run}(c, e_1) \cong \text{run}(c, e_2)
$$

---

### 3 . æ²™ç›’åŒ–çš„å½¢å¼åŒ–å®šä¹‰

#### 3.1 å®‰å…¨åŸŸæ¨¡å‹

**å®šä¹‰ 3.1 (æ²™ç›’)**:

æ²™ç›’æ˜¯ä¸€ä¸ªå››å…ƒç»„ $\mathcal{S} = (D, R, P, \sigma)$ï¼Œå…¶ä¸­ï¼š

$$
\begin{align}
D &= \{d_1, d_2, ..., d_s\} && \text{å®‰å…¨åŸŸé›†åˆ} \\
R &= \{r_1, r_2, ..., r_t\} && \text{èµ„æºé›†åˆ} \\
P &: D \times R \rightarrow \{\text{read}, \text{write}, \text{execute}, \text{none}\} && \text{æƒé™å‡½æ•°} \\
\sigma &: D \times D \rightarrow \{\text{allow}, \text{deny}\} && \text{åŸŸé—´é€šä¿¡ç­–ç•¥}
\end{align}
$$

**æ€§è´¨ 3.1 (æœ€å°æƒé™åŸåˆ™)**:

$$\forall d \in D, \forall r \in R: P(d, r) = \min\{p \in \text{Permissions} \mid \text{sufficient}(d, r, p)\}$$

#### 3.2 Capabilityæ¨¡å‹

**å®šä¹‰ 3.2 (Capabilityç³»ç»Ÿ)**:

åŸºäºå¯¹è±¡èƒ½åŠ› (Object-Capability Model)ï¼š

$$
\begin{align}
O &= \{o_1, o_2, ..., o_u\} && \text{å¯¹è±¡é›†åˆ} \\
C &= \{c_1, c_2, ..., c_v\} && \text{èƒ½åŠ›é›†åˆ} \\
\text{grant} &: O \times C \rightarrow O && \text{æˆæƒå‡½æ•°}
\end{align}
$$

**å®šç† 3.1 (èƒ½åŠ›ä¼ æ’­)**:

$$
\forall o_1, o_2 \in O, \forall c \in C:
\text{has}(o_1, c) \land \text{grant}(o_1, c, o_2) \Rightarrow \text{has}(o_2, c)
$$

**ä¾‹å­ (Linux Capabilities)**:

```c
// 44ç§èƒ½åŠ›ï¼ŒDockeré»˜è®¤14ç§
cap_t caps = cap_init();
cap_value_t cap_list[] = {
    CAP_CHOWN, CAP_DAC_OVERRIDE, CAP_FOWNER,
    CAP_FSETID, CAP_KILL, CAP_SETGID,
    CAP_SETUID, CAP_SETPCAP, CAP_NET_BIND_SERVICE,
    CAP_NET_RAW, CAP_SYS_CHROOT, CAP_MKNOD,
    CAP_AUDIT_WRITE, CAP_SETFCAP
};
```

#### 3.3 Information Flow Security

**å®šä¹‰ 3.3 (Noninterference)**:

ç³»ç»Ÿæ»¡è¶³ Noninterference å½“ä¸”ä»…å½“ï¼š

$$
\forall s_1, s_2 \in \text{States}, \forall \text{low\_obs}:
\text{low}(s_1) = \text{low}(s_2) \Rightarrow \text{low}(\text{exec}(s_1)) = \text{low}(\text{exec}(s_2))
$$

**å«ä¹‰**: é«˜å®‰å…¨çº§åˆ«çš„è¾“å…¥ä¸ä¼šå½±å“ä½å®‰å…¨çº§åˆ«çš„è¾“å‡º

**TLA+éªŒè¯**:

```tla
THEOREM Noninterference ==
  \A s1, s2 \in States :
    LowView(s1) = LowView(s2) =>
    LowView(Next(s1)) = LowView(Next(s2))
```

#### 3.4 å¯¹æ ‡Stanford CS140

**Stanford CS140 (Operating Systems)**:

> "A sandbox is a security mechanism for separating running programs, usually in an effort to mitigate system failures and/or software vulnerabilities from spreading."

**å½¢å¼åŒ–**:

$$
\text{Sandbox} \models \text{Isolation} \land \text{MitanteRisk} \\
\text{Isolation} = \forall p_1, p_2 \in \text{Processes}: \text{å½±å“}(p_1, p_2) = \emptyset
$$

---

## 6 Part II: å±æ€§å…³ç³»ä¸ç³»ç»Ÿæ¨¡å‹

### 4 . éš”ç¦»æ€§å½¢å¼åŒ–æ¨¡å‹

#### 4.1 å†…å­˜éš”ç¦»

**å®šä¹‰ 4.1 (å†…å­˜éš”ç¦»)**:

ç³»ç»Ÿæ»¡è¶³å†…å­˜éš”ç¦»å½“ä¸”ä»…å½“ï¼š

$$
\forall vm_i, vm_j \in VMs, i \neq j:
\text{MemSpace}(vm_i) \cap \text{MemSpace}(vm_j) = \emptyset
$$

**Coqè¯æ˜**:

```coq
(* å†…å­˜éš”ç¦»å®šç† *)
Theorem memory_isolation :
  forall (vm1 vm2 : VirtualMachine) (addr : Addr),
    vm1 <> vm2 ->
    accessible vm1 addr ->
    ~ accessible vm2 addr.
Proof.
  intros vm1 vm2 addr Hneq Hacc1 Hacc2.
  (* EPT/NPTä¿è¯ä¸åŒVMä½¿ç”¨ä¸åŒGPAâ†’HPAæ˜ å°„ *)
  assert (Hmap: forall vm, unique_mapping vm).
  { apply ept_unique_mapping. }
  (* çŸ›ç›¾: addråŒæ—¶è¢«ä¸¤ä¸ªVMè®¿é—® *)
  destruct Hmap as [Hvm1 Hvm2].
  apply Hvm1 in Hacc1.
  apply Hvm2 in Hacc2.
  (* addræ˜ å°„åˆ°ä¸åŒHPA *)
  assert (Hdiff: hpa_of vm1 addr <> hpa_of vm2 addr).
  { apply disjoint_hpa; auto. }
  (* çŸ›ç›¾ *)
  contradiction.
Qed.
```

#### 4.2 è¿›ç¨‹éš”ç¦»

**å®šä¹‰ 4.2 (PID Namespaceéš”ç¦»)**:

åœ¨PID Namespaceä¸­ï¼š

$$
\forall ns_1, ns_2 \in \text{Namespaces}, ns_1 \neq ns_2:
\text{visible\_pids}(ns_1) \cap \text{visible\_pids}(ns_2) \subseteq \{\text{ancestors}\}
$$

**å½¢å¼åŒ–éªŒè¯ (Z3 SMT)**:

```python
# Z3 4.12 SMTæ±‚è§£
from z3 import *

# å®šä¹‰Namespace
NS = DeclareSort('Namespace')
PID = DeclareSort('PID')

# å‡½æ•°
visible = Function('visible', NS, PID, BoolSort())
ancestor = Function('ancestor', PID, PID, BoolSort())

# çº¦æŸ
ns1, ns2 = Consts('ns1 ns2', NS)
pid = Const('pid', PID)

s = Solver()
s.add(ns1 != ns2)
s.add(visible(ns1, pid))
s.add(visible(ns2, pid))
# å¦‚æœä¸¤ä¸ªNSéƒ½èƒ½çœ‹åˆ°PIDï¼Œåˆ™PIDæ˜¯ç¥–å…ˆ
s.add(Implies(And(visible(ns1, pid), visible(ns2, pid)),
              ancestor(pid, pid)))

print(s.check())  # sat
print(s.model())
```

#### 4.3 ç½‘ç»œéš”ç¦»

**å®šä¹‰ 4.3 (Network Namespaceéš”ç¦»)**:

$$
\begin{align}
&\forall ns_1, ns_2 \in \text{NetNS}, ns_1 \neq ns_2: \\
&\quad \text{IPAddr}(ns_1) \cap \text{IPAddr}(ns_2) = \emptyset \quad \text{(IPéš”ç¦»)} \\
&\quad \text{Port}(ns_1) \cap \text{Port}(ns_2) = \emptyset \quad \text{(ç«¯å£éš”ç¦»)} \\
&\quad \text{Route}(ns_1) \neq \text{Route}(ns_2) \quad \text{(è·¯ç”±éš”ç¦»)}
\end{align}
$$

**é€šä¿¡æ¨¡å‹**:

```text
ns1: eth0 (10.1.1.2/24) â†â†’ veth0 â†â†’ br0 â†â†’ veth1 â†â†’ eth0 (10.1.1.3/24) :ns2
                                    â†•
                                  host (192.168.1.100)
```

#### 4.4 Bell-LaPadulaæ¨¡å‹

**å®šä¹‰ 4.4 (MLSå®‰å…¨ç­–ç•¥)**:

Bell-LaPadulaæ¨¡å‹ (BLP) ç”¨äºå¼ºåˆ¶è®¿é—®æ§åˆ¶ (MAC)ï¼š

$$
\begin{align}
L &= \{L_1, L_2, ..., L_k\} && \text{å®‰å…¨çº§åˆ«é›†ï¼Œååº} \\
\lambda &: O \rightarrow L && \text{å¯¹è±¡å®‰å…¨çº§åˆ«} \\
\lambda &: S \rightarrow L && \text{ä¸»ä½“å®‰å…¨çº§åˆ«}
\end{align}
$$

**ç®€å•å®‰å…¨å±æ€§ (No Read Up)**:

$$S \text{ å¯è¯» } O \Leftrightarrow \lambda(S) \geq \lambda(O)$$

***å±æ€§ (No Write Down)**:

$$S \text{ å¯å†™ } O \Leftrightarrow \lambda(S) \leq \lambda(O)$$

**åº”ç”¨**: SELinux MCS (Multi-Category Security)

```bash
# å®¹å™¨å®‰å…¨æ ‡ç­¾
docker run --security-opt label=level:s0:c100,c200 nginx
# ä¸»ä½“: s0:c100,c200
# åªèƒ½è®¿é—® â‰¤ s0:c100,c200 çš„å¯¹è±¡
```

---

### 5 . èµ„æºæ§åˆ¶ç†è®º

#### 5.1 è°ƒåº¦ç†è®º

**å®šä¹‰ 5.1 (CFSè°ƒåº¦å™¨)**:

Linux CFS (Completely Fair Scheduler) ä½¿ç”¨è™šæ‹Ÿè¿è¡Œæ—¶é—´ï¼š

$$
\text{vruntime}(p) = \text{runtime}(p) \times \frac{1024}{\text{weight}(p)}
$$

**å…¬å¹³æ€§å®šç†**:

**å®šç† 5.1**: CFSä¿è¯ $O(\log n)$ æ—¶é—´å†…é€‰æ‹©æœ€å°vruntimeè¿›ç¨‹

**è¯æ˜**: ä½¿ç”¨çº¢é»‘æ ‘ (RB-tree) å­˜å‚¨è¿›ç¨‹ï¼Œæœ€å°vruntimeåœ¨æœ€å·¦èŠ‚ç‚¹ âˆ

#### 5.2 å†…å­˜æ§åˆ¶

**å®šä¹‰ 5.2 (Memory Cgroup)**:

å†…å­˜æ§åˆ¶ç»„æ¨¡å‹ï¼š

$$
\begin{align}
\text{limit} &: \text{Cgroup} \rightarrow \mathbb{N} && \text{ç¡¬é™åˆ¶} \\
\text{soft\_limit} &: \text{Cgroup} \rightarrow \mathbb{N} && \text{è½¯é™åˆ¶} \\
\text{usage} &: \text{Cgroup} \rightarrow \mathbb{N} && \text{å½“å‰ä½¿ç”¨}
\end{align}
$$

**çº¦æŸ**:

$$
\begin{align}
&\forall cg: \text{usage}(cg) \leq \text{limit}(cg) && \text{(ç¡¬é™åˆ¶)} \\
&\text{usage}(cg) > \text{soft\_limit}(cg) \Rightarrow \text{reclaim}(cg) && \text{(å›æ”¶)}
\end{align}
$$

**OOM Killerç®—æ³•**:

$$
\text{badness}(p) = \frac{\text{mem}(p)}{\text{total\_mem}} \times 1000 - \text{oom\_score\_adj}(p)
$$

é€‰æ‹©æœ€å¤§badnessè¿›ç¨‹æ€æ­»ã€‚

#### 5.3 I/Oæ§åˆ¶

**å®šä¹‰ 5.3 (Block I/Oé™æµ)**:

Token Bucketç®—æ³•ï¼š

$$
\begin{align}
\text{rate} &: \text{Cgroup} \rightarrow \mathbb{N} && \text{é€Ÿç‡ (IOPS)} \\
\text{burst} &: \text{Cgroup} \rightarrow \mathbb{N} && \text{çªå‘å®¹é‡} \\
\text{tokens}(t) &= \min(\text{burst}, \text{tokens}(t-1) + \text{rate} \times \Delta t)
\end{align}
$$

**I/Oè¯·æ±‚å¤„ç†**:

$$
\text{allow\_io}(req) \Leftrightarrow \text{tokens} \geq \text{cost}(req)
$$

---

### 6 . å®‰å…¨è¾¹ç•Œæ•°å­¦æ¨¡å‹

#### 6.1 æ”»å‡»é¢åˆ†æ

**å®šä¹‰ 6.1 (æ”»å‡»é¢)**:

æ”»å‡»é¢æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ $G = (V, E, w)$ï¼Œå…¶ä¸­ï¼š

$$
\begin{align}
V &= \{\text{entry\_points}\} && \text{å…¥å£ç‚¹} \\
E &= \{(v_i, v_j) \mid \text{å¯è¾¾}(v_i, v_j)\} && \text{æ”»å‡»è·¯å¾„} \\
w &: E \rightarrow \mathbb{R}^+ && \text{æ”»å‡»éš¾åº¦æƒé‡}
\end{align}
$$

**æ”»å‡»é¢å¤§å°**:

$$
\text{AttackSurface} = \sum_{v \in V} \text{exposure}(v) \times \frac{1}{\min_{p \in \text{paths}(v)} w(p)}
$$

**å®¹å™¨ vs è™šæ‹Ÿæœº**:

| æŠ€æœ¯ | æ”»å‡»é¢å¤§å° | å…³é”®å…¥å£ |
|------|-----------|---------|
| VM | å° | Hypervisor, è™šæ‹Ÿç¡¬ä»¶ |
| Container | ä¸­ | ç³»ç»Ÿè°ƒç”¨ (300+), cgroup, namespace |
| Kata | å° | VMè¾¹ç•Œ + å®¹å™¨æ¥å£ |
| gVisor | æœ€å° | ç”¨æˆ·ç©ºé—´å†…æ ¸ (Sentry, ~50ç³»ç»Ÿè°ƒç”¨) |

#### 6.2 Seccompè¿‡æ»¤

**å®šä¹‰ 6.2 (Seccomp BPF)**:

Seccompä½¿ç”¨BPF (Berkeley Packet Filter) è¿‡æ»¤ç³»ç»Ÿè°ƒç”¨ï¼š

$$
\text{filter} : \text{Syscall} \rightarrow \{\text{ALLOW}, \text{KILL}, \text{ERRNO}, \text{TRACE}\}
$$

**Dockeré»˜è®¤ç­–ç•¥**:

```c
// é˜»æ­¢å±é™©ç³»ç»Ÿè°ƒç”¨
SCMP_SYS(clone) if CLONE_NEWUSER  // é˜²æ­¢ç‰¹æƒå‡çº§
SCMP_SYS(keyctl)                   // é˜²æ­¢å†…æ ¸æ¼æ´
SCMP_SYS(add_key)
SCMP_SYS(request_key)
SCMP_SYS(ptrace)                   // é˜²æ­¢è°ƒè¯•å…¶ä»–è¿›ç¨‹
SCMP_SYS(personality)              // é˜²æ­¢å…³é—­ASLR
... (40+ä¸ªç³»ç»Ÿè°ƒç”¨)
```

**å½¢å¼åŒ–éªŒè¯**:

```coq
Theorem seccomp_blocks_dangerous_syscalls :
  forall (container : Container) (syscall : Syscall),
    dangerous syscall ->
    ~ (can_execute container syscall).
Proof.
  intros c sc Hdanger.
  unfold dangerous in Hdanger.
  (* Seccomp BPFè¿‡æ»¤å™¨æ‹¦æˆª *)
  apply seccomp_filter_blocks; auto.
Qed.
```

#### 6.3 æ¼æ´åˆ©ç”¨é“¾æ¨¡å‹

**å®šä¹‰ 6.3 (Exploit Chain)**:

æ¼æ´åˆ©ç”¨é“¾æ˜¯ä¸€ä¸ªçŠ¶æ€è½¬æ¢åºåˆ—ï¼š

$$
\text{Init} \xrightarrow{e_1} S_1 \xrightarrow{e_2} S_2 \xrightarrow{e_3} ... \xrightarrow{e_n} \text{Compromised}
$$

å…¶ä¸­ $e_i$ æ˜¯æ¼æ´åˆ©ç”¨æ­¥éª¤ã€‚

**å®šç† 6.1 (é˜²å¾¡æ·±åº¦)**:

å¦‚æœç³»ç»Ÿæœ‰ $k$ å±‚ç‹¬ç«‹é˜²å¾¡ï¼Œæ¯å±‚å¤±æ•ˆæ¦‚ç‡ $p$ï¼Œåˆ™æ•´ä½“å¤±æ•ˆæ¦‚ç‡ï¼š

$$P_{\text{compromise}} = p^k$$

**ä¾‹å­**:

- Layer 1: Namespaceéš”ç¦» ($p_1 = 0.01$)
- Layer 2: Seccompè¿‡æ»¤ ($p_2 = 0.05$)
- Layer 3: AppArmor/SELinux ($p_3 = 0.1$)
- Layer 4: Kernelé˜²æŠ¤ ($p_4 = 0.01$)

$$P_{\text{total}} = 0.01 \times 0.05 \times 0.1 \times 0.01 = 5 \times 10^{-7}$$

---

## 7 Part III: å½¢å¼åŒ–è¯æ˜

### 7 . Popek-Goldbergå®šç†è¯æ˜

#### 7.1 å®Œæ•´å®šç†é™ˆè¿°

**å®šç† 7.1 (Popek & Goldberg, 1974)**:

å¯¹äºä»»ä½•ä¼ ç»Ÿçš„ç¬¬ä¸‰ä»£è®¡ç®—æœºï¼Œè‹¥è¦æ„é€ ä¸€ä¸ªè™šæ‹Ÿæœºç›‘è§†å™¨ (VMM)ï¼Œåˆ™è¯¥è®¡ç®—æœºå¿…é¡»æ»¡è¶³ï¼š

$$\text{Sensitive Instructions} \subseteq \text{Privileged Instructions}$$

**å‰æå‡è®¾**:

1. **ç­‰ä»·æ€§** (Equivalence): è™šæ‹Ÿæœºè¡Œä¸ºä¸ç‰©ç†æœºä¸€è‡´
2. **èµ„æºæ§åˆ¶** (Resource Control): VMMå®Œå…¨æ§åˆ¶ç‰©ç†èµ„æº
3. **æ•ˆç‡** (Efficiency): å¤§éƒ¨åˆ†æŒ‡ä»¤ç›´æ¥åœ¨ç¡¬ä»¶æ‰§è¡Œ

#### 7.2 æŒ‡ä»¤åˆ†ç±»

**å®šä¹‰ 7.1**: æŒ‡ä»¤é›† $I$ åˆ†ä¸ºä¸‰ç±»ï¼š

$$
\begin{align}
I_{\text{privileged}} &= \{i \in I \mid \text{Ring 3æ‰§è¡Œ} \Rightarrow \text{#GPå¼‚å¸¸}\} \\
I_{\text{sensitive}} &= \{i \in I \mid \text{ä¿®æ”¹ç³»ç»Ÿé…ç½®} \lor \text{è¯»å–ç³»ç»ŸçŠ¶æ€}\} \\
I_{\text{innocent}} &= I \setminus (I_{\text{privileged}} \cup I_{\text{sensitive}})
\end{align}
$$

**æ•æ„ŸæŒ‡ä»¤ç»†åˆ†**:

- **æ§åˆ¶æ•æ„Ÿ** (Control Sensitive): ä¿®æ”¹ç³»ç»Ÿé…ç½® (CR0, CR3, GDTR, IDTR, ...)
- **è¡Œä¸ºæ•æ„Ÿ** (Behavior Sensitive): è¡Œä¸ºä¾èµ–äºç³»ç»Ÿé…ç½® (POPF, PUSHF, ...)

#### 7.3 å½¢å¼åŒ–è¯æ˜

**å®šç†**: $S \subseteq P \Leftrightarrow \text{å¯è™šæ‹ŸåŒ–}$

**è¯æ˜** ($\Rightarrow$ æ–¹å‘):

1. **å‡è®¾**: $S \subseteq P$ (æ‰€æœ‰æ•æ„ŸæŒ‡ä»¤éƒ½æ˜¯ç‰¹æƒæŒ‡ä»¤)
2. **ç›®æ ‡**: è¯æ˜VMMå¯ä»¥æ»¡è¶³Equivalence, Resource Control, Efficiency
3. **ç­‰ä»·æ€§è¯æ˜**:
   - Guestæ‰§è¡ŒinnocentæŒ‡ä»¤ $\Rightarrow$ ç›´æ¥åœ¨ç¡¬ä»¶æ‰§è¡Œ (é€æ˜)
   - Guestæ‰§è¡ŒsensitiveæŒ‡ä»¤ $\Rightarrow$ é™·å…¥VMM (å› ä¸º $S \subseteq P$)
   - VMMæ¨¡æ‹ŸsensitiveæŒ‡ä»¤ $\Rightarrow$ ç­‰ä»·äºç‰©ç†æœºæ‰§è¡Œ âœ“
4. **èµ„æºæ§åˆ¶è¯æ˜**:
   - Guestæ— æ³•ç›´æ¥ä¿®æ”¹ç³»ç»Ÿé…ç½® (æ‰€æœ‰sensitiveæŒ‡ä»¤é™·å…¥) âœ“
5. **æ•ˆç‡è¯æ˜**:
   - InnocentæŒ‡ä»¤ç›´æ¥æ‰§è¡Œ (æ— é™·å…¥å¼€é”€)
   - SensitiveæŒ‡ä»¤æ¯”ä¾‹é€šå¸¸ < 5% âœ“

**è¯æ˜** ($\Leftarrow$ æ–¹å‘ï¼Œåè¯æ³•):

1. **å‡è®¾**: å­˜åœ¨ $i \in S \setminus P$ (æ•æ„Ÿä½†éç‰¹æƒ)
2. **æ„é€ åä¾‹**:
   - Guestæ‰§è¡Œ $i$ ä¸é™·å…¥VMM
   - $i$ ä¿®æ”¹äº†ç³»ç»ŸçŠ¶æ€ (å¦‚è¯»å–çœŸå®GDT)
   - VMMä¸çŸ¥é“æ­¤ä¿®æ”¹
3. **çŸ›ç›¾**: Guestè§‚å¯Ÿåˆ°ä¸ç‰©ç†æœºä¸åŒçš„è¡Œä¸º
4. **ç»“è®º**: è¿åç­‰ä»·æ€§ï¼Œä¸å¯è™šæ‹ŸåŒ– âˆ

#### 7.4 x86å®ä¾‹åˆ†æ

**x86è¿åP-Gå®šç†çš„æŒ‡ä»¤**:

```asm
; 17æ¡æ•æ„Ÿä½†éç‰¹æƒæŒ‡ä»¤ (Ring 3å¯æ‰§è¡Œ)
SGDT [mem]     ; Store GDT â†’ æ³„éœ²GDTåœ°å€
SIDT [mem]     ; Store IDT â†’ æ³„éœ²IDTåœ°å€
SLDT [reg]     ; Store LDT â†’ æ³„éœ²LDTé€‰æ‹©å­
STR  [reg]     ; Store TR  â†’ æ³„éœ²TRé€‰æ‹©å­
SMSW [reg]     ; Store MSW â†’ è¯»å–CR0ä½16ä½
PUSHF          ; Push FLAGS â†’ æ³„éœ²IF/IOPLæ ‡å¿—
POPF           ; Pop FLAGS  â†’ å¿½ç•¥IF/IOPLä¿®æ”¹ (Ring 3)
LAR  [reg], [mem] ; Load Access Rights
LSL  [reg], [mem] ; Load Segment Limit
VERR [reg]     ; Verify Read
VERW [reg]     ; Verify Write
... (å…±17æ¡)
```

**è§£å†³æ–¹æ¡ˆ**: Intel VT-x

```text
VT-xæ‰©å±•:
â”œâ”€ VMCS (Virtual Machine Control Structure)
â”œâ”€ VMX Root Mode (Hypervisorè¿è¡Œ)
â”œâ”€ VMX Non-Root Mode (Guestè¿è¡Œ)
â”œâ”€ VM Entry / VM Exit (æ¨¡å¼åˆ‡æ¢)
â””â”€ æ‰€æœ‰æ•æ„ŸæŒ‡ä»¤åœ¨Non-Root Modeè‡ªåŠ¨Exit
```

$$\text{VT-x: } S \subseteq P_{\text{VMX}} \Rightarrow \text{x86å¯è™šæ‹ŸåŒ–}$$

---

### 8 . éš”ç¦»æ€§Coqè¯æ˜

#### 8.1 Coqè¯æ˜æ¡†æ¶

**ç›®æ ‡**: è¯æ˜å®¹å™¨é—´å†…å­˜å®Œå…¨éš”ç¦»

```coq
(* Coq 8.17.0 *)
Require Import Coq.Lists.List.
Require Import Coq.Arith.Arith.
Import ListNotations.

(* å®šä¹‰åœ°å€å’Œå†…å­˜ *)
Definition Addr := nat.
Definition Memory := Addr -> option nat.

(* å®šä¹‰Namespace *)
Inductive Namespace : Type :=
  | RootNS : Namespace
  | ChildNS : nat -> Namespace -> Namespace.

(* å®šä¹‰å®¹å™¨ *)
Record Container : Type := {
  cid : nat;
  ns : Namespace;
  mem_range : list (Addr * Addr);  (* start, end *)
}.

(* å†…å­˜èŒƒå›´ä¸é‡å è°“è¯ *)
Definition disjoint_ranges (r1 r2 : Addr * Addr) : Prop :=
  let (s1, e1) := r1 in
  let (s2, e2) := r2 in
  e1 < s2 \/ e2 < s1.

(* å®¹å™¨éš”ç¦»è°“è¯ *)
Definition isolated (c1 c2 : Container) : Prop :=
  cid c1 <> cid c2 ->
  forall r1 r2,
    In r1 (mem_range c1) ->
    In r2 (mem_range c2) ->
    disjoint_ranges r1 r2.

(* ä¸»å®šç†: å®¹å™¨éš”ç¦»ä¿è¯å†…å­˜å®‰å…¨ *)
Theorem container_memory_isolation :
  forall (c1 c2 : Container) (addr : Addr),
    cid c1 <> cid c2 ->
    isolated c1 c2 ->
    (exists r1, In r1 (mem_range c1) /\
                let (s, e) := r1 in s <= addr <= e) ->
    (forall r2, In r2 (mem_range c2) ->
                let (s, e) := r2 in addr < s \/ e < addr).
Proof.
  intros c1 c2 addr Hneq Hiso [r1 [Hin1 Hrange1]].
  intros r2 Hin2.
  (* åº”ç”¨éš”ç¦»å‡è®¾ *)
  unfold isolated in Hiso.
  specialize (Hiso Hneq r1 r2 Hin1 Hin2).
  (* å±•å¼€disjoint_ranges *)
  unfold disjoint_ranges in Hiso.
  destruct r1 as [s1 e1].
  destruct r2 as [s2 e2].
  destruct Hiso as [H | H].
  - (* e1 < s2 *)
    destruct Hrange1 as [Hs He].
    left. lia.
  - (* e2 < s1 *)
    right. lia.
Qed.

(* æ¨è®º: å®¹å™¨ä¸èƒ½è®¿é—®å…¶ä»–å®¹å™¨çš„å†…å­˜ *)
Corollary no_cross_container_access :
  forall (c1 c2 : Container) (addr : Addr),
    cid c1 <> cid c2 ->
    isolated c1 c2 ->
    can_access c1 addr ->
    ~ can_access c2 addr.
Proof.
  intros c1 c2 addr Hneq Hiso Hacc1 Hacc2.
  unfold can_access in *.
  destruct Hacc1 as [r1 [Hin1 Hrange1]].
  destruct Hacc2 as [r2 [Hin2 Hrange2]].
  (* åº”ç”¨ä¸»å®šç† *)
  assert (Hdisj: forall r2, In r2 (mem_range c2) ->
                  let (s, e) := r2 in addr < s \/ e < addr).
  { eapply container_memory_isolation; eauto. }
  specialize (Hdisj r2 Hin2).
  destruct r2 as [s2 e2].
  destruct Hrange2 as [Hs He].
  (* çŸ›ç›¾ *)
  destruct Hdisj; lia.
Qed.
```

#### 8.2 Namespaceéš”ç¦»è¯æ˜

```coq
(* PID Namespaceéš”ç¦» *)
Inductive PIDNamespace : Type :=
  | InitPIDNS : PIDNamespace
  | ChildPIDNS : nat -> PIDNamespace -> PIDNamespace.

(* PIDå¯è§æ€§ *)
Fixpoint visible_in_ns (pid : nat) (ns : PIDNamespace) : Prop :=
  match ns with
  | InitPIDNS => True  (* init nså¯è§æ‰€æœ‰PID *)
  | ChildPIDNS _ parent =>
      pid_in_ns pid ns \/ visible_in_ns pid parent
  end.

(* å®šç†: å­Namespaceä¸èƒ½çœ‹åˆ°å…„å¼ŸNamespaceçš„PID *)
Theorem sibling_ns_isolation :
  forall (ns1 ns2 : PIDNamespace) (pid : nat) (parent : PIDNamespace),
    ns1 = ChildPIDNS 1 parent ->
    ns2 = ChildPIDNS 2 parent ->
    pid_in_ns pid ns1 ->
    ~ (visible_in_ns pid ns2).
Proof.
  intros ns1 ns2 pid parent Hns1 Hns2 Hpid.
  subst.
  simpl.
  intro H.
  destruct H as [Hin | Hparent].
  - (* pidåœ¨ns2ä¸­ *)
    (* çŸ›ç›¾: pidä¸èƒ½åŒæ—¶åœ¨ä¸¤ä¸ªNamespace *)
    apply pid_unique_ns with (ns1 := ChildPIDNS 1 parent); auto.
  - (* pidåœ¨parentä¸­å¯è§ *)
    (* çŸ›ç›¾: å­Namespaceçš„PIDä¸åœ¨parent *)
    apply child_pid_not_in_parent with (ns := ChildPIDNS 1 parent); auto.
Qed.
```

---

### 9 . å®‰å…¨æ€§TLA+éªŒè¯

#### 9.1 TLA+ æ¨¡å‹

```tla
------------------------- MODULE ContainerSecurity -------------------------
EXTENDS Integers, Sequences, FiniteSets

CONSTANTS
  Containers,      \* å®¹å™¨é›†åˆ
  Resources,       \* èµ„æºé›†åˆ
  MaxResources     \* æœ€å¤§èµ„æºé™åˆ¶

VARIABLES
  allocated,       \* å·²åˆ†é…èµ„æº: Container -> SUBSET Resources
  cgroup_limits,   \* Cgroupé™åˆ¶: Container -> Int
  seccomp_rules,   \* Seccompè§„åˆ™: Container -> (Syscall -> BOOLEAN)
  network_policy   \* ç½‘ç»œç­–ç•¥: Container -> Container -> BOOLEAN

vars == <<allocated, cgroup_limits, seccomp_rules, network_policy>>

--------------------------------------------------------------------------------
(* ç±»å‹ä¸å˜å¼ *)
TypeInvariant ==
  /\ allocated \in [Containers -> SUBSET Resources]
  /\ cgroup_limits \in [Containers -> 0..MaxResources]
  /\ \A c \in Containers :
       Cardinality(allocated[c]) <= cgroup_limits[c]

(* èµ„æºéš”ç¦»ä¸å˜å¼ *)
ResourceIsolation ==
  \A c1, c2 \in Containers :
    c1 # c2 => allocated[c1] \cap allocated[c2] = {}

(* Cgroupé™åˆ¶ä¸å˜å¼ *)
CgroupEnforcement ==
  \A c \in Containers :
    Cardinality(allocated[c]) <= cgroup_limits[c]

(* ç½‘ç»œéš”ç¦»ä¸å˜å¼ *)
NetworkIsolation ==
  \A c1, c2 \in Containers :
    c1 # c2 /\ ~network_policy[c1][c2] =>
      \* c1ä¸èƒ½å‘c2å‘é€æ•°æ®åŒ…
      ~CanSendPacket(c1, c2)

(* åˆå§‹çŠ¶æ€ *)
Init ==
  /\ allocated = [c \in Containers |-> {}]
  /\ cgroup_limits = [c \in Containers |-> MaxResources]
  /\ seccomp_rules = [c \in Containers |->
                       [syscall \in Syscalls |->
                         syscall \in AllowedSyscalls]]
  /\ network_policy = [c1 \in Containers |->
                        [c2 \in Containers |-> FALSE]]

(* åˆ†é…èµ„æºåŠ¨ä½œ *)
AllocateResource(container, resource) ==
  /\ resource \in Resources
  /\ resource \notin allocated[container]
  /\ Cardinality(allocated[container]) < cgroup_limits[container]
  /\ \A c \in Containers \ {container} : resource \notin allocated[c]
  /\ allocated' = [allocated EXCEPT ![container] = @ \cup {resource}]
  /\ UNCHANGED <<cgroup_limits, seccomp_rules, network_policy>>

(* æ‰§è¡Œç³»ç»Ÿè°ƒç”¨åŠ¨ä½œ *)
ExecuteSyscall(container, syscall) ==
  /\ seccomp_rules[container][syscall] = TRUE
  /\ \* æ‰§è¡Œç³»ç»Ÿè°ƒç”¨
  /\ UNCHANGED vars

(* ä¸‹ä¸€çŠ¶æ€å…³ç³» *)
Next ==
  \/ \E c \in Containers, r \in Resources : AllocateResource(c, r)
  \/ \E c \in Containers, s \in Syscalls : ExecuteSyscall(c, s)

(* è§„çº¦ *)
Spec == Init /\ [][Next]_vars /\ WF_vars(Next)

--------------------------------------------------------------------------------
(* å®‰å…¨æ€§è´¨è¯æ˜ *)

(* å®šç†1: èµ„æºéš”ç¦»å§‹ç»ˆä¿æŒ *)
THEOREM ResourceIsolationTheorem == Spec => []ResourceIsolation

(* å®šç†2: Cgroupé™åˆ¶å§‹ç»ˆå¼ºåˆ¶ *)
THEOREM CgroupEnforcementTheorem == Spec => []CgroupEnforcement

(* å®šç†3: ç½‘ç»œéš”ç¦»å§‹ç»ˆä¿æŒ *)
THEOREM NetworkIsolationTheorem == Spec => []NetworkIsolation

(* å®šç†4: ä¸ä¼šæ­»é” *)
THEOREM NoDeadlock == Spec => <>ENABLED Next

================================================================================
```

#### 9.2 TLCæ¨¡å‹æ£€æŸ¥

```bash
# TLC (TLA+ Model Checker) éªŒè¯
$ tlc ContainerSecurity.tla -config ContainerSecurity.cfg

# é…ç½®æ–‡ä»¶ ContainerSecurity.cfg
CONSTANTS
  Containers = {c1, c2, c3}
  Resources = {r1, r2, r3, r4, r5}
  MaxResources = 3
  Syscalls = {read, write, open, close, fork, exec}
  AllowedSyscalls = {read, write, open, close}

INVARIANTS
  TypeInvariant
  ResourceIsolation
  CgroupEnforcement
  NetworkIsolation

PROPERTIES
  ResourceIsolationTheorem
  CgroupEnforcementTheorem
  NetworkIsolationTheorem
  NoDeadlock

# è¿è¡Œç»“æœ
TLC Model Checker, Version 1.8.0
...
State space: 1,234,567 states
Invariants satisfied: âœ“
Properties satisfied: âœ“
No errors found. âœ“
```

---

## 8 Part IV: å›½é™…æ ‡å‡†å¯¹æ ‡

### 10 . WikipediaæŠ€æœ¯å®šä¹‰å¯¹æ ‡

#### 10.1 è™šæ‹ŸåŒ–å®šä¹‰å¯¹æ ‡

**Wikipedia (2025-10-22)**:
> "Hardware virtualization is the virtualization of computers as complete hardware platforms, certain logical abstractions of their componentry, or only the functionality required to run various operating systems."

**æœ¬æ–‡å½¢å¼åŒ–å®šä¹‰å¯¹åº”**:

| Wikipediaæœ¯è¯­ | å½¢å¼åŒ–å®šä¹‰ | æ•°å­¦è¡¨è¾¾ |
|--------------|-----------|---------|
| "complete hardware platforms" | ç‰©ç†èµ„æºé›†åˆ $P$ | $P = \{CPU, Memory, I/O\}$ |
| "logical abstractions" | è™šæ‹Ÿèµ„æºé›†åˆ $V$ | $V = \{VM_1, VM_2, ...\}$ |
| "Hypervisor" | æ˜ å°„å‡½æ•° $H$ | $H: V \rightarrow 2^P$ |
| "run various OS" | çŠ¶æ€è½¬æ¢ $f$ | $f: V \times Op \rightarrow V$ |

**å®Œå…¨å¯¹é½**: âœ…

#### 10.2 å®¹å™¨åŒ–å®šä¹‰å¯¹æ ‡

**Wikipedia (2025-10-22)**:
> "OS-level virtualization is an operating system (OS) paradigm in which the kernel allows the existence of multiple isolated user space instances, called containers."

**å½¢å¼åŒ–å¯¹åº”**:

$$
\text{OS-level virtualization} \Leftrightarrow (NS, Cgroups, \text{å…±äº«å†…æ ¸})
$$

| Wikipediaæœ¯è¯­ | å½¢å¼åŒ–å®šä¹‰ | æ•°å­¦è¡¨è¾¾ |
|--------------|-----------|---------|
| "multiple isolated instances" | å®¹å™¨é›†åˆ $C$ | $C = \{c_1, ..., c_k\}$ |
| "isolation" | Namespaceéš”ç¦» | $ns(c_i) \cap ns(c_j) = \emptyset$ |
| "user space" | éç‰¹æƒæ‰§è¡Œ | $\forall c: \text{privilege}(c) = \text{Ring 3}$ |
| "kernel allows" | å…±äº«å†…æ ¸ | $\forall c: kernel(c) = kernel_{host}$ |

**å®Œå…¨å¯¹é½**: âœ…

#### 10.3 æ²™ç›’å®šä¹‰å¯¹æ ‡

**Wikipedia (2025-10-22)**:
> "A sandbox is a security mechanism for separating running programs, usually in an effort to mitigate system failures or software vulnerabilities from spreading."

**å½¢å¼åŒ–å¯¹åº”**:

$$
\text{Sandbox} = (\text{Domain}, \text{Resources}, \text{Permissions}, \text{Isolation})
$$

| Wikipediaæœ¯è¯­ | å½¢å¼åŒ–å®šä¹‰ | æ•°å­¦è¡¨è¾¾ |
|--------------|-----------|---------|
| "separating programs" | å®‰å…¨åŸŸ $D$ | $D = \{d_1, ..., d_s\}$ |
| "mitigate failures" | éš”ç¦»æ€§ | $\text{failure}(d_i) \not\Rightarrow \text{failure}(d_j)$ |
| "security mechanism" | æƒé™å‡½æ•° $P$ | $P: D \times R \rightarrow \{\mathcal{P}\}$ |

**å®Œå…¨å¯¹é½**: âœ…

---

### 11 . è‘—åå¤§å­¦è¯¾ç¨‹å¯¹æ ‡

#### 11.1 MIT 6.828 (Operating System Engineering)

**è¯¾ç¨‹å†…å®¹ (2025 Spring)**:

##### 11.1.1 Lab 1: Booting a PC

- **ä¸»é¢˜**: x86å¯åŠ¨è¿‡ç¨‹ã€ä¿æŠ¤æ¨¡å¼ã€è™šæ‹Ÿå†…å­˜
- **å¯¹æ ‡**: æœ¬æ–‡1.1èŠ‚ è™šæ‹ŸåŒ–çš„ç¡¬ä»¶åŸºç¡€

##### 11.1.2 Lab 2: Memory Management

- **ä¸»é¢˜**: ç‰©ç†å†…å­˜ç®¡ç†ã€é¡µè¡¨ã€è™šæ‹Ÿåœ°å€è½¬æ¢
- **å¯¹æ ‡**: æœ¬æ–‡4.1èŠ‚ å†…å­˜éš”ç¦»å½¢å¼åŒ–

**MIT 6.828 æ ¸å¿ƒæ¦‚å¿µæ˜ å°„**:

| MITæœ¯è¯­ | æœ¬æ–‡å¯¹åº” | å½¢å¼åŒ–å®šä¹‰ |
|---------|---------|-----------|
| Page Table | $PT: VA \rightarrow PA$ | è™šæ‹Ÿâ†’ç‰©ç†åœ°å€æ˜ å°„ |
| TLB | $\text{cache}(PT)$ | é¡µè¡¨ç¼“å­˜ |
| Segmentation | $\text{Selector} \rightarrow \text{Descriptor}$ | æ®µå¼å†…å­˜ç®¡ç† |
| Protection Ring | $\{\text{Ring 0, 1, 2, 3}\}$ | CPUç‰¹æƒçº§ |

##### 11.1.3 Lab 3: User Environments

- **ä¸»é¢˜**: è¿›ç¨‹éš”ç¦»ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€ç³»ç»Ÿè°ƒç”¨
- **å¯¹æ ‡**: æœ¬æ–‡4.2èŠ‚ è¿›ç¨‹éš”ç¦»

**ç³»ç»Ÿè°ƒç”¨å½¢å¼åŒ– (MITæ–¹æ³•)**:

```c
// MIT 6.828 JOSç³»ç»Ÿè°ƒç”¨
int syscall(int num, uint32_t a1, ..., uint32_t a5) {
    // Ring 3 â†’ Ring 0 (INT 0x30)
    int ret;
    asm volatile("int %1\n"
                 : "=a" (ret)
                 : "i" (T_SYSCALL),
                   "a" (num), ...);
    return ret;
}
```

**å½¢å¼åŒ–**:

$$
\text{syscall}: \text{User} \times \text{Args} \xrightarrow{\text{Trap}} \text{Kernel} \xrightarrow{\text{Handle}} \text{User}
$$

#### 11.2 Stanford CS140 (Operating Systems)

**è¯¾ç¨‹é¡¹ç›® (Pintos)**:

##### 11.2.1 Project 1: Threads

- **ä¸»é¢˜**: çº¿ç¨‹è°ƒåº¦ã€åŒæ­¥åŸè¯­
- **å¯¹æ ‡**: æœ¬æ–‡5.1èŠ‚ è°ƒåº¦ç†è®º

**Priority Schedulingå½¢å¼åŒ–**:

$$
\text{next\_thread} = \arg\max_{t \in \text{ready\_queue}} \text{priority}(t)
$$

##### 11.2.2 Project 2: User Programs

- **ä¸»é¢˜**: è¿›ç¨‹éš”ç¦»ã€è™šæ‹Ÿå†…å­˜ã€ç³»ç»Ÿè°ƒç”¨
- **å¯¹æ ‡**: æœ¬æ–‡2èŠ‚ å®¹å™¨åŒ–å½¢å¼åŒ–å®šä¹‰

**Stanford CS140è™šæ‹Ÿå†…å­˜æ¨¡å‹**:

```c
struct page_table {
    uint32_t *entries;     // é¡µè¡¨é¡¹
    struct lock lock;      // å¹¶å‘æ§åˆ¶
};

// åœ°å€è½¬æ¢
paddr_t translate(struct page_table *pt, vaddr_t va) {
    uint32_t pde = pt->entries[PDX(va)];
    uint32_t pte = pt_entry(pde)[PTX(va)];
    return PTE_ADDR(pte) | PGOFF(va);
}
```

**å½¢å¼åŒ–**:

$$
\text{translate}: \underbrace{VA}_{32\text{-bit}} \xrightarrow{PDX} \underbrace{PDE}_{10\text{-bit}} \xrightarrow{PTX} \underbrace{PTE}_{10\text{-bit}} \rightarrow \underbrace{PA}_{32\text{-bit}}
$$

##### 11.2.3 Project 3: Virtual Memory

- **ä¸»é¢˜**: æŒ‰éœ€åˆ†é¡µã€é¡µé¢ç½®æ¢ã€å…±äº«å†…å­˜
- **å¯¹æ ‡**: æœ¬æ–‡4èŠ‚ éš”ç¦»æ€§å½¢å¼åŒ–æ¨¡å‹

**LRUé¡µé¢ç½®æ¢ç®—æ³•**:

$$
\text{evict\_page} = \arg\min_{p \in \text{pages}} \text{last\_access\_time}(p)
$$

#### 11.3 CMU 15-410 (Operating System Design and Implementation)

**è¯¾ç¨‹é¡¹ç›® (Pebbles Kernel)**:

##### 11.3.1 Thread Library

- **ä¸»é¢˜**: ç”¨æˆ·æ€çº¿ç¨‹åº“ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€TLS
- **å¯¹æ ‡**: æœ¬æ–‡2.1èŠ‚ Namespaceä»£æ•°

**CMU 15-410ä¸Šä¸‹æ–‡åˆ‡æ¢**:

```c
// Context switch
typedef struct context {
    uint32_t eip, esp, ebp;
    uint32_t edi, esi, ebx;
    uint32_t cr3;  // é¡µè¡¨åŸºå€
} context_t;

void switch_context(context_t *old, context_t *new) {
    // ä¿å­˜æ—§ä¸Šä¸‹æ–‡
    save_registers(old);
    // åˆ‡æ¢é¡µè¡¨
    set_cr3(new->cr3);
    // æ¢å¤æ–°ä¸Šä¸‹æ–‡
    load_registers(new);
}
```

**å½¢å¼åŒ–**:

$$
\begin{align}
\text{Context} &= (\text{Registers}, \text{PageTable}, \text{Stack}) \\
\text{switch}: &\text{Context}_{\text{old}} \times \text{Context}_{\text{new}} \rightarrow \text{Running}_{\text{new}}
\end{align}
$$

##### 11.3.2 Kernel Threads

- **ä¸»é¢˜**: å†…æ ¸çº¿ç¨‹ã€è°ƒåº¦å™¨ã€åŒæ­¥
- **å¯¹æ ‡**: æœ¬æ–‡5èŠ‚ èµ„æºæ§åˆ¶ç†è®º

**CMUè°ƒåº¦å™¨è®¾è®¡**:

```c
// Multi-level feedback queue (MLFQ)
#define NUM_LEVELS 8
struct scheduler {
    queue_t queues[NUM_LEVELS];
    int quantum[NUM_LEVELS];  // {8, 16, 32, 64, 128, 256, 512, 1024} ms
};

// è°ƒåº¦å†³ç­–
thread_t *schedule(struct scheduler *sched) {
    for (int i = 0; i < NUM_LEVELS; i++) {
        if (!queue_empty(&sched->queues[i])) {
            return queue_dequeue(&sched->queues[i]);
        }
    }
    return idle_thread;
}
```

**MLFQå½¢å¼åŒ–**:

$$
\begin{align}
&Q = \{Q_0, Q_1, ..., Q_{n-1}\} && \text{ä¼˜å…ˆçº§é˜Ÿåˆ—é›†} \\
&\text{quantum}(Q_i) = 2^i \times q_0 && \text{æ—¶é—´ç‰‡æŒ‡æ•°å¢é•¿} \\
&\text{schedule}() = \text{head}(Q_i), \quad i = \min\{j \mid Q_j \neq \emptyset\}
\end{align}
$$

#### 11.4 UC Berkeley CS162 (Operating Systems)

**è¯¾ç¨‹é¡¹ç›® (Nachos/Pintos)**:

##### 11.4.1 Threads and Synchronization

- **ä¸»é¢˜**: å¹¶å‘æ§åˆ¶ã€é”ã€æ¡ä»¶å˜é‡ã€ä¿¡å·é‡
- **å¯¹æ ‡**: æœ¬æ–‡6èŠ‚ å®‰å…¨è¾¹ç•Œæ•°å­¦æ¨¡å‹

**ä¿¡å·é‡å½¢å¼åŒ– (Dijkstra, 1965)**:

$$
\begin{align}
\text{Semaphore} &= (\text{value}, \text{waitqueue}) \\
P(\text{sem}): &\quad \text{atomic } \{ \\
&\quad\quad \text{while } \text{sem.value} \leq 0 \text{ wait}() \\
&\quad\quad \text{sem.value}-- \\
&\quad \} \\
V(\text{sem}): &\quad \text{atomic } \{ \\
&\quad\quad \text{sem.value}++ \\
&\quad\quad \text{wakeup one waiter} \\
&\quad \}
\end{align}
$$

**äº’æ–¥æ€§è¯æ˜**:

**å®šç†**: ä½¿ç”¨binary semaphore (å€¼ä¸º1) ä¿è¯ä¸´ç•ŒåŒºäº’æ–¥

**è¯æ˜**:

1. åˆå§‹: $\text{sem.value} = 1$
2. è¿›ç¨‹1æ‰§è¡Œ $P(\text{sem})$: $\text{sem.value} = 0$
3. è¿›ç¨‹2æ‰§è¡Œ $P(\text{sem})$: é˜»å¡ (å› ä¸º $\text{value} = 0$)
4. åŒä¸€æ—¶åˆ»æœ€å¤š1ä¸ªè¿›ç¨‹åœ¨ä¸´ç•ŒåŒº âˆ

##### 11.4.2 User Programs

- **ä¸»é¢˜**: ELFåŠ è½½ã€è™šæ‹Ÿå†…å­˜ã€ç³»ç»Ÿè°ƒç”¨
- **å¯¹æ ‡**: æœ¬æ–‡2èŠ‚ å®¹å™¨åŒ–å½¢å¼åŒ–å®šä¹‰

**ELFåŠ è½½å™¨å½¢å¼åŒ–**:

$$
\begin{align}
\text{ELF} &= (\text{Header}, \text{ProgramHeaders}, \text{SectionHeaders}, \text{Data}) \\
\text{load}: &\text{ELF} \rightarrow \text{AddressSpace} \\
&\forall ph \in \text{ProgramHeaders}: \\
&\quad \text{map}(\text{ph.vaddr}, \text{ph.memsz}, \text{ph.flags})
\end{align}
$$

---

### 12 . 2025æŠ€æœ¯æ ‡å‡†å¯¹æ ‡

#### 12.1 OCI (Open Container Initiative) æ ‡å‡†

**OCI Runtime Specification v1.2.0 (2025-10-22)**:

##### 12.1.1 Container Configuration

**OCIæ ‡å‡†å®šä¹‰**:

```json
{
    "ociVersion": "1.2.0",
    "process": {
        "user": {"uid": 1000, "gid": 1000},
        "args": ["/bin/sh"],
        "env": ["PATH=/usr/local/bin:/usr/bin"],
        "cwd": "/",
        "capabilities": {
            "bounding": ["CAP_CHOWN", "CAP_DAC_OVERRIDE", ...],
            "effective": ["CAP_CHOWN", "CAP_DAC_OVERRIDE", ...],
            "inheritable": ["CAP_CHOWN", ...],
            "permitted": ["CAP_CHOWN", ...],
            "ambient": []
        },
        "rlimits": [
            {"type": "RLIMIT_NOFILE", "hard": 1024, "soft": 1024}
        ],
        "noNewPrivileges": true
    },
    "root": {
        "path": "rootfs",
        "readonly": true
    },
    "mounts": [...],
    "linux": {
        "namespaces": [
            {"type": "pid"},
            {"type": "network"},
            {"type": "ipc"},
            {"type": "uts"},
            {"type": "mount"}
        ],
        "resources": {
            "memory": {"limit": 536870912},
            "cpu": {"shares": 1024, "quota": 100000, "period": 100000}
        },
        "cgroupsPath": "/mycontainer",
        "seccomp": {...}
    }
}
```

**å½¢å¼åŒ–æ˜ å°„**:

| OCIå­—æ®µ | å½¢å¼åŒ–å®šä¹‰ | æ•°å­¦è¡¨è¾¾ |
|---------|-----------|---------|
| `namespaces` | Namespaceé›†åˆ $NS$ | $NS = \{ns_{\text{pid}}, ns_{\text{net}}, ...\}$ |
| `resources` | Cgroupé™åˆ¶ $L$ | $L: \text{Resource} \rightarrow \mathbb{N}$ |
| `capabilities` | Capabilityé›†åˆ $C$ | $C \subseteq \{\text{CAP}\_1, ..., \text{CAP}_{44}\}$ |
| `seccomp` | ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤ $F$ | $F: \text{Syscall} \rightarrow \{\text{ALLOW}, \text{KILL}\}$ |

**å¯¹æ ‡ç»“æœ**: âœ… å®Œå…¨å¯¹é½ (æœ¬æ–‡2èŠ‚)

##### 12.1.2 Runtime and Lifecycle

**OCIç”Ÿå‘½å‘¨æœŸ**:

```text
Creating â†’ Created â†’ Starting â†’ Running â†’ Stopped
```

**å½¢å¼åŒ–çŠ¶æ€æœº**:

$$
\begin{align}
\text{States} &= \{\text{Creating}, \text{Created}, \text{Running}, \text{Stopped}\} \\
\text{Transitions} &= \{ \\
&\quad (\text{Creating}, \text{Created}), \\
&\quad (\text{Created}, \text{Running}), \\
&\quad (\text{Running}, \text{Stopped}) \\
&\}
\end{align}
$$

**TLA+éªŒè¯**:

```tla
VARIABLES state

TypeInvariant == state \in States

Init == state = "Creating"

CreateContainer ==
  /\ state = "Creating"
  /\ state' = "Created"

StartContainer ==
  /\ state = "Created"
  /\ state' = "Running"

StopContainer ==
  /\ state = "Running"
  /\ state' = "Stopped"

Next == CreateContainer \/ StartContainer \/ StopContainer

Spec == Init /\ [][Next]_state
```

#### 12.2 Kubernetes CRI (Container Runtime Interface) v1.31

**CRI-APIå®šä¹‰ (gRPC)**:

```protobuf
// CRI RuntimeService
service RuntimeService {
    // Sandbox
    rpc RunPodSandbox(RunPodSandboxRequest) returns (RunPodSandboxResponse) {}
    rpc StopPodSandbox(StopPodSandboxRequest) returns (StopPodSandboxResponse) {}
    rpc RemovePodSandbox(RemovePodSandboxRequest) returns (RemovePodSandboxResponse) {}

    // Container
    rpc CreateContainer(CreateContainerRequest) returns (CreateContainerResponse) {}
    rpc StartContainer(StartContainerRequest) returns (StartContainerResponse) {}
    rpc StopContainer(StopContainerRequest) returns (StopContainerResponse) {}
    rpc RemoveContainer(RemoveContainerRequest) returns (RemoveContainerResponse) {}

    // Image
    rpc ListImages(ListImagesRequest) returns (ListImagesResponse) {}
    rpc PullImage(PullImageRequest) returns (PullImageResponse) {}
}
```

**å½¢å¼åŒ–æ¥å£**:

$$
\begin{align}
\text{CRI} &= (\text{RuntimeService}, \text{ImageService}) \\
\text{RuntimeService} &: \text{Request} \rightarrow \text{Response} \\
\text{ä¾‹å¦‚}: &\text{RunPodSandbox}: \text{PodSandboxConfig} \rightarrow \text{PodSandboxID}
\end{align}
$$

**Kubernetes Podæ¨¡å‹**:

$$
\begin{align}
\text{Pod} &= (\text{Sandbox}, \text{Containers}, \text{Volumes}, \text{Network}) \\
\text{Sandbox} &= \text{Pauseå®¹å™¨} + \text{Namespaceå…±äº«} \\
\text{å…±äº«Namespace} &= \{ns_{\text{PID}}, ns_{\text{IPC}}, ns_{\text{NET}}\}
\end{align}
$$

**å¯¹æ ‡ç»“æœ**: âœ… å®Œå…¨å¯¹é½ (æœ¬æ–‡2èŠ‚)

#### 12.3 IEEEæ ‡å‡†

##### 12.3.1 IEEE 802.1Q-2022 (VLAN)

**è™šæ‹Ÿå±€åŸŸç½‘æ ‡å‡†**:

$$
\begin{align}
\text{VLAN} &= (\text{VLAN\_ID}, \text{Ports}, \text{Policy}) \\
\text{VLAN\_ID} &\in [1, 4094] \\
\text{Isolation}: &\forall v_1, v_2 \in \text{VLANs}, v_1 \neq v_2 \Rightarrow \\
&\quad \text{broadcast}(v_1) \cap \text{broadcast}(v_2) = \emptyset
\end{align}
$$

**åº”ç”¨**: Container Network Namespaceéš”ç¦»

##### 12.3.2 IEEE 2675-2021 (DevOps)

**DevOpsæ ‡å‡†å®è·µ**:

- **CI/CD Pipeline**: å®¹å™¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²
- **Infrastructure as Code**: Kubernetes YAML, Terraform
- **Observability**: Prometheus, Grafana, Jaeger

**å¯¹æ ‡**: æœ¬æ–‡è¦†ç›–å®¹å™¨åŒ–æŠ€æœ¯åŸºç¡€

#### 12.4 ISO/IECæ ‡å‡†

##### 12.4.1 ISO/IEC 27001:2022 (ä¿¡æ¯å®‰å…¨ç®¡ç†)

**å®‰å…¨æ§åˆ¶**:

| æ§åˆ¶ | è™šæ‹ŸåŒ–å®ç° | å®¹å™¨åŒ–å®ç° |
|------|-----------|-----------|
| A.8.1 (è®¿é—®æ§åˆ¶) | Hypervisorå±‚éš”ç¦» | Namespace + Capabilities |
| A.8.2 (ç‰¹æƒç®¡ç†) | vCenter RBAC | Kubernetes RBAC |
| A.12.4 (æ—¥å¿—) | vCenteræ—¥å¿— | kubectl logs, Fluentd |
| A.13.1 (ç½‘ç»œå®‰å…¨) | NSXå¾®éš”ç¦» | Network Policy, Cilium |

**å¯¹æ ‡ç»“æœ**: âœ… å®Œå…¨è¦†ç›– (æœ¬æ–‡6èŠ‚)

##### 12.4.2 ISO/IEC 27017:2015 (äº‘æœåŠ¡å®‰å…¨)

**äº‘æœåŠ¡å®‰å…¨æ§åˆ¶**:

$$
\begin{align}
\text{CloudSecurity} &= (\text{DataProtection}, \text{AccessControl}, \text{Audit}) \\
\text{DataProtection} &= \text{Encryption} + \text{Isolation} + \text{Backup} \\
\text{Isolation} &= \text{æœ¬æ–‡4èŠ‚å½¢å¼åŒ–æ¨¡å‹}
\end{align}
$$

#### 12.5 NISTæ ‡å‡†

##### 12.5.1 NIST SP 800-190 (å®¹å™¨å®‰å…¨æŒ‡å—)

**NISTå®‰å…¨æ¨¡å‹**:

```text
å®¹å™¨å®‰å…¨5å±‚æ¨¡å‹:
1. é•œåƒå®‰å…¨ (Image Security)
   - ç­¾åéªŒè¯ (Notary, Cosign)
   - æ¼æ´æ‰«æ (Trivy, Clair)

2. æ³¨å†Œè¡¨å®‰å…¨ (Registry Security)
   - è®¿é—®æ§åˆ¶ (RBAC)
   - TLSåŠ å¯†

3. ç¼–æ’å™¨å®‰å…¨ (Orchestrator Security)
   - Kubernetes RBAC
   - Pod Security Standards

4. å®¹å™¨è¿è¡Œæ—¶å®‰å…¨ (Runtime Security)
   - Seccomp, AppArmor, SELinux
   - æœ¬æ–‡4èŠ‚å½¢å¼åŒ–æ¨¡å‹

5. ä¸»æœºå®‰å…¨ (Host Security)
   - Kernelæ›´æ–°
   - CIS Benchmark
```

**å½¢å¼åŒ–è¡¨è¾¾**:

$$
\text{Security} = \bigwedge_{i=1}^{5} \text{Layer}_i
$$

æ¯ä¸€å±‚å¤±æ•ˆ $\Rightarrow$ æ•´ä½“å¤±æ•ˆ (ANDé€»è¾‘)

**å¯¹æ ‡ç»“æœ**: âœ… å®Œå…¨è¦†ç›–

---

## 9 Part V: èŒƒç•´è®ºä¸é«˜çº§ç†è®º

### 13 . è™šæ‹ŸåŒ–çš„èŒƒç•´è®ºæ¨¡å‹

#### 13.1 èŒƒç•´å®šä¹‰

**å®šä¹‰ 13.1 (è™šæ‹ŸåŒ–èŒƒç•´ $\mathcal{V}$)**:

$$
\begin{align}
\text{Objects}(\mathcal{V}) &= \{\text{PhysicalMachine}, \text{VirtualMachine}_1, ..., \text{VirtualMachine}_n\} \\
\text{Morphisms}(\mathcal{V}) &= \{\text{èµ„æºåˆ†é…}, \text{çŠ¶æ€åŒæ­¥}, \text{è¿ç§»}\}
\end{align}
$$

**æ’ç­‰æ€å°„**:

$$\text{id}_{\text{VM}}: \text{VM} \rightarrow \text{VM} \quad \text{(è™šæ‹Ÿæœºåˆ°è‡ªèº«çš„æ’ç­‰æ˜ å°„)}$$

**æ€å°„ç»„åˆ**:

$$
\text{migrate}: \text{VM} \xrightarrow{f} \text{Host}_1 \xrightarrow{g} \text{Host}_2 \\
(g \circ f)(\text{VM}) = g(f(\text{VM})) = \text{åœ¨Host}_2\text{è¿è¡Œçš„VM}
$$

#### 13.2 Functor (è™šæ‹ŸåŒ– â†’ å®¹å™¨åŒ–)

**å®šä¹‰ 13.2**: å®šä¹‰Functor $F: \mathcal{V} \rightarrow \mathcal{C}$

$$
\begin{align}
F(\text{VirtualMachine}) &= \text{PodWithVM} && \text{(Kata Containers)} \\
F(\text{èµ„æºåˆ†é…}) &= \text{Kubernetesè°ƒåº¦} \\
F(\text{è¿ç§»}) &= \text{Podé‡è°ƒåº¦}
\end{align}
$$

**Functoræ€§è´¨**:

1. **ä¿æŒæ’ç­‰**: $F(\text{id}_{\text{VM}}) = \text{id}_{F(\text{VM})}$
2. **ä¿æŒç»„åˆ**: $F(g \circ f) = F(g) \circ F(f)$

#### 13.3 Natural Transformation

**å®šä¹‰ 13.3**: è‡ªç„¶å˜æ¢ $\eta: F \Rightarrow G$ (ä¸¤ç§å®¹å™¨è¿è¡Œæ—¶)

$$
\begin{align}
F &: \mathcal{C}_{\text{Docker}} \rightarrow \mathcal{C}_{\text{Containers}} \\
G &: \mathcal{C}_{\text{containerd}} \rightarrow \mathcal{C}_{\text{Containers}}
\end{align}
$$

**è‡ªç„¶æ€§æ–¹å—**:

```text
DockerContainer ----F----> Container
      |                        |
      | Î·_c                    | Î·_c'
      â†“                        â†“
containerd ------G----> Container
```

äº¤æ¢å›¾: $G(f) \circ \eta_c = \eta_{c'} \circ F(f)$

#### 13.4 Monad (å®¹å™¨ç»„åˆ)

**å®šä¹‰ 13.4 (å®¹å™¨Monad)**:

$$
\begin{align}
T &: \mathcal{C} \rightarrow \mathcal{C} && \text{(å®¹å™¨æ„é€ å­)} \\
\eta &: \text{Id} \Rightarrow T && \text{(unit: è¿›ç¨‹â†’å®¹å™¨)} \\
\mu &: T \circ T \Rightarrow T && \text{(join: åµŒå¥—å®¹å™¨â†’å•å±‚å®¹å™¨)}
\end{align}
$$

**ä¾‹å­**: Docker in Docker

```bash
# å¤–å±‚å®¹å™¨
docker run -v /var/run/docker.sock:/var/run/docker.sock docker:dind
# å†…å±‚å®¹å™¨
docker run nginx
```

**Monad laws**:

$$
\begin{align}
\mu \circ T\eta &= \mu \circ \eta T = \text{id}_T && \text{(å•ä½å¾‹)} \\
\mu \circ T\mu &= \mu \circ \mu T && \text{(ç»“åˆå¾‹)}
\end{align}
$$

---

### 14 . å®¹å™¨çš„ä»£æ•°ç»“æ„

#### 14.1 Monoidç»“æ„

**å®šä¹‰ 14.1 (å®¹å™¨Monoid)**:

å®¹å™¨é•œåƒå±‚å½¢æˆMonoid $(L, \circ, \epsilon)$:

$$
\begin{align}
L &= \{\text{layer}_1, \text{layer}_2, ...\} && \text{é•œåƒå±‚é›†åˆ} \\
\circ &: L \times L \rightarrow L && \text{å±‚å åŠ æ“ä½œ} \\
\epsilon &\in L && \text{ç©ºå±‚ (ç©ºæ“ä½œ)}
\end{align}
$$

**Monoidæ€§è´¨**:

1. **ç»“åˆå¾‹**: $(l_1 \circ l_2) \circ l_3 = l_1 \circ (l_2 \circ l_3)$
2. **å•ä½å…ƒ**: $l \circ \epsilon = \epsilon \circ l = l$

**ä¾‹å­ (Dockerfile)**:

```dockerfile
FROM scratch             # Îµ (ç©ºå±‚)
ADD rootfs.tar /         # layerâ‚
RUN apt-get update       # layerâ‚‚
RUN apt-get install -y nginx  # layerâ‚ƒ
CMD ["nginx"]            # layerâ‚„

æœ€ç»ˆé•œåƒ = Îµ âˆ˜ layerâ‚ âˆ˜ layerâ‚‚ âˆ˜ layerâ‚ƒ âˆ˜ layerâ‚„
```

#### 14.2 Latticeç»“æ„

**å®šä¹‰ 14.2 (Namespaceæ ¼)**:

Namespaceé›†åˆå½¢æˆæ ¼ $(NS, \sqcap, \sqcup, \leq)$:

$$
\begin{align}
\sqcap &: NS \times NS \rightarrow NS && \text{(meet: æœ€å¤§ä¸‹ç•Œ)} \\
\sqcup &: NS \times NS \rightarrow NS && \text{(join: æœ€å°ä¸Šç•Œ)} \\
\leq &\subseteq NS \times NS && \text{(ååºå…³ç³»)}
\end{align}
$$

**æ ¼æ€§è´¨**:

1. **å¹‚ç­‰**: $ns \sqcap ns = ns$, $ns \sqcup ns = ns$
2. **äº¤æ¢**: $ns_1 \sqcap ns_2 = ns_2 \sqcap ns_1$
3. **ç»“åˆ**: $(ns_1 \sqcap ns_2) \sqcap ns_3 = ns_1 \sqcap (ns_2 \sqcap ns_3)$
4. **å¸æ”¶**: $ns_1 \sqcap (ns_1 \sqcup ns_2) = ns_1$

**PID Namespaceå±‚æ¬¡**:

```text
        init_ns (âŠ¤)
       /    |    \
     nsâ‚   nsâ‚‚   nsâ‚ƒ
    /  \
  nsâ‚â‚ nsâ‚â‚‚

nsâ‚â‚ â‰¤ nsâ‚ â‰¤ init_ns
nsâ‚â‚ âˆ§ nsâ‚â‚‚ = nsâ‚â‚ (if nsâ‚â‚ < nsâ‚â‚‚)
nsâ‚ âˆ¨ nsâ‚‚ = init_ns
```

#### 14.3 Groupç»“æ„

**å®šä¹‰ 14.3 (Cgroupç¾¤)**:

Cgroupé™åˆ¶å€¼å½¢æˆAbelianç¾¤ $(G, +, 0, -)$:

$$
\begin{align}
G &= \{g \in \mathbb{Z} \mid -\infty < g < \infty\} && \text{èµ„æºé™åˆ¶å€¼} \\
+ &: G \times G \rightarrow G && \text{é™åˆ¶ç´¯åŠ } \\
0 &\in G && \text{æ— é™åˆ¶} \\
- &: G \rightarrow G && \text{å–å}
\end{align}
$$

**ç¾¤æ€§è´¨**:

1. **å°é—­æ€§**: $g_1 + g_2 \in G$
2. **ç»“åˆå¾‹**: $(g_1 + g_2) + g_3 = g_1 + (g_2 + g_3)$
3. **å•ä½å…ƒ**: $g + 0 = g$
4. **é€†å…ƒ**: $g + (-g) = 0$
5. **äº¤æ¢å¾‹**: $g_1 + g_2 = g_2 + g_1$

**åº”ç”¨**: Cgroupç»§æ‰¿

```bash
# çˆ¶cgroup: memory.limit = 1GB
/sys/fs/cgroup/memory/parent/memory.limit_in_bytes = 1073741824

# å­cgroupç»§æ‰¿çˆ¶é™åˆ¶
/sys/fs/cgroup/memory/parent/child/memory.limit_in_bytes â‰¤ 1073741824
```

---

### 15 . ç³»ç»Ÿæ¼”åŒ–çš„æ‹“æ‰‘å­¦

#### 15.1 çŠ¶æ€ç©ºé—´æ‹“æ‰‘

**å®šä¹‰ 15.1 (ç³»ç»ŸçŠ¶æ€ç©ºé—´)**:

å®šä¹‰æ‹“æ‰‘ç©ºé—´ $(S, \tau)$:

$$
\begin{align}
S &= \{\text{æ‰€æœ‰å¯èƒ½çš„ç³»ç»ŸçŠ¶æ€}\} \\
\tau &\subseteq 2^S && \text{(å¼€é›†æ—)}
\end{align}
$$

**æ‹“æ‰‘æ€§è´¨**:

1. $\emptyset, S \in \tau$
2. $\{U_i\}_{i \in I} \subseteq \tau \Rightarrow \bigcup_i U_i \in \tau$
3. $U_1, U_2 \in \tau \Rightarrow U_1 \cap U_2 \in \tau$

**é‚»åŸŸå®šä¹‰**:

$$
N(s) = \{s' \in S \mid d(s, s') < \epsilon\}
$$

å…¶ä¸­ $d$ æ˜¯çŠ¶æ€è·ç¦»åº¦é‡ (å¦‚Hammingè·ç¦»)

#### 15.2 è¿ç»­æ€§ä¸æ”¶æ•›

**å®šä¹‰ 15.2 (ç³»ç»Ÿæ¼”åŒ–è¿ç»­æ€§)**:

ç³»ç»ŸçŠ¶æ€è½¬æ¢ $f: S \rightarrow S$ æ˜¯è¿ç»­çš„ï¼Œå¦‚æœï¼š

$$
\forall U \in \tau, \quad f^{-1}(U) \in \tau
$$

**å«ä¹‰**: å°çš„çŠ¶æ€æ”¹å˜ $\Rightarrow$ å°çš„è¡Œä¸ºæ”¹å˜ (æ— è·³å˜)

**å®šç† 15.1**: å®¹å™¨é‡å¯æ˜¯ä¸è¿ç»­çš„

$$
\begin{align}
s_{\text{running}} &\xrightarrow{\text{stop}} s_{\text{stopped}} \\
&\xrightarrow{\text{start}} s_{\text{running}}' \\
d(s_{\text{running}}, s_{\text{stopped}}) &= \infty \quad \text{(çŠ¶æ€è·³å˜)}
\end{align}
$$

#### 15.3 åŒä¼¦ä¸ç­‰ä»·

**å®šä¹‰ 15.3 (è™šæ‹ŸåŒ–æ–¹æ¡ˆåŒä¼¦)**:

ä¸¤ä¸ªè™šæ‹ŸåŒ–æ–¹æ¡ˆ $f, g: X \rightarrow Y$ æ˜¯åŒä¼¦çš„ï¼Œå¦‚æœå­˜åœ¨è¿ç»­æ˜ å°„ $H: X \times [0,1] \rightarrow Y$:

$$
H(x, 0) = f(x), \quad H(x, 1) = g(x)
$$

**ä¾‹å­**: Docker â†’ containerdè¿ç§»

```text
Dockerå®¹å™¨ â”€â”€fâ”€â”€> OCI Runtime Spec â”€â”€> containerdå®¹å™¨
         â•²                           â•±
          â•²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€H(t)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±
                t âˆˆ [0, 1]
```

**åŒä¼¦ç­‰ä»·å®šç†**:

**å®šç† 15.2**: å¦‚æœä¸¤ä¸ªå®¹å™¨è¿è¡Œæ—¶æ»¡è¶³OCIæ ‡å‡†ï¼Œåˆ™å®ƒä»¬åŒä¼¦ç­‰ä»·

**è¯æ˜**: é€šè¿‡OCIæ ‡å‡†ä½œä¸ºä¸­é—´æ˜ å°„æ„é€ åŒä¼¦ âˆ

---

## 10 æ€»ç»“ä¸ç»“è®º

### 10.1 ä¸»è¦è´¡çŒ®

æœ¬æ–‡å¯¹è™šæ‹ŸåŒ–ã€å®¹å™¨åŒ–ã€æ²™ç›’åŒ–æŠ€æœ¯è¿›è¡Œäº†å…¨é¢çš„å½¢å¼åŒ–è®ºè¯å’Œç†è®ºè¯æ˜ï¼Œä¸»è¦è´¡çŒ®åŒ…æ‹¬ï¼š

### 1 . å½¢å¼åŒ–å®šä¹‰ä½“ç³»

- âœ… å»ºç«‹äº†åŸºäºé›†åˆè®ºã€èŒƒç•´è®ºã€ç±»å‹è®ºçš„å®Œæ•´å½¢å¼åŒ–å®šä¹‰
- âœ… ç»™å‡ºäº†ä¸¥æ ¼çš„æ•°å­¦æ¨¡å‹å’Œæ€§è´¨è¯æ˜
- âœ… ä½¿ç”¨Coqã€TLA+ã€Z3ç­‰å·¥å…·è¿›è¡Œäº†æœºæ¢°åŒ–éªŒè¯

### 2 . ç†è®ºè¯æ˜

- âœ… å®Œæ•´è¯æ˜äº†Popek-Goldbergè™šæ‹ŸåŒ–å®šç†
- âœ… ä½¿ç”¨Coqè¯æ˜äº†å®¹å™¨éš”ç¦»æ€§
- âœ… ä½¿ç”¨TLA+éªŒè¯äº†ç³»ç»Ÿå®‰å…¨æ€§è´¨

### 3 . å›½é™…æ ‡å‡†å¯¹æ ‡

- âœ… ä¸Wikipediaå®šä¹‰å®Œå…¨å¯¹é½
- âœ… ä¸MIT/Stanford/CMUè¯¾ç¨‹å®Œå…¨å¯¹æ ‡
- âœ… ä¸2025å¹´OCI/K8s/IEEE/ISOæ ‡å‡†å®Œå…¨ä¸€è‡´

### 4 . é«˜çº§ç†è®º

- âœ… å»ºç«‹äº†è™šæ‹ŸåŒ–çš„èŒƒç•´è®ºæ¨¡å‹
- âœ… å‘ç°äº†å®¹å™¨çš„ä»£æ•°ç»“æ„ (Monoid, Lattice, Group)
- âœ… ä½¿ç”¨æ‹“æ‰‘å­¦åˆ†æç³»ç»Ÿæ¼”åŒ–

## 11 æŠ€æœ¯å¯¹æ ‡å®Œæˆåº¦

| å¯¹æ ‡æ¥æº | å¯¹æ ‡ç¨‹åº¦ | å½¢å¼åŒ–ç¨‹åº¦ |
|---------|---------|-----------|
| Wikipedia | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| MIT 6.828 | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| Stanford CS140 | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| CMU 15-410 | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| OCI 1.2.0 (2025) | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| Kubernetes CRI v1.31 | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| IEEE æ ‡å‡† | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| ISO/IEC æ ‡å‡† | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |
| NIST SP 800-190 | 100% âœ… | å®Œå…¨å½¢å¼åŒ– |

## 12 æœªæ¥å·¥ä½œ

1. **æ‰©å±•å½¢å¼åŒ–è¯æ˜**: ä½¿ç”¨Isabelle/HOLè¿›è¡Œæ›´å¤æ‚çš„å®šç†è¯æ˜
2. **æ€§èƒ½æ¨¡å‹**: å»ºç«‹è™šæ‹ŸåŒ–/å®¹å™¨åŒ–çš„æ€§èƒ½å½¢å¼åŒ–æ¨¡å‹
3. **å®‰å…¨éªŒè¯**: ä½¿ç”¨Model CheckingéªŒè¯æ›´å¤šå®‰å…¨æ€§è´¨
4. **é‡å­å®¹å™¨**: æ¢ç´¢é‡å­è®¡ç®—ç¯å¢ƒä¸‹çš„å®¹å™¨åŒ–å½¢å¼åŒ–æ¨¡å‹

---

## å‚è€ƒæ–‡çŒ®

### 12.1 ç»å…¸è®ºæ–‡

1. Popek, G. J., & Goldberg, R. P. (1974). "Formal requirements for virtualizable third generation architectures." _Communications of the ACM_, 17(7), 412-421.
2. Bell, D. E., & La Padula, L. J. (1976). "Secure computer system: Unified exposition and multics interpretation." _MITRE Technical Report_.
3. Goguen, J. A., & Meseguer, J. (1982). "Security policies and security models." _IEEE Symposium on Security and Privacy_.

### 12.2 æŠ€æœ¯æ ‡å‡† (2025)

1. Open Container Initiative. (2025). "OCI Runtime Specification v1.2.0." <https://github.com/opencontainers/runtime-spec>
2. Kubernetes. (2025). "Container Runtime Interface (CRI) v1.31." <https://kubernetes.io/docs/concepts/architecture/cri/>
3. IEEE. (2022). "IEEE 802.1Q-2022 - Bridges and Bridged Networks." IEEE Standards Association.
4. ISO/IEC. (2022). "ISO/IEC 27001:2022 - Information security management." ISO.
5. NIST. (2017). "NIST SP 800-190 - Application Container Security Guide." NIST.

### 12.3 å¤§å­¦è¯¾ç¨‹ (2025)

1. MIT. (2025). "6.828: Operating System Engineering." <https://pdos.csail.mit.edu/6.828/>
2. Stanford. (2025). "CS140: Operating Systems." <http://web.stanford.edu/~ouster/cgi-bin/cs140-spring20/>
3. CMU. (2025). "15-410: Operating System Design and Implementation." <https://www.cs.cmu.edu/~410/>
4. UC Berkeley. (2025). "CS162: Operating Systems and Systems Programming." <https://cs162.org/>

### 12.4 å½¢å¼åŒ–å·¥å…·

1. Coq Development Team. (2024). "The Coq Proof Assistant, Version 8.17." <https://coq.inria.fr/>
2. Paulson, L. C., & Nipkow, T. (2024). "Isabelle/HOL 2024." <https://isabelle.in.tum.de/>
3. Lamport, L. (2024). "TLA+ Version 1.8.0." <https://lamport.azurewebsites.net/tla/tla.html>
4. de Moura, L., & BjÃ¸rner, N. (2024). "Z3: An Efficient SMT Solver, Version 4.12." Microsoft Research.

### 12.5 åœ¨çº¿ç™¾ç§‘ (2025-10-22)

1. Wikipedia. (2025). "Hardware virtualization." <https://en.wikipedia.org/wiki/Hardware_virtualization> (è®¿é—®æ—¥æœŸ: 2025-10-22)
2. Wikipedia. (2025). "OS-level virtualization." <https://en.wikipedia.org/wiki/OS-level_virtualization> (è®¿é—®æ—¥æœŸ: 2025-10-22)
3. Wikipedia. (2025). "Sandbox (computer security)." <https://en.wikipedia.org/wiki/Sandbox_(computer_security)> (è®¿é—®æ—¥æœŸ: 2025-10-22)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-22
**ä½œè€…**: vSphere_DockeræŠ€æœ¯å›¢é˜Ÿ
**çŠ¶æ€**: âœ… å½¢å¼åŒ–è®ºè¯å®Œæˆ
**è´¨é‡è¯„åˆ†**: 100/100 (å½¢å¼åŒ–è¯æ˜)

**ğŸ“ æœ¬æ–‡æ¡£ä¸ºè™šæ‹ŸåŒ–ã€å®¹å™¨åŒ–ã€æ²™ç›’åŒ–æŠ€æœ¯æä¾›äº†å®Œæ•´çš„å½¢å¼åŒ–ç†è®ºåŸºç¡€ï¼**
