# WebAssembly å¿«é€Ÿå‚è€ƒ (Quick Reference)

## ğŸ“‹ ç›®å½•

- [1 æ ¸å¿ƒå‘½é¢˜é€ŸæŸ¥](#1-æ ¸å¿ƒå‘½é¢˜é€ŸæŸ¥)
  - [1.1 ç¡®å®šæ€§](#11-ç¡®å®šæ€§)
  - [1.2 ç±»å‹å®‰å…¨](#12-ç±»å‹å®‰å…¨)
  - [1.3 éªŒè¯å¤æ‚åº¦](#13-éªŒè¯å¤æ‚åº¦)
  - [1.4 æ€§èƒ½ç•Œé™](#14-æ€§èƒ½ç•Œé™)
  - [1.5 æ²™ç®±éš”ç¦»](#15-æ²™ç®±éš”ç¦»)
- [2 ç±»å‹ç³»ç»Ÿé€ŸæŸ¥](#2-ç±»å‹ç³»ç»Ÿé€ŸæŸ¥)
  - [2.1 å€¼ç±»å‹](#21-å€¼ç±»å‹)
  - [2.2 å‡½æ•°ç±»å‹](#22-å‡½æ•°ç±»å‹)
  - [2.3 ç±»å‹åˆ¤æ–­](#23-ç±»å‹åˆ¤æ–­)
- [3 æŒ‡ä»¤é›†é€ŸæŸ¥](#3-æŒ‡ä»¤é›†é€ŸæŸ¥)
  - [3.1 ç®—æœ¯æŒ‡ä»¤](#31-ç®—æœ¯æŒ‡ä»¤)
  - [3.2 æ§åˆ¶æµ](#32-æ§åˆ¶æµ)
  - [3.3 å†…å­˜æŒ‡ä»¤](#33-å†…å­˜æŒ‡ä»¤)
  - [3.4 SIMD æŒ‡ä»¤](#34-simd-æŒ‡ä»¤)
- [4 æ€§èƒ½æ•°æ®é€ŸæŸ¥](#4-æ€§èƒ½æ•°æ®é€ŸæŸ¥)
  - [4.1 ç¼–è¯‘ç­–ç•¥](#41-ç¼–è¯‘ç­–ç•¥)
  - [4.2 æŒ‡ä»¤å»¶è¿ŸSkylake cycles](#42-æŒ‡ä»¤å»¶è¿Ÿskylake-cycles)
  - [4.3 å¼€é”€](#43-å¼€é”€)
- [5 å®‰å…¨æ€§é€ŸæŸ¥](#5-å®‰å…¨æ€§é€ŸæŸ¥)
  - [5.1 å·²é˜²å¾¡](#51-å·²é˜²å¾¡)
  - [5.2 æœªå®Œå…¨é˜²å¾¡](#52-æœªå®Œå…¨é˜²å¾¡)
- [6 åº”ç”¨åœºæ™¯é€ŸæŸ¥](#6-åº”ç”¨åœºæ™¯é€ŸæŸ¥)
  - [6.1 å¼ºé€‚é…](#61-å¼ºé€‚é…)
  - [6.2 ä¸é€‚é…](#62-ä¸é€‚é…)
- [7 å‘½ä»¤é€ŸæŸ¥](#7-å‘½ä»¤é€ŸæŸ¥)
  - [7.1 ç¼–è¯‘](#71-ç¼–è¯‘)
  - [7.2 è¿è¡Œ](#72-è¿è¡Œ)
  - [7.3 åˆ†æ](#73-åˆ†æ)
- [8 å…³é”®å…¬å¼é€ŸæŸ¥](#8-å…³é”®å…¬å¼é€ŸæŸ¥)
  - [8.1 ROI æ¨¡å‹](#81-roi-æ¨¡å‹)
  - [8.2 ç›ˆäºå¹³è¡¡ç‚¹](#82-ç›ˆäºå¹³è¡¡ç‚¹)
  - [8.3 æˆæœ¬å‡½æ•°](#83-æˆæœ¬å‡½æ•°)
  - [8.4 åŠ é€Ÿæ¯”](#84-åŠ é€Ÿæ¯”)
- [9 å·¥å…·é“¾é€ŸæŸ¥](#9-å·¥å…·é“¾é€ŸæŸ¥)
  - [9.1 è¿è¡Œæ—¶](#91-è¿è¡Œæ—¶)
  - [9.2 ç¼–è¯‘å™¨](#92-ç¼–è¯‘å™¨)
  - [9.3 éªŒè¯å·¥å…·](#93-éªŒè¯å·¥å…·)
- [10 å¸¸è§é™·é˜±é€ŸæŸ¥](#10-å¸¸è§é™·é˜±é€ŸæŸ¥)
  - [10.1 é™¤é›¶](#101-é™¤é›¶)
  - [10.2 è¶Šç•Œ](#102-è¶Šç•Œ)
  - [10.3 ç±»å‹ä¸åŒ¹é…](#103-ç±»å‹ä¸åŒ¹é…)
  - [10.4 æ•´æ•°æº¢å‡º](#104-æ•´æ•°æº¢å‡º)
- [11 ä¼˜åŒ–æŠ€å·§é€ŸæŸ¥](#11-ä¼˜åŒ–æŠ€å·§é€ŸæŸ¥)
  - [11.1 ç¼–è¯‘å™¨ä¼˜åŒ–](#111-ç¼–è¯‘å™¨ä¼˜åŒ–)
  - [11.2 ç®—æ³•ä¼˜åŒ–](#112-ç®—æ³•ä¼˜åŒ–)
  - [11.3 éƒ¨ç½²ä¼˜åŒ–](#113-éƒ¨ç½²ä¼˜åŒ–)
- [12 æ‰¹åˆ¤æ€§æ£€æŸ¥æ¸…å•](#12-æ‰¹åˆ¤æ€§æ£€æŸ¥æ¸…å•)
  - [12.1 æ€§èƒ½é¢„æœŸ](#121-æ€§èƒ½é¢„æœŸ)
  - [12.2 å®‰å…¨é¢„æœŸ](#122-å®‰å…¨é¢„æœŸ)
  - [12.3 ç”Ÿæ€é¢„æœŸ](#123-ç”Ÿæ€é¢„æœŸ)
- [13 å»¶ä¼¸é˜…è¯»](#13-å»¶ä¼¸é˜…è¯»)
  - [13.1 ç†è®º](#131-ç†è®º)
  - [13.2 å®è·µ](#132-å®è·µ)
  - [13.3 æ‰¹åˆ¤](#133-æ‰¹åˆ¤)

---

## 1 æ ¸å¿ƒå‘½é¢˜é€ŸæŸ¥

### 1.1 ç¡®å®šæ€§

\[
\forall M, S : \llbracket M \rrbracket(S) \text{ å”¯ä¸€ç¡®å®š}
\]

### 1.2 ç±»å‹å®‰å…¨

\[
\text{Validate}(M) \implies \text{Progress}(M) \wedge \text{Preservation}(M)
\]

### 1.3 éªŒè¯å¤æ‚åº¦

\[
T(\text{Validate}) = O(|M|)
\]

### 1.4 æ€§èƒ½ç•Œé™

\[
\text{Perf}_{\text{wasm}} \in [0.85, 0.95] \times \text{Perf}_{\text{native}}
\]

### 1.5 æ²™ç®±éš”ç¦»

\[
\text{LinearMemory}_{\text{wasm}} \cap \text{HostMemory} = \emptyset
\]

---

## 2 ç±»å‹ç³»ç»Ÿé€ŸæŸ¥

### 2.1 å€¼ç±»å‹

```
i32 | i64 | f32 | f64 | v128
```

### 2.2 å‡½æ•°ç±»å‹

```
[t1*] -> [t2*]  // å¤šè¿”å›å€¼å·²æ”¯æŒ
```

### 2.3 ç±»å‹åˆ¤æ–­

\[
C \vdash I : [t_1^_] \to [t_2^_]
\]

---

## 3 æŒ‡ä»¤é›†é€ŸæŸ¥

### 3.1 ç®—æœ¯æŒ‡ä»¤

```
i32.add    [i32 i32] -> [i32]
i32.mul    [i32 i32] -> [i32]
i32.div_s  [i32 i32] -> [i32]  // é™¤é›¶ trap
f32.sqrt   [f32] -> [f32]
```

### 3.2 æ§åˆ¶æµ

```
block [t*] ... end       [] -> [t*]
loop [t*] ... end        [] -> [t*]
if [t*] ... else ... end [i32] -> [t*]
br i                     [t1*, t*] -> [t2*]
call x                   [t1*] -> [t2*]
```

### 3.3 å†…å­˜æŒ‡ä»¤

```
i32.load     [i32] -> [i32]
i32.store    [i32 i32] -> []
memory.size  [] -> [i32]
memory.grow  [i32] -> [i32]
```

### 3.4 SIMD æŒ‡ä»¤

```
i32x4.add    [v128 v128] -> [v128]
f32x4.mul    [v128 v128] -> [v128]
i8x16.splat  [i32] -> [v128]
```

---

## 4 æ€§èƒ½æ•°æ®é€ŸæŸ¥

### 4.1 ç¼–è¯‘ç­–ç•¥

| ç­–ç•¥ | å¯åŠ¨ | åå |
|------|------|------|
| è§£é‡Šå™¨ | <1 ms | 1-10% |
| Baseline JIT | 5-10 ms | 50-70% |
| Optimizing JIT | 30-100 ms | 85-95% |
| AOT | 0 ms | 90-98% |

### 4.2 æŒ‡ä»¤å»¶è¿ŸSkylake cycles

| æŒ‡ä»¤ | å»¶è¿Ÿ | åå/å‘¨æœŸ |
|------|------|----------|
| i32.add | 1 | 4 |
| i32.mul | 3 | 1 |
| f64.div | 4-13 | 1 |
| memory.load | 3-200 | å–å†³ç¼“å­˜ |

### 4.3 å¼€é”€

```
éªŒè¯ï¼š1-2 ms/MB
è¾¹ç•Œæ£€æŸ¥ï¼š5-10%
æ ˆâ†’å¯„å­˜å™¨ï¼š5-10%
æ€»æŠ½è±¡ç¨ï¼š5-15%
```

---

## 5 å®‰å…¨æ€§é€ŸæŸ¥

### 5.1 å·²é˜²å¾¡

- âœ… æ ˆæº¢å‡º / ROP / JOP
- âœ… å †æº¢å‡ºï¼ˆè¾¹ç•Œæ£€æŸ¥ï¼‰
- âœ… UAFï¼ˆæ— æŒ‡é’ˆï¼‰
- âœ… ç±»å‹æ··æ·†ï¼ˆè¿è¡Œæ—¶æ£€æŸ¥ï¼‰

### 5.2 æœªå®Œå…¨é˜²å¾¡

- âš ï¸ Spectreï¼ˆæ¨æµ‹æ‰§è¡Œæ³„æ¼ï¼‰
- âš ï¸ ä¾§ä¿¡é“ï¼ˆæ—¶åºæ³„æ¼ï¼‰
- âš ï¸ DoSï¼ˆèµ„æºè€—å°½ï¼‰
- âš ï¸ å®ç°æ¼æ´ï¼ˆJIT ç¼–è¯‘å™¨ï¼‰

---

## 6 åº”ç”¨åœºæ™¯é€ŸæŸ¥

### 6.1 å¼ºé€‚é…

- Serverlessï¼ˆå†·å¯åŠ¨ <5 msï¼‰
- è¾¹ç¼˜ AIï¼ˆGPU åŠ é€Ÿï¼‰
- IoTï¼ˆå·®åˆ† KB çº§ï¼‰
- åŒºå—é“¾ï¼ˆç¡®å®šæ€§ï¼‰
- æ’ä»¶ç³»ç»Ÿï¼ˆæ²™ç®±ï¼‰

### 6.2 ä¸é€‚é…

- DOM å¯†é›†æ“ä½œ
- å¤§å †ï¼ˆ>4 GBï¼ŒMemory64 æ”¹å–„ä¸­ï¼‰
- åŠ¨æ€ä»£ç ç”Ÿæˆ

---

## 7 å‘½ä»¤é€ŸæŸ¥

### 7.1 ç¼–è¯‘

```bash
# C/C++
emcc -O3 -s WASM=1 code.c -o code.wasm

# Rust
cargo build --target wasm32-wasi --release

# WAT -> WASM
wat2wasm code.wat -o code.wasm

# WASM -> WAT
wasm2wat code.wasm -o code.wat
```

### 7.2 è¿è¡Œ

```bash
# Node.js
node --experimental-wasm-modules code.wasm

# WasmEdge
wasmedge code.wasm

# AOT é¢„ç¼–è¯‘
wasmedgec code.wasm code.so
wasmedge code.so
```

### 7.3 åˆ†æ

```bash
# åæ±‡ç¼–
wasm-objdump -d code.wasm

# éªŒè¯
wasm-validate code.wasm

# ä¼˜åŒ–
wasm-opt -O3 code.wasm -o optimized.wasm
```

---

## 8 å…³é”®å…¬å¼é€ŸæŸ¥

### 8.1 ROI æ¨¡å‹

\[
\text{Savings} = \sum (\Delta \text{Traffic} + \Delta \text{Memory} + \Delta \text{DevOps})
\]

### 8.2 ç›ˆäºå¹³è¡¡ç‚¹

```
6 ä¸ªæœˆï¼ˆåŸºäº 10k è¾¹ç¼˜èŠ‚ç‚¹ï¼‰
```

### 8.3 æˆæœ¬å‡½æ•°

\[
C_{\text{total}} = C_{\text{compute}} + C_{\text{network}} + C_{\text{storage}} + C_{\text{devops}}
\]

### 8.4 åŠ é€Ÿæ¯”

\[
\text{Speedup}_{\text{SIMD}} \approx \frac{\text{lanes}}{1.2} \approx 3-12Ã—
\]

---

## 9 å·¥å…·é“¾é€ŸæŸ¥

### 9.1 è¿è¡Œæ—¶

- WasmEdgeï¼ˆè¾¹ç¼˜ä¼˜åŒ–ï¼‰
- Wasmtimeï¼ˆåŠŸèƒ½å®Œæ•´ï¼‰
- Wasmerï¼ˆå•†ä¸šå‹å¥½ï¼‰
- WAMRï¼ˆè¶…è½»é‡ <100 KBï¼‰

### 9.2 ç¼–è¯‘å™¨

- Emscriptenï¼ˆC/C++ï¼‰
- wasm-packï¼ˆRustï¼‰
- AssemblyScriptï¼ˆTypeScript-likeï¼‰
- TinyGoï¼ˆGo å­é›†ï¼‰

### 9.3 éªŒè¯å·¥å…·

- Isabelle/Wasmï¼ˆå®šç†è¯æ˜ï¼‰
- Wasm-Coqï¼ˆCoq æœºæ¢°åŒ–ï¼‰
- K-Wasmï¼ˆå¯æ‰§è¡Œè¯­ä¹‰ï¼‰

---

## 10 å¸¸è§é™·é˜±é€ŸæŸ¥

### 10.1 é™¤é›¶

```wasm
i32.const 0
i32.div_s  ;; trap!
```

### 10.2 è¶Šç•Œ

```wasm
i32.const 0xFFFFFFFF
i32.load   ;; trap!
```

### 10.3 ç±»å‹ä¸åŒ¹é…

```wasm
(call_indirect (type $sig) (i32.const 0))
;; è‹¥ table[0] ç±»å‹â‰ $sigï¼Œåˆ™ trap!
```

### 10.4 æ•´æ•°æº¢å‡º

```wasm
i32.const 0x80000000  ;; INT_MIN
i32.const -1
i32.div_s             ;; trap!
```

---

## 11 ä¼˜åŒ–æŠ€å·§é€ŸæŸ¥

### 11.1 ç¼–è¯‘å™¨ä¼˜åŒ–

```rust
// å¯ç”¨ LTO
[profile.release]
lto = true

// å¯ç”¨ SIMD
#[target_feature(enable = "simd128")]
```

### 11.2 ç®—æ³•ä¼˜åŒ–

1. å‡å°‘è¾¹ç•Œæ£€æŸ¥ï¼ˆå¾ªç¯å¤–æï¼‰
2. å†…å­˜å¯¹é½ï¼ˆ64 å­—èŠ‚ï¼‰
3. é¿å…é—´æ¥è°ƒç”¨
4. SIMD å‘é‡åŒ–

### 11.3 éƒ¨ç½²ä¼˜åŒ–

- AOT é¢„ç¼–è¯‘ï¼ˆå¯åŠ¨æœ€å¿«ï¼‰
- å·®åˆ†æ›´æ–°ï¼ˆæµé‡æœ€çœï¼‰
- å¤šå®ä¾‹æ± åŒ–ï¼ˆå¯†åº¦æœ€é«˜ï¼‰

---

## 12 æ‰¹åˆ¤æ€§æ£€æŸ¥æ¸…å•

### 12.1 æ€§èƒ½é¢„æœŸ

- â“ æ˜¯å¦é«˜ä¼°äº†æ€§èƒ½ï¼Ÿï¼ˆæŠ½è±¡ç¨ 5-15%ï¼‰
- â“ æ˜¯å¦å¿½ç•¥äº† JIT é¢„çƒ­ï¼Ÿ
- â“ æ˜¯å¦è€ƒè™‘äº†å†…å­˜è®¿é—®æ¨¡å¼ï¼Ÿ

### 12.2 å®‰å…¨é¢„æœŸ

- â“ æ˜¯å¦è®¤ä¸ºæ²™ç®±ç»å¯¹å®‰å…¨ï¼Ÿï¼ˆSpectre æœªé˜²å¾¡ï¼‰
- â“ æ˜¯å¦ä¾èµ–å½¢å¼åŒ–éªŒè¯ï¼Ÿï¼ˆå®ç°ä»å¯èƒ½æœ‰æ¼æ´ï¼‰
- â“ æ˜¯å¦è€ƒè™‘äº†ä¾§ä¿¡é“ï¼Ÿï¼ˆæ—¶åºæ³„æ¼ï¼‰

### 12.3 ç”Ÿæ€é¢„æœŸ

- â“ æ˜¯å¦é«˜ä¼°äº†å·¥å…·é“¾æˆç†Ÿåº¦ï¼Ÿ
- â“ æ˜¯å¦å¿½ç•¥äº† JS äº’æ“ä½œå¼€é”€ï¼Ÿ
- â“ æ˜¯å¦è€ƒè™‘äº†è·¯å¾„ä¾èµ–ï¼Ÿï¼ˆJS éœ¸æƒï¼‰

---

## 13 å»¶ä¼¸é˜…è¯»

### 13.1 ç†è®º

- 01_Foundational_Theoryï¼ˆå½¢å¼åŒ–è¯­ä¹‰ã€ç±»å‹ç³»ç»Ÿï¼‰
- 06_Philosophical_Foundationsï¼ˆå¯ç§»æ¤æ€§ç†è®ºï¼‰

### 13.2 å®è·µ

- 03_Runtime_Systemsï¼ˆç¼–è¯‘ç­–ç•¥ï¼‰
- 04_System_Integrationï¼ˆWASIã€å†…å­˜å…±äº«ï¼‰
- 05_Application_Patternsï¼ˆServerlessã€IoTï¼‰

### 13.3 æ‰¹åˆ¤

- å„ç« èŠ‚"æ‰¹åˆ¤æ€§åˆ†æ"
- FAQ Q19-Q22

---

**ä½¿ç”¨å»ºè®®**ï¼š

- å¼€å‘æ—¶ï¼šå¯¹ç…§æŒ‡ä»¤é›†å’Œç±»å‹è§„åˆ™
- ä¼˜åŒ–æ—¶ï¼šå‚è€ƒæ€§èƒ½æ•°æ®å’Œä¼˜åŒ–æŠ€å·§
- å†³ç­–æ—¶ï¼šæ£€æŸ¥æ‰¹åˆ¤æ€§æ¸…å•

_æœ¬å¿«é€Ÿå‚è€ƒæ—¨åœ¨æä¾›"å³æŸ¥å³ç”¨"çš„å…³é”®ä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŒæ‰¹åˆ¤æ€§è§†è§’ã€‚_
