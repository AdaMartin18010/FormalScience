# 8.1 æ–°å…´ææ¡ˆ (Emerging Proposals)

## ğŸ“‹ ç›®å½•

- [1 æ ¸å¿ƒå‘½é¢˜](#1-æ ¸å¿ƒå‘½é¢˜)
- [2 GC ææ¡ˆGarbage Collection](#2-gc-ææ¡ˆgarbage-collection)
  - [2.1 åŠ¨æœº](#21-åŠ¨æœº)
  - [2.2 ç±»å‹æ‰©å±•](#22-ç±»å‹æ‰©å±•)
  - [2.3 æŒ‘æˆ˜](#23-æŒ‘æˆ˜)
- [3 Memory64](#3-memory64)
  - [3.1 åŠ¨æœº](#31-åŠ¨æœº)
  - [3.2 è®¾è®¡](#32-è®¾è®¡)
- [4 ç»„ä»¶æ¨¡å‹Component Model](#4-ç»„ä»¶æ¨¡å‹component-model)
  - [4.1 æ„¿æ™¯](#41-æ„¿æ™¯)
  - [4.2 çŠ¶æ€2025](#42-çŠ¶æ€2025)
- [5 å¼‚æ­¥æ”¯æŒAsyncAwait](#5-å¼‚æ­¥æ”¯æŒasyncawait)
  - [5.1 é—®é¢˜](#51-é—®é¢˜)
  - [5.2 ææ¡ˆ](#52-ææ¡ˆ)
- [6 æ‰¹åˆ¤æ€§åˆ†æ](#6-æ‰¹åˆ¤æ€§åˆ†æ)

---

## 1 æ ¸å¿ƒå‘½é¢˜

**ææ¡ˆç”Ÿå‘½å‘¨æœŸ**ï¼š
\[
\text{Phase 0} \to \text{Phase 1} \to \text{Phase 2} \to \text{Phase 3} \to \text{Phase 4 (æ ‡å‡†)}
\]

**å¤æ‚æ€§çˆ†ç‚¸é£é™©**ï¼š
\[
|\text{Features}| \uparrow \implies \text{Complexity}(\text{Verification}) \uparrow\uparrow
\]

**å‘åå…¼å®¹çº¦æŸ**ï¼š
\[
\forall \text{Proposal} : \text{Breaking-Change} \implies \text{Rejected}
\]

---

## 2 GC ææ¡ˆGarbage Collection

### 2.1 åŠ¨æœº

**å½“å‰é™åˆ¶**ï¼š
\[
\text{Linear-Memory} \not\supseteq \text{Managed-Heap}
\]

**ç›®æ ‡è¯­è¨€**ï¼š

- Java, C#, Go, Python...

### 2.2 ç±»å‹æ‰©å±•

**å¼•ç”¨ç±»å‹**ï¼š

```wit
type ref = struct | array | func | extern
type nullable<T> = T | null
```

**ç¤ºä¾‹**ï¼š

```wasm
(type $Point (struct (field $x f64) (field $y f64)))

(func $distance (param $p (ref $Point)) (result f64)
  local.get $p
  struct.get $Point $x
  ;; ...
)
```

### 2.3 æŒ‘æˆ˜

**æ€§èƒ½å¼€é”€**ï¼š
\[
\text{GC-Pause} \approx 10-100\text{msï¼ˆStop-the-Worldï¼‰}
\]

**äº’æ“ä½œå¤æ‚æ€§**ï¼š
\[
\text{Wasm-GC} \leftrightarrow \text{JS-GC} \quad \text{ï¼ˆå¦‚ä½•ç»Ÿä¸€ï¼Ÿï¼‰}
\]

**æ‰¹åˆ¤**ï¼š
> GC ææ¡ˆæ˜¯"é«˜çº§è¯­è¨€çš„éœ€æ±‚"ï¼Œä½†ä¸ Wasm"åº•å±‚æŠ½è±¡"ç†å¿µå†²çªã€‚å¯èƒ½åˆ†è£‚ç”Ÿæ€ï¼šç³»ç»Ÿè¯­è¨€ vs åº”ç”¨è¯­è¨€ã€‚

---

## 3 Memory64

### 3.1 åŠ¨æœº

**4GB é™åˆ¶**ï¼š
\[
|\text{Memory}| \leq 2^{32} = 4\text{GB}
\]

**å¤§æ•°æ®åœºæ™¯**ï¼š

- ç§‘å­¦è®¡ç®—
- æœºå™¨å­¦ä¹ 
- æ•°æ®åº“

### 3.2 è®¾è®¡

**64 ä½ç´¢å¼•**ï¼š

```wasm
(memory i64 1 1000)  ;; 64 ä½åœ°å€
i64.load (param i64) (result i64)
```

**æƒè¡¡**ï¼š
\[
\begin{align*}
\text{Address-Size} &: 4\text{B} \to 8\text{B} \quad (+100\%) \\
\text{Pointer-Ops} &: \text{slower on 32-bit}
\end{align*}
\]

---

## 4 ç»„ä»¶æ¨¡å‹Component Model

### 4.1 æ„¿æ™¯

**æ¨¡å— â†’ ç»„ä»¶**ï¼š
\[
\text{Component} = \text{Module} + \text{Interface} + \text{Composition}
\]

**è·¨è¯­è¨€äº’æ“ä½œ**ï¼š

```wit
interface http {
    request: func(url: string) -> result<response, error>
}
```

### 4.2 çŠ¶æ€2025

- Phase 3ï¼ˆå®ç°ä¸­ï¼‰
- å·¥å…·ï¼šwasm-tools, wit-bindgen
- é‡‡ç”¨ï¼šFermyon, Bytecode Alliance

**æ‰¹åˆ¤**ï¼š
> ç»„ä»¶æ¨¡å‹æ˜¯"Wasm çš„ Docker"ï¼Œä½†æ¨è¿›ç¼“æ…¢ï¼ˆ5 å¹´æœªç¨³å®šï¼‰ã€‚ç”Ÿæ€å…ˆè¡Œè¿˜æ˜¯æ ‡å‡†å…ˆè¡Œï¼Ÿè¿™æ˜¯ç»å…¸å›°å¢ƒã€‚

---

## 5 å¼‚æ­¥æ”¯æŒAsyncAwait

### 5.1 é—®é¢˜

**å½“å‰**ï¼š
\[
\text{Wasm} = \text{Synchronous-Only}
\]

**éœ€æ±‚**ï¼š

- I/O å¯†é›†åº”ç”¨
- äº‹ä»¶é©±åŠ¨æ¶æ„

### 5.2 ææ¡ˆ

**Stack Switching**ï¼š

```wasm
(func $async-read (param $fd i32) (result i32)
  ;; suspend å½“å‰æ ˆ
  call $suspend
  ;; æ¢å¤åè¿”å›ç»“æœ
)
```

**æŒ‘æˆ˜**ï¼š

- æ ˆåˆ‡æ¢å¼€é”€
- ä¸ JS Promise é›†æˆ
- å®ç°å¤æ‚åº¦

---

## 6 æ‰¹åˆ¤æ€§åˆ†æ

**å‘½é¢˜**ï¼š
\[
\text{More-Features} \not\Rightarrow \text{Better-Platform}
\]

**é£é™©**ï¼š

- è§„èŒƒè†¨èƒ€
- å®ç°ç¢ç‰‡åŒ–
- éªŒè¯å¤æ‚åŒ–

**æ‰¹åˆ¤**ï¼š
> Wasm é¢ä¸´"åŠŸèƒ½è”“å»¶"é£é™©ã€‚æ¯ä¸ªææ¡ˆéƒ½æœ‰åˆç†æ€§ï¼Œä½†ç´¯åŠ èµ·æ¥å¯èƒ½è¶…è¶Šäººç±»ç†è§£æé™ã€‚MVP çš„ç®€æ´æ€§æ˜¯å…¶æˆåŠŸå…³é”®ï¼Œä½†ä¹Ÿå¯èƒ½æˆä¸ºå¢é•¿å¤©èŠ±æ¿ã€‚

---

## å‚è€ƒæ–‡çŒ®

1. **[Wasm-Proposals]** WebAssembly Proposals. https://github.com/WebAssembly/proposals
2. **[GC-Proposal]** "GC Proposal." https://github.com/WebAssembly/gc
