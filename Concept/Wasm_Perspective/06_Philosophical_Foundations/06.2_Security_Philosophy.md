# 6.2 安全哲学 (Security Philosophy)

## 核心命题

**能力安全模型**：
\[
\text{Access}(R) \iff \exists \text{Capability}(R)
\]

**沙箱悖论**：
\[
\text{Perfect-Isolation} \wedge \text{Useful-Computation} \implies \text{Contradiction}
\]

**信任边界**：
\[
\text{Trust}(\text{Wasm}) < \text{Trust}(\text{Host-Functions})
\]

---

## 安全模型层次

### 内存安全

**定理**：
\[
\forall \text{addr} : \text{Load}(\text{addr}) \implies \text{addr} < |\text{Memory}|
\]

**机制**：

- 线性内存隔离
- 边界检查（显式或隐式）
- 无指针伪造

### 控制流完整性

**结构化保证**：
\[
\forall \text{Wasm-Program} : \neg \text{Arbitrary-Jump}
\]

**验证**：

- 类型栈验证
- 标签匹配检查

### 能力安全

**最小权限原则**：
\[
\text{Grant}(P) = \min\{\text{Cap} : P \text{ 可正常运行}\}
\]

---

## 安全限制

### 侧信道攻击

**Spectre 风险**：
\[
\text{Timing}(\text{Branch}) \leadsto \text{Secret-Leakage}
\]

**缓解措施**：

- 禁用 SharedArrayBuffer（浏览器）
- 进程隔离
- 常量时间算法

### 形式化验证界限

**哥德尔障碍**：
\[
\exists P : \text{Valid-Wasm}(P) \wedge \neg \text{Provable}(\text{Secure}(P))
\]

**批判**：
> 沙箱提供"防御深度"，而非"绝对安全"。Spectre、Rowhammer 等硬件漏洞揭示：从抽象到物理的映射，安全性不可传递。

---

## 参考文献

1. **[Miller06]** Mark S. Miller. "Robust Composition." PhD Thesis, 2006.
2. **[Kocher18]** Paul Kocher et al. "Spectre Attacks." IEEE S&P, 2018.
