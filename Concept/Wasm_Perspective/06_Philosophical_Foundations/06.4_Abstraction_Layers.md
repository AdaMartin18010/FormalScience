# 6.4 抽象层次论 (Abstraction Layers)

## 核心命题

**抽象税定理**：
\[
\text{Abstraction} \implies \text{Performance-Loss} + \text{Complexity}
\]

**信息论基础**：
\[
H(\text{Abstract}) < H(\text{Concrete}) \implies \text{Information-Loss}
\]

**复杂性守恒**：
\[
\text{Complexity}_{\text{user}} + \text{Complexity}_{\text{abstraction}} = \text{Const}
\]

---

## 抽象层次

### L0：硬件（ISA）

**特性**：

- 寄存器、内存、指令集
- 架构相关（x86, ARM, RISC-V）

### L1：Wasm 虚拟机

**特性**：

- 栈式机器
- 线性内存
- 平台无关

### L2：编程语言

**特性**：

- 高级语法
- 类型系统
- 抽象数据结构

---

## 抽象成本

**栈→寄存器映射**：
\[
\text{Overhead}_{\text{stack}} \approx 5-10\%
\]

**边界检查**：
\[
\text{Overhead}_{\text{bounds}} \approx 3-5\%
\]

**间接跳转**：
\[
\text{Overhead}_{\text{indirect}} \approx 10-15\%
\]

**总计**：
\[
\text{Total-Tax} \approx 18-30\% \quad \text{（最坏情况）}
\]

**批判**：
> 抽象是"便利的交易"：用性能换可移植性。Wasm 的抽象税比 JVM 低，但比原生代码高。这是技术选择，而非技术缺陷。

---

## 参考文献

1. **[Abelson96]** Harold Abelson. "Structure and Interpretation of Computer Programs." MIT Press, 1996.
