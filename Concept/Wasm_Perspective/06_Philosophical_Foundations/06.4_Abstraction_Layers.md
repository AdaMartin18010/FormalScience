# 6.4 æŠ½è±¡å±‚æ¬¡è®º (Abstraction Layers)

## ğŸ“‹ ç›®å½•

- [6.4 æŠ½è±¡å±‚æ¬¡è®º (Abstraction Layers)](#64-æŠ½è±¡å±‚æ¬¡è®º-abstraction-layers)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1 æ ¸å¿ƒå‘½é¢˜](#1-æ ¸å¿ƒå‘½é¢˜)
  - [2 æŠ½è±¡å±‚æ¬¡](#2-æŠ½è±¡å±‚æ¬¡)
    - [2.1 L0ï¼šç¡¬ä»¶ISA](#21-l0ç¡¬ä»¶isa)
    - [2.2 L1ï¼šWasm è™šæ‹Ÿæœº](#22-l1wasm-è™šæ‹Ÿæœº)
    - [2.3 L2ï¼šç¼–ç¨‹è¯­è¨€](#23-l2ç¼–ç¨‹è¯­è¨€)
  - [3 æŠ½è±¡æˆæœ¬](#3-æŠ½è±¡æˆæœ¬)
  - [å‚è€ƒæ–‡çŒ®](#å‚è€ƒæ–‡çŒ®)

---

## 1 æ ¸å¿ƒå‘½é¢˜

**æŠ½è±¡ç¨å®šç†**ï¼š
\[
\text{Abstraction} \implies \text{Performance-Loss} + \text{Complexity}
\]

**ä¿¡æ¯è®ºåŸºç¡€**ï¼š
\[
H(\text{Abstract}) < H(\text{Concrete}) \implies \text{Information-Loss}
\]

**å¤æ‚æ€§å®ˆæ’**ï¼š
\[
\text{Complexity}_{\text{user}} + \text{Complexity}_{\text{abstraction}} = \text{Const}
\]

---

## 2 æŠ½è±¡å±‚æ¬¡

### 2.1 L0ï¼šç¡¬ä»¶ISA

**ç‰¹æ€§**ï¼š

- å¯„å­˜å™¨ã€å†…å­˜ã€æŒ‡ä»¤é›†
- æ¶æ„ç›¸å…³ï¼ˆx86, ARM, RISC-Vï¼‰

### 2.2 L1ï¼šWasm è™šæ‹Ÿæœº

**ç‰¹æ€§**ï¼š

- æ ˆå¼æœºå™¨
- çº¿æ€§å†…å­˜
- å¹³å°æ— å…³

### 2.3 L2ï¼šç¼–ç¨‹è¯­è¨€

**ç‰¹æ€§**ï¼š

- é«˜çº§è¯­æ³•
- ç±»å‹ç³»ç»Ÿ
- æŠ½è±¡æ•°æ®ç»“æ„

---

## 3 æŠ½è±¡æˆæœ¬

**æ ˆâ†’å¯„å­˜å™¨æ˜ å°„**ï¼š
\[
\text{Overhead}_{\text{stack}} \approx 5-10\%
\]

**è¾¹ç•Œæ£€æŸ¥**ï¼š
\[
\text{Overhead}_{\text{bounds}} \approx 3-5\%
\]

**é—´æ¥è·³è½¬**ï¼š
\[
\text{Overhead}_{\text{indirect}} \approx 10-15\%
\]

**æ€»è®¡**ï¼š
\[
\text{Total-Tax} \approx 18-30\% \quad \text{ï¼ˆæœ€åæƒ…å†µï¼‰}
\]

**æ‰¹åˆ¤**ï¼š
> æŠ½è±¡æ˜¯"ä¾¿åˆ©çš„äº¤æ˜“"ï¼šç”¨æ€§èƒ½æ¢å¯ç§»æ¤æ€§ã€‚Wasm çš„æŠ½è±¡ç¨æ¯” JVM ä½ï¼Œä½†æ¯”åŸç”Ÿä»£ç é«˜ã€‚è¿™æ˜¯æŠ€æœ¯é€‰æ‹©ï¼Œè€ŒéæŠ€æœ¯ç¼ºé™·ã€‚

---

## å‚è€ƒæ–‡çŒ®

1. **[Abelson96]** Harold Abelson. "Structure and Interpretation of Computer Programs." MIT Press, 1996.
