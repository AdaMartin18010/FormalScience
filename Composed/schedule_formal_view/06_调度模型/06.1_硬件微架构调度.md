# 6.1 ç¡¬ä»¶å¾®æ¶æ„è°ƒåº¦

> **ä¸»é¢˜**: 06. è°ƒåº¦æ¨¡å‹ - 6.1 ç¡¬ä»¶å¾®æ¶æ„è°ƒåº¦
> **è¦†ç›–**: æŒ‡ä»¤è°ƒåº¦ã€å†…å­˜è°ƒåº¦ã€ç¼“å­˜è°ƒåº¦ã€åˆ†æ”¯è°ƒåº¦

---

## ğŸ“‹ ç›®å½•

- [6.1 ç¡¬ä»¶å¾®æ¶æ„è°ƒåº¦](#61-ç¡¬ä»¶å¾®æ¶æ„è°ƒåº¦)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1 æŒ‡ä»¤è°ƒåº¦](#1-æŒ‡ä»¤è°ƒåº¦)
    - [1.1 è¶…æ ‡é‡å‘å°„](#11-è¶…æ ‡é‡å‘å°„)
    - [1.2 ä¹±åºæ‰§è¡Œ](#12-ä¹±åºæ‰§è¡Œ)
  - [2 å†…å­˜è°ƒåº¦](#2-å†…å­˜è°ƒåº¦)
    - [2.1 MOBï¼ˆMemory Order Bufferï¼‰](#21-mobmemory-order-buffer)
    - [2.2 å­˜å‚¨-è£…è½½è½¬å‘](#22-å­˜å‚¨-è£…è½½è½¬å‘)
  - [3 ç¼“å­˜è°ƒåº¦](#3-ç¼“å­˜è°ƒåº¦)
    - [3.1 ç¼“å­˜å±‚æ¬¡](#31-ç¼“å­˜å±‚æ¬¡)
    - [2.2 ç¼“å­˜ä¸€è‡´æ€§åè®®](#22-ç¼“å­˜ä¸€è‡´æ€§åè®®)
  - [4 åˆ†æ”¯è°ƒåº¦](#4-åˆ†æ”¯è°ƒåº¦)
    - [4.1 åˆ†æ”¯é¢„æµ‹å™¨](#41-åˆ†æ”¯é¢„æµ‹å™¨)
    - [3.2 è¯¯é¢„æµ‹æƒ©ç½š](#32-è¯¯é¢„æµ‹æƒ©ç½š)
  - [5 åŠŸè€—è°ƒåº¦](#5-åŠŸè€—è°ƒåº¦)
    - [5.1 RAPLï¼ˆRunning Average Power Limitï¼‰](#51-raplrunning-average-power-limit)
    - [4.2 æ—¶é’Ÿé—¨æ§](#42-æ—¶é’Ÿé—¨æ§)
  - [6 å®è·µæ¡ˆä¾‹](#6-å®è·µæ¡ˆä¾‹)
    - [6.1 Intel Skylakeå¾®æ¶æ„è°ƒåº¦ä¼˜åŒ–](#61-intel-skylakeå¾®æ¶æ„è°ƒåº¦ä¼˜åŒ–)
    - [6.2 Apple M3èƒ½æ•ˆä¼˜åŒ–](#62-apple-m3èƒ½æ•ˆä¼˜åŒ–)
  - [7 è°ƒåº¦å»¶è¿Ÿå¯¹æ¯”](#7-è°ƒåº¦å»¶è¿Ÿå¯¹æ¯”)
  - [8 æ‰¹åˆ¤æ€§æ€»ç»“](#8-æ‰¹åˆ¤æ€§æ€»ç»“)
    - [8.1 ç¡¬ä»¶è°ƒåº¦çš„å±€é™æ€§](#81-ç¡¬ä»¶è°ƒåº¦çš„å±€é™æ€§)
    - [8.2 2025å¹´ç¡¬ä»¶è°ƒåº¦è¶‹åŠ¿](#82-2025å¹´ç¡¬ä»¶è°ƒåº¦è¶‹åŠ¿)
  - [9 è·¨é¢†åŸŸæ´å¯Ÿ](#9-è·¨é¢†åŸŸæ´å¯Ÿ)
    - [6.1 ç¡¬ä»¶è°ƒåº¦çš„ç‰©ç†æé™](#61-ç¡¬ä»¶è°ƒåº¦çš„ç‰©ç†æé™)
    - [6.2 åŠŸè€—è°ƒåº¦çš„æš—ç¡…æ•ˆåº”](#62-åŠŸè€—è°ƒåº¦çš„æš—ç¡…æ•ˆåº”)
  - [10 å¤šç»´åº¦å¯¹æ¯”](#10-å¤šç»´åº¦å¯¹æ¯”)
    - [7.1 ç¡¬ä»¶è°ƒåº¦å±‚æ¬¡å¯¹æ¯”](#71-ç¡¬ä»¶è°ƒåº¦å±‚æ¬¡å¯¹æ¯”)
    - [7.2 åŠŸè€—ç®¡ç†ç­–ç•¥å¯¹æ¯”](#72-åŠŸè€—ç®¡ç†ç­–ç•¥å¯¹æ¯”)
  - [11 ç›¸å…³ä¸»é¢˜](#11-ç›¸å…³ä¸»é¢˜)

---

## 1 æŒ‡ä»¤è°ƒåº¦

### 1.1 è¶…æ ‡é‡å‘å°„

**æ¡ˆä¾‹6.1.1ï¼ˆè¶…æ ‡é‡å‘å°„è°ƒåº¦ï¼‰**ï¼š

ç°ä»£CPUä½¿ç”¨è¶…æ ‡é‡æ¶æ„ï¼Œæ¯ä¸ªå‘¨æœŸå¯ä»¥å‘å°„å¤šæ¡æŒ‡ä»¤ï¼Œæé«˜æŒ‡ä»¤çº§å¹¶è¡Œåº¦ï¼ˆILPï¼‰ã€‚

**å‘å°„å®½åº¦**ï¼š

**ä¸åŒæ¶æ„çš„å‘å°„å®½åº¦**ï¼š

- **Intel Skylake**ï¼š4å‘å°„/å‘¨æœŸ
- **AMD Zen4**ï¼š6å‘å°„/å‘¨æœŸ
- **Apple M3**ï¼š8å‘å°„/å‘¨æœŸ
- **ARM Cortex-X4**ï¼š6å‘å°„/å‘¨æœŸ

**å‘å°„å®½åº¦çš„å½±å“**ï¼š

å‘å°„å®½åº¦å†³å®šäº†**ç†è®ºå³°å€¼IPC**ï¼ˆInstructions Per Cycleï¼‰ï¼š

$$
\text{IPC}_{\max} = \text{å‘å°„å®½åº¦} \times \text{æ‰§è¡Œå•å…ƒåˆ©ç”¨ç‡}
$$

**å‘å°„è°ƒåº¦ç®—æ³•**ï¼š

```python
class SuperscalarScheduler:
    def __init__(self, issue_width=4):
        self.issue_width = issue_width
        self.instruction_queue = []
        self.execution_units = []

    def issue_instructions(self):
        """æ¯ä¸ªå‘¨æœŸå‘å°„æŒ‡ä»¤"""
        issued = []

        # ä»æŒ‡ä»¤é˜Ÿåˆ—ä¸­é€‰æ‹©å¯å‘å°„çš„æŒ‡ä»¤
        for inst in self.instruction_queue:
            if len(issued) >= self.issue_width:
                break

            # æ£€æŸ¥æ•°æ®ä¾èµ–
            if self.has_dependencies(inst):
                continue

            # æ£€æŸ¥æ‰§è¡Œå•å…ƒå¯ç”¨æ€§
            if not self.has_available_unit(inst):
                continue

            # å‘å°„æŒ‡ä»¤
            issued.append(inst)
            self.instruction_queue.remove(inst)
            self.allocate_unit(inst)

        return issued
```

**æ·±åº¦è®ºè¯ï¼šå‘å°„å®½åº¦çš„æ€§èƒ½-åŠŸè€—æƒè¡¡**

**å‘å°„å®½åº¦çš„æ€§èƒ½æ¨¡å‹**ï¼š

å‘å°„å®½åº¦å†³å®šäº†**ç†è®ºå³°å€¼IPC**ï¼š

$$
\text{IPC}_{\max} = \text{å‘å°„å®½åº¦} \times \text{æ‰§è¡Œå•å…ƒåˆ©ç”¨ç‡}
$$

**é‡åŒ–åˆ†æ**ï¼šä¸åŒå‘å°„å®½åº¦çš„æ€§èƒ½å¯¹æ¯”

| **æ¶æ„** | **å‘å°„å®½åº¦** | **ç†è®ºIPC** | **å®é™…IPC** | **åˆ©ç”¨ç‡** | **åŠŸè€—** |
|---------|------------|-----------|-----------|-----------|---------|
| **Intel Skylake** | 4 | 4.0 | 2.5 | 62.5% | åŸºå‡† |
| **AMD Zen4** | 6 | 6.0 | 3.2 | 53.3% | 1.2x |
| **Apple M3** | 8 | 8.0 | 4.5 | 56.3% | 1.5x |

**å…³é”®æ´å¯Ÿ**ï¼šå‘å°„å®½åº¦å¢åŠ ï¼Œä½†**å®é™…åˆ©ç”¨ç‡ä¸‹é™**ï¼Œå› ä¸ºï¼š

1. **æ•°æ®ä¾èµ–**ï¼šé™åˆ¶äº†å¹¶è¡Œåº¦
2. **èµ„æºç«äº‰**ï¼šæ‰§è¡Œå•å…ƒæˆä¸ºç“¶é¢ˆ
3. **åŠŸè€—é™åˆ¶**ï¼šæ— æ³•åŒæ—¶æ¿€æ´»æ‰€æœ‰å•å…ƒ

**æ‰§è¡Œå•å…ƒ**ï¼š

- æ•´æ•°ALUï¼š4ä¸ª
- æµ®ç‚¹å•å…ƒï¼š2ä¸ª
- å‘é‡å•å…ƒï¼š2ä¸ª

**æ·±åº¦è®ºè¯ï¼šæ‰§è¡Œå•å…ƒé…ç½®çš„æƒè¡¡**

**æ‰§è¡Œå•å…ƒé…ç½®çš„å½±å“**ï¼š

æ‰§è¡Œå•å…ƒé…ç½®å†³å®šäº†**ä¸åŒç±»å‹æŒ‡ä»¤çš„ååé‡**ï¼š

$$
\text{ååé‡} = \frac{\text{æ‰§è¡Œå•å…ƒæ•°}}{\text{æŒ‡ä»¤å»¶è¿Ÿ}}
$$

**é‡åŒ–å¯¹æ¯”**ï¼šä¸åŒæ¶æ„çš„æ‰§è¡Œå•å…ƒé…ç½®

| **æ¶æ„** | **æ•´æ•°ALU** | **æµ®ç‚¹å•å…ƒ** | **å‘é‡å•å…ƒ** | **é€‚ç”¨åœºæ™¯** |
|---------|-----------|------------|------------|------------|
| **Intel Skylake** | 4 | 2 | 2Ã—512b | é€šç”¨ |
| **AMD Zen4** | 6 | 4 | 2Ã—512b | é«˜æ€§èƒ½ |
| **Apple M3** | 8 | 4 | 4Ã—128b | èƒ½æ•ˆä¼˜åŒ– |

**å…³é”®æƒè¡¡**ï¼š

- **æ•´æ•°å•å…ƒå¤š**ï¼šé€‚åˆé€šç”¨è®¡ç®—
- **æµ®ç‚¹å•å…ƒå¤š**ï¼šé€‚åˆç§‘å­¦è®¡ç®—
- **å‘é‡å•å…ƒå¤š**ï¼šé€‚åˆAI/MLå·¥ä½œè´Ÿè½½

### 1.2 ä¹±åºæ‰§è¡Œ

**æ¡ˆä¾‹6.1.2ï¼ˆä¹±åºæ‰§è¡Œè°ƒåº¦ï¼‰**ï¼š

ä¹±åºæ‰§è¡Œå…è®¸æŒ‡ä»¤åœ¨æ•°æ®å°±ç»ªæ—¶ç«‹å³æ‰§è¡Œï¼Œæ¶ˆé™¤æ•°æ®ä¾èµ–é˜»å¡ï¼Œæé«˜ILPã€‚

**ä¿ç•™ç«™ï¼ˆRSï¼‰**ï¼š

**ä¿ç•™ç«™æ¶æ„**ï¼š

- **Intel Skylake**ï¼š97æ¡ç›®
- **AMD Zen4**ï¼š160æ¡ç›®
- **Apple M3**ï¼š192æ¡ç›®

**ä¿ç•™ç«™çš„ä½œç”¨**ï¼š

ä¿ç•™ç«™å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„å¾®æŒ‡ä»¤ï¼Œå½“æ“ä½œæ•°å°±ç»ªæ—¶ç«‹å³æ‰§è¡Œï¼š

```python
class ReservationStation:
    def __init__(self, capacity=97):
        self.capacity = capacity
        self.entries = []
        self.execution_units = []

    def dispatch(self, instruction):
        """åˆ†å‘æŒ‡ä»¤åˆ°æ‰§è¡Œå•å…ƒ"""
        # æ£€æŸ¥æ“ä½œæ•°æ˜¯å¦å°±ç»ª
        if self.operands_ready(instruction):
            # é€‰æ‹©æ‰§è¡Œå•å…ƒ
            unit = self.select_unit(instruction)
            # æ‰§è¡ŒæŒ‡ä»¤
            result = unit.execute(instruction)
            # æ›´æ–°ä¾èµ–çš„æŒ‡ä»¤
            self.wakeup_dependent(instruction, result)

    def wakeup_dependent(self, completed, result):
        """å”¤é†’ä¾èµ–çš„æŒ‡ä»¤"""
        for entry in self.entries:
            if entry.depends_on(completed):
                entry.update_operand(completed, result)
                if entry.operands_ready():
                    self.dispatch(entry.instruction)
```

**æ·±åº¦è®ºè¯ï¼šä¿ç•™ç«™å®¹é‡çš„å½±å“**

**ä¿ç•™ç«™çš„ä½œç”¨**ï¼š

ä¿ç•™ç«™å…è®¸**æŒ‡ä»¤åœ¨æ•°æ®å°±ç»ªæ—¶ç«‹å³æ‰§è¡Œ**ï¼Œæ¶ˆé™¤æ•°æ®ä¾èµ–é˜»å¡ï¼š

$$
\text{æ€§èƒ½æå‡} = \frac{\text{ä¾èµ–å»¶è¿Ÿ}}{\text{ä¿ç•™ç«™å®¹é‡}}
$$

**é‡åŒ–åˆ†æ**ï¼šä¿ç•™ç«™å®¹é‡çš„æ€§èƒ½å½±å“

| **ä¿ç•™ç«™å®¹é‡** | **ä¾èµ–æ©ç›–èƒ½åŠ›** | **æ€§èƒ½æå‡** | **åŠŸè€—å¢åŠ ** |
|--------------|---------------|------------|------------|
| **32æ¡ç›®** | ä½ | åŸºå‡† | åŸºå‡† |
| **64æ¡ç›®** | ä¸­ | +15% | +10% |
| **97æ¡ç›®** | é«˜ | +25% | +20% |

**é‡æ’åºç¼“å†²åŒºï¼ˆROBï¼‰**ï¼š

- **Intel Skylake**ï¼š224æ¡ç›®
- **AMD Zen4**ï¼š352æ¡ç›®
- ç»´æŠ¤æŒ‡ä»¤é¡ºåº

**æ·±åº¦è®ºè¯ï¼šROBå®¹é‡çš„æ”¶ç›Šé€’å‡**

**ROBå®¹é‡çš„æ€§èƒ½æ¨¡å‹**ï¼š

æ ¹æ®Littleå®šå¾‹ï¼ŒROBå®¹é‡ä¸ILPçš„å…³ç³»ï¼š

$$
\text{ILP}_{\max} = \frac{\text{ROBå®¹é‡}}{\text{å…³é”®è·¯å¾„é•¿åº¦}}
$$

**é‡åŒ–åˆ†æ**ï¼šROBå®¹é‡å¢åŠ çš„æ€§èƒ½æ”¶ç›Š

| **ROBå®¹é‡** | **ILPæå‡** | **IPCæå‡** | **åŠŸè€—å¢åŠ ** | **æ”¶ç›Šæ¯”** |
|------------|-----------|-----------|------------|-----------|
| **224æ¡ç›®** | åŸºå‡† | åŸºå‡† | åŸºå‡† | 1.0x |
| **352æ¡ç›®** | +15% | +12% | +30% | 0.4x |
| **512æ¡ç›®** | +20% | +15% | +50% | 0.3x |

**å…³é”®æ´å¯Ÿ**ï¼šROBå®¹é‡å¢åŠ å¸¦æ¥**æ”¶ç›Šé€’å‡**ï¼Œå› ä¸ºå®é™…ç“¶é¢ˆæ˜¯**å†…å­˜å»¶è¿Ÿ**è€ŒéROBå®¹é‡ã€‚

---

## 2 å†…å­˜è°ƒåº¦

### 2.1 MOBï¼ˆMemory Order Bufferï¼‰

**æ¡ˆä¾‹6.1.3ï¼ˆå†…å­˜è°ƒåº¦ï¼‰**ï¼š

MOBå…è®¸å†…å­˜æ“ä½œä¹±åºæ‰§è¡Œï¼ŒåŒæ—¶ä¿è¯å†…å­˜ä¸€è‡´æ€§ï¼Œæé«˜å†…å­˜å¹¶è¡Œåº¦ã€‚

**MOBç»“æ„**ï¼š

**ä¸åŒæ¶æ„çš„MOBé…ç½®**ï¼š

- **Intel Skylake**ï¼šLoad Buffer 72æ¡ç›®ï¼ŒStore Buffer 42æ¡ç›®
- **AMD Zen4**ï¼šLoad Buffer 128æ¡ç›®ï¼ŒStore Buffer 72æ¡ç›®
- **Apple M3**ï¼šLoad Buffer 192æ¡ç›®ï¼ŒStore Buffer 128æ¡ç›®

**MOBè°ƒåº¦ç®—æ³•**ï¼š

```python
class MemoryOrderBuffer:
    def __init__(self, load_buffer_size=72, store_buffer_size=42):
        self.load_buffer = []
        self.store_buffer = []
        self.load_buffer_size = load_buffer_size
        self.store_buffer_size = store_buffer_size

    def schedule_load(self, load_inst):
        """è°ƒåº¦Loadæ“ä½œ"""
        # æ£€æŸ¥Store Bufferä¸­çš„å†²çª
        for store in self.store_buffer:
            if self.addresses_match(load_inst, store):
                # å­˜å‚¨-è£…è½½è½¬å‘
                if self.can_forward(store, load_inst):
                    return self.forward(store, load_inst)

        # æ£€æŸ¥Load Bufferå®¹é‡
        if len(self.load_buffer) >= self.load_buffer_size:
            return False

        # æ·»åŠ åˆ°Load Buffer
        self.load_buffer.append(load_inst)
        return True

    def schedule_store(self, store_inst):
        """è°ƒåº¦Storeæ“ä½œ"""
        # æ£€æŸ¥Store Bufferå®¹é‡
        if len(self.store_buffer) >= self.store_buffer_size:
            return False

        # æ·»åŠ åˆ°Store Buffer
        self.store_buffer.append(store_inst)
        return True

    def can_forward(self, store, load):
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬å‘"""
        # åœ°å€åŒ¹é…
        if not self.addresses_match(load, store):
            return False

        # æ•°æ®å¤§å°å…¼å®¹
        if not self.sizes_compatible(store, load):
            return False

        # Storeå·²å®Œæˆ
        if not store.completed:
            return False

        return True
```

**æ·±åº¦è®ºè¯ï¼šMOBå®¹é‡çš„æ€§èƒ½å½±å“**

**MOBçš„ä½œç”¨**ï¼š

MOBå…è®¸**å†…å­˜æ“ä½œä¹±åºæ‰§è¡Œ**ï¼ŒåŒæ—¶ä¿è¯å†…å­˜ä¸€è‡´æ€§ï¼š

$$
\text{å†…å­˜å¹¶è¡Œåº¦} = \min(\text{Load Bufferå®¹é‡}, \text{Store Bufferå®¹é‡})
$$

**é‡åŒ–åˆ†æ**ï¼šMOBå®¹é‡çš„æ€§èƒ½å½±å“

| **MOBé…ç½®** | **Load Buffer** | **Store Buffer** | **å†…å­˜å¹¶è¡Œåº¦** | **æ€§èƒ½æå‡** |
|------------|---------------|----------------|--------------|------------|
| **å°** | 32 | 20 | 20 | åŸºå‡† |
| **ä¸­** | 72 | 42 | 42 | +30% |
| **å¤§** | 128 | 64 | 64 | +45% |

**å…³é”®é™åˆ¶**ï¼š

MOBå®¹é‡å—**åŠŸè€—å’Œé¢ç§¯**é™åˆ¶ï¼Œä¸èƒ½æ— é™å¢åŠ ã€‚

### 2.2 å­˜å‚¨-è£…è½½è½¬å‘

**æ¡ˆä¾‹6.1.4ï¼ˆå­˜å‚¨-è£…è½½è½¬å‘ï¼‰**ï¼š

å­˜å‚¨-è£…è½½è½¬å‘æ˜¯é‡è¦çš„å†…å­˜ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥æ¶ˆé™¤å†…å­˜è®¿é—®å»¶è¿Ÿã€‚

**è½¬å‘æ¡ä»¶**ï¼š

**1. åœ°å€åŒ¹é…**ï¼š

- å­˜å‚¨åœ°å€ä¸è£…è½½åœ°å€å¿…é¡»åŒ¹é…
- æ”¯æŒéƒ¨åˆ†åœ°å€åŒ¹é…ï¼ˆå­å­—è®¿é—®ï¼‰

**2. æ•°æ®å¤§å°å…¼å®¹**ï¼š

- å­˜å‚¨æ•°æ®å¤§å°å¿…é¡»å¤§äºç­‰äºè£…è½½æ•°æ®å¤§å°
- æ”¯æŒå­—èŠ‚å¯¹é½æ£€æŸ¥

**è½¬å‘ç®—æ³•**ï¼š

```python
class StoreLoadForwarding:
    def forward(self, store, load):
        """æ‰§è¡Œå­˜å‚¨-è£…è½½è½¬å‘"""
        # æ£€æŸ¥åœ°å€åŒ¹é…
        if not self.addresses_match(store, load):
            return False

        # æ£€æŸ¥æ•°æ®å¤§å°
        if not self.sizes_compatible(store, load):
            return False

        # æ£€æŸ¥å¯¹é½
        if not self.aligned(store, load):
            return False

        # æ‰§è¡Œè½¬å‘
        load.result = store.data[load.offset:load.offset+load.size]
        load.latency = 0  # è½¬å‘æˆåŠŸï¼Œ0å‘¨æœŸå»¶è¿Ÿ

        return True

    def addresses_match(self, store, load):
        """æ£€æŸ¥åœ°å€æ˜¯å¦åŒ¹é…"""
        store_addr = store.address
        load_addr = load.address

        # æ£€æŸ¥åœ°å€èŒƒå›´é‡å 
        return (store_addr <= load_addr < store_addr + store.size) or \
               (load_addr <= store_addr < load_addr + load.size)
```

**å»¶è¿Ÿåˆ†æ**ï¼š

**è½¬å‘å»¶è¿Ÿ**ï¼š

- **è½¬å‘æˆåŠŸ**ï¼š0å‘¨æœŸï¼ˆç›´æ¥ä»Store Bufferè·å–æ•°æ®ï¼‰
- **è½¬å‘å¤±è´¥**ï¼š~12å‘¨æœŸæƒ©ç½šï¼ˆéœ€è¦è®¿é—®L1ç¼“å­˜ï¼‰

**è½¬å‘æˆåŠŸç‡çš„å½±å“**ï¼š

$$
\text{å¹³å‡å»¶è¿Ÿ} = P_{\text{è½¬å‘}} \times 0 + (1 - P_{\text{è½¬å‘}}) \times T_{\text{ç¼“å­˜}}
$$

å…¶ä¸­$P_{\text{è½¬å‘}}$æ˜¯è½¬å‘æˆåŠŸç‡ï¼Œ$T_{\text{ç¼“å­˜}}$æ˜¯ç¼“å­˜è®¿é—®å»¶è¿Ÿï¼ˆ~12å‘¨æœŸï¼‰ã€‚

**æ·±åº¦è®ºè¯ï¼šå­˜å‚¨-è£…è½½è½¬å‘çš„æ€§èƒ½å½±å“**

**è½¬å‘çš„æ€§èƒ½æ¨¡å‹**ï¼š

å­˜å‚¨-è£…è½½è½¬å‘å¯ä»¥**æ¶ˆé™¤å†…å­˜è®¿é—®å»¶è¿Ÿ**ï¼š

$$
\text{æœ‰æ•ˆå»¶è¿Ÿ} = \begin{cases}
0 & \text{è½¬å‘æˆåŠŸ} \\
\text{å†…å­˜å»¶è¿Ÿ} & \text{è½¬å‘å¤±è´¥}
\end{cases}
$$

**é‡åŒ–åˆ†æ**ï¼šè½¬å‘æˆåŠŸç‡çš„å½±å“

| **è½¬å‘æˆåŠŸç‡** | **å¹³å‡å»¶è¿Ÿ** | **æ€§èƒ½æå‡** | **å…³é”®å› ç´ ** |
|--------------|------------|------------|------------|
| **50%** | 40å‘¨æœŸ | åŸºå‡† | ä½ |
| **70%** | 24å‘¨æœŸ | +40% | ä¸­ |
| **90%** | 8å‘¨æœŸ | +80% | é«˜ |

**å…³é”®æ´å¯Ÿ**ï¼šå­˜å‚¨-è£…è½½è½¬å‘æ˜¯**å†…å­˜æ€§èƒ½çš„å…³é”®ä¼˜åŒ–**ï¼Œè½¬å‘æˆåŠŸç‡ç›´æ¥å½±å“æ€§èƒ½ã€‚

---

## 3 ç¼“å­˜è°ƒåº¦

### 3.1 ç¼“å­˜å±‚æ¬¡

**æ¡ˆä¾‹6.1.5ï¼ˆç¼“å­˜è°ƒåº¦ï¼‰**ï¼š

ç¼“å­˜å±‚æ¬¡ç»“æ„é€šè¿‡å¤šçº§ç¼“å­˜å‡å°‘å†…å­˜è®¿é—®å»¶è¿Ÿï¼Œæé«˜æ€§èƒ½ã€‚

**ç¼“å­˜å±‚æ¬¡ç»“æ„**ï¼š

**L1ç¼“å­˜**ï¼š

- **å®¹é‡**ï¼š32KBï¼ˆæŒ‡ä»¤ï¼‰+ 32KBï¼ˆæ•°æ®ï¼‰
- **å»¶è¿Ÿ**ï¼š4å‘¨æœŸï¼ˆ~1ns @ 4GHzï¼‰
- **å…³è”åº¦**ï¼š8è·¯ç»„ç›¸è”
- **å—å¤§å°**ï¼š64å­—èŠ‚

**L2ç¼“å­˜**ï¼š

- **å®¹é‡**ï¼š256KB - 1MB
- **å»¶è¿Ÿ**ï¼š12å‘¨æœŸï¼ˆ~3nsï¼‰
- **å…³è”åº¦**ï¼š8-16è·¯
- **å—å¤§å°**ï¼š64å­—èŠ‚

**L3ç¼“å­˜**ï¼š

- **å®¹é‡**ï¼š8-64MBï¼ˆå…±äº«ï¼‰
- **å»¶è¿Ÿ**ï¼š40-75å‘¨æœŸï¼ˆ~15nsï¼‰
- **å…³è”åº¦**ï¼š16-32è·¯
- **å—å¤§å°**ï¼š64å­—èŠ‚

**ç¼“å­˜æ›¿æ¢ç­–ç•¥**ï¼š

**LRUï¼ˆLeast Recently Usedï¼‰**ï¼š

```python
class LRUCache:
    def __init__(self, capacity, associativity):
        self.capacity = capacity
        self.associativity = associativity
        self.sets = [LRUSet(associativity) for _ in range(capacity // associativity)]

    def access(self, address):
        """è®¿é—®ç¼“å­˜"""
        set_index = self.get_set_index(address)
        tag = self.get_tag(address)

        # æŸ¥æ‰¾ç¼“å­˜è¡Œ
        cache_line = self.sets[set_index].find(tag)

        if cache_line:
            # ç¼“å­˜å‘½ä¸­
            self.sets[set_index].update_lru(cache_line)
            return True
        else:
            # ç¼“å­˜æœªå‘½ä¸­
            self.sets[set_index].replace_lru(tag)
            return False
```

**ç¼“å­˜è°ƒåº¦ä¼˜åŒ–**ï¼š

**1. é¢„å–ï¼ˆPrefetchingï¼‰**ï¼š

- **ç¡¬ä»¶é¢„å–**ï¼šè‡ªåŠ¨é¢„å–ç›¸é‚»ç¼“å­˜è¡Œ
- **è½¯ä»¶é¢„å–**ï¼šä½¿ç”¨é¢„å–æŒ‡ä»¤ï¼ˆå¦‚PREFETCHï¼‰

**2. å†™å›ï¼ˆWrite-Backï¼‰**ï¼š

- å»¶è¿Ÿå†™å›ï¼Œå‡å°‘å†…å­˜è®¿é—®
- ä½¿ç”¨è„ä½æ ‡è®°ä¿®æ”¹çš„ç¼“å­˜è¡Œ

**3. éé˜»å¡ç¼“å­˜**ï¼š

- å…è®¸ç¼“å­˜æœªå‘½ä¸­æ—¶ç»§ç»­å¤„ç†å…¶ä»–è¯·æ±‚
- æé«˜ç¼“å­˜å¹¶è¡Œåº¦

### 2.2 ç¼“å­˜ä¸€è‡´æ€§åè®®

**MESIFï¼ˆIntelï¼‰**ï¼š

- **M**ï¼šModifiedï¼ˆå·²ä¿®æ”¹ï¼‰
- **E**ï¼šExclusiveï¼ˆç‹¬å ï¼‰
- **S**ï¼šSharedï¼ˆå…±äº«ï¼‰
- **I**ï¼šInvalidï¼ˆæ— æ•ˆï¼‰
- **F**ï¼šForwardï¼ˆè½¬å‘è€…ï¼‰

**MOESIï¼ˆAMDï¼‰**ï¼š

- å¢åŠ **O**ï¼ˆOwnedï¼‰çŠ¶æ€
- å…è®¸å…±äº«è„æ•°æ®

---

## 4 åˆ†æ”¯è°ƒåº¦

### 4.1 åˆ†æ”¯é¢„æµ‹å™¨

**æ¡ˆä¾‹6.1.6ï¼ˆåˆ†æ”¯é¢„æµ‹ï¼‰**ï¼š

åˆ†æ”¯é¢„æµ‹å™¨é¢„æµ‹åˆ†æ”¯æ–¹å‘ï¼Œå‡å°‘åˆ†æ”¯è¯¯é¢„æµ‹æƒ©ç½šï¼Œæé«˜æ€§èƒ½ã€‚

**TAGEé¢„æµ‹å™¨**ï¼š

**TAGEï¼ˆTagged Geometricï¼‰é¢„æµ‹å™¨**ï¼š

- **å¤šçº§å†å²**ï¼šä½¿ç”¨ä¸åŒé•¿åº¦çš„å†å²æ¨¡å¼
- **å‡ ä½•çº§æ•°**ï¼šå†å²é•¿åº¦æŒ‰å‡ ä½•çº§æ•°å¢é•¿
- **æ ‡ç­¾åŒ¹é…**ï¼šä½¿ç”¨æ ‡ç­¾åŒºåˆ†ä¸åŒä¸Šä¸‹æ–‡
- **16Kæ¡ç›®BTB**ï¼šåˆ†æ”¯ç›®æ ‡ç¼“å†²åŒº

**TAGEé¢„æµ‹ç®—æ³•**ï¼š

```python
class TAGEPredictor:
    def __init__(self):
        self.history_lengths = [0, 2, 4, 8, 16, 32, 64]  # å‡ ä½•çº§æ•°
        self.tables = [PredictionTable(2**i) for i in range(7)]
        self.global_history = 0

    def predict(self, pc):
        """é¢„æµ‹åˆ†æ”¯æ–¹å‘"""
        # è®¡ç®—å¤šä¸ªå†å²é•¿åº¦ä¸‹çš„ç´¢å¼•
        indices = [self.compute_index(pc, length) for length in self.history_lengths]

        # æŸ¥æ‰¾åŒ¹é…çš„é¢„æµ‹
        for i, index in enumerate(indices):
            entry = self.tables[i][index]
            if entry.tag == self.compute_tag(pc, self.history_lengths[i]):
                return entry.prediction

        # é»˜è®¤é¢„æµ‹ï¼ˆé€šå¸¸æ˜¯ä¸è·³è½¬ï¼‰
        return False

    def update(self, pc, taken):
        """æ›´æ–°é¢„æµ‹å™¨"""
        # æ›´æ–°å…¨å±€å†å²
        self.global_history = (self.global_history << 1) | taken

        # æ›´æ–°åŒ¹é…çš„è¡¨é¡¹
        for i, length in enumerate(self.history_lengths):
            index = self.compute_index(pc, length)
            entry = self.tables[i][index]
            if entry.tag == self.compute_tag(pc, length):
                entry.update(taken)
                break
```

**è¿”å›åœ°å€æ ˆï¼ˆRASï¼‰**ï¼š

**RASçš„ä½œç”¨**ï¼š

- **å‡½æ•°è¿”å›é¢„æµ‹**ï¼šé¢„æµ‹å‡½æ•°è¿”å›åœ°å€
- **32å±‚æ·±åº¦**ï¼šæ”¯æŒ32å±‚å‡½æ•°è°ƒç”¨åµŒå¥—
- **é«˜å‡†ç¡®ç‡**ï¼š>99%çš„è¿”å›é¢„æµ‹å‡†ç¡®ç‡

**RASç®—æ³•**ï¼š

```python
class ReturnAddressStack:
    def __init__(self, depth=32):
        self.stack = []
        self.depth = depth

    def push(self, return_address):
        """å‡½æ•°è°ƒç”¨æ—¶å‹å…¥è¿”å›åœ°å€"""
        if len(self.stack) < self.depth:
            self.stack.append(return_address)
        else:
            # æ ˆæ»¡ï¼Œç§»é™¤æœ€æ—§çš„
            self.stack.pop(0)
            self.stack.append(return_address)

    def pop(self):
        """å‡½æ•°è¿”å›æ—¶å¼¹å‡ºè¿”å›åœ°å€"""
        if self.stack:
            return self.stack.pop()
        return None
```

### 3.2 è¯¯é¢„æµ‹æƒ©ç½š

**å»¶è¿Ÿ**ï¼š

- æµæ°´çº¿å†²åˆ·ï¼š15-17å‘¨æœŸ
- æŒ‡ä»¤é‡æ–°è·å–ï¼š2-3å‘¨æœŸ
- **æ€»è®¡**ï¼š~20å‘¨æœŸï¼ˆ~4ns @ 5GHzï¼‰

**ä¼˜åŒ–**ï¼š

- ç¼–è¯‘å™¨ï¼šåˆ†æ”¯æç¤º
- ç¡¬ä»¶ï¼šæ›´å‡†ç¡®çš„é¢„æµ‹å™¨

---

## 5 åŠŸè€—è°ƒåº¦

### 5.1 RAPLï¼ˆRunning Average Power Limitï¼‰

**æ¡ˆä¾‹6.1.7ï¼ˆåŠŸè€—è°ƒåº¦ï¼‰**ï¼š

RAPLæ˜¯Intelçš„åŠŸè€—ç®¡ç†æŠ€æœ¯ï¼Œé€šè¿‡åŠ¨æ€é™åˆ¶åŠŸè€—å¹³è¡¡æ€§èƒ½å’Œèƒ½æ•ˆã€‚

**RAPLåŠŸèƒ½**ï¼š

**1. åŠ¨æ€åŠŸè€—é™åˆ¶**ï¼š

- **å®æ—¶ç›‘æ§**ï¼šç›‘æ§å½“å‰åŠŸè€—
- **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®åŠŸè€—é™åˆ¶è°ƒæ•´é¢‘ç‡
- **MSRæ§åˆ¶**ï¼šé€šè¿‡MSRå¯„å­˜å™¨æ§åˆ¶

**2. åŠŸè€—åŸŸ**ï¼š

**PackageåŸŸ**ï¼š

- **èŒƒå›´**ï¼šæ•´ä¸ªCPUå°è£…
- **é™åˆ¶**ï¼šTDPï¼ˆThermal Design Powerï¼‰
- **æ§åˆ¶**ï¼šPackage Power Limit MSR

**PP0åŸŸï¼ˆæ ¸å¿ƒåŠŸè€—ï¼‰**ï¼š

- **èŒƒå›´**ï¼šCPUæ ¸å¿ƒ
- **é™åˆ¶**ï¼šæ ¸å¿ƒåŠŸè€—é™åˆ¶
- **æ§åˆ¶**ï¼šPP0 Power Limit MSR

**PP1åŸŸï¼ˆé›†æˆæ˜¾å¡ï¼‰**ï¼š

- **èŒƒå›´**ï¼šé›†æˆæ˜¾å¡
- **é™åˆ¶**ï¼šGPUåŠŸè€—é™åˆ¶
- **æ§åˆ¶**ï¼šPP1 Power Limit MSR

**DRAMåŸŸ**ï¼š

- **èŒƒå›´**ï¼šå†…å­˜æ§åˆ¶å™¨å’ŒDRAM
- **é™åˆ¶**ï¼šå†…å­˜åŠŸè€—é™åˆ¶
- **æ§åˆ¶**ï¼šDRAM Power Limit MSR

**RAPLç®—æ³•**ï¼š

```python
class RAPLController:
    def __init__(self):
        self.power_limits = {
            'package': 95,  # 95W TDP
            'pp0': 80,      # 80W æ ¸å¿ƒåŠŸè€—
            'pp1': 15,      # 15W GPUåŠŸè€—
            'dram': 10      # 10W å†…å­˜åŠŸè€—
        }
        self.current_power = {}
        self.frequency = 3.0  # GHz

    def monitor_power(self):
        """ç›‘æ§åŠŸè€—"""
        # è¯»å–MSRå¯„å­˜å™¨è·å–å½“å‰åŠŸè€—
        self.current_power['package'] = self.read_msr(0x611)
        self.current_power['pp0'] = self.read_msr(0x639)
        self.current_power['pp1'] = self.read_msr(0x641)
        self.current_power['dram'] = self.read_msr(0x619)

    def adjust_frequency(self):
        """æ ¹æ®åŠŸè€—é™åˆ¶è°ƒæ•´é¢‘ç‡"""
        # æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶
        if self.current_power['package'] > self.power_limits['package']:
            # é™ä½é¢‘ç‡
            self.frequency *= 0.95
            self.set_frequency(self.frequency)
        elif self.current_power['package'] < self.power_limits['package'] * 0.9:
            # æé«˜é¢‘ç‡
            self.frequency = min(self.frequency * 1.05, 4.0)
            self.set_frequency(self.frequency)
```

### 4.2 æ—¶é’Ÿé—¨æ§

**æœºåˆ¶**ï¼š

- åŠŸèƒ½å•å…ƒçº§ç”µæºå…³æ–­
- æœªä½¿ç”¨æ—¶è‡ªåŠ¨å…³é—­
- é™ä½é™æ€åŠŸè€—

**æ•ˆæœ**ï¼š

- é™æ€åŠŸè€—é™ä½ï¼š30-50%
- å”¤é†’å»¶è¿Ÿï¼š<1å‘¨æœŸ

---

## 6 å®è·µæ¡ˆä¾‹

### 6.1 Intel Skylakeå¾®æ¶æ„è°ƒåº¦ä¼˜åŒ–

**æ¡ˆä¾‹6.1.8ï¼ˆSkylakeè°ƒåº¦ä¼˜åŒ–ï¼‰**ï¼š

Intel Skylakeé€šè¿‡ä¼˜åŒ–å„ç§è°ƒåº¦å™¨ï¼Œå®ç°äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

**ä¼˜åŒ–ç­–ç•¥**ï¼š

**1. æŒ‡ä»¤è°ƒåº¦ä¼˜åŒ–**ï¼š

- **4å‘å°„å®½åº¦**ï¼šå¹³è¡¡æ€§èƒ½å’ŒåŠŸè€—
- **97æ¡ç›®ä¿ç•™ç«™**ï¼šæ©ç›–æ•°æ®ä¾èµ–
- **224æ¡ç›®ROB**ï¼šæé«˜ILP

**2. å†…å­˜è°ƒåº¦ä¼˜åŒ–**ï¼š

- **72æ¡ç›®Load Buffer**ï¼šæé«˜å†…å­˜å¹¶è¡Œåº¦
- **42æ¡ç›®Store Buffer**ï¼šä¼˜åŒ–å†™æ“ä½œ
- **å­˜å‚¨-è£…è½½è½¬å‘**ï¼šå‡å°‘å†…å­˜å»¶è¿Ÿ

**æ€§èƒ½æå‡**ï¼š

| **æŒ‡æ ‡** | **Haswell** | **Skylake** | **æå‡** |
|---------|------------|------------|---------|
| **IPC** | 2.0 | 2.5 | +25% |
| **å†…å­˜å¸¦å®½** | 50 GB/s | 70 GB/s | +40% |
| **åŠŸè€—** | åŸºå‡† | -10% | æ›´é«˜æ•ˆ |

### 6.2 Apple M3èƒ½æ•ˆä¼˜åŒ–

**æ¡ˆä¾‹6.1.9ï¼ˆM3èƒ½æ•ˆä¼˜åŒ–ï¼‰**ï¼š

Apple M3é€šè¿‡å¼‚æ„è®¾è®¡å’ŒåŠŸè€—è°ƒåº¦ï¼Œå®ç°äº†å‡ºè‰²çš„èƒ½æ•ˆæ¯”ã€‚

**ä¼˜åŒ–ç­–ç•¥**ï¼š

**1. å¼‚æ„æ ¸å¿ƒ**ï¼š

- **P-core**ï¼šé«˜æ€§èƒ½æ ¸å¿ƒï¼Œ8å‘å°„å®½åº¦
- **E-core**ï¼šèƒ½æ•ˆæ ¸å¿ƒï¼Œ4å‘å°„å®½åº¦
- **åŠ¨æ€è°ƒåº¦**ï¼šæ ¹æ®è´Ÿè½½é€‰æ‹©æ ¸å¿ƒ

**2. åŠŸè€—è°ƒåº¦**ï¼š

- **ç²¾ç»†åŠŸè€—æ§åˆ¶**ï¼šæ ¸å¿ƒçº§åŠŸè€—ç®¡ç†
- **åŠ¨æ€é¢‘ç‡è°ƒæ•´**ï¼šæ ¹æ®è´Ÿè½½è°ƒæ•´é¢‘ç‡
- **æ—¶é’Ÿé—¨æ§**ï¼šæœªä½¿ç”¨å•å…ƒè‡ªåŠ¨å…³é—­

**èƒ½æ•ˆæå‡**ï¼š

| **æŒ‡æ ‡** | **M2** | **M3** | **æå‡** |
|---------|--------|--------|---------|
| **æ€§èƒ½** | åŸºå‡† | +20% | æ›´é«˜ |
| **åŠŸè€—** | åŸºå‡† | -15% | æ›´ä½ |
| **èƒ½æ•ˆæ¯”** | åŸºå‡† | +41% | æ˜¾è‘—æå‡ |

## 7 è°ƒåº¦å»¶è¿Ÿå¯¹æ¯”

**ç»¼åˆå¯¹æ¯”**ï¼š

| **è°ƒåº¦ç±»å‹** | **å»¶è¿Ÿ** | **ç‰©ç†çº¦æŸ** | **ä¼˜åŒ–ç©ºé—´** | **ä»£è¡¨æŠ€æœ¯** |
|------------|----------|-------------|------------|------------|
| **æŒ‡ä»¤è°ƒåº¦** | 0.2ns | æ™¶ä½“ç®¡å¼€å…³é€Ÿåº¦ | æ—  | è¶…æ ‡é‡å‘å°„ |
| **ç¼“å­˜è°ƒåº¦** | 1-15ns | å…‰é€Ÿä¼ æ’­ | æå° | LRUæ›¿æ¢ |
| **å†…å­˜è°ƒåº¦** | 80ns | DRAMæ—¶åº | å° | é¢„å– |
| **åˆ†æ”¯è°ƒåº¦** | 4ns | æµæ°´çº¿æ·±åº¦ | ä¸­ç­‰ | TAGEé¢„æµ‹ |

---

## 8 æ‰¹åˆ¤æ€§æ€»ç»“

### 8.1 ç¡¬ä»¶è°ƒåº¦çš„å±€é™æ€§

**1. ç‰©ç†æé™çš„ä¸å¯é€¾è¶Šæ€§**ï¼š

**é—®é¢˜**ï¼šç¡¬ä»¶è°ƒåº¦å—ç‰©ç†çº¦æŸé™åˆ¶ï¼Œæ— æ³•æ— é™ä¼˜åŒ–ã€‚

**å½±å“**ï¼š

- æŒ‡ä»¤è°ƒåº¦å»¶è¿Ÿå—æ™¶ä½“ç®¡å¼€å…³é€Ÿåº¦é™åˆ¶
- ç¼“å­˜è°ƒåº¦å»¶è¿Ÿå—å…‰é€Ÿä¼ æ’­é™åˆ¶
- å†…å­˜è°ƒåº¦å»¶è¿Ÿå—DRAMæ—¶åºé™åˆ¶

**ç¼“è§£æªæ–½**ï¼š

- **å¼‚æ„è®¡ç®—**ï¼šä½¿ç”¨ä¸åŒå•å…ƒä¼˜åŒ–ä¸åŒå·¥ä½œè´Ÿè½½
- **è¿‘ä¼¼è®¡ç®—**ï¼šæ¥å—ä¸€å®šè¯¯å·®æ¢å–æ€§èƒ½
- **ä¸“ç”¨åŠ é€Ÿå™¨**ï¼šé’ˆå¯¹ç‰¹å®šå·¥ä½œè´Ÿè½½ä¼˜åŒ–

**2. åŠŸè€—å¢™çš„é™åˆ¶**ï¼š

**é—®é¢˜**ï¼šåŠŸè€—å¯†åº¦é™åˆ¶å¯¼è‡´æš—ç¡…æ•ˆåº”ï¼Œæ— æ³•åŒæ—¶æ¿€æ´»æ‰€æœ‰å•å…ƒã€‚

**å½±å“**ï¼š

- ä¸€åŠæ™¶ä½“ç®¡æ— æ³•åŒæ—¶ä½¿ç”¨
- æ€§èƒ½æå‡å—åŠŸè€—é™åˆ¶
- éœ€è¦åŠ¨æ€åŠŸè€—ç®¡ç†

**ç¼“è§£æªæ–½**ï¼š

- **å¼‚æ„æ ¸å¿ƒ**ï¼šP-core/E-coreç»„åˆ
- **åŠ¨æ€åŠŸè€—ç®¡ç†**ï¼šRAPLç­‰æŠ€æœ¯
- **ä¸“ç”¨åŠ é€Ÿå™¨**ï¼šNPUã€GPUç­‰

**3. å¤æ‚åº¦çš„å¢åŠ **ï¼š

**é—®é¢˜**ï¼šæ›´å¤æ‚çš„è°ƒåº¦å™¨å¢åŠ è®¾è®¡å¤æ‚åº¦ã€‚

**å½±å“**ï¼š

- è®¾è®¡æˆæœ¬å¢åŠ 
- éªŒè¯éš¾åº¦æé«˜
- åŠŸè€—å¢åŠ 

**ç¼“è§£æªæ–½**ï¼š

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¨¡å—åŒ–è°ƒåº¦å™¨è®¾è®¡
- **å½¢å¼åŒ–éªŒè¯**ï¼šä½¿ç”¨å½¢å¼åŒ–æ–¹æ³•éªŒè¯
- **å­¦ä¹ å‹è°ƒåº¦**ï¼šä½¿ç”¨æœºå™¨å­¦ä¹ ä¼˜åŒ–

### 8.2 2025å¹´ç¡¬ä»¶è°ƒåº¦è¶‹åŠ¿

**1. å¼‚æ„è®¡ç®—æˆä¸ºä¸»æµ**ï¼š

**è¶‹åŠ¿**ï¼šå¼‚æ„æ ¸å¿ƒï¼ˆP-core/E-core/NPUï¼‰æˆä¸ºä¸»æµã€‚

**æŠ€æœ¯**ï¼š

- **P-core**ï¼šé«˜æ€§èƒ½æ ¸å¿ƒ
- **E-core**ï¼šèƒ½æ•ˆæ ¸å¿ƒ
- **NPU**ï¼šç¥ç»ç½‘ç»œå¤„ç†å•å…ƒ

**ä¼˜åŠ¿**ï¼š

- å¹³è¡¡æ€§èƒ½å’Œèƒ½æ•ˆ
- é€‚åº”ä¸åŒå·¥ä½œè´Ÿè½½
- æé«˜èƒ½æ•ˆæ¯”

**æŒ‘æˆ˜**ï¼š

- è°ƒåº¦å¤æ‚åº¦å¢åŠ 
- è½¯ä»¶é€‚é…å›°éš¾
- æ€§èƒ½é¢„æµ‹å›°éš¾

**2. å­¦ä¹ å‹è°ƒåº¦**ï¼š

**è¶‹åŠ¿**ï¼šä½¿ç”¨æœºå™¨å­¦ä¹ ä¼˜åŒ–è°ƒåº¦å†³ç­–ã€‚

**æŠ€æœ¯**ï¼š

- **å¼ºåŒ–å­¦ä¹ **ï¼šå­¦ä¹ æœ€ä¼˜è°ƒåº¦ç­–ç•¥
- **ç¥ç»ç½‘ç»œ**ï¼šé¢„æµ‹åˆ†æ”¯æ–¹å‘
- **è‡ªé€‚åº”è°ƒåº¦**ï¼šæ ¹æ®å·¥ä½œè´Ÿè½½è‡ªé€‚åº”è°ƒæ•´

**ä¼˜åŠ¿**ï¼š

- æé«˜è°ƒåº¦æ•ˆç‡
- é€‚åº”åŠ¨æ€ç¯å¢ƒ
- ä¼˜åŒ–å¤æ‚åœºæ™¯

**æŒ‘æˆ˜**ï¼š

- è®­ç»ƒæˆæœ¬é«˜
- å¯è§£é‡Šæ€§å·®
- ç¡¬ä»¶æ”¯æŒæœ‰é™

**3. ä¸“ç”¨åŠ é€Ÿå™¨**ï¼š

**è¶‹åŠ¿**ï¼šä¸“ç”¨åŠ é€Ÿå™¨ï¼ˆNPUã€DPUç­‰ï¼‰æˆä¸ºä¸»æµã€‚

**æŠ€æœ¯**ï¼š

- **NPU**ï¼šç¥ç»ç½‘ç»œåŠ é€Ÿ
- **DPU**ï¼šæ•°æ®å¤„ç†åŠ é€Ÿ
- **FPGA**ï¼šå¯ç¼–ç¨‹åŠ é€Ÿ

**ä¼˜åŠ¿**ï¼š

- æ€§èƒ½æœ€ä¼˜
- èƒ½æ•ˆæ¯”é«˜
- ä¸“ç”¨ä¼˜åŒ–

**æŒ‘æˆ˜**ï¼š

- å¼€å‘æˆæœ¬é«˜
- ç”Ÿæ€ç³»ç»Ÿä¸æˆç†Ÿ
- æ ‡å‡†åŒ–å›°éš¾

## 9 è·¨é¢†åŸŸæ´å¯Ÿ

### 6.1 ç¡¬ä»¶è°ƒåº¦çš„ç‰©ç†æé™

**æ ¸å¿ƒå‘½é¢˜**ï¼šç¡¬ä»¶è°ƒåº¦å—ç‰©ç†çº¦æŸé™åˆ¶ï¼Œæ— æ³•æ— é™ä¼˜åŒ–ã€‚

**å»¶è¿Ÿåˆ†è§£**ï¼š

| **è°ƒåº¦ç±»å‹** | **å»¶è¿Ÿ** | **ç‰©ç†çº¦æŸ** | **ä¼˜åŒ–ç©ºé—´** |
|------------|---------|------------|------------|
| **æŒ‡ä»¤è°ƒåº¦** | 0.2ns | æ™¶ä½“ç®¡å¼€å…³é€Ÿåº¦ | æ—  |
| **ç¼“å­˜è°ƒåº¦** | 1-15ns | å…‰é€Ÿä¼ æ’­ | æå° |
| **å†…å­˜è°ƒåº¦** | 80ns | DRAMæ—¶åº | å° |
| **åˆ†æ”¯è°ƒåº¦** | 4ns | æµæ°´çº¿æ·±åº¦ | ä¸­ç­‰ |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **ç‰©ç†æé™çš„ä¸å¯é€¾è¶Šæ€§**ï¼šæŒ‡ä»¤è°ƒåº¦å»¶è¿Ÿå—**æ™¶ä½“ç®¡å¼€å…³é€Ÿåº¦é™åˆ¶**ï¼Œæ— æ³•çªç ´ã€‚

2. **ä¼˜åŒ–ç©ºé—´çš„å±‚çº§æ€§**ï¼šè¶Šåº•å±‚ï¼Œä¼˜åŒ–ç©ºé—´è¶Šå°ï¼Œå› ä¸º**å—ç‰©ç†é™åˆ¶**ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**å¼‚æ„è®¡ç®—**é€šè¿‡ä¸åŒå•å…ƒä¼˜åŒ–ä¸åŒè°ƒåº¦ï¼ŒæŒ‘æˆ˜ä¼ ç»Ÿé€šç”¨è®¾è®¡ã€‚

### 6.2 åŠŸè€—è°ƒåº¦çš„æš—ç¡…æ•ˆåº”

**æ ¸å¿ƒçŸ›ç›¾**ï¼šæ›´å¤šæ™¶ä½“ç®¡æä¾›æ€§èƒ½ï¼Œä½†æ— æ³•åŒæ—¶æ¿€æ´»ã€‚

**é‡åŒ–åˆ†æ**ï¼š

```text
7nmå·¥è‰º:
  - æ™¶ä½“ç®¡å¯†åº¦: 100M/mmÂ²
  - åŠŸè€—å¯†åº¦: 200W/cmÂ²
  - å¯åŒæ—¶æ¿€æ´»: 50%
  - æš—ç¡…æ¯”ä¾‹: 50%

ç»“æœ: ä¸€åŠæ™¶ä½“ç®¡æ— æ³•åŒæ—¶ä½¿ç”¨
```

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **æš—ç¡…çš„å¿…ç„¶æ€§**ï¼šåŠŸè€—å¯†åº¦é™åˆ¶å¯¼è‡´**æš—ç¡…æ•ˆåº”**ï¼Œæ— æ³•é¿å…ã€‚

2. **å¼‚æ„è®¡ç®—çš„å¿…è¦æ€§**ï¼šé€šè¿‡å¼‚æ„å•å…ƒï¼ˆP-core/E-core/NPUï¼‰**ä¼˜åŒ–ä¸åŒå·¥ä½œè´Ÿè½½**ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**åŠ¨æ€åŠŸè€—ç®¡ç†**ï¼ˆå¦‚RAPLï¼‰æ ¹æ®å·¥ä½œè´Ÿè½½åŠ¨æ€è°ƒæ•´ï¼ŒæŒ‘æˆ˜é™æ€è®¾è®¡ã€‚

---

## 10 å¤šç»´åº¦å¯¹æ¯”

### 7.1 ç¡¬ä»¶è°ƒåº¦å±‚æ¬¡å¯¹æ¯”

| **å±‚æ¬¡** | **è°ƒåº¦å•å…ƒ** | **å»¶è¿Ÿ** | **ç­–ç•¥** | **ç‰©ç†çº¦æŸ** | **ä¼˜åŒ–éš¾åº¦** |
|---------|------------|---------|---------|------------|------------|
| **æŒ‡ä»¤è°ƒåº¦** | å¾®æŒ‡ä»¤ | 0.2ns | æ•°æ®ä¾èµ– | æ™¶ä½“ç®¡é€Ÿåº¦ | â­â­â­â­â­ |
| **ç¼“å­˜è°ƒåº¦** | Cacheè¡Œ | 1-15ns | LRU/MESIF | å…‰é€Ÿä¼ æ’­ | â­â­â­â­ |
| **å†…å­˜è°ƒåº¦** | Bank/Rank | 80ns | FR-FCFS | DRAMæ—¶åº | â­â­â­ |
| **åˆ†æ”¯è°ƒåº¦** | åˆ†æ”¯æŒ‡ä»¤ | 4ns | TAGEé¢„æµ‹ | æµæ°´çº¿æ·±åº¦ | â­â­â­ |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **å»¶è¿Ÿçš„å±‚çº§æ€§**ï¼šä»æŒ‡ä»¤åˆ°å†…å­˜ï¼Œå»¶è¿Ÿ**å¢åŠ çº¦400å€**ï¼Œç¬¦åˆæŠ½è±¡æ³„æ¼å®šå¾‹ã€‚

2. **ä¼˜åŒ–éš¾åº¦çš„å·®å¼‚**ï¼šæŒ‡ä»¤è°ƒåº¦ä¼˜åŒ–éš¾åº¦æœ€é«˜ï¼Œå› ä¸º**å—ç‰©ç†é™åˆ¶**ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**å­¦ä¹ å‹è°ƒåº¦**ï¼ˆå¦‚åˆ†æ”¯é¢„æµ‹ï¼‰ä½¿ç”¨æœºå™¨å­¦ä¹ ï¼ŒæŒ‘æˆ˜ä¼ ç»Ÿå¯å‘å¼ã€‚

### 7.2 åŠŸè€—ç®¡ç†ç­–ç•¥å¯¹æ¯”

| **ç­–ç•¥** | **åŠŸè€—é™ä½** | **æ€§èƒ½æŸå¤±** | **å®ç°å¤æ‚åº¦** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|------------|--------------|------------|
| **åŠ¨æ€è°ƒé¢‘** | 30% | 10% | â­â­ | é€šç”¨ç³»ç»Ÿ |
| **æ—¶é’Ÿé—¨æ§** | 50% | 0% | â­â­â­ | ç©ºé—²çŠ¶æ€ |
| **ç”µæºé—¨æ§** | 90% | å”¤é†’å»¶è¿Ÿ | â­â­â­â­ | æ·±åº¦ä¼‘çœ  |
| **RAPLé™åˆ¶** | å¯é…ç½® | å¯é…ç½® | â­â­â­ | æœåŠ¡å™¨ |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **åŠŸè€—vsæ€§èƒ½**ï¼šæ›´æ¿€è¿›çš„åŠŸè€—ç®¡ç†**åŠŸè€—é™ä½æ›´å¤š**ï¼Œä½†**æ€§èƒ½æŸå¤±æ›´å¤§**ã€‚

2. **å”¤é†’å»¶è¿Ÿçš„ä»£ä»·**ï¼šç”µæºé—¨æ§åŠŸè€—æœ€ä½ï¼Œä½†**å”¤é†’å»¶è¿Ÿé«˜**ï¼Œä¸é€‚åˆå®æ—¶ç³»ç»Ÿã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**è‡ªé€‚åº”åŠŸè€—ç®¡ç†**æ ¹æ®å·¥ä½œè´Ÿè½½åŠ¨æ€è°ƒæ•´ï¼ŒæŒ‘æˆ˜é™æ€ç­–ç•¥ã€‚

---

## 11 ç›¸å…³ä¸»é¢˜

- [1.1 CPUå¾®æ¶æ„](../01_CPUç¡¬ä»¶å±‚/01.1_CPUå¾®æ¶æ„.md) - å¾®æ¶æ„åŸºç¡€
- [6.2 OSå†…æ ¸è°ƒåº¦](./06.2_OSå†…æ ¸è°ƒåº¦.md) - OSè°ƒåº¦å®ç°
- [6.5 è°ƒåº¦æ¨¡å‹ç»Ÿä¸€ç†è®º](./06.5_è°ƒåº¦æ¨¡å‹ç»Ÿä¸€ç†è®º.md) - è°ƒåº¦ç†è®ºæ¡†æ¶
- [9.2 ç¡¬ä»¶-OSæ˜ å°„è¯æ˜](../09_å½¢å¼åŒ–ç†è®ºä¸è¯æ˜/09.2_ç¡¬ä»¶-OSæ˜ å°„è¯æ˜.md) - ç¡¬ä»¶è°ƒåº¦è¯æ˜
- [ä¸»æ–‡æ¡£ï¼šè°ƒåº¦æ¨¡å‹](../schedule_formal_view.md#å½¢å¼åŒ–ç†è®ºæ¡†æ¶) - å®Œæ•´ç†è®ºæ¡†æ¶

---

**æœ€åæ›´æ–°**: 2025-01-XX
