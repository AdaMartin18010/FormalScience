# 04.2 反馈控制循环

> **所属主题**: 04_动态交互模型
> **最后更新**: 2025-01-27

## 📋 目录

- [04.2 反馈控制循环](#042-反馈控制循环)
  - [📋 目录](#-目录)
  - [1. 通用控制方程](#1-通用控制方程)
  - [2. PID控制器](#2-pid控制器)
  - [3. 三层系统控制参数](#3-三层系统控制参数)
  - [4. 相关文档](#4-相关文档)

---

## 1. 通用控制方程

```text
e(t) = r(t) - y(t)          # 误差信号
u(t) = Kₚe(t) + Kᵢ∫e(τ)dτ   # PID控制器输出
ξ(t+1) = f(ξ(t), u(t), w(t)) # 状态更新
```

其中：

- `e(t)`: 误差信号
- `r(t)`: 参考值（期望值）
- `y(t)`: 实际输出值
- `u(t)`: 控制量
- `Kₚ`: 比例系数
- `Kᵢ`: 积分系数
- `ξ(t)`: 系统状态
- `w(t)`: 扰动

---

## 2. PID控制器

**PID控制器组成**：

- **P (比例项)**: $Kₚe(t)$ - 当前误差的响应
- **I (积分项)**: $Kᵢ∫e(τ)dτ$ - 历史误差累积
- **D (微分项)**: $K_d\frac{de(t)}{dt}$ - 误差变化率（可选）

**完整PID方程**：
$$
u(t) = Kₚe(t) + Kᵢ\int_0^t e(\tau)d\tau + K_d\frac{de(t)}{dt}
$$

---

## 3. 三层系统控制参数

| 层级 | 参考值 r(t) | 实际输出 y(t) | 控制量 u(t) |
|------|------------|--------------|------------|
| OS层 | CPU配额 | 实际使用率 | 优先级调整 |
| VM层 | SLA指标 | 性能计数器 | 资源热迁移 |
| 容器层 | 请求速率 | QPS | 副本数伸缩 |

**控制目标**：

- **OS层**: 维持CPU使用率在配额范围内
- **VM层**: 满足SLA要求（可用性、性能）
- **容器层**: 维持QPS在目标范围内

---

## 4. 相关文档

- [返回 FormalModel 目录](../README.md)
- [04_动态交互模型 README](README.md)
- [04.1_状态转移系统](04.1_状态转移系统.md)
- [07_监控与反馈](../07_监控与反馈/README.md)

---

**最后更新**: 2025-01-27
