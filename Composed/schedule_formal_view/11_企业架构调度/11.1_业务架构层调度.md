# 11.1 ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦

> **ä¸»é¢˜**: 11. ä¼ä¸šæ¶æ„è°ƒåº¦ - 11.1 ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦
> **è¦†ç›–**: BPMNæµç¨‹å¼•æ“ã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€Sagaè¡¥å¿æ¨¡å¼ã€ä¸šåŠ¡è§„åˆ™å¼•æ“

---

## ğŸ“‹ ç›®å½•

- [11.1 ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦](#111-ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1 ä¸šåŠ¡æµç¨‹ç¼–æ’ï¼ˆBPMNï¼‰çš„å½¢å¼åŒ–è°ƒåº¦æ¨¡å‹](#1-ä¸šåŠ¡æµç¨‹ç¼–æ’bpmnçš„å½¢å¼åŒ–è°ƒåº¦æ¨¡å‹)
    - [1.1 ä¸šåŠ¡æ´»åŠ¨å®šä¹‰](#11-ä¸šåŠ¡æ´»åŠ¨å®šä¹‰)
    - [1.2 è°ƒåº¦çº¦æŸå½¢å¼åŒ–](#12-è°ƒåº¦çº¦æŸå½¢å¼åŒ–)
    - [1.3 Petriç½‘å»ºæ¨¡](#13-petriç½‘å»ºæ¨¡)
  - [2 äº‹ä»¶é©±åŠ¨æ¶æ„è°ƒåº¦](#2-äº‹ä»¶é©±åŠ¨æ¶æ„è°ƒåº¦)
    - [2.1 äº‹ä»¶æº¯æºæ¨¡å‹](#21-äº‹ä»¶æº¯æºæ¨¡å‹)
    - [2.2 äº‹ä»¶è°ƒåº¦ç­–ç•¥](#22-äº‹ä»¶è°ƒåº¦ç­–ç•¥)
  - [3 Sagaé•¿äº‹åŠ¡è°ƒåº¦åŸç†](#3-sagaé•¿äº‹åŠ¡è°ƒåº¦åŸç†)
    - [3.1 è¡¥å¿äº‹åŠ¡æ¨¡å‹](#31-è¡¥å¿äº‹åŠ¡æ¨¡å‹)
    - [3.2 æ­£ç¡®æ€§æ¡ä»¶](#32-æ­£ç¡®æ€§æ¡ä»¶)
    - [3.3 è°ƒåº¦ç®—æ³•](#33-è°ƒåº¦ç®—æ³•)
  - [4 ä¸šåŠ¡è§„åˆ™å¼•æ“è°ƒåº¦](#4-ä¸šåŠ¡è§„åˆ™å¼•æ“è°ƒåº¦)
    - [4.1 è§„åˆ™åŒ¹é…ç®—æ³•](#41-è§„åˆ™åŒ¹é…ç®—æ³•)
    - [4.2 è§„åˆ™æ‰§è¡Œè°ƒåº¦](#42-è§„åˆ™æ‰§è¡Œè°ƒåº¦)
  - [5 æˆ˜ç•¥ç›®æ ‡å¯¹é½è°ƒåº¦](#5-æˆ˜ç•¥ç›®æ ‡å¯¹é½è°ƒåº¦)
    - [5.1 OKRâ†’KPIâ†’ä»»åŠ¡åˆ†è§£](#51-okrkpiä»»åŠ¡åˆ†è§£)
    - [5.2 ç›®æ ‡è°ƒåº¦æ¨¡å‹](#52-ç›®æ ‡è°ƒåº¦æ¨¡å‹)
  - [6 å®è·µæ¡ˆä¾‹](#6-å®è·µæ¡ˆä¾‹)
    - [6.1 ç”µå•†è®¢å•å¤„ç†æµç¨‹ä¼˜åŒ–æ¡ˆä¾‹](#61-ç”µå•†è®¢å•å¤„ç†æµç¨‹ä¼˜åŒ–æ¡ˆä¾‹)
    - [6.2 Sagaåˆ†å¸ƒå¼äº‹åŠ¡å®è·µæ¡ˆä¾‹](#62-sagaåˆ†å¸ƒå¼äº‹åŠ¡å®è·µæ¡ˆä¾‹)
    - [6.3 ä¸šåŠ¡è§„åˆ™å¼•æ“å®è·µæ¡ˆä¾‹](#63-ä¸šåŠ¡è§„åˆ™å¼•æ“å®è·µæ¡ˆä¾‹)
  - [7 æ‰¹åˆ¤æ€§æ€»ç»“](#7-æ‰¹åˆ¤æ€§æ€»ç»“)
    - [7.1 ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦çš„å±€é™æ€§](#71-ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦çš„å±€é™æ€§)
    - [7.2 2025å¹´ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦è¶‹åŠ¿](#72-2025å¹´ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦è¶‹åŠ¿)
  - [8 è·¨é¢†åŸŸæ´å¯Ÿ](#8-è·¨é¢†åŸŸæ´å¯Ÿ)
    - [8.1 ä¸šåŠ¡æµç¨‹ä¸è®¡ç®—æµç¨‹çš„ç»Ÿä¸€](#81-ä¸šåŠ¡æµç¨‹ä¸è®¡ç®—æµç¨‹çš„ç»Ÿä¸€)
    - [8.2 ä¸šåŠ¡è§„åˆ™ä¸ç¨‹åºé€»è¾‘çš„æ˜ å°„](#82-ä¸šåŠ¡è§„åˆ™ä¸ç¨‹åºé€»è¾‘çš„æ˜ å°„)
    - [8.3 ä¸šåŠ¡æµç¨‹ä¸é¡¹ç›®ç®¡ç†çš„å…³ç³»](#83-ä¸šåŠ¡æµç¨‹ä¸é¡¹ç›®ç®¡ç†çš„å…³ç³»)
    - [8.4 ä¸šåŠ¡æ¶æ„ä¸ç³»ç»Ÿæ¶æ„çš„ç»Ÿä¸€](#84-ä¸šåŠ¡æ¶æ„ä¸ç³»ç»Ÿæ¶æ„çš„ç»Ÿä¸€)
  - [9 å¤šç»´åº¦å¯¹æ¯”](#9-å¤šç»´åº¦å¯¹æ¯”)
    - [9.1 ä¸šåŠ¡æµç¨‹ç¼–æ’å·¥å…·å¯¹æ¯”](#91-ä¸šåŠ¡æµç¨‹ç¼–æ’å·¥å…·å¯¹æ¯”)
    - [9.2 Sagaäº‹åŠ¡æ¨¡å¼å¯¹æ¯”](#92-sagaäº‹åŠ¡æ¨¡å¼å¯¹æ¯”)
    - [9.3 è§„åˆ™åŒ¹é…ç®—æ³•å¯¹æ¯”](#93-è§„åˆ™åŒ¹é…ç®—æ³•å¯¹æ¯”)
    - [9.4 äº‹ä»¶è°ƒåº¦ç­–ç•¥å¯¹æ¯”](#94-äº‹ä»¶è°ƒåº¦ç­–ç•¥å¯¹æ¯”)
  - [10 ç›¸å…³ä¸»é¢˜](#10-ç›¸å…³ä¸»é¢˜)

---

## 1 ä¸šåŠ¡æµç¨‹ç¼–æ’ï¼ˆBPMNï¼‰çš„å½¢å¼åŒ–è°ƒåº¦æ¨¡å‹

### 1.1 ä¸šåŠ¡æ´»åŠ¨å®šä¹‰

**å®šç†11.1ï¼ˆä¸šåŠ¡æµç¨‹å½¢å¼åŒ–å®šä¹‰ï¼‰**ï¼š

ä¸šåŠ¡æµç¨‹ $B$ å¯ä»¥å½¢å¼åŒ–å®šä¹‰ä¸ºå…­å…ƒç»„ï¼š

$$
B = (A, E, G, F, R, D)
$$

å…¶ä¸­ï¼š

- $A = \{a_1, a_2, ..., a_n\}$ ä¸ºåŸå­æ´»åŠ¨é›†åˆ
- $E \subseteq A \times A$ ä¸ºæ§åˆ¶æµè¾¹é›†åˆ
- $G: A \to \{And, Or, Xor, None\}$ ä¸ºç½‘å…³ç±»å‹å‡½æ•°
- $F: A \to \mathbb{R}^+$ ä¸ºæ´»åŠ¨æ‰§è¡Œæˆæœ¬å‡½æ•°
- $R: A \to 2^{\mathcal{R}}$ ä¸ºæ´»åŠ¨èµ„æºéœ€æ±‚å‡½æ•°ï¼ˆ$\mathcal{R}$ ä¸ºèµ„æºç±»å‹é›†åˆï¼‰
- $D: A \to \mathbb{R}^+$ ä¸ºæ´»åŠ¨æ‰§è¡Œæ—¶é—´å‡½æ•°

**æ´»åŠ¨ç±»å‹åˆ†ç±»**ï¼š

1. **ä»»åŠ¡æ´»åŠ¨ï¼ˆTaskï¼‰**ï¼šåŸå­ä¸šåŠ¡æ“ä½œ
   - ç”¨æˆ·ä»»åŠ¡ï¼ˆUser Taskï¼‰ï¼šéœ€è¦äººå·¥å‚ä¸
   - æœåŠ¡ä»»åŠ¡ï¼ˆService Taskï¼‰ï¼šè‡ªåŠ¨æ‰§è¡Œ
   - è„šæœ¬ä»»åŠ¡ï¼ˆScript Taskï¼‰ï¼šæ‰§è¡Œè„šæœ¬

2. **ç½‘å…³æ´»åŠ¨ï¼ˆGatewayï¼‰**ï¼š
   - **Andç½‘å…³**ï¼šå¹¶è¡Œåˆ†æ”¯/åˆå¹¶
   - **Orç½‘å…³**ï¼šæ¡ä»¶åˆ†æ”¯/åˆå¹¶
   - **Xorç½‘å…³**ï¼šäº’æ–¥åˆ†æ”¯/åˆå¹¶

3. **äº‹ä»¶æ´»åŠ¨ï¼ˆEventï¼‰**ï¼š
   - å¼€å§‹äº‹ä»¶ï¼ˆStart Eventï¼‰
   - ç»“æŸäº‹ä»¶ï¼ˆEnd Eventï¼‰
   - ä¸­é—´äº‹ä»¶ï¼ˆIntermediate Eventï¼‰

**ä¸šåŠ¡æµç¨‹ç¤ºä¾‹**ï¼š

```text
è®¢å•å¤„ç†æµç¨‹ï¼š
1. æ¥æ”¶è®¢å•ï¼ˆUser Taskï¼‰
2. éªŒè¯åº“å­˜ï¼ˆService Taskï¼‰
   â”œâ”€ Andç½‘å…³ï¼ˆå¹¶è¡Œï¼‰
   â”œâ”€ æ‰£å‡åº“å­˜ï¼ˆService Taskï¼‰
   â””â”€ ç”Ÿæˆå‘è´§å•ï¼ˆService Taskï¼‰
3. æ”¯ä»˜å¤„ç†ï¼ˆService Taskï¼‰
   â”œâ”€ Xorç½‘å…³ï¼ˆæ¡ä»¶åˆ†æ”¯ï¼‰
   â”œâ”€ æ”¯ä»˜æˆåŠŸ â†’ å‘è´§ï¼ˆService Taskï¼‰
   â””â”€ æ”¯ä»˜å¤±è´¥ â†’ å–æ¶ˆè®¢å•ï¼ˆService Taskï¼‰
4. è®¢å•å®Œæˆï¼ˆEnd Eventï¼‰
```

### 1.2 è°ƒåº¦çº¦æŸå½¢å¼åŒ–

**å®šç†11.2ï¼ˆä¸šåŠ¡æµç¨‹è°ƒåº¦çº¦æŸï¼‰**ï¼š

ä¸šåŠ¡æµç¨‹è°ƒåº¦éœ€è¦æ»¡è¶³ä»¥ä¸‹çº¦æŸï¼š

**1. æ§åˆ¶ä¾èµ–çº¦æŸ**ï¼š

å¯¹äºæ§åˆ¶æµè¾¹ $(a_i, a_j) \in E$ï¼Œæ´»åŠ¨ $a_j$ å¿…é¡»åœ¨æ´»åŠ¨ $a_i$ å®Œæˆåæ‰èƒ½å¼€å§‹ï¼š

$$
\text{Start}(a_j) \ge \text{End}(a_i) = \text{Start}(a_i) + D(a_i)
$$

**2. ç½‘å…³çº¦æŸ**ï¼š

**Andç½‘å…³ï¼ˆå¹¶è¡Œï¼‰**ï¼š

å¯¹äºAndç½‘å…³ $g$ï¼Œæ‰€æœ‰è¾“å…¥æ´»åŠ¨å®Œæˆåï¼Œæ‰€æœ‰è¾“å‡ºæ´»åŠ¨åŒæ—¶å¼€å§‹ï¼š

$$
\forall a_i \in \text{Input}(g), \forall a_j \in \text{Output}(g): \text{Start}(a_j) = \max_{a_i \in \text{Input}(g)} \text{End}(a_i)
$$

**Xorç½‘å…³ï¼ˆäº’æ–¥ï¼‰**ï¼š

å¯¹äºXorç½‘å…³ $g$ï¼Œåªæœ‰ä¸€ä¸ªè¾“å‡ºæ´»åŠ¨ä¼šè¢«æ‰§è¡Œï¼š

$$
\sum_{a_j \in \text{Output}(g)} x_{a_j} = 1, \quad x_{a_j} \in \{0, 1\}
$$

å…¶ä¸­ $x_{a_j} = 1$ è¡¨ç¤ºæ´»åŠ¨ $a_j$ è¢«æ‰§è¡Œã€‚

**3. èµ„æºçº¦æŸ**ï¼š

åœ¨ä»»ä½•æ—¶åˆ» $t$ï¼Œæ­£åœ¨è¿è¡Œçš„æ´»åŠ¨æ‰€éœ€çš„èµ„æºæ€»é‡ä¸è¶…è¿‡å¯ç”¨èµ„æºï¼š

$$
\sum_{a \in \text{Running}(t)} \sum_{r \in R(a)} \text{Resource}(a, r) \le \text{Resource}_{total}(r), \quad \forall r \in \mathcal{R}
$$

å…¶ä¸­ $\text{Running}(t) = \{a: \text{Start}(a) \le t < \text{End}(a)\}$ æ˜¯æ—¶åˆ» $t$ æ­£åœ¨è¿è¡Œçš„æ´»åŠ¨é›†åˆã€‚

**4. æ—¶é—´çº¦æŸ**ï¼š

ä¸šåŠ¡æµç¨‹å¿…é¡»åœ¨æˆªæ­¢æ—¶é—´ $D$ å‰å®Œæˆï¼š

$$
\text{End}(a_{end}) = \max_{a \in A} \text{End}(a) \le D
$$

**5. ä¼˜å…ˆçº§çº¦æŸ**ï¼š

é«˜ä¼˜å…ˆçº§æ´»åŠ¨ä¼˜å…ˆè°ƒåº¦ï¼š

$$
\text{Priority}(a_i) > \text{Priority}(a_j) \implies \text{Start}(a_i) \le \text{Start}(a_j)
$$

**è°ƒåº¦ä¼˜åŒ–ç›®æ ‡**ï¼š

æœ€å°åŒ–ä¸šåŠ¡æµç¨‹æ€»æ‰§è¡Œæ—¶é—´ï¼š

$$
\min \text{End}(a_{end}) = \min \max_{a \in A} \text{End}(a)
$$

æˆ–æœ€å°åŒ–æ€»æˆæœ¬ï¼š

$$
\min \sum_{a \in A} F(a) \times x_a
$$

å…¶ä¸­ $x_a \in \{0, 1\}$ è¡¨ç¤ºæ´»åŠ¨ $a$ æ˜¯å¦è¢«æ‰§è¡Œã€‚

### 1.3 Petriç½‘å»ºæ¨¡

**å®šç†11.3ï¼ˆBPMNåˆ°Petriç½‘çš„è½¬æ¢ï¼‰**ï¼š

BPMNæµç¨‹å¯ä»¥è½¬æ¢ä¸ºæœ‰è‰²Petriç½‘ $N = (P, T, F, C, M_0)$ï¼Œå…¶ä¸­ï¼š

- **åº“æ‰€ï¼ˆPlaceï¼‰** $P$ï¼šå¯¹åº”ä¸šåŠ¡çŠ¶æ€ï¼ˆå¦‚"å¾…å®¡æ‰¹"ã€"å·²æ”¯ä»˜"ï¼‰
- **å˜è¿ï¼ˆTransitionï¼‰** $T$ï¼šå¯¹åº”æ´»åŠ¨æ‰§è¡Œ
- **æµå…³ç³»ï¼ˆFlowï¼‰** $F \subseteq (P \times T) \cup (T \times P)$ï¼šè¿æ¥åº“æ‰€å’Œå˜è¿
- **é¢œè‰²é›†ï¼ˆColorï¼‰** $C$ï¼šç”¨äºåŒºåˆ†ä¸åŒçš„æµç¨‹å®ä¾‹
- **åˆå§‹æ ‡è®°ï¼ˆInitial Markingï¼‰** $M_0$ï¼šåˆå§‹çŠ¶æ€

**è½¬æ¢è§„åˆ™**ï¼š

**1. æ´»åŠ¨è½¬æ¢**ï¼š

æ¯ä¸ªBPMNæ´»åŠ¨ $a$ è½¬æ¢ä¸ºPetriç½‘ä¸­çš„å˜è¿ $t_a$ï¼Œå‰åå„æ·»åŠ ä¸€ä¸ªåº“æ‰€ï¼š

$$
a \to (p_{a,in}, t_a, p_{a,out})
$$

**2. ç½‘å…³è½¬æ¢**ï¼š

**Andç½‘å…³**ï¼š

å¹¶è¡Œåˆ†æ”¯è½¬æ¢ä¸ºå¤šä¸ªå¹¶è¡Œçš„å˜è¿ï¼š

```text
Andç½‘å…³ï¼š
  p_in â†’ t1 â†’ p1
       â†’ t2 â†’ p2
       â†’ t3 â†’ p3
```

**Xorç½‘å…³**ï¼š

äº’æ–¥åˆ†æ”¯è½¬æ¢ä¸ºé€‰æ‹©ç»“æ„ï¼š

```text
Xorç½‘å…³ï¼š
  p_in â†’ t1 â†’ p1 (æ¡ä»¶1)
       â†’ t2 â†’ p2 (æ¡ä»¶2)
       â†’ t3 â†’ p3 (æ¡ä»¶3)
```

**3. çŠ¶æ€å¯è¾¾æ€§**ï¼š

Petriç½‘ä¸­çš„çŠ¶æ€å¯è¾¾æ€§å®šä¹‰ä¸ºï¼š

$$
M_0 \xrightarrow{\sigma} M
$$

è¡¨ç¤ºä»åˆå§‹æ ‡è®° $M_0$ é€šè¿‡å˜è¿åºåˆ— $\sigma$ å¯ä»¥åˆ°è¾¾æ ‡è®° $M$ã€‚

**4. æ­»é”æ£€æµ‹**ï¼š

ä¸šåŠ¡æµç¨‹å­˜åœ¨æ­»é”å½“ä¸”ä»…å½“ï¼š

$$
\exists p \in P: M(p) = 0 \land \forall t \in p^\bullet, \exists p' \in \bullet t: M(p') = 0
$$

å…¶ä¸­ $p^\bullet$ è¡¨ç¤ºåº“æ‰€ $p$ çš„è¾“å‡ºå˜è¿é›†åˆï¼Œ$\bullet t$ è¡¨ç¤ºå˜è¿ $t$ çš„è¾“å…¥åº“æ‰€é›†åˆã€‚

**æ­»é”æ£€æµ‹ç®—æ³•**ï¼š

```python
def detect_deadlock(petri_net, marking):
    """æ£€æµ‹Petriç½‘æ˜¯å¦å­˜åœ¨æ­»é”"""
    visited = set()
    stack = [marking]

    while stack:
        current = stack.pop()
        if current in visited:
            continue
        visited.add(current)

        # æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¯è§¦å‘çš„å˜è¿
        enabled = get_enabled_transitions(petri_net, current)
        if not enabled:
            # æ²¡æœ‰å¯è§¦å‘çš„å˜è¿ï¼Œå¯èƒ½å­˜åœ¨æ­»é”
            if not is_final_marking(current):
                return True  # æ­»é”

        # ç»§ç»­æ¢ç´¢å¯è¾¾çŠ¶æ€
        for transition in enabled:
            next_marking = fire_transition(petri_net, current, transition)
            stack.append(next_marking)

    return False  # æ— æ­»é”
```

**é‡åŒ–åˆ†æ**ï¼šä¸åŒæµç¨‹å¤æ‚åº¦çš„æ­»é”æ£€æµ‹æ—¶é—´

| **æ´»åŠ¨æ•°** | **ç½‘å…³æ•°** | **çŠ¶æ€ç©ºé—´å¤§å°** | **æ­»é”æ£€æµ‹æ—¶é—´** | **å¤æ‚åº¦** |
|-----------|-----------|---------------|---------------|-----------|
| **10** | **2** | 100 | 0.1s | $O(2^n)$ |
| **20** | **5** | 10,000 | 1s | $O(2^n)$ |
| **50** | **10** | 10^6 | 100s | $O(2^n)$ |
| **100** | **20** | 10^9 | ä¸å¯è¡Œ | $O(2^n)$ |

**å…³é”®æ´å¯Ÿ**ï¼šæ­»é”æ£€æµ‹æ˜¯NP-hardé—®é¢˜ï¼Œå¯¹äºå¤æ‚æµç¨‹éœ€è¦ä½¿ç”¨è¿‘ä¼¼ç®—æ³•æˆ–å¯å‘å¼æ–¹æ³•ã€‚

---

## 2 äº‹ä»¶é©±åŠ¨æ¶æ„è°ƒåº¦

### 2.1 äº‹ä»¶æº¯æºæ¨¡å‹

**å®šç†11.4ï¼ˆäº‹ä»¶æº¯æºçŠ¶æ€é‡å»ºï¼‰**ï¼š

ç³»ç»ŸçŠ¶æ€å¯ä»¥é€šè¿‡äº‹ä»¶åºåˆ—é‡å»ºï¼š

$$
\text{State}(t) = \text{Fold}(\text{State}_0, \text{Events}[0..t])
$$

å…¶ä¸­ï¼š

- $\text{State}_0$ï¼šåˆå§‹çŠ¶æ€
- $\text{Events}[0..t]$ï¼šä»æ—¶é—´0åˆ°æ—¶é—´tçš„æ‰€æœ‰äº‹ä»¶
- $\text{Fold}$ï¼šæŠ˜å å‡½æ•°ï¼Œå°†äº‹ä»¶åºåˆ—è½¬æ¢ä¸ºçŠ¶æ€

**äº‹ä»¶å®šä¹‰**ï¼š

äº‹ä»¶ $e$ å®šä¹‰ä¸ºï¼š

$$
e = (\text{EventID}, \text{EventType}, \text{Timestamp}, \text{AggregateID}, \text{Payload}, \text{Metadata})
$$

å…¶ä¸­ï¼š

- $\text{EventID}$ï¼šäº‹ä»¶å”¯ä¸€æ ‡è¯†
- $\text{EventType}$ï¼šäº‹ä»¶ç±»å‹ï¼ˆå¦‚OrderCreatedã€PaymentCompletedï¼‰
- $\text{Timestamp}$ï¼šäº‹ä»¶å‘ç”Ÿæ—¶é—´
- $\text{AggregateID}$ï¼šèšåˆæ ¹ID
- $\text{Payload}$ï¼šäº‹ä»¶æ•°æ®
- $\text{Metadata}$ï¼šå…ƒæ•°æ®ï¼ˆå¦‚ç‰ˆæœ¬å·ã€å› æœå…³ç³»ï¼‰

**äº‹ä»¶å­˜å‚¨æ¨¡å‹**ï¼š

äº‹ä»¶å­˜å‚¨ï¼ˆEvent Storeï¼‰æŒ‰æ—¶é—´é¡ºåºå­˜å‚¨æ‰€æœ‰äº‹ä»¶ï¼š

$$
\text{EventStore} = \{e_1, e_2, ..., e_n\}, \quad \text{Timestamp}(e_i) \le \text{Timestamp}(e_{i+1})
$$

**çŠ¶æ€é‡å»ºç®—æ³•**ï¼š

```python
def rebuild_state(event_store, aggregate_id, timestamp):
    """ä»äº‹ä»¶å­˜å‚¨é‡å»ºèšåˆçŠ¶æ€"""
    state = initial_state()
    events = filter_events(event_store, aggregate_id, timestamp)

    for event in events:
        state = apply_event(state, event)

    return state

def apply_event(state, event):
    """åº”ç”¨äº‹ä»¶åˆ°çŠ¶æ€"""
    handler = get_event_handler(event.type)
    return handler(state, event.payload)
```

**å¿«ç…§ä¼˜åŒ–**ï¼š

ä¸ºäº†åŠ é€ŸçŠ¶æ€é‡å»ºï¼Œå¯ä»¥å®šæœŸåˆ›å»ºå¿«ç…§ï¼š

$$
\text{Snapshot}(t) = (\text{State}(t), \text{LastEventID})
$$

é‡å»ºçŠ¶æ€æ—¶ï¼Œä»æœ€è¿‘çš„å¿«ç…§å¼€å§‹ï¼š

$$
\text{State}(t) = \text{Fold}(\text{Snapshot}(t_0).\text{State}, \text{Events}[t_0..t])
$$

å…¶ä¸­ $t_0$ æ˜¯æœ€è¿‘å¿«ç…§çš„æ—¶é—´ã€‚

**é‡åŒ–åˆ†æ**ï¼šå¿«ç…§ä¼˜åŒ–çš„æ€§èƒ½æå‡

| **äº‹ä»¶æ•°** | **æ— å¿«ç…§é‡å»ºæ—¶é—´** | **æœ‰å¿«ç…§é‡å»ºæ—¶é—´** | **åŠ é€Ÿæ¯”** |
|-----------|-----------------|-----------------|-----------|
| **1,000** | 10ms | 10ms | 1x |
| **10,000** | 100ms | 20ms | 5x |
| **100,000** | 1s | 50ms | 20x |
| **1,000,000** | 10s | 200ms | 50x |

### 2.2 äº‹ä»¶è°ƒåº¦ç­–ç•¥

**å®šç†11.5ï¼ˆäº‹ä»¶è°ƒåº¦ç­–ç•¥ï¼‰**ï¼š

äº‹ä»¶è°ƒåº¦éœ€è¦ä¿è¯ä»¥ä¸‹æ€§è´¨ï¼š

**1. å› æœä¸€è‡´æ€§ï¼ˆCausal Consistencyï¼‰**ï¼š

å¦‚æœäº‹ä»¶ $e_i$ å› æœä¾èµ–äº‹ä»¶ $e_j$ï¼ˆ$e_i \to e_j$ï¼‰ï¼Œåˆ™ $e_j$ å¿…é¡»åœ¨ $e_i$ ä¹‹å‰å¤„ç†ï¼š

$$
e_i \to e_j \implies \text{Process}(e_j) \text{ before } \text{Process}(e_i)
$$

**2. é¡ºåºä¸€è‡´æ€§ï¼ˆSequential Consistencyï¼‰**ï¼š

åŒä¸€èšåˆçš„æ‰€æœ‰äº‹ä»¶æŒ‰æ—¶é—´æˆ³é¡ºåºå¤„ç†ï¼š

$$
\text{AggregateID}(e_i) = \text{AggregateID}(e_j) \land \text{Timestamp}(e_i) < \text{Timestamp}(e_j) \implies \text{Process}(e_i) \text{ before } \text{Process}(e_j)
$$

**äº‹ä»¶ä¼˜å…ˆçº§è®¡ç®—**ï¼š

$$
\text{Priority}(e) = w_1 \cdot \text{EventTypePriority}(e) + w_2 \cdot \text{BusinessValue}(e) + w_3 \cdot \text{Urgency}(e)
$$

å…¶ä¸­ï¼š

- $\text{EventTypePriority}(e)$ï¼šäº‹ä»¶ç±»å‹ä¼˜å…ˆçº§ï¼ˆå¦‚æ”¯ä»˜äº‹ä»¶ä¼˜å…ˆçº§é«˜äºæ—¥å¿—äº‹ä»¶ï¼‰
- $\text{BusinessValue}(e)$ï¼šä¸šåŠ¡ä»·å€¼ï¼ˆå¦‚è®¢å•é‡‘é¢ï¼‰
- $\text{Urgency}(e)$ï¼šç´§æ€¥ç¨‹åº¦ï¼ˆå¦‚è¶…æ—¶æ—¶é—´ï¼‰

**äº‹ä»¶å¤„ç†é¡ºåºç­–ç•¥**ï¼š

**1. FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰**ï¼š

æŒ‰äº‹ä»¶åˆ°è¾¾é¡ºåºå¤„ç†ï¼š

$$
\text{Process}(e_i) \text{ before } \text{Process}(e_j) \iff \text{ArrivalTime}(e_i) < \text{ArrivalTime}(e_j)
$$

**ä¼˜ç‚¹**ï¼šç®€å•ï¼Œä¿è¯é¡ºåº
**ç¼ºç‚¹**ï¼šå¯èƒ½é˜»å¡é«˜ä¼˜å…ˆçº§äº‹ä»¶

**2. ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼š

æŒ‰ä¼˜å…ˆçº§å¤„ç†ï¼š

$$
\text{Process}(e_i) \text{ before } \text{Process}(e_j) \iff \text{Priority}(e_i) > \text{Priority}(e_j)
$$

**ä¼˜ç‚¹**ï¼šé«˜ä¼˜å…ˆçº§äº‹ä»¶ä¼˜å…ˆå¤„ç†
**ç¼ºç‚¹**ï¼šå¯èƒ½è¿åå› æœä¸€è‡´æ€§

**3. å› æœåºï¼ˆCausal Orderï¼‰**ï¼š

ä¿è¯å› æœä¸€è‡´æ€§ï¼š

$$
\text{Process}(e_i) \text{ before } \text{Process}(e_j) \iff e_i \to e_j \lor (\text{Timestamp}(e_i) < \text{Timestamp}(e_j) \land \neg(e_j \to e_i))
$$

**ä¼˜ç‚¹**ï¼šä¿è¯å› æœä¸€è‡´æ€§
**ç¼ºç‚¹**ï¼šå®ç°å¤æ‚ï¼Œå¯èƒ½å»¶è¿Ÿå¤„ç†

**4. æ··åˆç­–ç•¥**ï¼š

ç»“åˆä¼˜å…ˆçº§å’Œå› æœåºï¼š

$$
\text{Process}(e_i) \text{ before } \text{Process}(e_j) \iff
\begin{cases}
e_i \to e_j & \text{ï¼ˆå› æœä¾èµ–ä¼˜å…ˆï¼‰} \\
\text{Priority}(e_i) > \text{Priority}(e_j) & \text{ï¼ˆå¦åˆ™æŒ‰ä¼˜å…ˆçº§ï¼‰}
\end{cases}
$$

**äº‹ä»¶è°ƒåº¦ç®—æ³•**ï¼š

```python
class EventScheduler:
    def __init__(self):
        self.event_queue = PriorityQueue()
        self.processed_events = set()
        self.causal_graph = CausalGraph()

    def schedule_event(self, event):
        """è°ƒåº¦äº‹ä»¶"""
        # æ£€æŸ¥å› æœä¾èµ–
        dependencies = self.causal_graph.get_dependencies(event)
        if all(dep in self.processed_events for dep in dependencies):
            # æ‰€æœ‰ä¾èµ–å·²å¤„ç†ï¼Œå¯ä»¥è°ƒåº¦
            priority = self.calculate_priority(event)
            self.event_queue.put((priority, event))
        else:
            # ç­‰å¾…ä¾èµ–å¤„ç†å®Œæˆ
            self.pending_events[event] = dependencies

    def process_next(self):
        """å¤„ç†ä¸‹ä¸€ä¸ªäº‹ä»¶"""
        if not self.event_queue.empty():
            priority, event = self.event_queue.get()
            self.process_event(event)
            self.processed_events.add(event.id)

            # æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†äº‹ä»¶å¯ä»¥è°ƒåº¦
            self.check_pending_events()
```

**é‡åŒ–åˆ†æ**ï¼šä¸åŒè°ƒåº¦ç­–ç•¥çš„æ€§èƒ½å¯¹æ¯”

| **è°ƒåº¦ç­–ç•¥** | **ååé‡** | **å»¶è¿Ÿ** | **å› æœä¸€è‡´æ€§** | **å…¬å¹³æ€§** |
|------------|-----------|---------|--------------|-----------|
| **FIFO** | é«˜ | ä¸­ | æ˜¯ | é«˜ |
| **ä¼˜å…ˆçº§é˜Ÿåˆ—** | é«˜ | ä½ | å¦ | ä½ |
| **å› æœåº** | ä¸­ | é«˜ | æ˜¯ | ä¸­ |
| **æ··åˆç­–ç•¥** | ä¸­ | ä¸­ | æ˜¯ | ä¸­ |

---

## 3 Sagaé•¿äº‹åŠ¡è°ƒåº¦åŸç†

### 3.1 è¡¥å¿äº‹åŠ¡æ¨¡å‹

**å®šç†11.6ï¼ˆSagaäº‹åŠ¡æ¨¡å‹ï¼‰**ï¼š

Sagaäº‹åŠ¡ $T$ å®šä¹‰ä¸ºæœ‰åºçš„å­äº‹åŠ¡åºåˆ—ï¼š

$$
T = (t_1, t_2, ..., t_n)
$$

æ¯ä¸ªå­äº‹åŠ¡ $t_i$ åŒ…å«ï¼š

- **æ­£å‘æ“ä½œ** $f_i: S_i \to S_{i+1}$ï¼šæ‰§è¡Œä¸šåŠ¡æ“ä½œ
- **è¡¥å¿æ“ä½œ** $c_i: S_{i+1} \to S_i$ï¼šæ’¤é”€æ­£å‘æ“ä½œ
- **çŠ¶æ€** $S_i$ï¼šäº‹åŠ¡æ‰§è¡Œåˆ°ç¬¬ $i$ æ­¥æ—¶çš„ç³»ç»ŸçŠ¶æ€

**Sagaæ‰§è¡Œæ¨¡å¼**ï¼š

**1. ç¼–æ’æ¨¡å¼ï¼ˆOrchestrationï¼‰**ï¼š

ä¸­å¤®åè°ƒå™¨ï¼ˆOrchestratorï¼‰è´Ÿè´£åè°ƒæ‰€æœ‰å­äº‹åŠ¡ï¼š

```text
Orchestrator:
  1. è°ƒç”¨ t1.forward()
  2. è°ƒç”¨ t2.forward()
  3. å¦‚æœå¤±è´¥ï¼Œè°ƒç”¨ t2.compensate(), t1.compensate()
```

**2. ååŒæ¨¡å¼ï¼ˆChoreographyï¼‰**ï¼š

æ¯ä¸ªå­äº‹åŠ¡è´Ÿè´£åè°ƒåç»­äº‹åŠ¡ï¼š

```text
t1:
  - æ‰§è¡Œ forward()
  - å‘å¸ƒäº‹ä»¶ Event1
  - ç›‘å¬è¡¥å¿äº‹ä»¶

t2:
  - ç›‘å¬ Event1
  - æ‰§è¡Œ forward()
  - å‘å¸ƒäº‹ä»¶ Event2
  - å¦‚æœå¤±è´¥ï¼Œå‘å¸ƒè¡¥å¿äº‹ä»¶
```

**è¡¥å¿æ“ä½œè®¾è®¡åŸåˆ™**ï¼š

**1. å¹‚ç­‰æ€§**ï¼š

è¡¥å¿æ“ä½œå¿…é¡»æ˜¯å¹‚ç­‰çš„ï¼š

$$
c_i \circ c_i = c_i
$$

**2. å¯äº¤æ¢æ€§**ï¼š

å¦‚æœä¸¤ä¸ªå­äº‹åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œå®ƒä»¬çš„è¡¥å¿æ“ä½œä¹Ÿåº”è¯¥å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼š

$$
f_i \circ f_j = f_j \circ f_i \implies c_i \circ c_j = c_j \circ c_i
$$

**3. å¯ç»„åˆæ€§**ï¼š

è¡¥å¿æ“ä½œçš„ç»„åˆåº”è¯¥ç­‰äºæ•´ä½“è¡¥å¿ï¼š

$$
c_n \circ c_{n-1} \circ ... \circ c_1 = c_{1..n}
$$

### 3.2 æ­£ç¡®æ€§æ¡ä»¶

**å®šç†11.7ï¼ˆSagaæ­£ç¡®æ€§æ¡ä»¶ï¼‰**ï¼š

Sagaäº‹åŠ¡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼š

**1. å¯è¡¥å¿æ€§ï¼ˆCompensabilityï¼‰**ï¼š

æ¯ä¸ªæ­£å‘æ“ä½œéƒ½æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œï¼Œä¸”è¡¥å¿æ“ä½œèƒ½å¤Ÿå®Œå…¨æ’¤é”€æ­£å‘æ“ä½œï¼š

$$
c_i \circ f_i = \text{id}_{S_i}
$$

**2. äº¤æ¢æ€§ï¼ˆCommutativityï¼‰**ï¼š

å¦‚æœä¸¤ä¸ªå­äº‹åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸å½±å“æœ€ç»ˆç»“æœï¼š

$$
\forall i < j, \text{Independent}(t_i, t_j) \implies f_i \circ f_j = f_j \circ f_i
$$

**3. æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual Consistencyï¼‰**ï¼š

å¦‚æœäº‹åŠ¡åœ¨æŸä¸ªå­äº‹åŠ¡ $t_k$ å¤„å¤±è´¥ï¼Œå­˜åœ¨è¡¥å¿åºåˆ—ä½¿å¾—ç³»ç»Ÿå›åˆ°ä¸€è‡´çŠ¶æ€ï¼š

$$
\forall t_k \in \text{Aborted}, \exists \sigma = (c_k, c_{k-1}, ..., c_1): \sigma(S_k) \in \text{ValidStates}
$$

å…¶ä¸­ $\text{ValidStates}$ æ˜¯ç³»ç»Ÿçš„ä¸€è‡´çŠ¶æ€é›†åˆã€‚

**4. åŸå­æ€§ï¼ˆAtomicityï¼‰**ï¼š

Sagaäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨è¡¥å¿ï¼š

$$
\text{Result}(T) \in \{\text{Success}, \text{Compensated}\}
$$

**æ­£ç¡®æ€§è¯æ˜æ€è·¯**ï¼š

1. **å½’çº³åŸºç¡€**ï¼šå•ä¸ªå­äº‹åŠ¡æ»¡è¶³å¯è¡¥å¿æ€§
2. **å½’çº³æ­¥éª¤**ï¼šå‡è®¾å‰ $k-1$ ä¸ªå­äº‹åŠ¡æ»¡è¶³æ­£ç¡®æ€§ï¼Œè¯æ˜åŠ å…¥ç¬¬ $k$ ä¸ªå­äº‹åŠ¡åä»æ»¡è¶³
3. **å¤±è´¥å¤„ç†**ï¼šå¦‚æœç¬¬ $k$ ä¸ªå­äº‹åŠ¡å¤±è´¥ï¼Œé€šè¿‡è¡¥å¿åºåˆ—å›åˆ°ä¸€è‡´çŠ¶æ€

### 3.3 è°ƒåº¦ç®—æ³•

**ç®—æ³•11.1ï¼ˆSagaç¼–æ’è°ƒåº¦ç®—æ³•ï¼‰**ï¼š

```python
class SagaOrchestrator:
    def __init__(self, tasks):
        self.tasks = tasks
        self.executed = []
        self.state = initial_state()

    def execute(self):
        """æ‰§è¡ŒSagaäº‹åŠ¡"""
        try:
            for i, task in enumerate(self.tasks):
                # æ‰§è¡Œæ­£å‘æ“ä½œ
                self.state = task.forward(self.state)
                self.executed.append(task)

            return SagaResult.SUCCESS

        except Exception as e:
            # æ‰§è¡Œè¡¥å¿æ“ä½œ
            self.compensate()
            return SagaResult.FAILED

    def compensate(self):
        """è¡¥å¿å·²æ‰§è¡Œçš„å­äº‹åŠ¡"""
        for task in reversed(self.executed):
            try:
                self.state = task.compensate(self.state)
            except Exception as e:
                # è¡¥å¿å¤±è´¥ï¼Œè®°å½•æ—¥å¿—å¹¶ç»§ç»­
                log_compensation_error(task, e)
```

**ç®—æ³•11.2ï¼ˆSagaååŒè°ƒåº¦ç®—æ³•ï¼‰**ï¼š

```python
class SagaChoreography:
    def __init__(self, tasks):
        self.tasks = tasks
        self.event_bus = EventBus()
        self.state = {}

        # æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
        for i, task in enumerate(self.tasks):
            if i > 0:
                # ç›‘å¬å‰ä¸€ä¸ªä»»åŠ¡çš„äº‹ä»¶
                self.event_bus.subscribe(
                    f"task_{i-1}_completed",
                    lambda event: self.execute_task(i, event)
                )

            # ç›‘å¬è¡¥å¿äº‹ä»¶
            self.event_bus.subscribe(
                f"task_{i}_failed",
                lambda event: self.compensate_task(i, event)
            )

    def execute_task(self, index, event):
        """æ‰§è¡Œä»»åŠ¡"""
        task = self.tasks[index]
        try:
            result = task.forward(event.state)
            self.event_bus.publish(f"task_{index}_completed", result)
        except Exception as e:
            self.event_bus.publish(f"task_{index}_failed", e)

    def compensate_task(self, index, event):
        """è¡¥å¿ä»»åŠ¡"""
        task = self.tasks[index]
        try:
            task.compensate(event.state)
            if index > 0:
                # è§¦å‘å‰ä¸€ä¸ªä»»åŠ¡çš„è¡¥å¿
                self.event_bus.publish(f"task_{index-1}_failed", event)
        except Exception as e:
            log_compensation_error(task, e)
```

**å¹¶è¡ŒSagaè°ƒåº¦**ï¼š

å¯¹äºå¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„å­äº‹åŠ¡ï¼Œä½¿ç”¨å¹¶è¡Œè°ƒåº¦ï¼š

```python
def execute_parallel_saga(tasks, dependencies):
    """æ‰§è¡Œå¹¶è¡ŒSagaäº‹åŠ¡"""
    executed = []
    failed = []

    # æ„å»ºä¾èµ–å›¾
    graph = build_dependency_graph(tasks, dependencies)

    # æ‹“æ‰‘æ’åº
    execution_order = topological_sort(graph)

    for level in execution_order:
        # å¹¶è¡Œæ‰§è¡ŒåŒä¸€å±‚çš„ä»»åŠ¡
        results = parallel_execute([tasks[i] for i in level])

        for i, result in zip(level, results):
            if result.success:
                executed.append(tasks[i])
            else:
                failed.append(tasks[i])
                # è¡¥å¿å·²æ‰§è¡Œçš„ä»»åŠ¡
                compensate_all(executed)
                return SagaResult.FAILED

    return SagaResult.SUCCESS
```

**é‡åŒ–åˆ†æ**ï¼šä¸åŒSagaæ¨¡å¼çš„æ€§èƒ½å¯¹æ¯”

| **æ¨¡å¼** | **å»¶è¿Ÿ** | **ååé‡** | **å¤æ‚åº¦** | **å¯ç»´æŠ¤æ€§** |
|---------|---------|-----------|-----------|------------|
| **ç¼–æ’æ¨¡å¼** | é«˜ï¼ˆä¸²è¡Œï¼‰ | ä½ | ä½ | é«˜ |
| **ååŒæ¨¡å¼** | ä½ï¼ˆå¹¶è¡Œï¼‰ | é«˜ | é«˜ | ä¸­ |
| **æ··åˆæ¨¡å¼** | ä¸­ | ä¸­ | ä¸­ | ä¸­ |

---

## 4 ä¸šåŠ¡è§„åˆ™å¼•æ“è°ƒåº¦

### 4.1 è§„åˆ™åŒ¹é…ç®—æ³•

**å®šç†11.8ï¼ˆä¸šåŠ¡è§„åˆ™å½¢å¼åŒ–å®šä¹‰ï¼‰**ï¼š

ä¸šåŠ¡è§„åˆ™ $r$ å®šä¹‰ä¸ºï¼š

$$
r = (Condition, Action, Priority, Metadata)
$$

å…¶ä¸­ï¼š

- $Condition$ï¼šè§„åˆ™æ¡ä»¶ï¼ˆå¦‚ `order.amount > 1000`ï¼‰
- $Action$ï¼šè§„åˆ™åŠ¨ä½œï¼ˆå¦‚ `applyDiscount(10%)`ï¼‰
- $Priority$ï¼šè§„åˆ™ä¼˜å…ˆçº§
- $Metadata$ï¼šå…ƒæ•°æ®ï¼ˆå¦‚è§„åˆ™IDã€ç‰ˆæœ¬å·ï¼‰

**è§„åˆ™åŒ¹é…é—®é¢˜**ï¼š

ç»™å®šäº‹å®é›†åˆ $F = \{f_1, f_2, ..., f_m\}$ å’Œè§„åˆ™é›†åˆ $R = \{r_1, r_2, ..., r_n\}$ï¼Œæ‰¾å‡ºæ‰€æœ‰åŒ¹é…çš„è§„åˆ™ï¼š

$$
\text{MatchedRules} = \{r \in R: \text{Evaluate}(r.Condition, F) = \text{True}\}
$$

**Reteç®—æ³•**ï¼š

Reteç®—æ³•ä½¿ç”¨ç½‘ç»œç»“æ„é«˜æ•ˆåŒ¹é…è§„åˆ™ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚

**Reteç½‘ç»œç»“æ„**ï¼š

1. **AlphaèŠ‚ç‚¹**ï¼šåŒ¹é…å•ä¸ªæ¡ä»¶
2. **BetaèŠ‚ç‚¹**ï¼šåŒ¹é…å¤šä¸ªæ¡ä»¶çš„ç»„åˆ
3. **ç»ˆç«¯èŠ‚ç‚¹**ï¼šåŒ¹é…å®Œæ•´çš„è§„åˆ™

**Reteç®—æ³•å¤æ‚åº¦**ï¼š

- **æ—¶é—´å¤æ‚åº¦**ï¼š$O(R \times F)$ï¼Œå…¶ä¸­ $R$ ä¸ºè§„åˆ™æ•°ï¼Œ$F$ ä¸ºäº‹å®æ•°
- **ç©ºé—´å¤æ‚åº¦**ï¼š$O(R \times F)$ï¼Œå­˜å‚¨åŒ¹é…ç»“æœ

**Reteç®—æ³•ä¼˜åŒ–**ï¼š

1. **èŠ‚ç‚¹å…±äº«**ï¼šå…±äº«ç›¸åŒæ¡ä»¶çš„èŠ‚ç‚¹
2. **å¢é‡åŒ¹é…**ï¼šåªåŒ¹é…å˜åŒ–çš„äº‹å®
3. **ç´¢å¼•ä¼˜åŒ–**ï¼šä½¿ç”¨ç´¢å¼•åŠ é€Ÿæ¡ä»¶åŒ¹é…

**ç®—æ³•11.3ï¼ˆReteè§„åˆ™åŒ¹é…ç®—æ³•ï¼‰**ï¼š

```python
class ReteNetwork:
    def __init__(self, rules):
        self.alpha_nodes = {}
        self.beta_nodes = {}
        self.terminal_nodes = {}
        self.build_network(rules)

    def build_network(self, rules):
        """æ„å»ºReteç½‘ç»œ"""
        for rule in rules:
            # æ„å»ºAlphaèŠ‚ç‚¹
            alpha_path = []
            for condition in rule.conditions:
                alpha_node = self.get_or_create_alpha_node(condition)
                alpha_path.append(alpha_node)

            # æ„å»ºBetaèŠ‚ç‚¹
            beta_node = self.build_beta_nodes(alpha_path)

            # è¿æ¥ç»ˆç«¯èŠ‚ç‚¹
            terminal_node = TerminalNode(rule)
            beta_node.add_child(terminal_node)

    def match(self, facts):
        """åŒ¹é…è§„åˆ™"""
        matched_rules = []

        # ä»AlphaèŠ‚ç‚¹å¼€å§‹åŒ¹é…
        for fact in facts:
            for condition, alpha_node in self.alpha_nodes.items():
                if alpha_node.match(fact):
                    alpha_node.activate(fact)

        # æ”¶é›†åŒ¹é…çš„è§„åˆ™
        for terminal_node in self.terminal_nodes.values():
            if terminal_node.is_activated():
                matched_rules.append(terminal_node.rule)

        return matched_rules
```

**å…¶ä»–è§„åˆ™åŒ¹é…ç®—æ³•**ï¼š

**1. çº¿æ€§åŒ¹é…**ï¼š

é¡ºåºæ£€æŸ¥æ¯ä¸ªè§„åˆ™ï¼š

```python
def linear_match(rules, facts):
    matched = []
    for rule in rules:
        if evaluate_condition(rule.condition, facts):
            matched.append(rule)
    return matched
```

**å¤æ‚åº¦**ï¼š$O(R \times F)$ï¼Œç®€å•ä½†æ•ˆç‡ä½

**2. å†³ç­–æ ‘åŒ¹é…**ï¼š

ä½¿ç”¨å†³ç­–æ ‘ç»„ç»‡è§„åˆ™ï¼š

```python
def decision_tree_match(tree, facts):
    node = tree.root
    while not node.is_leaf():
        condition = node.condition
        if evaluate(condition, facts):
            node = node.left_child
        else:
            node = node.right_child
    return node.rules
```

**å¤æ‚åº¦**ï¼š$O(\log R \times F)$ï¼Œé€‚åˆè§„åˆ™æ•°å¾ˆå¤šçš„æƒ…å†µ

**é‡åŒ–åˆ†æ**ï¼šä¸åŒè§„åˆ™åŒ¹é…ç®—æ³•å¯¹æ¯”

| **ç®—æ³•** | **æ—¶é—´å¤æ‚åº¦** | **ç©ºé—´å¤æ‚åº¦** | **é€‚ç”¨åœºæ™¯** |
|---------|--------------|--------------|------------|
| **çº¿æ€§åŒ¹é…** | $O(R \times F)$ | $O(1)$ | è§„åˆ™æ•°å°‘ï¼ˆ<100ï¼‰ |
| **Reteç®—æ³•** | $O(R \times F)$ | $O(R \times F)$ | è§„åˆ™æ•°ä¸­ç­‰ï¼ˆ100-10000ï¼‰ |
| **å†³ç­–æ ‘** | $O(\log R \times F)$ | $O(R)$ | è§„åˆ™æ•°å¤šï¼ˆ>10000ï¼‰ |

### 4.2 è§„åˆ™æ‰§è¡Œè°ƒåº¦

**å®šç†11.9ï¼ˆè§„åˆ™æ‰§è¡Œè°ƒåº¦ï¼‰**ï¼š

è§„åˆ™æ‰§è¡Œè°ƒåº¦éœ€è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š

1. **è§„åˆ™å†²çª**ï¼šå¤šä¸ªè§„åˆ™åŒæ—¶åŒ¹é…ï¼Œéœ€è¦é€‰æ‹©æ‰§è¡Œå“ªäº›è§„åˆ™
2. **æ‰§è¡Œé¡ºåº**ï¼šç¡®å®šè§„åˆ™çš„æ‰§è¡Œé¡ºåº
3. **å‰¯ä½œç”¨ç®¡ç†**ï¼šç®¡ç†è§„åˆ™æ‰§è¡Œäº§ç”Ÿçš„å‰¯ä½œç”¨

**è§„åˆ™ä¼˜å…ˆçº§è®¡ç®—**ï¼š

$$
\text{Priority}(r) = w_1 \cdot \text{Salience}(r) + w_2 \cdot \text{Recency}(r) + w_3 \cdot \text{Refractoriness}(r) + w_4 \cdot \text{Specificity}(r)
$$

å…¶ä¸­ï¼š

- $\text{Salience}(r)$ï¼šè§„åˆ™æ˜¾å¼ä¼˜å…ˆçº§ï¼ˆç”¨æˆ·å®šä¹‰ï¼‰
- $\text{Recency}(r)$ï¼šè§„åˆ™æœ€è¿‘åŒ¹é…æ—¶é—´ï¼ˆæœ€è¿‘åŒ¹é…çš„è§„åˆ™ä¼˜å…ˆçº§æ›´é«˜ï¼‰
- $\text{Refractoriness}(r)$ï¼šè§„åˆ™æŠ‘åˆ¶æ€§ï¼ˆé˜²æ­¢è§„åˆ™é‡å¤æ‰§è¡Œï¼‰
- $\text{Specificity}(r)$ï¼šè§„åˆ™ç‰¹å¼‚æ€§ï¼ˆæ¡ä»¶æ›´å…·ä½“çš„è§„åˆ™ä¼˜å…ˆçº§æ›´é«˜ï¼‰

**è§„åˆ™å†²çªè§£å†³ç­–ç•¥**ï¼š

**1. ä¼˜å…ˆçº§ç­–ç•¥**ï¼š

æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œè§„åˆ™ï¼š

$$
\text{Execute}(r_i) \text{ before } \text{Execute}(r_j) \iff \text{Priority}(r_i) > \text{Priority}(r_j)
$$

**2. ç‰¹å¼‚æ€§ç­–ç•¥**ï¼š

æ›´å…·ä½“çš„è§„åˆ™ä¼˜å…ˆæ‰§è¡Œï¼š

$$
\text{Specificity}(r) = \frac{|\text{Conditions}(r)|}{\text{MaxConditions}}
$$

**3. é¡ºåºç­–ç•¥**ï¼š

æŒ‰è§„åˆ™å®šä¹‰é¡ºåºæ‰§è¡Œã€‚

**4. å…¨éƒ¨æ‰§è¡Œç­–ç•¥**ï¼š

æ‰§è¡Œæ‰€æœ‰åŒ¹é…çš„è§„åˆ™ï¼ˆå¯èƒ½å¯¼è‡´å†²çªï¼‰ã€‚

**è§„åˆ™æ‰§è¡Œæ¨¡å¼**ï¼š

**1. ç«‹å³æ‰§è¡Œï¼ˆImmediateï¼‰**ï¼š

è§„åˆ™åŒ¹é…åç«‹å³æ‰§è¡Œï¼š

```python
def immediate_execution(matched_rules, facts):
    sorted_rules = sort_by_priority(matched_rules)
    for rule in sorted_rules:
        rule.action.execute(facts)
```

**2. å»¶è¿Ÿæ‰§è¡Œï¼ˆDeferredï¼‰**ï¼š

è§„åˆ™åŒ¹é…åå»¶è¿Ÿæ‰§è¡Œï¼Œæ‰¹é‡å¤„ç†ï¼š

```python
def deferred_execution(matched_rules, facts):
    execution_queue = PriorityQueue()
    for rule in matched_rules:
        execution_queue.put((rule.priority, rule))

    while not execution_queue.empty():
        priority, rule = execution_queue.get()
        rule.action.execute(facts)
```

**3. æ¡ä»¶æ‰§è¡Œï¼ˆConditionalï¼‰**ï¼š

æ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦æ‰§è¡Œï¼š

```python
def conditional_execution(matched_rules, facts):
    for rule in matched_rules:
        if rule.should_execute(facts):
            rule.action.execute(facts)
```

**è§„åˆ™æ‰§è¡Œè°ƒåº¦ç®—æ³•**ï¼š

```python
class RuleEngine:
    def __init__(self, rules):
        self.rules = rules
        self.rete_network = ReteNetwork(rules)
        self.execution_history = []

    def execute(self, facts):
        """æ‰§è¡Œè§„åˆ™"""
        # åŒ¹é…è§„åˆ™
        matched_rules = self.rete_network.match(facts)

        # è§£å†³å†²çª
        execution_order = self.resolve_conflicts(matched_rules)

        # æ‰§è¡Œè§„åˆ™
        for rule in execution_order:
            try:
                result = rule.action.execute(facts)
                self.execution_history.append((rule, result))

                # æ›´æ–°äº‹å®ï¼ˆè§„åˆ™å¯èƒ½ä¿®æ”¹äº‹å®ï¼‰
                facts = update_facts(facts, result)

            except Exception as e:
                handle_rule_error(rule, e)

    def resolve_conflicts(self, rules):
        """è§£å†³è§„åˆ™å†²çª"""
        # æŒ‰ä¼˜å…ˆçº§æ’åº
        sorted_rules = sorted(rules, key=lambda r: r.priority, reverse=True)

        # è¿‡æ»¤å†²çªè§„åˆ™
        execution_list = []
        for rule in sorted_rules:
            if not conflicts_with(rule, execution_list):
                execution_list.append(rule)

        return execution_list
```

**é‡åŒ–åˆ†æ**ï¼šä¸åŒè§„åˆ™æ‰§è¡Œç­–ç•¥çš„æ€§èƒ½å¯¹æ¯”

| **æ‰§è¡Œç­–ç•¥** | **æ‰§è¡Œæ—¶é—´** | **è§„åˆ™å†²çª** | **å¯é¢„æµ‹æ€§** |
|------------|------------|------------|------------|
| **ç«‹å³æ‰§è¡Œ** | ä½ | é«˜ | ä½ |
| **å»¶è¿Ÿæ‰§è¡Œ** | ä¸­ | ä¸­ | ä¸­ |
| **æ¡ä»¶æ‰§è¡Œ** | é«˜ | ä½ | é«˜ |

---

## 5 æˆ˜ç•¥ç›®æ ‡å¯¹é½è°ƒåº¦

### 5.1 OKRâ†’KPIâ†’ä»»åŠ¡åˆ†è§£

**å®šç†11.10ï¼ˆç›®æ ‡å±‚æ¬¡ç»“æ„ï¼‰**ï¼š

ä¼ä¸šç›®æ ‡å¯ä»¥åˆ†è§£ä¸ºå±‚æ¬¡ç»“æ„ï¼š

$$
\text{OKR} \to \text{KPI} \to \text{ä»»åŠ¡} \to \text{æ‰§è¡Œ}
$$

å…¶ä¸­ï¼š

- **OKRï¼ˆObjectives and Key Resultsï¼‰**ï¼šç›®æ ‡å’Œå…³é”®ç»“æœ
- **KPIï¼ˆKey Performance Indicatorsï¼‰**ï¼šå…³é”®ç»©æ•ˆæŒ‡æ ‡
- **ä»»åŠ¡ï¼ˆTaskï¼‰**ï¼šå…·ä½“æ‰§è¡Œä»»åŠ¡
- **æ‰§è¡Œï¼ˆExecutionï¼‰**ï¼šä»»åŠ¡æ‰§è¡Œ

**ç›®æ ‡åˆ†è§£æ¨¡å‹**ï¼š

$$
\text{OKR} = \{O_1, O_2, ..., O_n\}
$$

æ¯ä¸ªç›®æ ‡ $O_i$ åŒ…å«ï¼š

$$
O_i = (\text{Objective}, \text{KeyResults}, \text{Owner}, \text{Deadline})
$$

å…¶ä¸­ $\text{KeyResults} = \{KR_1, KR_2, ..., KR_m\}$ æ˜¯å…³é”®ç»“æœé›†åˆã€‚

**KPIå®šä¹‰**ï¼š

æ¯ä¸ªå…³é”®ç»“æœ $KR_j$ å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªKPIï¼š

$$
KR_j \to \{KPI_{j,1}, KPI_{j,2}, ..., KPI_{j,k}\}
$$

KPIå®šä¹‰ä¸ºï¼š

$$
KPI = (\text{Metric}, \text{Target}, \text{Current}, \text{Trend})
$$

**ä»»åŠ¡åˆ†è§£**ï¼š

æ¯ä¸ªKPIå¯ä»¥åˆ†è§£ä¸ºå¤šä¸ªä»»åŠ¡ï¼š

$$
KPI_{j,k} \to \{Task_1, Task_2, ..., Task_l\}
$$

ä»»åŠ¡å®šä¹‰ä¸ºï¼š

$$
Task = (\text{Description}, \text{Owner}, \text{Effort}, \text{Deadline}, \text{Dependencies})
$$

**ç›®æ ‡å¯¹é½åº¦**ï¼š

ä»»åŠ¡å¯¹KPIçš„è´¡çŒ®åº¦ï¼š

$$
\text{Contribution}(Task, KPI) = w_1 \cdot \text{DirectImpact} + w_2 \cdot \text{IndirectImpact}
$$

ç›®æ ‡å¯¹é½åº¦ï¼š

$$
\text{Alignment} = \frac{\sum_{Task} \text{Contribution}(Task, KPI)}{\sum_{KPI} \text{Target}(KPI)}
$$

**ç›®æ ‡åˆ†è§£ç¤ºä¾‹**ï¼š

```text
OKR: æå‡ç”¨æˆ·æ»¡æ„åº¦
  â”œâ”€ KR1: NPSä»50æå‡è‡³70
  â”‚   â”œâ”€ KPI1: NPSåˆ†æ•°
  â”‚   â”‚   â”œâ”€ Task1: ç”¨æˆ·è°ƒç ”ï¼ˆè´¡çŒ®åº¦ï¼š30%ï¼‰
  â”‚   â”‚   â”œâ”€ Task2: äº§å“ä¼˜åŒ–ï¼ˆè´¡çŒ®åº¦ï¼š50%ï¼‰
  â”‚   â”‚   â””â”€ Task3: å®¢æœæ”¹è¿›ï¼ˆè´¡çŒ®åº¦ï¼š20%ï¼‰
  â”‚   â””â”€ KPI2: ç”¨æˆ·æŠ•è¯‰ç‡
  â”‚       â”œâ”€ Task4: æŠ•è¯‰å¤„ç†ä¼˜åŒ–ï¼ˆè´¡çŒ®åº¦ï¼š60%ï¼‰
  â”‚       â””â”€ Task5: é¢„é˜²æ€§æªæ–½ï¼ˆè´¡çŒ®åº¦ï¼š40%ï¼‰
  â””â”€ KR2: ç”¨æˆ·ç•™å­˜ç‡ä»60%æå‡è‡³80%
      â””â”€ KPI3: 30æ—¥ç•™å­˜ç‡
          â”œâ”€ Task6: æ–°ç”¨æˆ·å¼•å¯¼ï¼ˆè´¡çŒ®åº¦ï¼š40%ï¼‰
          â””â”€ Task7: ä¸ªæ€§åŒ–æ¨èï¼ˆè´¡çŒ®åº¦ï¼š60%ï¼‰
```

### 5.2 ç›®æ ‡è°ƒåº¦æ¨¡å‹

**å®šç†11.11ï¼ˆç›®æ ‡è°ƒåº¦å‡½æ•°ï¼‰**ï¼š

ä»»åŠ¡ $t$ è¢«è°ƒåº¦å½“ä¸”ä»…å½“ï¼š

$$
\text{Schedule}(t) \iff \text{ContributesTo}(t, KPI) \land \text{ResourceAvailable}(t) \land \text{DependenciesSatisfied}(t) \land \text{DeadlineFeasible}(t)
$$

å…¶ä¸­ï¼š

- $\text{ContributesTo}(t, KPI)$ï¼šä»»åŠ¡å¯¹KPIæœ‰è´¡çŒ®
- $\text{ResourceAvailable}(t)$ï¼šä»»åŠ¡æ‰€éœ€èµ„æºå¯ç”¨
- $\text{DependenciesSatisfied}(t)$ï¼šä»»åŠ¡ä¾èµ–å·²æ»¡è¶³
- $\text{DeadlineFeasible}(t)$ï¼šä»»åŠ¡å¯ä»¥åœ¨æˆªæ­¢æ—¶é—´å‰å®Œæˆ

**ç›®æ ‡è°ƒåº¦ä¼˜åŒ–**ï¼š

æœ€å¤§åŒ–ç›®æ ‡å¯¹é½åº¦ï¼š

$$
\max \sum_{t \in \text{Scheduled}} \text{Contribution}(t, KPI)
$$

çº¦æŸæ¡ä»¶ï¼š

1. **èµ„æºçº¦æŸ**ï¼š

    $$
    \sum_{t \in \text{Scheduled}(t)} \text{Resource}(t) \le \text{Resource}_{total}
    $$

2. **æ—¶é—´çº¦æŸ**ï¼š

    $$
    \text{End}(t) \le \text{Deadline}(t), \quad \forall t \in \text{Scheduled}
    $$

3. **ä¾èµ–çº¦æŸ**ï¼š

    $$
    t_i \text{ depends on } t_j \implies \text{End}(t_j) \le \text{Start}(t_i)
    $$

**ç›®æ ‡è°ƒåº¦ç®—æ³•**ï¼š

```python
class GoalScheduler:
    def __init__(self, okrs, resources):
        self.okrs = okrs
        self.resources = resources
        self.scheduled_tasks = []

    def schedule(self):
        """è°ƒåº¦ä»»åŠ¡ä»¥æœ€å¤§åŒ–ç›®æ ‡å¯¹é½åº¦"""
        # åˆ†è§£OKRåˆ°ä»»åŠ¡
        all_tasks = self.decompose_okrs()

        # è®¡ç®—ä»»åŠ¡ä¼˜å…ˆçº§
        prioritized_tasks = self.prioritize_tasks(all_tasks)

        # è´ªå¿ƒè°ƒåº¦
        for task in prioritized_tasks:
            if self.can_schedule(task):
                self.schedule_task(task)

        return self.scheduled_tasks

    def prioritize_tasks(self, tasks):
        """è®¡ç®—ä»»åŠ¡ä¼˜å…ˆçº§"""
        for task in tasks:
            # è®¡ç®—ä»»åŠ¡å¯¹ç›®æ ‡çš„è´¡çŒ®
            contribution = self.calculate_contribution(task)

            # è®¡ç®—ä»»åŠ¡ç´§æ€¥ç¨‹åº¦
            urgency = self.calculate_urgency(task)

            # è®¡ç®—ä»»åŠ¡ä¼˜å…ˆçº§
            task.priority = contribution * urgency

        return sorted(tasks, key=lambda t: t.priority, reverse=True)

    def can_schedule(self, task):
        """æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å¯ä»¥è°ƒåº¦"""
        # æ£€æŸ¥èµ„æº
        if not self.has_resources(task):
            return False

        # æ£€æŸ¥ä¾èµ–
        if not self.dependencies_satisfied(task):
            return False

        # æ£€æŸ¥æˆªæ­¢æ—¶é—´
        if not self.deadline_feasible(task):
            return False

        return True
```

**é‡åŒ–åˆ†æ**ï¼šç›®æ ‡è°ƒåº¦ä¼˜åŒ–æ•ˆæœ

| **è°ƒåº¦ç­–ç•¥** | **ç›®æ ‡å¯¹é½åº¦** | **èµ„æºåˆ©ç”¨ç‡** | **ä»»åŠ¡å®Œæˆç‡** |
|------------|--------------|--------------|--------------|
| **éšæœºè°ƒåº¦** | 60% | 70% | 80% |
| **ä¼˜å…ˆçº§è°ƒåº¦** | 75% | 80% | 85% |
| **ä¼˜åŒ–è°ƒåº¦** | 90% | 85% | 95% |

---

## 6 å®è·µæ¡ˆä¾‹

### 6.1 ç”µå•†è®¢å•å¤„ç†æµç¨‹ä¼˜åŒ–æ¡ˆä¾‹

**åœºæ™¯**ï¼šç”µå•†å¹³å°è®¢å•å¤„ç†æµç¨‹ï¼Œéœ€è¦ä¼˜åŒ–å¤„ç†æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

- æ—¥å‡è®¢å•é‡ï¼š100ä¸‡å•
- è®¢å•å¤„ç†æµç¨‹ï¼šæ¥æ”¶è®¢å• â†’ éªŒè¯åº“å­˜ â†’ æ‰£å‡åº“å­˜ â†’ æ”¯ä»˜å¤„ç† â†’ å‘è´§
- ä¼˜åŒ–å‰å¹³å‡å¤„ç†æ—¶é—´ï¼š5åˆ†é’Ÿ
- ç›®æ ‡ï¼šå°†å¤„ç†æ—¶é—´ç¼©çŸ­è‡³2åˆ†é’Ÿ

**BPMNæµç¨‹ä¼˜åŒ–**ï¼š

**ä¼˜åŒ–å‰æµç¨‹**ï¼š

```text
1. æ¥æ”¶è®¢å•ï¼ˆä¸²è¡Œï¼‰
2. éªŒè¯åº“å­˜ï¼ˆä¸²è¡Œï¼‰
3. æ‰£å‡åº“å­˜ï¼ˆä¸²è¡Œï¼‰
4. æ”¯ä»˜å¤„ç†ï¼ˆä¸²è¡Œï¼‰
5. å‘è´§ï¼ˆä¸²è¡Œï¼‰

æ€»æ—¶é—´ï¼š5åˆ†é’Ÿ
```

**ä¼˜åŒ–åæµç¨‹**ï¼š

```text
1. æ¥æ”¶è®¢å•
2. Andç½‘å…³ï¼ˆå¹¶è¡Œï¼‰
   â”œâ”€ éªŒè¯åº“å­˜
   â”œâ”€ éªŒè¯ç”¨æˆ·ä¿¡ç”¨
   â””â”€ è®¡ç®—ä¼˜æƒ 
3. æ‰£å‡åº“å­˜
4. æ”¯ä»˜å¤„ç†
5. å‘è´§

æ€»æ—¶é—´ï¼š2åˆ†é’Ÿï¼ˆé™ä½60%ï¼‰
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š

- å¤„ç†æ—¶é—´ï¼š5åˆ†é’Ÿ â†’ 2åˆ†é’Ÿï¼ˆé™ä½60%ï¼‰
- ååé‡ï¼š100ä¸‡å•/å¤© â†’ 250ä¸‡å•/å¤©ï¼ˆæå‡150%ï¼‰
- é”™è¯¯ç‡ï¼š0.5% â†’ 0.1%ï¼ˆé™ä½80%ï¼‰

### 6.2 Sagaåˆ†å¸ƒå¼äº‹åŠ¡å®è·µæ¡ˆä¾‹

**åœºæ™¯**ï¼šå¾®æœåŠ¡æ¶æ„ä¸‹çš„è®¢å•æ”¯ä»˜æµç¨‹ï¼Œéœ€è¦ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§ã€‚

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

- æœåŠ¡ï¼šè®¢å•æœåŠ¡ã€åº“å­˜æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ã€ç‰©æµæœåŠ¡
- äº‹åŠ¡ï¼šåˆ›å»ºè®¢å• â†’ æ‰£å‡åº“å­˜ â†’ æ”¯ä»˜ â†’ å‘è´§
- æŒ‘æˆ˜ï¼šæœåŠ¡é—´éœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§

**Sagaå®ç°**ï¼š

**ç¼–æ’æ¨¡å¼å®ç°**ï¼š

```python
class OrderSagaOrchestrator:
    def execute_order(self, order):
        executed = []
        try:
            # 1. åˆ›å»ºè®¢å•
            order_result = order_service.create_order(order)
            executed.append(('order', order_result))

            # 2. æ‰£å‡åº“å­˜
            inventory_result = inventory_service.deduct(order.items)
            executed.append(('inventory', inventory_result))

            # 3. æ”¯ä»˜
            payment_result = payment_service.pay(order.amount)
            executed.append(('payment', payment_result))

            # 4. å‘è´§
            shipping_result = shipping_service.ship(order)
            executed.append(('shipping', shipping_result))

            return SagaResult.SUCCESS

        except Exception as e:
            # è¡¥å¿
            for service, result in reversed(executed):
                if service == 'shipping':
                    shipping_service.cancel_ship(result)
                elif service == 'payment':
                    payment_service.refund(result)
                elif service == 'inventory':
                    inventory_service.restore(result)
                elif service == 'order':
                    order_service.cancel_order(result)

            return SagaResult.FAILED
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š

- äº‹åŠ¡æˆåŠŸç‡ï¼š95% â†’ 99.5%ï¼ˆæå‡4.5%ï¼‰
- è¡¥å¿æˆåŠŸç‡ï¼š90% â†’ 99%ï¼ˆæå‡9%ï¼‰
- å¹³å‡äº‹åŠ¡æ—¶é—´ï¼š500ms â†’ 300msï¼ˆé™ä½40%ï¼‰

### 6.3 ä¸šåŠ¡è§„åˆ™å¼•æ“å®è·µæ¡ˆä¾‹

**åœºæ™¯**ï¼šé‡‘èé£æ§ç³»ç»Ÿï¼Œéœ€è¦å®æ—¶è¯„ä¼°äº¤æ˜“é£é™©ã€‚

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

- äº¤æ˜“é‡ï¼šæ¯ç§’10,000ç¬”
- è§„åˆ™æ•°ï¼š1,000æ¡
- è¦æ±‚ï¼šè§„åˆ™åŒ¹é…å»¶è¿Ÿ < 10ms

**è§„åˆ™å¼•æ“ä¼˜åŒ–**ï¼š

**ä¼˜åŒ–å‰ï¼ˆçº¿æ€§åŒ¹é…ï¼‰**ï¼š

- åŒ¹é…æ—¶é—´ï¼š100msï¼ˆä¸æ»¡è¶³è¦æ±‚ï¼‰
- ååé‡ï¼š1,000ç¬”/ç§’

**ä¼˜åŒ–åï¼ˆReteç®—æ³•ï¼‰**ï¼š

- åŒ¹é…æ—¶é—´ï¼š5msï¼ˆæ»¡è¶³è¦æ±‚ï¼‰
- ååé‡ï¼š10,000ç¬”/ç§’ï¼ˆæå‡10å€ï¼‰

**å…³é”®ä¼˜åŒ–**ï¼š

1. ä½¿ç”¨Reteç½‘ç»œå…±äº«æ¡ä»¶èŠ‚ç‚¹
2. å¢é‡åŒ¹é…ï¼ŒåªåŒ¹é…å˜åŒ–çš„äº‹å®
3. è§„åˆ™ä¼˜å…ˆçº§ç¼“å­˜

---

## 7 æ‰¹åˆ¤æ€§æ€»ç»“

### 7.1 ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦çš„å±€é™æ€§

**1. äººå·¥å¹²é¢„éœ€æ±‚**ï¼š

**é—®é¢˜**ï¼šå¤æ‚ä¸šåŠ¡åœºæ™¯éœ€è¦äººå·¥å†³ç­–ï¼Œéš¾ä»¥å®Œå…¨è‡ªåŠ¨åŒ–ã€‚

**åŸå› **ï¼š

- **ä¸šåŠ¡å¤æ‚æ€§**ï¼šä¸šåŠ¡è§„åˆ™å¤æ‚ï¼Œéš¾ä»¥å½¢å¼åŒ–
- **å¼‚å¸¸å¤„ç†**ï¼šå¼‚å¸¸æƒ…å†µéœ€è¦äººå·¥åˆ¤æ–­
- **ç­–ç•¥è°ƒæ•´**ï¼šä¸šåŠ¡ç­–ç•¥éœ€è¦æ ¹æ®å¸‚åœºå˜åŒ–è°ƒæ•´

**å½±å“**ï¼š

- è‡ªåŠ¨åŒ–ç¨‹åº¦å—é™
- å“åº”é€Ÿåº¦æ…¢
- æˆæœ¬é«˜

**ç¼“è§£æªæ–½**ï¼š

- ä½¿ç”¨AIè¾…åŠ©å†³ç­–
- å»ºç«‹çŸ¥è¯†åº“å’Œå†³ç­–æ ‘
- é€æ­¥æé«˜è‡ªåŠ¨åŒ–ç¨‹åº¦

**2. è§„åˆ™å†²çª**ï¼š

**é—®é¢˜**ï¼šä¸šåŠ¡è§„åˆ™å¯èƒ½å†²çªï¼Œéœ€è¦ä»²è£æœºåˆ¶ã€‚

**åŸå› **ï¼š

- **è§„åˆ™æ¥æºå¤šæ ·**ï¼šä¸åŒéƒ¨é—¨å®šä¹‰è§„åˆ™å¯èƒ½å†²çª
- **è§„åˆ™æ›´æ–°**ï¼šè§„åˆ™æ›´æ–°å¯èƒ½å¯¼è‡´å†²çª
- **ä¸Šä¸‹æ–‡ä¾èµ–**ï¼šè§„åˆ™åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å¯èƒ½å†²çª

**å½±å“**ï¼š

- è§„åˆ™æ‰§è¡Œç»“æœä¸ç¡®å®š
- éœ€è¦äººå·¥ä»²è£
- ç³»ç»Ÿå¤æ‚åº¦å¢åŠ 

**ç¼“è§£æªæ–½**ï¼š

- å»ºç«‹è§„åˆ™å†²çªæ£€æµ‹æœºåˆ¶
- ä½¿ç”¨ä¼˜å…ˆçº§å’Œç‰¹å¼‚æ€§è§£å†³å†²çª
- å»ºç«‹è§„åˆ™æ²»ç†æµç¨‹

**3. å˜æ›´æˆæœ¬é«˜**ï¼š

**é—®é¢˜**ï¼šä¸šåŠ¡æµç¨‹å˜æ›´éœ€è¦é‡æ–°è®¾è®¡å’Œéƒ¨ç½²ï¼Œæˆæœ¬é«˜ã€‚

**åŸå› **ï¼š

- **æµç¨‹å¤æ‚æ€§**ï¼šä¸šåŠ¡æµç¨‹å¤æ‚ï¼Œå˜æ›´å½±å“é¢å¤§
- **ç³»ç»Ÿè€¦åˆ**ï¼šç³»ç»Ÿé—´è€¦åˆåº¦é«˜ï¼Œå˜æ›´éœ€è¦åè°ƒ
- **æµ‹è¯•æˆæœ¬**ï¼šå˜æ›´éœ€è¦å……åˆ†æµ‹è¯•

**å½±å“**ï¼š

- ä¸šåŠ¡å“åº”é€Ÿåº¦æ…¢
- å˜æ›´é£é™©é«˜
- æˆæœ¬é«˜

**ç¼“è§£æªæ–½**ï¼š

- ä½¿ç”¨ä½ä»£ç å¹³å°é™ä½å˜æ›´æˆæœ¬
- å»ºç«‹æµç¨‹ç‰ˆæœ¬ç®¡ç†
- ä½¿ç”¨å¾®æœåŠ¡æ¶æ„é™ä½è€¦åˆ

**4. æ€§èƒ½ç“¶é¢ˆ**ï¼š

**é—®é¢˜**ï¼šå¤æ‚ä¸šåŠ¡æµç¨‹å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚

**åŸå› **ï¼š

- **ä¸²è¡Œæ‰§è¡Œ**ï¼šæŸäº›æµç¨‹å¿…é¡»ä¸²è¡Œæ‰§è¡Œ
- **èµ„æºç«äº‰**ï¼šå¤šä¸ªæµç¨‹ç«äº‰èµ„æº
- **è§„åˆ™åŒ¹é…**ï¼šè§„åˆ™åŒ¹é…å¯èƒ½æˆä¸ºç“¶é¢ˆ

**å½±å“**ï¼š

- å¤„ç†å»¶è¿Ÿé«˜
- ååé‡ä½
- ç”¨æˆ·ä½“éªŒå·®

**ç¼“è§£æªæ–½**ï¼š

- ä¼˜åŒ–æµç¨‹è®¾è®¡ï¼Œå¢åŠ å¹¶è¡Œåº¦
- ä½¿ç”¨ç¼“å­˜å’Œç´¢å¼•ä¼˜åŒ–è§„åˆ™åŒ¹é…
- ä½¿ç”¨å¼‚æ­¥å¤„ç†

### 7.2 2025å¹´ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦è¶‹åŠ¿

**1. AIè¾…åŠ©å†³ç­–**ï¼š

**è¶‹åŠ¿**ï¼šä½¿ç”¨AIè¾…åŠ©ä¸šåŠ¡å†³ç­–ï¼Œæé«˜è‡ªåŠ¨åŒ–ç¨‹åº¦ã€‚

**æŠ€æœ¯**ï¼š

- **æœºå™¨å­¦ä¹ **ï¼šä½¿ç”¨MLæ¨¡å‹é¢„æµ‹ä¸šåŠ¡ç»“æœ
- **è‡ªç„¶è¯­è¨€å¤„ç†**ï¼šä½¿ç”¨NLPç†è§£ä¸šåŠ¡éœ€æ±‚
- **çŸ¥è¯†å›¾è°±**ï¼šä½¿ç”¨çŸ¥è¯†å›¾è°±ç®¡ç†ä¸šåŠ¡çŸ¥è¯†

**ä¼˜åŠ¿**ï¼š

- æé«˜å†³ç­–å‡†ç¡®æ€§
- å‡å°‘äººå·¥å¹²é¢„
- æé«˜å“åº”é€Ÿåº¦

**æŒ‘æˆ˜**ï¼š

- æ¨¡å‹å¯è§£é‡Šæ€§
- æ•°æ®è´¨é‡è¦æ±‚
- æ¨¡å‹æ›´æ–°æˆæœ¬

**2. ä½ä»£ç å¹³å°**ï¼š

**è¶‹åŠ¿**ï¼šä½¿ç”¨ä½ä»£ç å¹³å°é™ä½ä¸šåŠ¡æµç¨‹è®¾è®¡é—¨æ§›ã€‚

**æŠ€æœ¯**ï¼š

- **å¯è§†åŒ–è®¾è®¡**ï¼šæ‹–æ‹½å¼æµç¨‹è®¾è®¡
- **æ¨¡æ¿åº“**ï¼šé¢„å®šä¹‰æµç¨‹æ¨¡æ¿
- **è‡ªåŠ¨ç”Ÿæˆ**ï¼šä»éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆæµç¨‹

**ä¼˜åŠ¿**ï¼š

- é™ä½å¼€å‘æˆæœ¬
- æé«˜å¼€å‘æ•ˆç‡
- ä¸šåŠ¡äººå‘˜å¯ç›´æ¥å‚ä¸

**æŒ‘æˆ˜**ï¼š

- å¹³å°èƒ½åŠ›é™åˆ¶
- å®šåˆ¶åŒ–éœ€æ±‚
- æ€§èƒ½ä¼˜åŒ–

**3. å®æ—¶ä¼˜åŒ–**ï¼š

**è¶‹åŠ¿**ï¼šå®æ—¶ä¼˜åŒ–ä¸šåŠ¡æµç¨‹æ€§èƒ½ã€‚

**æŠ€æœ¯**ï¼š

- **å®æ—¶ç›‘æ§**ï¼šå®æ—¶ç›‘æ§æµç¨‹æ€§èƒ½
- **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®å®æ—¶æ•°æ®åŠ¨æ€è°ƒæ•´æµç¨‹
- **A/Bæµ‹è¯•**ï¼šä½¿ç”¨A/Bæµ‹è¯•ä¼˜åŒ–æµç¨‹

**ä¼˜åŠ¿**ï¼š

- æé«˜æµç¨‹æ•ˆç‡
- å¿«é€Ÿå“åº”å˜åŒ–
- æŒç»­æ”¹è¿›

**æŒ‘æˆ˜**ï¼š

- å®æ—¶è®¡ç®—æˆæœ¬
- æ•°æ®è´¨é‡è¦æ±‚
- å˜æ›´é£é™©

**4. äº‹ä»¶é©±åŠ¨æ¶æ„æ™®åŠ**ï¼š

**è¶‹åŠ¿**ï¼šäº‹ä»¶é©±åŠ¨æ¶æ„æˆä¸ºä¸»æµã€‚

**æŠ€æœ¯**ï¼š

- **äº‹ä»¶æº¯æº**ï¼šä½¿ç”¨äº‹ä»¶æº¯æºè®°å½•çŠ¶æ€å˜æ›´
- **CQRS**ï¼šå‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»
- **äº‹ä»¶æµå¤„ç†**ï¼šå®æ—¶å¤„ç†äº‹ä»¶æµ

**ä¼˜åŠ¿**ï¼š

- æé«˜ç³»ç»Ÿè§£è€¦
- æ”¯æŒå¼‚æ­¥å¤„ç†
- æé«˜å¯æ‰©å±•æ€§

**æŒ‘æˆ˜**ï¼š

- äº‹ä»¶é¡ºåºä¿è¯
- çŠ¶æ€ä¸€è‡´æ€§
- ç³»ç»Ÿå¤æ‚åº¦

---

## 8 è·¨é¢†åŸŸæ´å¯Ÿ

### 8.1 ä¸šåŠ¡æµç¨‹ä¸è®¡ç®—æµç¨‹çš„ç»Ÿä¸€

**æ ¸å¿ƒæ´å¯Ÿ**ï¼šä¸šåŠ¡æµç¨‹æœ¬è´¨ä¸Šæ˜¯è®¡ç®—æµç¨‹ï¼Œå¯ä»¥ä½¿ç”¨å½¢å¼åŒ–æ–¹æ³•éªŒè¯ã€‚

**ç†è®ºæ˜ å°„**ï¼š

| **ä¸šåŠ¡æµç¨‹** | **è®¡ç®—æµç¨‹** | **å¯¹åº”å…³ç³»** |
|------------|------------|------------|
| **ä¸šåŠ¡æ´»åŠ¨** | **è®¡ç®—æ­¥éª¤** | åŸå­æ“ä½œ |
| **ä¸šåŠ¡æµç¨‹** | **ç¨‹åºæ‰§è¡Œ** | æ§åˆ¶æµ |
| **ä¸šåŠ¡è§„åˆ™** | **ç¨‹åºé€»è¾‘** | æ¡ä»¶åˆ¤æ–­ |
| **ä¸šåŠ¡çŠ¶æ€** | **ç¨‹åºçŠ¶æ€** | çŠ¶æ€æœº |
| **ä¸šåŠ¡æµç¨‹éªŒè¯** | **ç¨‹åºéªŒè¯** | å½¢å¼åŒ–éªŒè¯ |

**å…³é”®æ´å¯Ÿ**ï¼š

- ä¸šåŠ¡æµç¨‹å¯ä»¥è§†ä¸ºçŠ¶æ€æœºï¼Œä½¿ç”¨çŠ¶æ€æœºç†è®ºåˆ†æ
- ä¸šåŠ¡æµç¨‹å¯ä»¥è½¬æ¢ä¸ºç¨‹åºä»£ç ï¼Œå®ç°è‡ªåŠ¨åŒ–æ‰§è¡Œ
- ä¸šåŠ¡æµç¨‹éªŒè¯å¯ä»¥ä½¿ç”¨ç¨‹åºéªŒè¯æ–¹æ³•ï¼ˆå¦‚æ¨¡å‹æ£€æµ‹ï¼‰

### 8.2 ä¸šåŠ¡è§„åˆ™ä¸ç¨‹åºé€»è¾‘çš„æ˜ å°„

**æ ¸å¿ƒæ´å¯Ÿ**ï¼šä¸šåŠ¡è§„åˆ™å¯ä»¥æ˜ å°„ä¸ºç¨‹åºé€»è¾‘ï¼Œå®ç°è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚

**æ˜ å°„å…³ç³»**ï¼š

| **ä¸šåŠ¡è§„åˆ™** | **ç¨‹åºé€»è¾‘** | **å®ç°æ–¹å¼** |
|------------|------------|------------|
| **æ¡ä»¶è§„åˆ™** | **ifè¯­å¥** | æ¡ä»¶åˆ¤æ–­ |
| **å¾ªç¯è§„åˆ™** | **å¾ªç¯è¯­å¥** | è¿­ä»£æ‰§è¡Œ |
| **è§„åˆ™é“¾** | **å‡½æ•°è°ƒç”¨é“¾** | å‡½æ•°ç»„åˆ |
| **è§„åˆ™ä¼˜å…ˆçº§** | **æ‰§è¡Œé¡ºåº** | æ§åˆ¶æµ |
| **è§„åˆ™å†²çª** | **å¼‚å¸¸å¤„ç†** | é”™è¯¯å¤„ç† |

**å…³é”®æ´å¯Ÿ**ï¼š

- ä¸šåŠ¡è§„åˆ™å¯ä»¥ç¼–è¯‘ä¸ºç¨‹åºä»£ç 
- è§„åˆ™å¼•æ“å¯ä»¥è§†ä¸ºè§£é‡Šå™¨
- è§„åˆ™ä¼˜åŒ–å¯ä»¥è§†ä¸ºç¨‹åºä¼˜åŒ–

### 8.3 ä¸šåŠ¡æµç¨‹ä¸é¡¹ç›®ç®¡ç†çš„å…³ç³»

**æ ¸å¿ƒæ´å¯Ÿ**ï¼šä¸šåŠ¡æµç¨‹è°ƒåº¦å¯ä»¥è§†ä¸ºé¡¹ç›®è°ƒåº¦é—®é¢˜ã€‚

**æ˜ å°„å…³ç³»**ï¼š

| **ä¸šåŠ¡æµç¨‹** | **é¡¹ç›®ç®¡ç†** | **å¯¹åº”å…³ç³»** |
|------------|------------|------------|
| **ä¸šåŠ¡æ´»åŠ¨** | **é¡¹ç›®ä»»åŠ¡** | å·¥ä½œå•å…ƒ |
| **æ´»åŠ¨ä¾èµ–** | **ä»»åŠ¡ä¾èµ–** | å‰ç½®æ¡ä»¶ |
| **èµ„æºçº¦æŸ** | **èµ„æºçº¦æŸ** | èµ„æºé™åˆ¶ |
| **æ—¶é—´çº¦æŸ** | **é¡¹ç›®æœŸé™** | æˆªæ­¢æ—¶é—´ |
| **æµç¨‹ä¼˜åŒ–** | **é¡¹ç›®ä¼˜åŒ–** | å…³é”®è·¯å¾„ |

**å…³é”®æ´å¯Ÿ**ï¼š

- å¯ä»¥ä½¿ç”¨é¡¹ç›®ç®¡ç†æ–¹æ³•ä¼˜åŒ–ä¸šåŠ¡æµç¨‹
- å…³é”®è·¯å¾„æ³•ï¼ˆCPMï¼‰å¯ä»¥ç”¨äºæµç¨‹ä¼˜åŒ–
- èµ„æºå¹³è¡¡å¯ä»¥ç”¨äºèµ„æºè°ƒåº¦

### 8.4 ä¸šåŠ¡æ¶æ„ä¸ç³»ç»Ÿæ¶æ„çš„ç»Ÿä¸€

**æ ¸å¿ƒæ´å¯Ÿ**ï¼šä¸šåŠ¡æ¶æ„å’Œç³»ç»Ÿæ¶æ„å¯ä»¥ç»Ÿä¸€å»ºæ¨¡ã€‚

**æ˜ å°„å…³ç³»**ï¼š

| **ä¸šåŠ¡æ¶æ„** | **ç³»ç»Ÿæ¶æ„** | **å¯¹åº”å…³ç³»** |
|------------|------------|------------|
| **ä¸šåŠ¡æµç¨‹** | **ç³»ç»Ÿæµç¨‹** | æ‰§è¡Œæµç¨‹ |
| **ä¸šåŠ¡æœåŠ¡** | **ç³»ç»ŸæœåŠ¡** | æœåŠ¡æ¥å£ |
| **ä¸šåŠ¡æ•°æ®** | **ç³»ç»Ÿæ•°æ®** | æ•°æ®æ¨¡å‹ |
| **ä¸šåŠ¡è§„åˆ™** | **ä¸šåŠ¡é€»è¾‘** | å¤„ç†é€»è¾‘ |
| **ä¸šåŠ¡äº‹ä»¶** | **ç³»ç»Ÿäº‹ä»¶** | äº‹ä»¶é©±åŠ¨ |

**å…³é”®æ´å¯Ÿ**ï¼š

- ä¸šåŠ¡æ¶æ„é©±åŠ¨ç³»ç»Ÿæ¶æ„è®¾è®¡
- ç³»ç»Ÿæ¶æ„éœ€è¦æ”¯æŒä¸šåŠ¡æ¶æ„
- ä¸¤è€…éœ€è¦ä¿æŒä¸€è‡´æ€§

---

## 9 å¤šç»´åº¦å¯¹æ¯”

### 9.1 ä¸šåŠ¡æµç¨‹ç¼–æ’å·¥å…·å¯¹æ¯”

| **å·¥å…·** | **å½¢å¼åŒ–æ”¯æŒ** | **å¯è§†åŒ–** | **æ‰§è¡Œå¼•æ“** | **æ€§èƒ½** | **é€‚ç”¨åœºæ™¯** |
|---------|--------------|-----------|------------|---------|------------|
| **BPMN** | æ˜¯ | æ˜¯ | é€šç”¨ | ä¸­ | æ ‡å‡†ä¸šåŠ¡æµç¨‹ |
| **Petriç½‘** | æ˜¯ | ä¸­ | ç ”ç©¶ | ä½ | å½¢å¼åŒ–éªŒè¯ |
| **å·¥ä½œæµå¼•æ“** | å¦ | æ˜¯ | ä¸“ç”¨ | é«˜ | ç‰¹å®šä¸šåŠ¡åœºæ™¯ |
| **ä½ä»£ç å¹³å°** | å¦ | æ˜¯ | é€šç”¨ | ä¸­ | å¿«é€Ÿå¼€å‘ |

### 9.2 Sagaäº‹åŠ¡æ¨¡å¼å¯¹æ¯”

| **æ¨¡å¼** | **å¤æ‚åº¦** | **æ€§èƒ½** | **å¯ç»´æŠ¤æ€§** | **é€‚ç”¨åœºæ™¯** |
|---------|-----------|---------|------------|------------|
| **ç¼–æ’æ¨¡å¼** | ä½ | ä¸­ | é«˜ | ç®€å•æµç¨‹ |
| **ååŒæ¨¡å¼** | é«˜ | é«˜ | ä¸­ | å¤æ‚æµç¨‹ |
| **æ··åˆæ¨¡å¼** | ä¸­ | ä¸­ | ä¸­ | ä¸­ç­‰å¤æ‚åº¦ |

### 9.3 è§„åˆ™åŒ¹é…ç®—æ³•å¯¹æ¯”

| **ç®—æ³•** | **æ—¶é—´å¤æ‚åº¦** | **ç©ºé—´å¤æ‚åº¦** | **é€‚ç”¨è§„åˆ™æ•°** | **å¢é‡åŒ¹é…** |
|---------|--------------|--------------|--------------|------------|
| **çº¿æ€§åŒ¹é…** | $O(R \times F)$ | $O(1)$ | <100 | å¦ |
| **Reteç®—æ³•** | $O(R \times F)$ | $O(R \times F)$ | 100-10000 | æ˜¯ |
| **å†³ç­–æ ‘** | $O(\log R \times F)$ | $O(R)$ | >10000 | å¦ |

### 9.4 äº‹ä»¶è°ƒåº¦ç­–ç•¥å¯¹æ¯”

| **ç­–ç•¥** | **ååé‡** | **å»¶è¿Ÿ** | **å› æœä¸€è‡´æ€§** | **å…¬å¹³æ€§** |
|---------|-----------|---------|--------------|-----------|
| **FIFO** | é«˜ | ä¸­ | æ˜¯ | é«˜ |
| **ä¼˜å…ˆçº§é˜Ÿåˆ—** | é«˜ | ä½ | å¦ | ä½ |
| **å› æœåº** | ä¸­ | é«˜ | æ˜¯ | ä¸­ |
| **æ··åˆç­–ç•¥** | ä¸­ | ä¸­ | æ˜¯ | ä¸­ |

---

## 10 ç›¸å…³ä¸»é¢˜

- [11.2 æ•°æ®æ¶æ„å±‚è°ƒåº¦](./11.2_æ•°æ®æ¶æ„å±‚è°ƒåº¦.md) - æ•°æ®å±‚çš„è°ƒåº¦ä¼˜åŒ–
- [11.3 åº”ç”¨æ¶æ„å±‚è°ƒåº¦](./11.3_åº”ç”¨æ¶æ„å±‚è°ƒåº¦.md) - åº”ç”¨å±‚çš„è°ƒåº¦ä¼˜åŒ–
- [11.4 æŠ€æœ¯æ¶æ„å±‚è°ƒåº¦](./11.4_æŠ€æœ¯æ¶æ„å±‚è°ƒåº¦.md) - æŠ€æœ¯å±‚çš„è°ƒåº¦ä¼˜åŒ–
- [06.4 åˆ†å¸ƒå¼ç³»ç»Ÿè°ƒåº¦](../06_è°ƒåº¦æ¨¡å‹/06.4_åˆ†å¸ƒå¼ç³»ç»Ÿè°ƒåº¦.md) - åˆ†å¸ƒå¼ç³»ç»Ÿè°ƒåº¦ç†è®º
- [12.1 ç«¯åˆ°ç«¯å»¶è¿Ÿåˆ†è§£](../12_è·¨å±‚æ¬¡è°ƒåº¦ååŒ/12.1_ç«¯åˆ°ç«¯å»¶è¿Ÿåˆ†è§£.md) - è·¨å±‚æ¬¡å»¶è¿Ÿä¼˜åŒ–
- [13.1 ç”µå•†å¤§ä¿ƒå…¨é“¾è·¯åˆ†æ](../13_å®è·µæ¡ˆä¾‹ä¸æœ€ä½³å®è·µ/13.1_ç”µå•†å¤§ä¿ƒå…¨é“¾è·¯åˆ†æ.md) - ä¸šåŠ¡æ¶æ„å±‚è°ƒåº¦å®è·µæ¡ˆä¾‹

---

**æœ€åæ›´æ–°**: 2025-01-XX
