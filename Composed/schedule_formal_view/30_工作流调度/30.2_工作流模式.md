# 30.2 工作流模式

> **子主题编号**: 30.2
> **主题**: 工作流调度
> **最后更新**: 2025-12-02
> **文档状态**: ✅ 完成

---

## 📋 目录

- [30.2 工作流模式](#302-工作流模式)
  - [📋 目录](#-目录)
  - [1 概述](#1-概述)
  - [2 WfMC 43种工作流模式](#2-wfmc-43种工作流模式)
    - [2.1 模式分类](#21-模式分类)
  - [3 控制流模式详解](#3-控制流模式详解)
    - [3.1 基本控制流模式](#31-基本控制流模式)
      - [3.1.1 顺序（Sequence）](#311-顺序sequence)
      - [3.1.2 并行分支（Parallel Split）](#312-并行分支parallel-split)
      - [3.1.3 同步合并（Synchronization）](#313-同步合并synchronization)
      - [3.1.4 排他选择（Exclusive Choice）](#314-排他选择exclusive-choice)
      - [3.1.5 简单合并（Simple Merge）](#315-简单合并simple-merge)
    - [3.2 高级分支/合并模式](#32-高级分支合并模式)
      - [3.2.1 多选择（Multi-Choice）](#321-多选择multi-choice)
      - [3.2.2 同步合并（Synchronizing Merge）](#322-同步合并synchronizing-merge)
  - [4 数据流模式](#4-数据流模式)
    - [4.1 数据可见性模式](#41-数据可见性模式)
  - [5 资源模式](#5-资源模式)
    - [5.1 资源分配模式](#51-资源分配模式)
  - [6 跨视角链接](#6-跨视角链接)

---

## 1 概述

工作流模式是业务流程中常见的控制流、数据流和资源分配模式。Workflow Management Coalition (WfMC)定义了43种工作流模式，本文重点介绍控制流模式及其Petri网表示。

---

## 2 WfMC 43种工作流模式

### 2.1 模式分类

```text
工作流模式分类：

1. 控制流模式（20种）
   - 基本控制流（5种）
   - 高级分支/合并（6种）
   - 结构模式（5种）
   - 多实例模式（4种）

2. 数据模式（40种）
   - 数据可见性
   - 数据传递
   - 数据转换

3. 资源模式（43种）
   - 创建
   - 推送
   - 拉取
   - 早期分配
   - 延迟分配
```

---

## 3 控制流模式详解

### 3.1 基本控制流模式

#### 3.1.1 顺序（Sequence）

**模式1**：顺序执行

**描述**：任务按顺序执行，前一个任务完成后才开始下一个。

**Petri网表示**：

```text
p₁ →[A]→ p₂ →[B]→ p₃ →[C]→ p₄
```

**性质**：

- 可达性：✓
- 活性：✓
- 有界性：✓（1-有界）

#### 3.1.2 并行分支（Parallel Split）

**模式2**：并行分支

**描述**：任务A完成后，并行执行任务B和C。

**Petri网表示**：

```text
p₁ →[A]→ p₂
p₂ →[B]→ p₃
p₂ →[C]→ p₄
```

**性质**：

- 可达性：✓
- 活性：✓
- 有界性：✓

#### 3.1.3 同步合并（Synchronization）

**模式3**：同步合并

**描述**：等待任务B和C都完成后，执行任务D。

**Petri网表示**：

```text
p₃ →[D]→ p₅
p₄ →[D]→ p₅
```

**性质**：

- 可达性：✓
- 活性：✓（如果B和C都能完成）
- 有界性：✓

#### 3.1.4 排他选择（Exclusive Choice）

**模式4**：排他选择

**描述**：任务A完成后，根据条件选择执行B或C（但不能同时执行）。

**Petri网表示**：

```text
p₁ →[A]→ p₂
p₂ →[B]→ p₃
p₂ →[C]→ p₄
```

**性质**：

- 可达性：✓
- 活性：✓（如果B或C至少一个使能）
- 有界性：✓

#### 3.1.5 简单合并（Simple Merge）

**模式5**：简单合并

**描述**：任务B或C完成后，执行任务D。

**Petri网表示**：

```text
p₃ →[D]→ p₅
p₄ →[D]→ p₅
```

**性质**：

- 可达性：✓
- 活性：✓
- 有界性：✓

### 3.2 高级分支/合并模式

#### 3.2.1 多选择（Multi-Choice）

**模式6**：多选择

**描述**：根据多个条件，可以选择执行多个路径（0个、1个或多个）。

**Petri网表示**：使用守卫函数控制变迁使能。

#### 3.2.2 同步合并（Synchronizing Merge）

**模式7**：同步合并

**描述**：等待所有激活的路径完成后，执行后续任务。

---

## 4 数据流模式

### 4.1 数据可见性模式

- **任务数据**：数据对单个任务可见
- **块数据**：数据对一组任务可见
- **案例数据**：数据对整个案例可见

---

## 5 资源模式

### 5.1 资源分配模式

- **基于角色**：根据角色分配资源
- **职责分离**：确保不同角色执行不同任务
- **保留**：提前保留资源

---

## 6 跨视角链接

- [工作流调度主索引](./README.md)
- [工作流Petri网模型](./30.1_工作流Petri网模型.md)

---

**返回**: [工作流调度主索引](./README.md)
