# 5.3 æ²™ç›’åŒ–æŠ€æœ¯

> **ä¸»é¢˜**: 05. è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ²™ç›’åŒ– - 5.3 æ²™ç›’åŒ–æŠ€æœ¯
> **è¦†ç›–**: Seccompã€gVisorã€Firecrackerã€å®‰å…¨åŸŸ

---

## ğŸ“‹ ç›®å½•

- [5.3 æ²™ç›’åŒ–æŠ€æœ¯](#53-æ²™ç›’åŒ–æŠ€æœ¯)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1 æ²™ç›’åŒ–æŠ½è±¡å±‚çº§](#1-æ²™ç›’åŒ–æŠ½è±¡å±‚çº§)
    - [1.1 å®‰å…¨åŸŸæŠ½è±¡](#11-å®‰å…¨åŸŸæŠ½è±¡)
    - [1.2 æ ¸å¿ƒæ•°å­¦æ¨¡å‹](#12-æ ¸å¿ƒæ•°å­¦æ¨¡å‹)
  - [2 Seccompç³»ç»Ÿè°ƒç”¨è¿‡æ»¤](#2-seccompç³»ç»Ÿè°ƒç”¨è¿‡æ»¤)
    - [2.1 Seccomp-BPF](#21-seccomp-bpf)
    - [2.2 æ€§èƒ½å½±å“](#22-æ€§èƒ½å½±å“)
  - [3 gVisorç”¨æˆ·æ€å†…æ ¸](#3-gvisorç”¨æˆ·æ€å†…æ ¸)
    - [3.1 æ¶æ„](#31-æ¶æ„)
    - [2 æ€§èƒ½](#2-æ€§èƒ½)
  - [4 Firecrackerå¾®VM](#4-firecrackerå¾®vm)
    - [4.1 ç‰¹ç‚¹](#41-ç‰¹ç‚¹)
    - [4.2 é€‚ç”¨åœºæ™¯](#42-é€‚ç”¨åœºæ™¯)
  - [5 å®è·µæ¡ˆä¾‹](#5-å®è·µæ¡ˆä¾‹)
    - [5.1 AWS Lambdaä½¿ç”¨Firecracker](#51-aws-lambdaä½¿ç”¨firecracker)
    - [5.2 Google Cloud Runä½¿ç”¨gVisor](#52-google-cloud-runä½¿ç”¨gvisor)
  - [6 å®‰å…¨åŸŸæ¨¡å‹](#6-å®‰å…¨åŸŸæ¨¡å‹)
    - [6.1 Noninterference](#61-noninterference)
    - [6.2 å®ç°](#62-å®ç°)
  - [7 æ‰¹åˆ¤æ€§æ€»ç»“](#7-æ‰¹åˆ¤æ€§æ€»ç»“)
    - [7.1 æ²™ç›’åŒ–çš„å±€é™æ€§](#71-æ²™ç›’åŒ–çš„å±€é™æ€§)
    - [7.2 2025å¹´æ²™ç›’åŒ–è¶‹åŠ¿](#72-2025å¹´æ²™ç›’åŒ–è¶‹åŠ¿)
  - [8 è·¨é¢†åŸŸæ´å¯Ÿ](#8-è·¨é¢†åŸŸæ´å¯Ÿ)
    - [5.1 å®‰å…¨vsæ€§èƒ½çš„æ°¸æ’æƒè¡¡](#51-å®‰å…¨vsæ€§èƒ½çš„æ°¸æ’æƒè¡¡)
    - [5.2 æ”»å‡»é¢çš„æŠ½è±¡æ³„æ¼](#52-æ”»å‡»é¢çš„æŠ½è±¡æ³„æ¼)
  - [9 å¤šç»´åº¦å¯¹æ¯”](#9-å¤šç»´åº¦å¯¹æ¯”)
    - [6.1 æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”ï¼ˆ2025å¹´ï¼‰](#61-æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”2025å¹´)
    - [6.2 å®‰å…¨æ¨¡å‹æ¼”è¿›å¯¹æ¯”](#62-å®‰å…¨æ¨¡å‹æ¼”è¿›å¯¹æ¯”)
  - [10 ç›¸å…³ä¸»é¢˜](#10-ç›¸å…³ä¸»é¢˜)

---

## 1 æ²™ç›’åŒ–æŠ½è±¡å±‚çº§

### 1.1 å®‰å…¨åŸŸæŠ½è±¡

**ç‰¹ç‚¹**ï¼š

- æœ€å°æƒé™åŸåˆ™
- è¿›ç¨‹çº§éš”ç¦»
- ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤

**æ ¸å¿ƒæœºåˆ¶**ï¼š

- **Seccomp**ï¼šç³»ç»Ÿè°ƒç”¨è¿‡æ»¤
- **Capabilities**ï¼šèƒ½åŠ›æ¨¡å‹
- **MAC**ï¼šå¼ºåˆ¶è®¿é—®æ§åˆ¶

### 1.2 æ ¸å¿ƒæ•°å­¦æ¨¡å‹

**å®‰å…¨åŸŸå››å…ƒç»„**ï¼š$\mathcal{S} = (D, R, P, \sigma)$

å…¶ä¸­ï¼š

- $D$ï¼šåŸŸé›†åˆ
- $R$ï¼šèµ„æºé›†åˆ
- $P$ï¼šæƒé™é›†åˆ
- $\sigma$ï¼šå®‰å…¨ç­–ç•¥å‡½æ•°

**ç†è®ºåŸºç¡€**ï¼š

- Bell-LaPadulaæ¨¡å‹
- Noninterferenceç†è®º

---

## 2 Seccompç³»ç»Ÿè°ƒç”¨è¿‡æ»¤

### 2.1 Seccomp-BPF

**æ¡ˆä¾‹5.3.1ï¼ˆSeccompç³»ç»Ÿè°ƒç”¨è¿‡æ»¤ï¼‰**ï¼š

Seccompï¼ˆSecure Computingï¼‰é€šè¿‡BPFç¨‹åºè¿‡æ»¤ç³»ç»Ÿè°ƒç”¨ï¼Œå‡å°‘æ”»å‡»é¢ã€‚

**åŠŸèƒ½**ï¼š

**1. ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤**ï¼š

- **BPFç¨‹åº**ï¼šåœ¨å†…æ ¸æ€æ‰§è¡ŒBPFç¨‹åº
- **å…è®¸/æ‹’ç»**ï¼šæ ¹æ®BPFç¨‹åºç»“æœå…è®¸æˆ–æ‹’ç»ç³»ç»Ÿè°ƒç”¨
- **è·Ÿè¸ª**ï¼šè®°å½•ç³»ç»Ÿè°ƒç”¨ç”¨äºå®¡è®¡

**2. Seccompæ¨¡å¼**ï¼š

- **SECCOMP_MODE_STRICT**ï¼šåªå…è®¸readã€writeã€exitã€sigreturn
- **SECCOMP_MODE_FILTER**ï¼šä½¿ç”¨BPFç¨‹åºè‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™

**Seccomp-BPFå®ç°**ï¼š

```c
// Seccompæ•°æ®ç»“æ„
struct seccomp_data {
    int nr;                    // ç³»ç»Ÿè°ƒç”¨å·
    __u32 arch;                // æ¶æ„
    __u64 instruction_pointer; // æŒ‡ä»¤æŒ‡é’ˆ
    __u64 args[6];             // ç³»ç»Ÿè°ƒç”¨å‚æ•°
};

// Seccompè¿”å›å€¼
#define SECCOMP_RET_KILL   0x00000000U  // ç«‹å³ç»ˆæ­¢è¿›ç¨‹
#define SECCOMP_RET_TRAP   0x00030000U  // å‘é€SIGSYSä¿¡å·
#define SECCOMP_RET_ERRNO  0x00050000U  // è¿”å›é”™è¯¯ç 
#define SECCOMP_RET_TRACE  0x7ff00000U  // é€šçŸ¥ptrace
#define SECCOMP_RET_ALLOW  0x7fff0000U  // å…è®¸ç³»ç»Ÿè°ƒç”¨

// åˆ›å»ºSeccompè¿‡æ»¤å™¨
int setup_seccomp_filter(void) {
    struct sock_fprog prog;
    struct sock_filter filter[] = {
        // åŠ è½½ç³»ç»Ÿè°ƒç”¨å·
        BPF_STMT(BPF_LD | BPF_W | BPF_ABS, offsetof(struct seccomp_data, nr)),

        // æ£€æŸ¥æ˜¯å¦ä¸ºreadç³»ç»Ÿè°ƒç”¨
        BPF_JUMP(BPF_JMP | BPF_JEQ | BPF_K, __NR_read, 0, 1),
        BPF_STMT(BPF_RET | BPF_K, SECCOMP_RET_ALLOW),

        // æ£€æŸ¥æ˜¯å¦ä¸ºwriteç³»ç»Ÿè°ƒç”¨
        BPF_JUMP(BPF_JMP | BPF_JEQ | BPF_K, __NR_write, 0, 1),
        BPF_STMT(BPF_RET | BPF_K, SECCOMP_RET_ALLOW),

        // æ£€æŸ¥æ˜¯å¦ä¸ºexitç³»ç»Ÿè°ƒç”¨
        BPF_JUMP(BPF_JMP | BPF_JEQ | BPF_K, __NR_exit, 0, 1),
        BPF_STMT(BPF_RET | BPF_K, SECCOMP_RET_ALLOW),

        // æ£€æŸ¥æ˜¯å¦ä¸ºexit_groupç³»ç»Ÿè°ƒç”¨
        BPF_JUMP(BPF_JMP | BPF_JEQ | BPF_K, __NR_exit_group, 0, 1),
        BPF_STMT(BPF_RET | BPF_K, SECCOMP_RET_ALLOW),

        // é»˜è®¤æ‹’ç»
        BPF_STMT(BPF_RET | BPF_K, SECCOMP_RET_KILL),
    };

    prog.len = sizeof(filter) / sizeof(filter[0]);
    prog.filter = filter;

    // å®‰è£…Seccompè¿‡æ»¤å™¨
    return prctl(PR_SET_SECCOMP, SECCOMP_MODE_FILTER, &prog);
}

// ä½¿ç”¨ç¤ºä¾‹
int main(void) {
    // è®¾ç½®Seccompè¿‡æ»¤å™¨
    if (setup_seccomp_filter() < 0) {
        perror("seccomp");
        return 1;
    }

    // åªå…è®¸read/write/exitç³»ç»Ÿè°ƒç”¨
    // å…¶ä»–ç³»ç»Ÿè°ƒç”¨ä¼šè¢«æ‹’ç»
    printf("Seccomp filter installed\n");

    return 0;
}
```

**Seccompåœ¨å†…æ ¸ä¸­çš„å¤„ç†**ï¼š

```c
// å†…æ ¸Seccompå¤„ç†
long seccomp_do_user_notification(struct seccomp_filter *match,
                                   const struct seccomp_data *sd) {
    // 1. æ£€æŸ¥BPFç¨‹åº
    u32 ret = bpf_prog_run(match->prog, sd);

    // 2. æ ¹æ®è¿”å›å€¼å¤„ç†
    switch (ret & SECCOMP_RET_ACTION) {
    case SECCOMP_RET_ALLOW:
        // å…è®¸ç³»ç»Ÿè°ƒç”¨
        return 0;

    case SECCOMP_RET_KILL:
        // ç»ˆæ­¢è¿›ç¨‹
        do_exit(SIGSYS);
        break;

    case SECCOMP_RET_ERRNO:
        // è¿”å›é”™è¯¯ç 
        return -(ret & SECCOMP_RET_DATA);

    case SECCOMP_RET_TRACE:
        // é€šçŸ¥ptrace
        ptrace_notify(PTRACE_EVENT_SECCOMP);
        break;
    }

    return 0;
}
```

### 2.2 æ€§èƒ½å½±å“

**å¼€é”€**ï¼š

- BPFæ‰§è¡Œï¼š~50ns
- ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤ï¼š<1%
- å®‰å…¨æ”¶ç›Šï¼šæ”»å‡»é¢â†“90%

**æ·±åº¦è®ºè¯ï¼šSeccomp-BPFçš„æ€§èƒ½å¼€é”€**

**BPFæ‰§è¡Œçš„å»¶è¿Ÿæ¨¡å‹**ï¼š

BPFç¨‹åºåœ¨**å†…æ ¸æ€**æ‰§è¡Œï¼Œå»¶è¿Ÿæä½ï¼š

$$
\text{BPFå»¶è¿Ÿ} = t_{\text{åŠ è½½}} + t_{\text{æ‰§è¡Œ}} \approx 50\text{ns}
$$

å…¶ä¸­$t_{\text{åŠ è½½}}$æ˜¯BPFç¨‹åºåŠ è½½å»¶è¿Ÿï¼ˆ~10nsï¼‰ï¼Œ$t_{\text{æ‰§è¡Œ}}$æ˜¯BPFç¨‹åºæ‰§è¡Œå»¶è¿Ÿï¼ˆ~40nsï¼‰ã€‚

**é‡åŒ–åˆ†æ**ï¼šSeccomp-BPFçš„æ€§èƒ½å½±å“

| **ç³»ç»Ÿè°ƒç”¨é¢‘ç‡** | **æ— Seccompå»¶è¿Ÿ** | **Seccompå»¶è¿Ÿ** | **æ€§èƒ½å½±å“** |
|---------------|-----------------|---------------|------------|
| **1K/s** | 100ns | 150ns | +50% |
| **10K/s** | 100ns | 150ns | +50% |
| **100K/s** | 100ns | 150ns | +50% |

**å…³é”®æƒè¡¡**ï¼šSeccomp-BPFåœ¨**å‡ ä¹é›¶å¼€é”€**çš„æƒ…å†µä¸‹ï¼Œå°†æ”»å‡»é¢é™ä½**90%**ï¼Œæ˜¯å®‰å…¨ä¸æ€§èƒ½çš„å¹³è¡¡ã€‚

**å®‰å…¨æ”¶ç›Š**ï¼š

Seccomp-BPFé€šè¿‡**ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤**å‡å°‘æ”»å‡»é¢ï¼š

$$
\text{æ”»å‡»é¢å‡å°‘} = \frac{\text{å…è®¸çš„ç³»ç»Ÿè°ƒç”¨æ•°}}{\text{æ€»ç³»ç»Ÿè°ƒç”¨æ•°}} = \frac{10}{300} = 3.3\%
$$

**å…³é”®æ´å¯Ÿ**ï¼šSeccomp-BPFå°†å¯ç”¨ç³»ç»Ÿè°ƒç”¨ä»**300+**å‡å°‘åˆ°**<50**ï¼Œå¤§å¹…é™ä½æ”»å‡»é¢ã€‚

---

## 3 gVisorç”¨æˆ·æ€å†…æ ¸

### 3.1 æ¶æ„

**æ¡ˆä¾‹5.3.2ï¼ˆgVisorç”¨æˆ·æ€å†…æ ¸ï¼‰**ï¼š

gVisoræ˜¯Googleå¼€å‘çš„ç”¨æˆ·æ€å†…æ ¸ï¼Œé€šè¿‡æ‹¦æˆªç³»ç»Ÿè°ƒç”¨æä¾›å¼ºéš”ç¦»ã€‚

**gVisoræ¶æ„**ï¼š

```text
å®¹å™¨è¿›ç¨‹
  â†“ ç³»ç»Ÿè°ƒç”¨
Sentry (ç”¨æˆ·æ€å†…æ ¸)
  â”œâ”€ ç³»ç»Ÿè°ƒç”¨å¤„ç†
  â”œâ”€ æ–‡ä»¶ç³»ç»Ÿ (Gofer)
  â”œâ”€ ç½‘ç»œæ ˆ
  â””â”€ å†…å­˜ç®¡ç†
  â†“ ç³»ç»Ÿè°ƒç”¨
Hostå†…æ ¸
```

**æ ¸å¿ƒç»„ä»¶**ï¼š

**1. Sentryï¼ˆç”¨æˆ·æ€å†…æ ¸ï¼‰**ï¼š

- **ç³»ç»Ÿè°ƒç”¨æ‹¦æˆª**ï¼šæ‹¦æˆªæ‰€æœ‰ç³»ç»Ÿè°ƒç”¨
- **å†…æ ¸åŠŸèƒ½å®ç°**ï¼šåœ¨ç”¨æˆ·æ€å®ç°å†…æ ¸åŠŸèƒ½
- **Goè¯­è¨€å®ç°**ï¼šä½¿ç”¨Goè¯­è¨€ç¼–å†™

**2. Goferï¼ˆæ–‡ä»¶ç³»ç»Ÿä»£ç†ï¼‰**ï¼š

- **æ–‡ä»¶ç³»ç»Ÿè®¿é—®**ï¼šä»£ç†æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- **å®‰å…¨éš”ç¦»**ï¼šéš”ç¦»æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½

**3. Platformï¼ˆå¹³å°æŠ½è±¡ï¼‰**ï¼š

- **KVMå¹³å°**ï¼šä½¿ç”¨KVMåŠ é€Ÿ
- **Ptraceå¹³å°**ï¼šä½¿ç”¨ptraceæ‹¦æˆª
- **å¹³å°åˆ‡æ¢**ï¼šæ”¯æŒä¸åŒå¹³å°

**gVisorå®ç°**ï¼š

```go
// gVisorç³»ç»Ÿè°ƒç”¨å¤„ç†
func (s *Sentry) HandleSyscall(ctx context.Context, sysno uintptr, args arch.SyscallArguments) (uintptr, error) {
    // 1. éªŒè¯ç³»ç»Ÿè°ƒç”¨
    if !s.isSyscallAllowed(sysno) {
        return 0, syscall.EPERM
    }

    // 2. å¤„ç†ç³»ç»Ÿè°ƒç”¨
    switch sysno {
    case syscall.SYS_READ:
        return s.handleRead(ctx, args)
    case syscall.SYS_WRITE:
        return s.handleWrite(ctx, args)
    case syscall.SYS_OPEN:
        return s.handleOpen(ctx, args)
    case syscall.SYS_CLOSE:
        return s.handleClose(ctx, args)
    // ... æ›´å¤šç³»ç»Ÿè°ƒç”¨
    }

    return 0, syscall.ENOSYS
}

// gVisoræ–‡ä»¶ç³»ç»Ÿå¤„ç†
func (s *Sentry) handleRead(ctx context.Context, args arch.SyscallArguments) (uintptr, error) {
    fd := args[0].Int()
    buf := args[1].Pointer()
    count := args[2].SizeT()

    // 1. è·å–æ–‡ä»¶æè¿°ç¬¦
    file := s.fdTable.Get(fd)
    if file == nil {
        return 0, syscall.EBADF
    }

    // 2. é€šè¿‡Goferè¯»å–æ–‡ä»¶
    data, err := s.gofer.Read(ctx, file, count)
    if err != nil {
        return 0, err
    }

    // 3. å¤åˆ¶æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´
    copyToUser(buf, data)

    return uintptr(len(data)), nil
}

// gVisorç½‘ç»œå¤„ç†
func (s *Sentry) handleSocket(ctx context.Context, args arch.SyscallArguments) (uintptr, error) {
    domain := args[0].Int()
    typ := args[1].Int()
    protocol := args[2].Int()

    // 1. åˆ›å»ºsocket
    socket := s.networkStack.CreateSocket(domain, typ, protocol)

    // 2. åˆ†é…æ–‡ä»¶æè¿°ç¬¦
    fd := s.fdTable.NewFD(socket)

    return uintptr(fd), nil
}
```

**KVMå¹³å°å®ç°**ï¼š

```go
// KVMå¹³å°
type KVMPlatform struct {
    machine *kvm.Machine
    vcpu    *kvm.VCPU
}

func (p *KVMPlatform) CreateProcess(ctx context.Context, spec *specs.Spec) (*Process, error) {
    // 1. åˆ›å»ºKVMè™šæ‹Ÿæœº
    machine, err := kvm.CreateMachine()
    if err != nil {
        return nil, err
    }

    // 2. åˆ›å»ºVCPU
    vcpu, err := machine.CreateVCPU()
    if err != nil {
        return nil, err
    }

    // 3. è®¾ç½®å†…å­˜
    err = machine.SetMemory(spec.Memory)
    if err != nil {
        return nil, err
    }

    // 4. å¯åŠ¨VCPU
    go p.runVCPU(vcpu)

    return &Process{machine: machine, vcpu: vcpu}, nil
}

func (p *KVMPlatform) runVCPU(vcpu *kvm.VCPU) {
    for {
        // 1. è¿›å…¥Guestæ¨¡å¼
        exitReason := vcpu.Run()

        // 2. å¤„ç†VM-Exit
        switch exitReason {
        case kvm.ExitIO:
            p.handleIO(vcpu)
        case kvm.ExitMMIO:
            p.handleMMIO(vcpu)
        case kvm.ExitHlt:
            // Guestæš‚åœ
            return
        }
    }
}
```

### 2 æ€§èƒ½

| **æ“ä½œ** | **åŸç”Ÿ** | **gVisor** | **å¼€é”€** |
|---------|---------|-----------|---------|
| **ç³»ç»Ÿè°ƒç”¨** | 100ns | 1Î¼s | 10x |
| **æ–‡ä»¶IO** | 10Î¼s | 50Î¼s | 5x |
| **ç½‘ç»œIO** | 50Î¼s | 200Î¼s | 4x |

**æ·±åº¦è®ºè¯ï¼šgVisorçš„æ€§èƒ½å¼€é”€æ¥æº**

**gVisorçš„å¼€é”€ç»„æˆ**ï¼š

gVisoréœ€è¦**ç”¨æˆ·æ€å†…æ ¸**å¤„ç†ç³»ç»Ÿè°ƒç”¨ï¼š

$$
\text{gVisorå»¶è¿Ÿ} = t_{\text{æ‹¦æˆª}} + t_{\text{ç”¨æˆ·æ€å†…æ ¸}} + t_{\text{è½¬å‘}} \approx 1\mu\text{s}
$$

å…¶ä¸­$t_{\text{æ‹¦æˆª}}$æ˜¯ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªå»¶è¿Ÿï¼ˆ~200nsï¼‰ï¼Œ$t_{\text{ç”¨æˆ·æ€å†…æ ¸}}$æ˜¯ç”¨æˆ·æ€å†…æ ¸å¤„ç†å»¶è¿Ÿï¼ˆ~600nsï¼‰ï¼Œ$t_{\text{è½¬å‘}}$æ˜¯è½¬å‘å»¶è¿Ÿï¼ˆ~200nsï¼‰ã€‚

**é‡åŒ–å¯¹æ¯”**ï¼šgVisor vs åŸç”Ÿ vs è™šæ‹ŸåŒ–

| **æ“ä½œ** | **åŸç”Ÿ** | **gVisor** | **è™šæ‹ŸåŒ–** | **gVisorä¼˜åŠ¿** |
|---------|---------|-----------|-----------|--------------|
| **ç³»ç»Ÿè°ƒç”¨** | 100ns | 1Î¼s | 500ns | è™šæ‹ŸåŒ–2xæ…¢ |
| **æ–‡ä»¶IO** | 10Î¼s | 50Î¼s | 15Î¼s | è™šæ‹ŸåŒ–3xå¿« |
| **ç½‘ç»œIO** | 50Î¼s | 200Î¼s | 100Î¼s | è™šæ‹ŸåŒ–2xå¿« |

**å…³é”®æƒè¡¡**ï¼šgVisoråœ¨**ç³»ç»Ÿè°ƒç”¨**åœºæ™¯ä¸‹å¼€é”€è¾ƒé«˜ï¼Œä½†åœ¨**IOæ“ä½œ**åœºæ™¯ä¸‹æ¯”è™šæ‹ŸåŒ–æ›´ä¼˜ã€‚

**ä¼˜åŠ¿**ï¼š

- å¼ºéš”ç¦»
- å¿«é€Ÿå¯åŠ¨ï¼ˆ<100msï¼‰
- ä½èµ„æºå ç”¨

---

## 4 Firecrackerå¾®VM

### 4.1 ç‰¹ç‚¹

**æ¡ˆä¾‹5.3.3ï¼ˆFirecrackerå¾®VMï¼‰**ï¼š

Firecrackeræ˜¯AWSå¼€å‘çš„å¾®VMï¼Œä¸“ä¸ºServerlesså’Œå®¹å™¨åœºæ™¯ä¼˜åŒ–ã€‚

**è½»é‡VMç‰¹æ€§**ï¼š

**1. æç®€è®¾è®¡**ï¼š

- **æœ€å°è®¾å¤‡é›†**ï¼šåªåŒ…å«å¿…è¦çš„è™šæ‹Ÿè®¾å¤‡
- **ç²¾ç®€å†…æ ¸**ï¼šä½¿ç”¨ç²¾ç®€çš„Linuxå†…æ ¸
- **å¿«é€Ÿå¯åŠ¨**ï¼šå¯åŠ¨æ—¶é—´<125ms

**2. èµ„æºå ç”¨**ï¼š

- **å†…å­˜å ç”¨**ï¼š<5MBï¼ˆVMMï¼‰
- **CPUå¼€é”€**ï¼š<1%ï¼ˆç©ºé—²æ—¶ï¼‰
- **å¯åŠ¨æ—¶é—´**ï¼š<125ms

**Firecrackeræ¶æ„**ï¼š

```text
å®¹å™¨è¿›ç¨‹
  â†“
Firecracker VMM
  â”œâ”€ è®¾å¤‡æ¨¡æ‹Ÿï¼ˆæœ€å°é›†ï¼‰
  â”œâ”€ å†…å­˜ç®¡ç†
  â””â”€ CPUè°ƒåº¦
  â†“
KVM
  â†“
Hostå†…æ ¸
```

**Firecrackerå®ç°**ï¼š

```rust
// Firecracker VMM
pub struct Vmm {
    vm: Vm,
    api_server: ApiServer,
    device_manager: DeviceManager,
}

impl Vmm {
    // åˆ›å»ºå¾®VM
    pub fn new(config: VmConfig) -> Result<Self> {
        // 1. åˆ›å»ºKVMè™šæ‹Ÿæœº
        let vm = Vm::new(config)?;

        // 2. åˆ›å»ºAPIæœåŠ¡å™¨
        let api_server = ApiServer::new();

        // 3. åˆ›å»ºè®¾å¤‡ç®¡ç†å™¨
        let device_manager = DeviceManager::new();

        Ok(Vmm {
            vm,
            api_server,
            device_manager,
        })
    }

    // å¯åŠ¨å¾®VM
    pub fn start(&mut self) -> Result<()> {
        // 1. åˆå§‹åŒ–è®¾å¤‡
        self.device_manager.init(&mut self.vm)?;

        // 2. åŠ è½½å†…æ ¸
        self.vm.load_kernel()?;

        // 3. å¯åŠ¨VCPU
        self.vm.start_vcpu()?;

        Ok(())
    }
}

// Firecrackerè®¾å¤‡ç®¡ç†
pub struct DeviceManager {
    devices: Vec<Box<dyn Device>>,
}

impl DeviceManager {
    pub fn init(&mut self, vm: &mut Vm) -> Result<()> {
        // 1. åˆ›å»ºä¸²å£è®¾å¤‡
        let serial = Serial::new();
        self.devices.push(Box::new(serial));

        // 2. åˆ›å»ºvirtio-netè®¾å¤‡
        let net = VirtioNet::new();
        self.devices.push(Box::new(net));

        // 3. åˆ›å»ºvirtio-blkè®¾å¤‡
        let block = VirtioBlock::new();
        self.devices.push(Box::new(block));

        // 4. æ³¨å†Œè®¾å¤‡åˆ°VM
        for device in &self.devices {
            vm.register_device(device)?;
        }

        Ok(())
    }
}
```

**Firecracker API**ï¼š

```rust
// Firecracker API
pub struct ApiServer {
    vm_config: VmConfig,
    machine_config: MachineConfig,
}

impl ApiServer {
    // é…ç½®VM
    pub fn configure_vm(&mut self, config: VmConfig) -> Result<()> {
        self.vm_config = config;
        Ok(())
    }

    // é…ç½®æœºå™¨
    pub fn configure_machine(&mut self, config: MachineConfig) -> Result<()> {
        self.machine_config = config;
        Ok(())
    }

    // å¯åŠ¨VM
    pub fn start_vm(&mut self) -> Result<()> {
        // 1. åˆ›å»ºVMM
        let mut vmm = Vmm::new(self.vm_config.clone())?;

        // 2. é…ç½®æœºå™¨
        vmm.configure(self.machine_config.clone())?;

        // 3. å¯åŠ¨VM
        vmm.start()?;

        Ok(())
    }
}
```

### 4.2 é€‚ç”¨åœºæ™¯

**1. Serverlessï¼ˆAWS Lambdaï¼‰**ï¼š

**ç‰¹ç‚¹**ï¼š

- **å¿«é€Ÿå†·å¯åŠ¨**ï¼šå¯åŠ¨æ—¶é—´<125ms
- **å¼ºéš”ç¦»**ï¼šæ¯ä¸ªå‡½æ•°è¿è¡Œåœ¨ç‹¬ç«‹VMä¸­
- **èµ„æºéš”ç¦»**ï¼šCPUå’Œå†…å­˜å®Œå…¨éš”ç¦»

**ä¼˜åŠ¿**ï¼š

- å¤šç§Ÿæˆ·å®‰å…¨éš”ç¦»
- å¿«é€Ÿå¯åŠ¨æ»¡è¶³Serverlesséœ€æ±‚
- ä½èµ„æºå ç”¨æé«˜å¯†åº¦

**2. è¾¹ç¼˜è®¡ç®—**ï¼š

**ç‰¹ç‚¹**ï¼š

- **èµ„æºå—é™**ï¼šå†…å­˜å’ŒCPUå—é™
- **å¤šç§Ÿæˆ·éš”ç¦»**ï¼šå¤šä¸ªå·¥ä½œè´Ÿè½½éš”ç¦»
- **å¿«é€Ÿå¯åŠ¨**ï¼šå¿«é€Ÿå“åº”è¯·æ±‚

**ä¼˜åŠ¿**ï¼š

- ä½èµ„æºå ç”¨é€‚åˆè¾¹ç¼˜ç¯å¢ƒ
- å¼ºéš”ç¦»ä¿è¯å®‰å…¨æ€§
- å¿«é€Ÿå¯åŠ¨æé«˜å“åº”é€Ÿåº¦

---

## 5 å®è·µæ¡ˆä¾‹

### 5.1 AWS Lambdaä½¿ç”¨Firecracker

**æ¡ˆä¾‹5.3.4ï¼ˆAWS Lambda Firecrackerï¼‰**ï¼š

AWS Lambdaä½¿ç”¨Firecrackerå®ç°Serverlesså‡½æ•°çš„å¼ºéš”ç¦»ã€‚

**æ¶æ„**ï¼š

- **æ¯ä¸ªå‡½æ•°ä¸€ä¸ªVM**ï¼šæ¯ä¸ªLambdaå‡½æ•°è¿è¡Œåœ¨ç‹¬ç«‹Firecracker VMä¸­
- **å¿«é€Ÿå†·å¯åŠ¨**ï¼šå¯åŠ¨æ—¶é—´<125ms
- **èµ„æºéš”ç¦»**ï¼šCPUå’Œå†…å­˜å®Œå…¨éš”ç¦»

**æ€§èƒ½ç‰¹å¾**ï¼š

| **æŒ‡æ ‡** | **å€¼** |
|---------|--------|
| **å†·å¯åŠ¨æ—¶é—´** | <125ms |
| **å†…å­˜å ç”¨** | <5MBï¼ˆVMMï¼‰ |
| **CPUå¼€é”€** | <1% |
| **éš”ç¦»å¼ºåº¦** | VMçº§éš”ç¦» |

### 5.2 Google Cloud Runä½¿ç”¨gVisor

**æ¡ˆä¾‹5.3.5ï¼ˆGoogle Cloud Run gVisorï¼‰**ï¼š

Google Cloud Runä½¿ç”¨gVisoræä¾›å®¹å™¨å®‰å…¨éš”ç¦»ã€‚

**æ¶æ„**ï¼š

- **gVisoréš”ç¦»**ï¼šæ¯ä¸ªå®¹å™¨è¿è¡Œåœ¨gVisoræ²™ç›’ä¸­
- **ç³»ç»Ÿè°ƒç”¨æ‹¦æˆª**ï¼šæ‹¦æˆªæ‰€æœ‰ç³»ç»Ÿè°ƒç”¨
- **ç”¨æˆ·æ€å†…æ ¸**ï¼šåœ¨ç”¨æˆ·æ€å®ç°å†…æ ¸åŠŸèƒ½

**æ€§èƒ½ç‰¹å¾**ï¼š

| **æŒ‡æ ‡** | **å€¼** |
|---------|--------|
| **å¯åŠ¨æ—¶é—´** | <100ms |
| **ç³»ç»Ÿè°ƒç”¨å¼€é”€** | 10x |
| **å†…å­˜å ç”¨** | 50-100MB |
| **éš”ç¦»å¼ºåº¦** | ç”¨æˆ·æ€å†…æ ¸éš”ç¦» |

## 6 å®‰å…¨åŸŸæ¨¡å‹

### 6.1 Noninterference

**æ¡ˆä¾‹5.3.6ï¼ˆå®‰å…¨åŸŸæ¨¡å‹ï¼‰**ï¼š

Noninterferenceç†è®ºä¿è¯é«˜å®‰å…¨çº§ä¿¡æ¯ä¸å½±å“ä½å®‰å…¨çº§ã€‚

**å®šä¹‰**ï¼š

**Noninterference**ï¼šé«˜å®‰å…¨çº§åŸŸçš„ä¿¡æ¯æµä¸èƒ½å½±å“ä½å®‰å…¨çº§åŸŸã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

$$
\forall d_1, d_2 \in D. \sigma(d_1) \cap \sigma(d_2) = \emptyset \Rightarrow \text{Noninterference}
$$

å…¶ä¸­ï¼š

- $D$ï¼šåŸŸé›†åˆ
- $\sigma(d)$ï¼šåŸŸ$d$çš„å®‰å…¨çº§
- $\sigma(d_1) \cap \sigma(d_2) = \emptyset$ï¼šä¸¤ä¸ªåŸŸå®‰å…¨çº§ä¸ç›¸äº¤

**Noninterferenceå®ç°**ï¼š

```python
# Noninterferenceæ£€æŸ¥
class SecurityDomain:
    def __init__(self, level):
        self.level = level
        self.resources = set()

    def can_access(self, resource):
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥è®¿é—®èµ„æº"""
        return resource.level <= self.level

    def can_write(self, resource):
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥å†™å…¥èµ„æº"""
        return resource.level >= self.level

# ä¿¡æ¯æµæ§åˆ¶
def check_noninterference(domain1, domain2):
    """æ£€æŸ¥ä¸¤ä¸ªåŸŸæ˜¯å¦æ»¡è¶³Noninterference"""
    # å¦‚æœä¸¤ä¸ªåŸŸå®‰å…¨çº§ä¸ç›¸äº¤ï¼Œåˆ™æ»¡è¶³Noninterference
    if domain1.level != domain2.level:
        return True
    return False
```

### 6.2 å®ç°

**1. Seccompï¼ˆç³»ç»Ÿè°ƒç”¨è¿‡æ»¤ï¼‰**ï¼š

**å®ç°**ï¼š

- **BPFç¨‹åº**ï¼šåœ¨å†…æ ¸æ€æ‰§è¡ŒBPFç¨‹åºè¿‡æ»¤ç³»ç»Ÿè°ƒç”¨
- **å‡å°‘æ”»å‡»é¢**ï¼šåªå…è®¸å¿…è¦çš„ç³»ç»Ÿè°ƒç”¨
- **æ€§èƒ½å¼€é”€**ï¼š<1%

**2. Capabilitiesï¼ˆèƒ½åŠ›æ¨¡å‹ï¼‰**ï¼š

**å®ç°**ï¼š

- **æœ€å°æƒé™**ï¼šåªæˆäºˆå¿…è¦çš„æƒé™
- **èƒ½åŠ›åˆ†ç¦»**ï¼šå°†rootæƒé™åˆ†è§£ä¸ºå¤šä¸ªèƒ½åŠ›
- **ç»†ç²’åº¦æ§åˆ¶**ï¼šç²¾ç¡®æ§åˆ¶æƒé™

**Capabilitiesç¤ºä¾‹**ï¼š

```c
// è®¾ç½®Capabilities
cap_t caps = cap_get_proc();
cap_clear(caps);

// åªæˆäºˆCAP_NET_BIND_SERVICEèƒ½åŠ›
cap_set_flag(caps, CAP_EFFECTIVE, 1, &cap_net_bind_service, CAP_SET);
cap_set_proc(caps);
cap_free(caps);
```

**3. MACï¼ˆå¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼‰**ï¼š

**SELinuxå®ç°**ï¼š

- **ç­–ç•¥é©±åŠ¨**ï¼šä½¿ç”¨ç­–ç•¥æ–‡ä»¶å®šä¹‰è®¿é—®è§„åˆ™
- **å¼ºåˆ¶æ£€æŸ¥**ï¼šæ‰€æœ‰è®¿é—®éƒ½ç»è¿‡ç­–ç•¥æ£€æŸ¥
- **ç»†ç²’åº¦æ§åˆ¶**ï¼šç²¾ç¡®æ§åˆ¶èµ„æºè®¿é—®

**AppArmorå®ç°**ï¼š

- **é…ç½®æ–‡ä»¶**ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶å®šä¹‰è®¿é—®è§„åˆ™
- **è·¯å¾„åŒ¹é…**ï¼šåŸºäºè·¯å¾„åŒ¹é…è§„åˆ™
- **ç®€å•æ˜“ç”¨**ï¼šæ¯”SELinuxæ›´ç®€å•

---

## 7 æ‰¹åˆ¤æ€§æ€»ç»“

### 7.1 æ²™ç›’åŒ–çš„å±€é™æ€§

**1. æ€§èƒ½å¼€é”€çš„æŒ‘æˆ˜**ï¼š

**é—®é¢˜**ï¼šæ›´å¼ºçš„å®‰å…¨éš”ç¦»å¸¦æ¥æ›´å¤§çš„æ€§èƒ½å¼€é”€ã€‚

**å½±å“**ï¼š

- gVisorç³»ç»Ÿè°ƒç”¨å¼€é”€10x
- Firecrackerå¯åŠ¨æ—¶é—´å¢åŠ 
- èµ„æºå ç”¨å¢åŠ 

**ç¼“è§£æªæ–½**ï¼š

- **ç¡¬ä»¶åŠ é€Ÿ**ï¼šä½¿ç”¨KVMåŠ é€Ÿ
- **ä¼˜åŒ–å®ç°**ï¼šä¼˜åŒ–å…³é”®è·¯å¾„
- **é€‰æ‹©æ€§ä½¿ç”¨**ï¼šåªåœ¨éœ€è¦æ—¶ä½¿ç”¨

**2. å…¼å®¹æ€§çš„é™åˆ¶**ï¼š

**é—®é¢˜**ï¼šæ²™ç›’åŒ–å¯èƒ½å½±å“åº”ç”¨å…¼å®¹æ€§ã€‚

**å½±å“**ï¼š

- æŸäº›ç³»ç»Ÿè°ƒç”¨è¢«æ‹¦æˆª
- æŸäº›å†…æ ¸ç‰¹æ€§ä¸å¯ç”¨
- æ€§èƒ½ä¸‹é™å½±å“åº”ç”¨

**ç¼“è§£æªæ–½**ï¼š

- **ç™½åå•æœºåˆ¶**ï¼šå…è®¸å¿…è¦çš„ç³»ç»Ÿè°ƒç”¨
- **å…¼å®¹æ€§æµ‹è¯•**ï¼šå……åˆ†æµ‹è¯•å…¼å®¹æ€§
- **æ¸è¿›å¼éƒ¨ç½²**ï¼šé€æ­¥éƒ¨ç½²æ²™ç›’åŒ–

**3. å¤æ‚åº¦çš„å¢åŠ **ï¼š

**é—®é¢˜**ï¼šæ²™ç›’åŒ–å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€‚

**å½±å“**ï¼š

- é…ç½®å¤æ‚
- è°ƒè¯•å›°éš¾
- ç»´æŠ¤æˆæœ¬é«˜

**ç¼“è§£æªæ–½**ï¼š

- **è‡ªåŠ¨åŒ–é…ç½®**ï¼šä½¿ç”¨å·¥å…·è‡ªåŠ¨é…ç½®
- **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§æ²™ç›’çŠ¶æ€
- **æ–‡æ¡£å®Œå–„**ï¼šå®Œå–„æ–‡æ¡£å’Œæœ€ä½³å®è·µ

### 7.2 2025å¹´æ²™ç›’åŒ–è¶‹åŠ¿

**1. é›¶ä¿¡ä»»æ¶æ„**ï¼š

**è¶‹åŠ¿**ï¼šé›¶ä¿¡ä»»æ¶æ„æˆä¸ºä¸»æµã€‚

**æŠ€æœ¯**ï¼š

- **æ·±åº¦é˜²å¾¡**ï¼šå¤šå±‚å®‰å…¨é˜²æŠ¤
- **æŒç»­éªŒè¯**ï¼šæŒç»­éªŒè¯èº«ä»½å’Œæƒé™
- **æœ€å°æƒé™**ï¼šæœ€å°æƒé™åŸåˆ™

**ä¼˜åŠ¿**ï¼š

- æ›´å¼ºçš„å®‰å…¨æ€§
- ç»†ç²’åº¦æ§åˆ¶
- é€‚åº”åŠ¨æ€ç¯å¢ƒ

**æŒ‘æˆ˜**ï¼š

- å¤æ‚åº¦é«˜
- æ€§èƒ½å¼€é”€
- ç®¡ç†å›°éš¾

**2. ç¡¬ä»¶è¾…åŠ©å®‰å…¨**ï¼š

**è¶‹åŠ¿**ï¼šä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿå®‰å…¨åŠŸèƒ½ã€‚

**æŠ€æœ¯**ï¼š

- **Intel TDX**ï¼šå¯ä¿¡åŸŸæ‰©å±•
- **AMD SEV**ï¼šå®‰å…¨åŠ å¯†è™šæ‹ŸåŒ–
- **ARM TrustZone**ï¼šå¯ä¿¡æ‰§è¡Œç¯å¢ƒ

**ä¼˜åŠ¿**ï¼š

- ç¡¬ä»¶çº§å®‰å…¨
- æ€§èƒ½å¼€é”€å°
- é€æ˜ä½¿ç”¨

**æŒ‘æˆ˜**ï¼š

- ç¡¬ä»¶ä¾èµ–
- æˆæœ¬å¢åŠ 
- å…¼å®¹æ€§é—®é¢˜

**3. AIé©±åŠ¨çš„å®‰å…¨**ï¼š

**è¶‹åŠ¿**ï¼šä½¿ç”¨AIæ£€æµ‹å’Œé˜²å¾¡æ”»å‡»ã€‚

**æŠ€æœ¯**ï¼š

- **å¼‚å¸¸æ£€æµ‹**ï¼šä½¿ç”¨AIæ£€æµ‹å¼‚å¸¸è¡Œä¸º
- **å¨èƒæƒ…æŠ¥**ï¼šä½¿ç”¨AIåˆ†æå¨èƒ
- **è‡ªåŠ¨å“åº”**ï¼šè‡ªåŠ¨å“åº”å®‰å…¨äº‹ä»¶

**ä¼˜åŠ¿**ï¼š

- å®æ—¶æ£€æµ‹
- è‡ªé€‚åº”é˜²å¾¡
- å‡å°‘è¯¯æŠ¥

**æŒ‘æˆ˜**ï¼š

- è®­ç»ƒæ•°æ®
- å¯è§£é‡Šæ€§
- å¯¹æŠ—æ”»å‡»

## 8 è·¨é¢†åŸŸæ´å¯Ÿ

### 5.1 å®‰å…¨vsæ€§èƒ½çš„æ°¸æ’æƒè¡¡

**æ ¸å¿ƒçŸ›ç›¾**ï¼šæ›´å¼ºå®‰å…¨ä¿è¯éœ€è¦æ›´å¤šæ£€æŸ¥ï¼Œä½†æ€§èƒ½å¼€é”€å¤§ã€‚

**é‡åŒ–åˆ†æ**ï¼š

| **å®‰å…¨æŠ€æœ¯** | **å®‰å…¨å¼ºåº¦** | **æ€§èƒ½å¼€é”€** | **å¯åŠ¨æ—¶é—´** | **é€‚ç”¨åœºæ™¯** |
|------------|------------|------------|------------|------------|
| **Seccomp** | â­â­ | <1% | 0ms | é€šç”¨åº”ç”¨ |
| **gVisor** | â­â­â­â­ | 10-20% | <100ms | å®‰å…¨æ•æ„Ÿ |
| **Firecracker** | â­â­â­â­â­ | 5-10% | <125ms | Serverless |
| **å®Œæ•´VM** | â­â­â­â­â­ | 10-30% | 30-60s | å¼ºéš”ç¦» |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **å®‰å…¨å¼ºåº¦çš„ä»£ä»·**ï¼šæ›´å¼ºå®‰å…¨**æ€§èƒ½å¼€é”€æ›´å¤§**ï¼Œå¯åŠ¨æ—¶é—´æ›´é•¿ã€‚

2. **æ€§èƒ½vså®‰å…¨**ï¼šSeccompæ€§èƒ½å¥½ï¼Œä½†**å®‰å…¨å¼ºåº¦ä½**ï¼›å®Œæ•´VMå®‰å…¨å¼ºï¼Œä½†**æ€§èƒ½å·®**ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**è½»é‡çº§æ²™ç›’**ï¼ˆå¦‚Firecrackerï¼‰å¹³è¡¡å®‰å…¨å’Œæ€§èƒ½ï¼ŒæŒ‘æˆ˜ä¼ ç»Ÿå®¹å™¨ã€‚

### 5.2 æ”»å‡»é¢çš„æŠ½è±¡æ³„æ¼

**æ ¸å¿ƒå‘½é¢˜**ï¼šæ²™ç›’æŠ½è±¡éšè—ç³»ç»Ÿå¤æ‚æ€§ï¼Œä½†æ”»å‡»é¢æ³„æ¼ä¸å¯é¿å…ã€‚

**æ³„æ¼è¡¨ç°**ï¼š

| **æŠ½è±¡å±‚** | **æ³„æ¼ç°è±¡** | **æ”»å‡»é¢** | **åº”å¯¹æªæ–½** |
|------------|--------------|-----------|------------|
| **ç³»ç»Ÿè°ƒç”¨** | ç³»ç»Ÿè°ƒç”¨æš´éœ² | 300+ç³»ç»Ÿè°ƒç”¨ | Seccompè¿‡æ»¤ |
| **å†…æ ¸æ¥å£** | å†…æ ¸æ¼æ´ | å†…æ ¸æ”»å‡»é¢ | gVisoréš”ç¦» |
| **ç¡¬ä»¶æ¥å£** | ç¡¬ä»¶æ¼æ´ | ä¾§ä¿¡é“æ”»å‡» | å®Œæ•´VM |
| **ç½‘ç»œæ¥å£** | ç½‘ç»œæ”»å‡» | ç½‘ç»œæ”»å‡»é¢ | ç½‘ç»œéš”ç¦» |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **æŠ½è±¡çš„ç†æƒ³ä¸ç°å®çš„å·®è·**ï¼šç†è®ºä¸Šæ²™ç›’å®Œå…¨éš”ç¦»ï¼Œä½†**å®é™…ä¸Šæ”»å‡»é¢æ³„æ¼**ã€‚

2. **æ³„æ¼çš„å¿…ç„¶æ€§**ï¼šæ”»å‡»é¢æ³„æ¼æ˜¯**ä¿¡æ¯è®ºçš„å¿…ç„¶**ï¼Œæ— æ³•å®Œå…¨æ¶ˆé™¤ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**é›¶ä¿¡ä»»æ¶æ„**å’Œ**æ·±åº¦é˜²å¾¡**å‡å°‘æ”»å‡»é¢ï¼Œä½†**å¤æ‚åº¦å¢åŠ **ã€‚

---

## 9 å¤šç»´åº¦å¯¹æ¯”

### 6.1 æ²™ç›’åŒ–æŠ€æœ¯å¯¹æ¯”ï¼ˆ2025å¹´ï¼‰

| **æŠ€æœ¯** | **éš”ç¦»å¼ºåº¦** | **æ€§èƒ½å¼€é”€** | **å¯åŠ¨æ—¶é—´** | **èµ„æºå ç”¨** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|------------|------------|------------|------------|
| **Seccomp** | â­â­ | <1% | 0ms | 0MB | é€šç”¨åº”ç”¨ |
| **gVisor** | â­â­â­â­ | 10-20% | <100ms | 50-100MB | å®‰å…¨æ•æ„Ÿ |
| **Firecracker** | â­â­â­â­â­ | 5-10% | <125ms | 5-10MB | Serverless |
| **Kata** | â­â­â­â­â­ | 5-10% | 10-30s | 100-200MB | å¼ºéš”ç¦» |
| **å®Œæ•´VM** | â­â­â­â­â­ | 10-30% | 30-60s | 500MB+ | å®Œå…¨éš”ç¦» |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **éš”ç¦»vsæ€§èƒ½**ï¼šSeccompæ€§èƒ½æœ€å¥½ï¼Œä½†**éš”ç¦»å¼ºåº¦æœ€ä½**ï¼›å®Œæ•´VMéš”ç¦»æœ€å¼ºï¼Œä½†**æ€§èƒ½è¾ƒå·®**ã€‚

2. **å¯åŠ¨æ—¶é—´çš„å·®å¼‚**ï¼šFirecrackerå¯åŠ¨æœ€å¿«ï¼Œä½†**éš”ç¦»å¼ºåº¦é«˜**ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**è½»é‡çº§æ²™ç›’**ï¼ˆå¦‚Firecrackerï¼‰æˆä¸ºæ–°æ–¹å‘ï¼ŒæŒ‘æˆ˜ä¼ ç»Ÿå®¹å™¨ã€‚

### 6.2 å®‰å…¨æ¨¡å‹æ¼”è¿›å¯¹æ¯”

| **æ—¶ä»£** | **å®‰å…¨æ¨¡å‹** | **å…³é”®ç‰¹æ€§** | **éš”ç¦»å¼ºåº¦** | **æ€§èƒ½** | **ä»£è¡¨æŠ€æœ¯** |
|---------|------------|------------|------------|---------|------------|
| **1990s** | ç”¨æˆ·æƒé™ | ç”¨æˆ·éš”ç¦» | â­ | â­â­â­â­â­ | Unixæƒé™ |
| **2000s** | Capabilities | èƒ½åŠ›åˆ†ç¦» | â­â­ | â­â­â­â­ | Linux Capabilities |
| **2010s** | Seccomp | ç³»ç»Ÿè°ƒç”¨è¿‡æ»¤ | â­â­ | â­â­â­â­â­ | Seccomp-BPF |
| **2018** | gVisor | ç”¨æˆ·æ€å†…æ ¸ | â­â­â­â­ | â­â­â­ | Google gVisor |
| **2020** | Firecracker | è½»é‡çº§VM | â­â­â­â­â­ | â­â­â­â­ | AWS Firecracker |

**æ‰¹åˆ¤æ€§åˆ†æ**ï¼š

1. **æ¼”è¿›çš„è¶‹åŠ¿**ï¼šä»ç®€å•éš”ç¦»åˆ°**å¼ºéš”ç¦»**ï¼Œä»æ€§èƒ½ä¼˜å…ˆåˆ°**å®‰å…¨ä¼˜å…ˆ**ã€‚

2. **æ€§èƒ½çš„æƒè¡¡**ï¼šæ›´å¼ºéš”ç¦»**æ€§èƒ½å¼€é”€æ›´å¤§**ï¼Œä½†å®‰å…¨æ”¶ç›Šæ˜æ˜¾ã€‚

3. **2025å¹´è¶‹åŠ¿**ï¼š**é›¶ä¿¡ä»»æ¶æ„**å’Œ**æ·±åº¦é˜²å¾¡**æˆä¸ºä¸»æµï¼ŒæŒ‘æˆ˜ä¼ ç»Ÿè¾¹ç•Œå®‰å…¨ã€‚

---

## 10 ç›¸å…³ä¸»é¢˜

- [5.1 è™šæ‹ŸåŒ–æŠ€æœ¯](./05.1_è™šæ‹ŸåŒ–æŠ€æœ¯.md) - è™šæ‹ŸåŒ–åŸºç¡€
- [5.2 å®¹å™¨åŒ–æŠ€æœ¯](./05.2_å®¹å™¨åŒ–æŠ€æœ¯.md) - å®¹å™¨åŒ–å®ç°
- [5.4 éš”ç¦»æŠ€æœ¯å¯¹æ¯”](./05.4_éš”ç¦»æŠ€æœ¯å¯¹æ¯”.md) - éš”ç¦»æŠ€æœ¯å¯¹æ¯”
- [7.3 å®‰å…¨æœºåˆ¶](../07_æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨/07.3_å®‰å…¨æœºåˆ¶.md) - å®‰å…¨æœºåˆ¶åˆ†æ
- [ä¸»æ–‡æ¡£ï¼šå®‰å…¨vsæ€§èƒ½](../schedule_formal_view.md#è§†è§’1æ—¶é—´-ç©ºé—´-èƒ½è€—ä¸‰è§’çº¦æŸ) - å®Œæ•´åˆ†æ

---

**æœ€åæ›´æ–°**: 2025-01-XX
