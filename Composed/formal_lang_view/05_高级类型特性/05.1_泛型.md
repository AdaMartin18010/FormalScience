# 5.1 æ³›å‹ï¼ˆGenericsï¼‰

> **å­ä¸»é¢˜ç¼–å·**: 05.1
> **ä¸»é¢˜**: é«˜çº§ç±»å‹ç‰¹æ€§
> **æœ€åæ›´æ–°**: 2025-01-XX

---

## ğŸ“‹ æ¦‚è¿°

æ³›å‹å…è®¸ç±»å‹å‚æ•°åŒ–ï¼Œåœ¨åŸºç¡€è®¾æ–½ä¸­ï¼Œ**Helm Charts**ã€**Kustomize**å’Œ**Crossplane**éƒ½ä½“ç°äº†æ³›å‹çš„æ¦‚å¿µã€‚

---

## ğŸ“‘ ç›®å½•

- [5.1 æ³›å‹ï¼ˆGenericsï¼‰](#51-æ³›å‹generics)
  - [ğŸ“‹ æ¦‚è¿°](#-æ¦‚è¿°)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ](#-æ ¸å¿ƒæ¦‚å¿µ)
    - [Helm Chartsä½œä¸ºç±»å‹å‚æ•°](#helm-chartsä½œä¸ºç±»å‹å‚æ•°)
    - [Kustomizeä½œä¸ºæ³›å‹ç‰¹åŒ–](#kustomizeä½œä¸ºæ³›å‹ç‰¹åŒ–)
    - [Crossplaneä½œä¸ºæ³›å‹èµ„æº](#crossplaneä½œä¸ºæ³›å‹èµ„æº)
  - [ğŸ“Š æ³›å‹æ˜ å°„è¡¨](#-æ³›å‹æ˜ å°„è¡¨)
  - [ğŸ” æŠ€æœ¯ç»†èŠ‚](#-æŠ€æœ¯ç»†èŠ‚)
    - [Helm Chartså®ç°](#helm-chartså®ç°)
    - [Kustomize overlayæœºåˆ¶](#kustomize-overlayæœºåˆ¶)
    - [Crossplane Composite Resource](#crossplane-composite-resource)
  - [ğŸ’¡ å®é™…åº”ç”¨](#-å®é™…åº”ç”¨)
    - [Helm Chartæ¨¡æ¿åŒ–](#helm-chartæ¨¡æ¿åŒ–)
    - [Kustomizeç¯å¢ƒé…ç½®](#kustomizeç¯å¢ƒé…ç½®)
    - [Crossplaneèµ„æºç»„åˆ](#crossplaneèµ„æºç»„åˆ)
  - [ğŸ”— ç›¸å…³æ¦‚å¿µ](#-ç›¸å…³æ¦‚å¿µ)

---

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### Helm Chartsä½œä¸ºç±»å‹å‚æ•°

- **Helm Charts**ï¼š`{{ .Values.replicaCount }}` â‰ˆ ç±»å‹å‚æ•°`Container<T>`
- **ç±»å‹å‚æ•°** â†” **æ¨¡æ¿å˜é‡**ï¼šå…è®¸ç±»å‹å‚æ•°åŒ–
- **æ³›å‹** â†” **æ¨¡æ¿åŒ–**ï¼šæ”¯æŒç±»å‹å¤ç”¨

### Kustomizeä½œä¸ºæ³›å‹ç‰¹åŒ–

- **Kustomize**ï¼š`overlay`æœºåˆ¶ â‰ˆ æ³›å‹ç‰¹åŒ–ï¼ˆSpecializationï¼‰
- **æ³›å‹ç‰¹åŒ–** â†” **ç¯å¢ƒé…ç½®**ï¼šé’ˆå¯¹ä¸åŒç¯å¢ƒå®šåˆ¶é…ç½®
- **ç‰¹åŒ–** â†” **è¦†ç›–**ï¼šåŸºäºåŸºç¡€é…ç½®è¿›è¡Œå®šåˆ¶

### Crossplaneä½œä¸ºæ³›å‹èµ„æº

- **Crossplane**ï¼š**Composite Resource (XR)** æ˜¯æ³›å‹èµ„æºå®šä¹‰ï¼Œ**Claim (XRC)** æ˜¯å…·ä½“ç±»å‹å®ä¾‹
- **æ³›å‹èµ„æº** â†” **ç»„åˆèµ„æº**ï¼šå®šä¹‰å¯å¤ç”¨çš„èµ„æºæ¨¡æ¿
- **ç±»å‹å®ä¾‹** â†” **èµ„æºå£°æ˜**ï¼šåŸºäºæ¨¡æ¿åˆ›å»ºå…·ä½“èµ„æº

---

## ğŸ“Š æ³›å‹æ˜ å°„è¡¨

| ç¼–ç¨‹æ¦‚å¿µ | åŸºç¡€è®¾æ–½å®ç° | ç±»å‹è®ºå¯¹åº” | ç¤ºä¾‹ |
|---------|-------------|-----------|------|
| ç±»å‹å‚æ•° | Helm Charts | æ¨¡æ¿å˜é‡ | `{{ .Values.replicaCount }}` |
| æ³›å‹ç‰¹åŒ– | Kustomize overlay | ç¯å¢ƒé…ç½® | å¼€å‘/ç”Ÿäº§ç¯å¢ƒ |
| æ³›å‹èµ„æº | Crossplane XR | ç»„åˆèµ„æº | æ•°æ®åº“+å­˜å‚¨ç»„åˆ |

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### Helm Chartså®ç°

```yaml
# Helm Chartï¼šç±»å‹å‚æ•°
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ .Values.name }}
spec:
  replicas: {{ .Values.replicaCount }}  # ç±»å‹å‚æ•°
  template:
    spec:
      containers:
      - name: {{ .Values.name }}
        image: {{ .Values.image }}
# ç±»å‹å‚æ•°ï¼šContainer<T> where T = .Values
```

### Kustomize overlayæœºåˆ¶

```yaml
# Kustomizeï¼šæ³›å‹ç‰¹åŒ–
# base/kustomization.yaml
resources:
- deployment.yaml

# overlay/prod/kustomization.yaml
resources:
- ../../base
patches:
- path: replica-patch.yaml
  target:
    kind: Deployment
# æ³›å‹ç‰¹åŒ–ï¼šé’ˆå¯¹ç”Ÿäº§ç¯å¢ƒå®šåˆ¶é…ç½®
```

### Crossplane Composite Resource

```yaml
# Crossplaneï¼šæ³›å‹èµ„æº
apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xdatabases.example.org
spec:
  group: example.org
  names:
    kind: XDatabase
    plural: xdatabases
  # æ³›å‹èµ„æºï¼šå®šä¹‰å¯å¤ç”¨çš„èµ„æºæ¨¡æ¿
```

---

## ğŸ’¡ å®é™…åº”ç”¨

### Helm Chartæ¨¡æ¿åŒ–

```text
1. å®šä¹‰Helm Chartæ¨¡æ¿
2. ä½¿ç”¨ç±»å‹å‚æ•°
3. é’ˆå¯¹ä¸åŒç¯å¢ƒå®šåˆ¶
4. å®ç°é…ç½®å¤ç”¨
```

### Kustomizeç¯å¢ƒé…ç½®

```text
1. å®šä¹‰åŸºç¡€é…ç½®
2. åˆ›å»ºoverlay
3. é’ˆå¯¹ç¯å¢ƒå®šåˆ¶
4. å®ç°é…ç½®ç‰¹åŒ–
```

### Crossplaneèµ„æºç»„åˆ

```text
1. å®šä¹‰Composite Resource
2. åˆ›å»ºèµ„æºæ¨¡æ¿
3. åŸºäºæ¨¡æ¿åˆ›å»ºClaim
4. å®ç°èµ„æºç»„åˆ
```

---

## ğŸ”— ç›¸å…³æ¦‚å¿µ

- [5.2 ç±»å‹ç±»](./05.2_ç±»å‹ç±».md)
- [5.3 ä¾èµ–ç±»å‹](./05.3_ä¾èµ–ç±»å‹.md)
- [08.1 ç±»å‹é©±åŠ¨è®¾è®¡](../08_å®è·µå¯ç¤º/08.1_ç±»å‹é©±åŠ¨è®¾è®¡.md)

---

**è¿”å›**: [05. é«˜çº§ç±»å‹ç‰¹æ€§](./README.md) | [ä¸»é¢˜ç´¢å¼•](../README.md)
