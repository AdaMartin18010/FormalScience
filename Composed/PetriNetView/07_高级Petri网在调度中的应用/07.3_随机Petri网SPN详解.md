# 07.3 随机Petri网SPN详解

> **子主题**: 07.3
> **所属主题**: 07 高级Petri网在调度中的应用
> **最后更新**: 2025-12-02

---

## 1 SPN、GSPN、DSPN对比

| 类型 | 延迟类型 | 应用场景 |
|------|---------|---------|
| SPN | 指数分布 | 性能评估 |
| GSPN | 立即+指数 | 混合系统 |
| DSPN | 确定+随机 | 实时系统 |

## 2 性能指标计算

**吞吐量**：

$$
\theta_t = \lim_{T \to \infty} \frac{N_t(T)}{T}
$$

其中 $N_t(T)$ 是变迁 $t$ 在时间 $T$ 内的点火次数。

## 3 实际案例：通信网络性能

```python
def create_communication_network_spn():
    """5G网络性能分析SPN模型"""
    gspn = GSPN()

    # 用户请求到达（泊松过程）
    gspn.add_place('p_arrivals', tokens=0)
    gspn.add_timed_transition('t_arrival', rate=10.0)  # 10 req/s
    gspn.add_arc('t_arrival', 'p_arrivals')

    # 基站处理（服务时间指数分布）
    gspn.add_place('p_base_station', tokens=3)  # 3个信道
    gspn.add_timed_transition('t_process', rate=15.0)  # 15 req/s
    gspn.add_arc('p_arrivals', 't_process')
    gspn.add_arc('p_base_station', 't_process')

    gspn.add_place('p_done', tokens=0)
    gspn.add_arc('t_process', 'p_done')
    gspn.add_arc('t_process', 'p_base_station')  # 释放信道

    return gspn

# 性能分析
network_spn = create_communication_network_spn()
ctmc = construct_ctmc_from_gspn(network_spn, network_spn.marking)
steady_state = compute_steady_state(ctmc)

# 计算性能指标
avg_queue_length = sum(M['p_arrivals'] * prob for M, prob in steady_state.items())
print(f"平均队列长度: {avg_queue_length:.2f}")
```

---

**返回**: [07 高级Petri网在调度中的应用](README.md)
